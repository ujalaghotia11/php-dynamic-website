(()=>{var e={4047:function(e,t,r){"use strict";var n=r(1640),i=r(7251);Object.defineProperty(t,"__esModule",{value:!0}),t._internal=t.DEFAULT_INCLUDE_EVENTS=void 0,t.default=function(e){var t,r,n,i,d,l=e.url,v=e.analyticsType,m=e.global,b=e.handler,h=[],y=!1,A=!0;var I=(r=!1,n=function(){if(!r){r=!0;try{for(var e=0,t=0;h.length>0;){e++;var n=h.length;if(h.shift()(),h.length>=n?t++:t=0,t>=10){(0,c.logError)("Detected probable infinite loop, discarding events",h),h.length=0;return}}(0,c.logMessage)("".concat(d," analytics: processed ").concat(e," events"))}finally{r=!1}}},function(){null!=t&&(clearTimeout(t),t=null),0===g?n():t=setTimeout(n,g)});return Object.defineProperties({track:function(e){var t=e.eventType,r=e.args;"bundle"===this.getAdapterType()&&window[m](b,t,r),"endpoint"===this.getAdapterType()&&E.apply(void 0,arguments)},enqueue:S,enableAnalytics:O,disableAnalytics:function(){Object.entries(i||{}).forEach(function(e){var t=(0,o.default)(e,2),r=t[0],n=t[1];u.off(r,n)}),this.enableAnalytics=this._oldEnable?this._oldEnable:O,y=!1},getAdapterType:function(){return v},getGlobal:function(){return m},getHandler:function(){return b},getUrl:function(){return l}},{enabled:{get:function(){return y}}});function E(e){var t=e.eventType,r=e.args,n=e.callback;p.ajax(l,n,JSON.stringify({eventType:t,args:r}))}function S(e){var t=this,r=e.eventType,n=e.args;h.push(function(){t.track({eventType:r,args:n})}),I()}function O(e){var t=this;d=null==e?void 0:e.provider;var r=this;if(A="object"!==(0,a.default)(e)||"object"!==(0,a.default)(e.options)||void 0===e.options.sampling||Math.random()<parseFloat(e.options.sampling)){var n,o,l,p,g,v=(l=void 0===(o=(n=e||{}).includeEvents)?f:o,g=void 0===(p=n.excludeEvents)?[]:p,new Set(Object.values(s.EVENTS).filter(function(e){return l.includes(e)}).filter(function(e){return!g.includes(e)})));u.getEvents().forEach(function(e){if(!!e&&!!v.has(e.eventType)){var t=e.eventType,n=e.args;S.call(r,{eventType:t,args:n})}}),i=Object.fromEntries(Array.from(v).map(function(e){var r=function(r){return t.enqueue({eventType:e,args:r})};return u.on(e,r),[e,r]}))}else(0,c.logMessage)('Analytics adapter for "'.concat(m,'" disabled by sampling'));this._oldEnable=this.enableAnalytics,this.enableAnalytics=function(){return(0,c.logMessage)('Analytics adapter for "'.concat(m,'" already enabled, unnecessary call to `enableAnalytics`.'))},y=!0}},t.setDebounceDelay=function(e){g=e};var o=n(r(4763)),a=n(r(7251)),s=r(2778),d=r(721),c=r(1235),u=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=i(e)&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(56));function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}var p=t._internal={ajax:d.ajax},f=t.DEFAULT_INCLUDE_EVENTS=Object.values(s.EVENTS).filter(function(e){return e!==s.EVENTS.AUCTION_DEBUG}),g=100},9256:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.convertKeywordStringToANMap=function(e){return(0,a.isStr)(e)&&""!==e?f(e.split(/\s*(?:,)\s*/)):{}},t.getANKewyordParamFromMaps=v,t.getANKeywordParam=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return v.apply(void 0,[g(e),m(e)].concat(r))},t.getANMapFromOrtbKeywords=g,t.getANMapFromOrtbSegments=m,t.transformBidderParamKeywords=p;var i=n(r(4763)),o=n(r(4995)),a=r(1235),s=r(8629),d=r(1117),c={526:"1plusX",527:"1plusX",541:"captify_segments",540:"perid",501:"perid"},u=["user.data"].concat(d.CLIENT_SECTIONS.map(function(e){return"".concat(e,".content.data")}));function l(e,t,r){return null==t?r:(0,a.isStr)(t)?t:(0,a.isNumber)(t)?t.toString():void(0,a.logWarn)("Unsuported type for param: "+e+" required type: String")}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"keywords",r=[];return(0,a._each)(e,function(e,n){if((0,a.isArray)(e)){var i=[];(0,a._each)(e,function(e){((e=l(t+"."+n,e))||""===e)&&i.push(e)}),e=i}else{if(e=l(t+"."+n,e),!(0,a.isStr)(e))return;e=[e]}e=e.filter(function(e){return""!==e});var o={key:n};e.length>0&&(o.value=e),r.push(o)}),r}function f(e){var t={};return e.forEach(function(e){if(-1!==e.indexOf("=")){var r=e.split("="),n=r[0],i=r[1];t.hasOwnProperty(n)?t[n].push(i):t[n]=[i]}else!t.hasOwnProperty(e)&&(t[e]=[])}),t}function g(e){return f((0,s.getAllOrtbKeywords)(e))}function v(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return p(a.mergeDeep.apply(void 0,(0,o.default)(t.map(function(e){return Object.fromEntries(Object.entries(e||{}).map(function(e){var t=(0,i.default)(e,2),r=t[0],n=t[1];return[r,(0,a.isNumber)(n)||(0,a.isStr)(n)?[n]:n]}))}))))}function m(e){var t={};return u.forEach(function(r){((0,a.deepAccess)(e,r)||[]).forEach(function(e){var r=c[(0,a.deepAccess)(e,"ext.segtax")];r&&e.segment.forEach(function(e){t[r]?t[r].push(e.id):t[r]=[e.id]})})}),t}},2788:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.appnexusAliases=void 0,t.convertCamelToUnderscore=function(e){return e.replace(/(?:^|\.?)([A-Z])/g,function(e,t){return"_"+t.toLowerCase()}).replace(/^_/,"")},t.fill=function(e,t){for(var r=[],i=0;i<t;i++){var o=(0,n.isPlainObject)(e)?(0,n.deepClone)(e):e;r.push(o)}return r};var n=r(1235);t.appnexusAliases=[{code:"appnexusAst",gvlid:32},{code:"emxdigital",gvlid:183},{code:"emetriq",gvlid:213},{code:"pagescience",gvlid:32},{code:"gourmetads",gvlid:32},{code:"matomy",gvlid:32},{code:"featureforward",gvlid:32},{code:"oftmedia",gvlid:32},{code:"adasta",gvlid:32},{code:"beintoo",gvlid:618},{code:"projectagora",gvlid:1032},{code:"stailamedia",gvlid:32},{code:"uol",gvlid:32},{code:"adzymic",gvlid:723}]},2050:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAutoplayEnabled=void 0;var r=null;t.isAutoplayEnabled=function(){return!1!==r};!function(){var e=navigator.userAgent.match(/iPhone OS (\d+)_(\d+)/);if(!(null!==e&&17>parseInt(e[1]))||!!navigator.userAgent.includes("Safari")){var t=document.createElement("video");t.src="data:video/mp4;base64,AAAAIGZ0eXBpc29tAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAAADxtZGF0AAAAMGWIhAAV//73ye/Apuvb3rW/k89I/Cy3PsIqP39atohOSV14BYa1heKCYgALQC5K4QAAAwZtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAD6AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAACMHRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAEAAAAAAAAD6AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAoAAAAFoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAA+gAAAAAAAEAAAAAAahtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAEAAAABAAFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAFTbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABE3N0YmwAAACvc3RzZAAAAAAAAAABAAAAn2F2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAoABaAEgAAABIAAAAAAAAAAEVTGF2YzYwLjMxLjEwMiBsaWJ4MjY0AAAAAAAAAAAAAAAY//8AAAA1YXZjQwFkAAr/4QAYZ2QACqzZQo35IQAAAwABAAADAAIPEiWWAQAGaOvjyyLA/fj4AAAAABRidHJ0AAAAAAAAAaAAAAGgAAAAGHN0dHMAAAAAAAAAAQAAAAEAAEAAAAAAHHN0c2MAAAAAAAAAAQAAAAEAAAABAAAAAQAAABRzdHN6AAAAAAAAADQAAAABAAAAFHN0Y28AAAAAAAAAAQAAADAAAABidWR0YQAAAFptZXRhAAAAAAAAACFoZGxyAAAAAAAAAABtZGlyYXBwbAAAAAAAAAAAAAAAAC1pbHN0AAAAJal0b28AAAAdZGF0YQAAAAEAAAAATGF2ZjYwLjE2LjEwMA==",t.setAttribute("playsinline","true"),t.muted=!0,t.play().then(function(){r=!0,t.src=""}).catch(function(){r=!1})}}()},3819:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APPNEXUS_CATEGORY_MAPPING=void 0,t.APPNEXUS_CATEGORY_MAPPING={1:"IAB20-3",2:"IAB18-5",3:"IAB10-1",4:"IAB2-3",5:"IAB19-8",6:"IAB22-1",7:"IAB18-1",8:"IAB12-3",9:"IAB5-1",10:"IAB4-5",11:"IAB13-4",12:"IAB8-7",13:"IAB9-7",14:"IAB7-1",15:"IAB20-18",16:"IAB10-7",17:"IAB19-18",18:"IAB13-6",19:"IAB18-4",20:"IAB1-5",21:"IAB1-6",22:"IAB3-4",23:"IAB19-13",24:"IAB22-2",25:"IAB3-9",26:"IAB17-18",27:"IAB19-6",28:"IAB1-7",29:"IAB9-30",30:"IAB20-7",31:"IAB20-17",32:"IAB7-32",33:"IAB16-5",34:"IAB19-34",35:"IAB11-5",36:"IAB12-3",37:"IAB11-4",38:"IAB12-3",39:"IAB9-30",41:"IAB7-44",42:"IAB7-1",43:"IAB7-30",50:"IAB19-30",51:"IAB17-12",52:"IAB19-30",53:"IAB3-1",55:"IAB13-2",56:"IAB19-30",57:"IAB19-30",58:"IAB7-39",59:"IAB22-1",60:"IAB7-39",61:"IAB21-3",62:"IAB5-1",63:"IAB12-3",64:"IAB20-18",65:"IAB11-2",66:"IAB17-18",67:"IAB9-9",68:"IAB9-5",69:"IAB7-44",71:"IAB22-3",73:"IAB19-30",74:"IAB8-5",78:"IAB22-1",85:"IAB12-2",86:"IAB22-3",87:"IAB11-3",112:"IAB7-32",113:"IAB7-32",114:"IAB7-32",115:"IAB7-32",118:"IAB9-5",119:"IAB9-5",120:"IAB9-5",121:"IAB9-5",122:"IAB9-5",123:"IAB9-5",124:"IAB9-5",125:"IAB9-5",126:"IAB9-5",127:"IAB22-1",132:"IAB1-2",133:"IAB19-30",137:"IAB3-9",138:"IAB19-3",140:"IAB2-3",141:"IAB2-1",142:"IAB2-3",143:"IAB17-13",166:"IAB11-4",175:"IAB3-1",176:"IAB13-4",182:"IAB8-9",183:"IAB3-5"}},9044:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chunk=function(e,t){for(var r=[],n=0;n<Math.ceil(e.length/t);n++){var i=n*t,o=i+t;r.push(e.slice(i,o))}return r}},3323:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.MODE_RETURN=t.MODE_MIXED=t.MODE_CALLBACK=void 0,t.cmpClient=function(e){var t,r=e.apiName,n=e.apiVersion,d=e.apiArgs,f=void 0===d?["command","callback","parameter","version"]:d,g=e.callbackArgs,v=void 0===g?["returnValue","success"]:g,m=e.mode,b=void 0===m?u:m,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,y={},A="".concat(r,"Call"),I="".concat(r,"Return");function E(e){var t,r="string"==typeof e.data&&e.data.includes(I)?JSON.parse(e.data):e.data;if(null!=r&&null!==(t=r[I])&&void 0!==t&&t.callId){var n=r[I];y.hasOwnProperty(n.callId)&&y[n.callId].apply(y,(0,a.default)(v.map(function(e){return n[e]})))}}var S=function(){for(var e,t=h,n=!1;null!=t;){try{if("function"==typeof t[r]){e=t,n=!0;break}}catch(e){}try{if(t.frames["".concat(r,"Locator")]){e=t;break}}catch(e){}if(t===h.top)break;t=t.parent}return[e,n]}(),O=(0,o.default)(S,2),_=O[0],T=O[1];if(!!_)return T?t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new s.GreedyPromise(function(t,n){var i=_[r].apply(_,(0,a.default)(w(c(c({},e),{},{callback:e.callback||b===p?C(e.callback,t,n):void 0})).map(function(e){var t=(0,o.default)(e,2);return t[0],t[1]})));(b===l||null==e.callback&&b===u)&&t(i)})}:(h.addEventListener("message",E,!1),t=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new s.GreedyPromise(function(r,n){var a=Math.random().toString(),s=(0,i.default)({},A,c(c({},Object.fromEntries(w(e).filter(function(e){return"callback"!==(0,o.default)(e,1)[0]}))),{},{callId:a}));y[a]=C(null==e?void 0:e.callback,r,n,(t||(null==e?void 0:e.callback)==null)&&function(){delete y[a]}),_.postMessage(s,"*"),b===l&&r()})}),Object.assign(t,{isDirect:T,close:function(){T||h.removeEventListener("message",E)}});function w(e){return e=Object.assign({version:n},e),f.map(function(t){return[t,e[t]]})}function C(e,t,r,n){var i="function"==typeof e;return function(o,a){n&&n(),b!==l&&(null==a||a?t:r)(i?void 0:o),i&&e.apply(this,arguments)}}};var i=n(r(9837)),o=n(r(4763)),a=n(r(4995)),s=r(6607);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var u=t.MODE_MIXED=0,l=t.MODE_RETURN=1,p=t.MODE_CALLBACK=2},2413:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConnectionType=function(){var e=navigator.connection||navigator.webkitConnection;if(!e)return 0;switch(e.type){case"ethernet":return 1;case"wifi":return 2;case"wimax":return 6;default:switch(e.effectiveType){case"slow-2g":case"2g":return 4;case"3g":return 5;case"4g":return 6;case"5g":return 7;default:return"cellular"==e.type?3:0}}}},7949:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RENDERER=void 0,t.RENDERER='(()=>{"use strict";window.render=function({ad:d,adUrl:e,width:i,height:r},{mkFrame:n},o){if(!d&&!e)throw{reason:"noAd",message:"Missing ad markup or URL"};{const s=o.document,t={width:i,height:r};e&&!d?t.src=e:t.srcdoc=d,s.body.appendChild(n(s,t))}}})();'},801:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertCurrency=o,t.currencyCompare=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return[e.cpm,e.currency]},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a();return(0,i.keyCompare)(function(r){return t.apply(null,e(r))})},t.currencyNormalizer=a;var n=r(9895),i=r(6439);function o(e,t,r){var i=!(arguments.length>3)||void 0===arguments[3]||arguments[3];if(t===r)return e;var o=e;try{o=(0,n.getGlobal)().convertCurrency(e,t,r)}catch(e){if(!i)throw e}return o}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o;return function(n,i){return null==e&&(e=i),r(n,i,e,t)}}},5505:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DFP_ENDPOINT=t.DEFAULT_DFP_PARAMS=void 0,t.gdprParams=function(){var e=n.gdprDataHandler.getConsentData(),t={};return e&&("boolean"==typeof e.gdprApplies&&(t.gdpr=Number(e.gdprApplies)),e.consentString&&(t.gdpr_consent=e.consentString),e.addtlConsent&&(t.addtl_consent=e.addtlConsent)),t};var n=r(5087);t.DEFAULT_DFP_PARAMS={env:"vp",gdfp_req:1,output:"vast",unviewed_position_start:1},t.DFP_ENDPOINT={protocol:"https",host:"securepubads.g.doubleclick.net",pathname:"/gampad/ads"}},6198:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.domainOverrideToRootDomain=function(e,t){return function(){for(var r=document.domain.split("."),n="_gd".concat(Date.now(),"_").concat(t),i,o,a=0;a<r.length;a++){var s=r.slice(a).join(".");if(e.setCookie(n,"1",void 0,void 0,s),o=e.getCookie(n),e.setCookie(n,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,s),"1"!==o)return i;i=s}}}},5340:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getOrigin=function(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}},7328:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.getGptSlotForAdUnitCode=u,t.getGptSlotInfoForAdUnitCode=function(e){var t=u(e);return t?{gptSlot:t.getAdUnitPath(),divId:t.getSlotElementId()}:{}},t.getSegments=p,t.getSignals=function(e){return Object.entries((0,o.default)((0,o.default)({},l[0],p(e,["user.data"],4)),l[1],p(e,a.CLIENT_SECTIONS.map(function(e){return"".concat(e,".content.data")}),6))).map(function(e){var t=(0,i.default)(e,2),r=t[0],n=t[1];return n.length?{taxonomy:r,values:n}:null}).filter(function(e){return e})},t.isSlotMatchingAdUnitCode=c,t.subscribeToGamEvent=f,t.subscribeToGamSlotRenderEndedEvent=function(e){f("slotRenderEnded",e)},t.taxonomies=void 0;var i=n(r(4763)),o=n(r(9837)),a=r(1117),s=r(7448),d=r(1235);function c(e){return function(t){return(0,d.compareCodeAndSlot)(t,e)}}function u(e){var t;return(0,d.isGptPubadsDefined)()&&(t=(0,s.find)(window.googletag.pubads().getSlots(),c(e))),t}var l=t.taxonomies=["IAB_AUDIENCE_1_1","IAB_CONTENT_2_2"];function p(e,t,r){return t.flatMap(function(t){return(0,d.deepAccess)(e,t)||[]}).filter(function(e){var t;return(null===(t=e.ext)||void 0===t?void 0:t.segtax)===r}).flatMap(function(e){var t;return null===(t=e.segment)||void 0===t?void 0:t.map(function(e){return e.id})}).filter(function(e){return e}).filter(d.uniques)}function f(e,t){var r=function(){return window.googletag.pubads().addEventListener(e,t)};if((0,d.isGptPubadsDefined)()){r();return}window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(r)}},8629:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.getAllOrtbKeywords=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return d.apply(void 0,(0,i.default)(s.map(function(t){return(0,a.deepAccess)(e,t)})).concat(r))},t.mergeKeywords=d;var i=n(r(4995)),o=r(1117),a=r(1235),s=["user.keywords"].concat(o.CLIENT_SECTIONS.flatMap(function(e){return["keywords","content.keywords"].map(function(t){return"".concat(e,".").concat(t)})}));function d(){for(var e=new Set,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return r.filter(function(e){return e}).flatMap(function(e){return Array.isArray(e)?e:e.split(",")}).map(function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}).filter(function(e){return e}).forEach(function(t){return e.add(t)}),Array.from(e.keys())}},2095:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.liveIntentIdSubmodule=void 0,t.reset=function(){window&&window.liQ_instances&&(window.liQ_instances.forEach(function(e){return e.eventBus.off(l,m)}),window.liQ_instances=[]),y.setModuleMode(null),g=!1,v=null},t.setEventFiredFlag=m,t.storage=void 0;var n=r(1235),i=r(721),o=r(9293),a=r(2885),s=r(6397),d=r(4288),c=r(5723),u=r(259),l="pre_lips",p=t.storage=(0,d.getStorageManager)({moduleType:c.MODULE_TYPE_UID,moduleName:u.MODULE_NAME}),f={ajaxGet:function(e,t,r,n){(0,i.ajaxBuilder)(n)(e,{success:t,error:r},void 0,{method:"GET",withCredentials:!0})},pixelGet:function(e,t){return(0,n.triggerPixel)(e,t)}},g=!1,v=null;function m(){g=!0}function b(e){if(v)return v;var t,r,n=(e=e||{}).fpid||{},i={publisherId:e.publisherId||"any",requestedAttributes:(0,u.parseRequestedAttributes)(e.requestedAttributesOverrides)};e.url&&(i.url=e.url),i.ajaxTimeout=e.ajaxTimeout||u.DEFAULT_AJAX_TIMEOUT;var a=(t=e.liCollectConfig,r={},(t=t||{}).appId&&(r.appId=t.appId),t.fpiStorageStrategy&&(r.storageStrategy=t.fpiStorageStrategy),t.fpiExpirationDays&&(r.expirationDays=t.fpiExpirationDays),t.collectorUrl&&(r.collectorUrl=t.collectorUrl),r.ajaxTimeout=t.ajaxTimeout||u.DEFAULT_AJAX_TIMEOUT,r);e.partner&&(i.source=e.partner),a.wrapperName="prebid",a.trackerVersion="9.17.0",a.identityResolutionConfig=i,a.identifiersToResolve=e.identifiersToResolve||[],a.fireEventDelay=e.fireEventDelay,a.idCookie={},a.idCookie.name=n.name,a.idCookie.strategy="html5"==n.strategy?"localStorage":n.strategy;var s=o.uspDataHandler.getConsentData();s&&(a.usPrivacyString=s);var d=o.gdprDataHandler.getConsentData();d&&(a.gdprApplies=d.gdprApplies,a.gdprConsent=d.consentString);var c=o.gppDataHandler.getConsentData();return c&&(a.gppString=c.gppString,a.gppApplicableSections=c.applicableSections),v=y.getInitializer()(a,p,f),e.emailHash&&v.push({hash:e.emailHash}),v}function h(){!g&&v&&setTimeout(function(){window.liQ_instances.forEach(function(e){return e.eventBus.once(l,m)}),!g&&v&&v.fire()},v.config.fireEventDelay||u.DEFAULT_DELAY)}var y=t.liveIntentIdSubmodule={moduleMode:"standard",name:u.MODULE_NAME,gvlid:u.GVLID,setModuleMode:function(e){this.moduleMode=e},getInitializer:function(){var e=this;return function(t,r,n){return(0,s.LiveConnect)(t,r,n,e.moduleMode)}},decode:function(e,t){var r=t&&t.params||{};return!v&&b(r),h(),(0,u.composeIdObject)(e)},getId:function(e){var t=b(e&&e.params||{});return t?(h(),{callback:function(e){t.resolve(function(t){e(t)},function(t){(0,n.logError)("".concat(u.MODULE_NAME,": ID fetch encountered an error: "),t),e()})}}):void 0},primaryIds:u.PRIMARY_IDS,eids:u.eids};(0,a.submodule)("userId",y)},259:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.PRIMARY_IDS=t.MODULE_NAME=t.LI_PROVIDER_DOMAIN=t.GVLID=t.DEFAULT_REQUESTED_ATTRIBUTES=t.DEFAULT_DELAY=t.DEFAULT_AJAX_TIMEOUT=void 0,t.composeIdObject=function(e){var t={},r=e.nonId||e.unifiedId;if(r){var n=p(p({},e),{},{lipbid:r});delete n.unifiedId,t.lipb=n}return e.uid2&&(t.uid2={id:e.uid2,ext:{provider:f}}),e.bidswitch&&(t.bidswitch={id:e.bidswitch,ext:{provider:f}}),e.medianet&&(t.medianet={id:e.medianet,ext:{provider:f}}),e.magnite&&(t.magnite={id:e.magnite,ext:{provider:f}}),e.index&&(t.index={id:e.index,ext:{provider:f}}),e.openx&&(t.openx={id:e.openx,ext:{provider:f}}),e.pubmatic&&(t.pubmatic={id:e.pubmatic,ext:{provider:f}}),e.sovrn&&(t.sovrn={id:e.sovrn,ext:{provider:f}}),e.idCookie&&(!u.coppaDataHandler.getCoppa()&&(t.lipb=p(p({},t.lipb),{},{fpid:e.idCookie}),t.fpid={id:e.idCookie}),delete t.lipb.idCookie),e.triplelift&&(t.triplelift={id:e.triplelift,ext:{provider:f}}),e.thetradedesk&&(t.lipb=p(p({},t.lipb),{},{tdid:e.thetradedesk}),t.tdid={id:e.thetradedesk,ext:{rtiPartner:"TDID",provider:(0,c.getRefererInfo)().domain||f}},delete t.lipb.thetradedesk),t},t.eids=void 0,t.parseRequestedAttributes=function(e){function t(e){return Object.entries(e).flatMap(function(e){var t,r=(0,a.default)(e,2),n=r[0],i=r[1];return"boolean"==typeof i&&i?["fpid"===(t=n)?"idCookie":t]:[]})}return"object"===(0,o.default)(e)?t(p(p({},g),e)):t(g)};var i=n(r(9837)),o=n(r(7251)),a=n(r(4763)),s=r(341),d=r(3550),c=r(2583),u=r(9293);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}t.PRIMARY_IDS=["libp"],t.GVLID=148,t.DEFAULT_AJAX_TIMEOUT=5e3,t.DEFAULT_DELAY=500,t.MODULE_NAME="liveIntentId";var f=t.LI_PROVIDER_DOMAIN="liveintent.com",g=t.DEFAULT_REQUESTED_ATTRIBUTES={nonId:!0};t.eids=p(p(p({},s.UID1_EIDS),d.UID2_EIDS),{},{lipb:{getValue:function(e){return e.lipbid},source:"liveintent.com",atype:3,getEidExt:function(e){if(Array.isArray(e.segments)&&e.segments.length)return{segments:e.segments}}},bidswitch:{source:"bidswitch.net",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},medianet:{source:"media.net",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},magnite:{source:"rubiconproject.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},index:{source:"liveintent.indexexchange.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},openx:{source:"openx.net",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},pubmatic:{source:"pubmatic.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},sovrn:{source:"liveintent.sovrn.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}},fpid:{source:"fpid.liveintent.com",atype:1,getValue:function(e){return e.id}}})},9156:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDM=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{e=t.top.navigator.deviceMemory}catch(t){e=void 0}return e},t.getHC=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{e=t.top.navigator.hardwareConcurrency}catch(t){e=void 0}return e},t.getHLen=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;try{e=t.top.history.length}catch(t){e=void 0}return e}},6428:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.objectGuard=function(e){var t={},r=[];e.forEach(function(e){e.wp&&r.push(e),e.get&&e.paths.forEach(function(r){var n=t;r.split(".").forEach(function(e){n.children=n.children||{},n.children[e]=n.children[e]||{},n=n.children[e]}),n.rule=e})});var n=(0,o.objectTransformer)(r);return function(e){for(var r,a={},s=arguments.length,d=Array(s>1?s-1:0),c=1;c<s;c++)d[c-1]=arguments[c];return{obj:function e(t,r,n){return new Proxy(t,{get:function(t,a,s){var d=Reflect.get(t,a,s);if(r.hasOwnProperty(a)){var c=r[a],u=c.children,l=c.rule;if(u&&null!=d&&"object"===(0,i.default)(d))return e(d,u,n);if(l&&(0,o.isData)(d)&&n(l))return l.get(d)}return d}})}(e,t.children||{},o.sessionedApplies.apply(void 0,[a].concat(d))),verify:(r=n.apply(void 0,[a,e].concat(d)),function(){r.forEach(function(e){return e()})})}}},t.writeProtectRule=function(e){return Object.assign({wp:!0,run:function(e,t,r,n,s){var d=r&&r.hasOwnProperty(n),c=d?r[n]:void 0,u=d&&null!=c&&"object"===(0,i.default)(c)?(0,a.deepClone)(c):c;return function(){var r=null==t?e:(0,a.deepAccess)(e,t),i=r&&(0,o.isData)(r[n]),l=i?r[n]:void 0;!d&&i&&s()?delete r[n]:(d!==i||l!==c||!(0,a.deepEqual)(l,u))&&s()&&(0,a.deepSetValue)(e,(null==t?[]:[t]).concat(n).join("."),u)}}},e)};var i=n(r(7251)),o=r(6755),a=r(1235)},2434:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.guardOrtb2Fragments=void 0,t.ortb2FragmentsGuardFactory=p,t.ortb2Guard=void 0,t.ortb2GuardFactory=u;var i=n(r(4763)),o=r(7565),a=r(7939),s=r(6755),d=r(6428),c=r(1235);function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.isActivityAllowed;return(0,d.objectGuard)((0,s.ortb2TransmitRules)(e).concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.isActivityAllowed;return[{name:a.ACTIVITY_ENRICH_EIDS,paths:s.ORTB_EIDS_PATHS,applies:(0,s.appliesWhenActivityDenied)(a.ACTIVITY_ENRICH_EIDS,e)},{name:a.ACTIVITY_ENRICH_UFPD,paths:s.ORTB_UFPD_PATHS,applies:(0,s.appliesWhenActivityDenied)(a.ACTIVITY_ENRICH_UFPD,e)}].map(d.writeProtectRule)}(e)))}var l=t.ortb2Guard=u();function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l;return function(t,r){t.global=t.global||{},t.bidder=t.bidder||{};var n=new Set(Object.keys(t.bidder)),o=[];function a(t){var n=e(t,r);return o.push(n.verify),n.obj}var s={global:a(t.global),bidder:Object.fromEntries(Object.entries(t.bidder).map(function(e){var t=(0,i.default)(e,2);return[t[0],a(t[1])]}))};return{obj:s,verify:function(){Object.entries(s.bidder).filter(function(e){var t=(0,i.default)(e,1)[0];return!n.has(t)}).forEach(function(n){var o=(0,i.default)(n,2),a=o[0],s=o[1],d={},u=e(d,r);(0,c.mergeDeep)(u.obj,s),u.verify(),t.bidder[a]=d}),o.forEach(function(e){return e()})}}}}t.guardOrtb2Fragments=p()},898:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.EXT_PROMOTIONS=t.DEFAULT_RULES=void 0,t.moveRule=c,t.ortb25Translator=l,t.splitPath=d,t.toOrtb25=void 0;var i=n(r(4995)),o=n(r(4763)),a=r(1235),s=t.EXT_PROMOTIONS=["device.sua","source.schain","regs.gdpr","regs.us_privacy","regs.gpp","regs.gpp_sid","user.consent","user.eids"];function d(e){var t=e.split(".");return[t.slice(0,t.length-1).join("."),t[t.length-1]]}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){return"".concat(e,".ext.").concat(t)},r=d(e),n=(0,o.default)(r,2),i=n[0],s=n[1];return t=t(i,s),function(e){var r=(0,a.deepAccess)(e,i);if((null==r?void 0:r[s])!=null)return(0,a.deepSetValue)(e,t,r[s]),function(){return delete r[s]}}}var u=t.DEFAULT_RULES=Object.freeze([].concat((0,i.default)(s.map(function(e){return c(e)})),(0,i.default)(["app","content","site","user"].map(function(e){return function(t){var r,n=null===(r=t[e])||void 0===r?void 0:r.kwarray;if(null!=n){var o=(t[e].keywords||"").split(",");return Array.isArray(n)&&o.push.apply(o,(0,i.default)(n)),t[e].keywords=o.join(","),function(){return delete t[e].kwarray}}}}))));function l(){var e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u;return function(r){return t.forEach(function(t){try{var n=t(r);"function"==typeof n&&e&&n()}catch(e){(0,a.logError)("Error translating request to ORTB 2.5",e)}}),r}}t.toOrtb25=l()},8342:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.defaultProcessors=void 0,t.ortbConverter=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.context,r=void 0===t?{}:t,o=e.processors,s=void 0===o?d:o,c=e.overrides,u=void 0===c?{}:c,l=e.imp,p=e.request,f=e.bidResponse,g=e.response,v=new WeakMap;function m(e,t,r,i){var o;return function(){return null==o&&(o=function(){var o=r.bind(this,(0,n.compose)(s()[e]||{},u[e]||{}));return t&&(o=t.bind(this,o)),function(){try{return o.apply(this,arguments)}catch(e){i.call.apply(i,[this,e].concat(Array.prototype.slice.call(arguments)))}}}()),o.apply(this,arguments)}}var b=m(a.IMP,l,function(e,t,r){var n={};return e(n,t,r),n},function(e,t,r){(0,i.logError)("Error while converting bidRequest to ORTB imp; request skipped.",{error:e,bidRequest:t,context:r})}),h=m(a.REQUEST,p,function(e,t,r,n){var i={imp:t};return e(i,r,n),i},function(e,t,r,n){throw(0,i.logError)("Error while converting to ORTB request",{error:e,imps:t,bidderRequest:r,context:n}),e}),y=m(a.BID_RESPONSE,f,function(e,t,r){var n={};return e(n,t,r),n},function(e,t,r){(0,i.logError)("Error while converting ORTB seatbid.bid to bidResponse; bid skipped.",{error:e,bid:t,context:r})}),A=m(a.RESPONSE,g,function(e,t,r,n){var i={bids:t};return e(i,r,n),i},function(e,t,r,n){throw(0,i.logError)("Error while converting from ORTB response",{error:e,bidResponses:t,ortbResponse:r,context:n}),e});return{toORTB:function(e){var t=e.bidderRequest,n=e.bidRequests,o=e.context,a=void 0===o?{}:o,s={req:Object.assign({bidRequests:n=n||t.bids},r,a),imp:{}};s.req.impContext=s.imp;var d=h(n.map(function(e){var n=Object.assign({bidderRequest:t,reqContext:s.req},r,a),o=b(e,n);if(null!=o){if(o.hasOwnProperty("id"))return Object.assign(n,{bidRequest:e,imp:o}),s.imp[o.id]=n,o;(0,i.logError)("Converted ORTB imp does not specify an id, ignoring bid request",e,o)}}).filter(Boolean),t,s.req);return s.req.bidderRequest=t,null!=d&&v.set(d,s),d},fromORTB:function(e){var t=e.request,r=e.response,n=v.get(t);if(null==n)throw Error("ortbRequest passed to `fromORTB` must be the same object returned by `toORTB`");function o(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.assign(e,{ortbRequest:t},r)}var a=Object.fromEntries((t.imp||[]).map(function(e){return[e.id,e]}));return A((r.seatbid||[]).flatMap(function(e){return(e.bid||[]).map(function(t){if(a.hasOwnProperty(t.impid)&&n.imp.hasOwnProperty(t.impid))return y(t,o(n.imp[t.impid],{imp:a[t.impid],seatbid:e,ortbResponse:r}));(0,i.logError)("ORTB response seatbid[].bid[].impid does not match any imp in request; ignoring bid",t)})}).filter(Boolean),r,o(n.req))}}};var n=r(2944),i=r(1235),o=r(2081),a=r(7319),s=r(8820),d=t.defaultProcessors=(0,i.memoize)(function(){return(0,s.mergeProcessors)(o.DEFAULT_PROCESSORS,(0,a.getProcessors)(a.DEFAULT))})},2944:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.compose=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!o.has(e)){var r=Object.entries(e);r.sort(function(e,t){return e=e[1].priority||0,e===(t=t[1].priority||0)?0:e>t?-1:1}),o.set(e,r.map(function(e){var t=(0,i.default)(e,2);return[t[0],t[1].fn]}))}var n=o.get(e).filter(function(e){var r=(0,i.default)(e,1)[0];return!t.hasOwnProperty(r)||t[r]}).map(function(e){var r=(0,i.default)(e,2),n=r[0],o=r[1];return t.hasOwnProperty(n)?t[n].bind(this,o):o});return function(){var e=this,t=Array.from(arguments);n.forEach(function(r){r.apply(e,t)})}};var i=n(r(4763)),o=new WeakMap},8820:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeProcessors=function e(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=r.shift(),a=r.length>1?e.apply(void 0,r):r[0];return Object.fromEntries(n.PROCESSOR_TYPES.map(function(e){return[e,Object.assign({},o[e],a[e])]}))};var n=r(7319)},8754:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bannerResponseProcessor=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.createPixel,r=void 0===t?function(e){return(0,n.createTrackPixelHtml)(decodeURIComponent(e),n.encodeMacroURI)}:t;return function(e,t){e.mediaType===i.BANNER&&(t.adm&&t.nurl?(e.ad=t.adm,e.ad+=r(t.nurl)):t.adm?e.ad=t.adm:t.nurl&&(e.adUrl=t.nurl))}},t.fillBannerImp=function(e,t,r){if(!r.mediaType||r.mediaType===i.BANNER){var o=(0,n.deepAccess)(t,"mediaTypes.banner");if(o){var a={topframe:!0===(0,n.inIframe)()?0:1};o.sizes&&(a.format=(0,n.sizesToSizeTuples)(o.sizes).map(n.sizeTupleToRtbSize)),o.hasOwnProperty("pos")&&(a.pos=o.pos),e.banner=(0,n.mergeDeep)(a,e.banner)}}};var n=r(1235),i=r(8705)},2081:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PROCESSORS=void 0;var i=n(r(9837)),o=n(r(4763)),a=r(1235),s=r(8754),d=r(1281),c=r(4524),u=r(2537),l=r(7319),p=r(1117),f=t.DEFAULT_PROCESSORS=(0,i.default)((0,i.default)((0,i.default)({},l.REQUEST,{fpd:{priority:99,fn:function(e,t){(0,a.mergeDeep)(e,t.ortb2)}},onlyOneClient:{priority:-99,fn:(0,p.clientSectionChecker)("ORTB request")},props:{fn:function(e,t){Object.assign(e,{id:e.id||(0,a.generateUUID)(),test:e.test||0});var r=parseInt(t.timeout,10);!isNaN(r)&&(e.tmax=r)}}}),l.IMP,{fpd:{priority:99,fn:function(e,t){(0,a.mergeDeep)(e,t.ortb2Imp)}},id:{fn:function(e,t){e.id=t.bidId}},banner:{fn:s.fillBannerImp},pbadslot:{fn:function(e){var t,r,n=null===(t=e.ext)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.pbadslot;(!n||"string"!=typeof n)&&(null===(r=e.ext)||void 0===r||null===(r=r.data)||void 0===r||delete r.pbadslot)}}}),l.BID_RESPONSE,{mediaType:{priority:99,fn:c.setResponseMediaType},banner:{fn:(0,s.bannerResponseProcessor)()},props:{fn:function(e,t,r){var n,i;Object.entries({requestId:null===(n=r.bidRequest)||void 0===n?void 0:n.bidId,seatBidId:t.id,cpm:t.price,currency:r.ortbResponse.cur||r.currency,width:t.w,height:t.h,dealId:t.dealid,creative_id:t.crid,creativeId:t.crid,burl:t.burl,ttl:t.exp||r.ttl,netRevenue:r.netRevenue}).filter(function(e){var t=(0,o.default)(e,2);return void 0!==(t[0],t[1])}).forEach(function(t){var r=(0,o.default)(t,2),n=r[0],i=r[1];return e[n]=i}),!e.meta&&(e.meta={}),t.adomain&&(e.meta.advertiserDomains=t.adomain),null!==(i=t.ext)&&void 0!==i&&i.dsa&&(e.meta.dsa=t.ext.dsa),t.cat&&(e.meta.primaryCatId=t.cat[0],e.meta.secondaryCatIds=t.cat.slice(1)),t.attr&&(e.meta.attr=t.attr)}}});f[l.IMP].native={fn:u.fillNativeImp},f[l.BID_RESPONSE].native={fn:u.fillNativeResponse};f[l.IMP].video={fn:d.fillVideoImp},f[l.BID_RESPONSE].video={fn:d.fillVideoResponse}},4524:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ORTB_MTYPES=void 0,t.setResponseMediaType=function(e,t,r){if(!e.mediaType){var n=r.mediaType;if(!n&&!i.hasOwnProperty(t.mtype))throw Error("Cannot determine mediaType for response");e.mediaType=n||i[t.mtype]}};var n=r(8705),i=t.ORTB_MTYPES={1:n.BANNER,2:n.VIDEO,4:n.NATIVE}},2537:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fillNativeImp=function(e,t,r){if(!r.mediaType||r.mediaType===i.NATIVE){var o,a=t.nativeOrtbRequest;a&&(null!==(o=(a=Object.assign({},r.nativeRequest,a)).assets)&&void 0!==o&&o.length?e.native=(0,n.mergeDeep)({},{request:JSON.stringify(a),ver:a.ver},e.native):(0,n.logWarn)("mediaTypes.native is set, but no assets were specified. Native request skipped.",t))}},t.fillNativeResponse=function(e,t){if(e.mediaType===i.NATIVE){var r;if(r="string"==typeof t.adm?JSON.parse(t.adm):t.adm,(0,n.isPlainObject)(r)&&Array.isArray(r.assets))e.native={ortb:r};else throw Error("ORTB native response contained no assets")}};var n=r(1235),i=r(8705)},1281:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.fillVideoImp=function(e,t,r){if(!r.mediaType||r.mediaType===a.VIDEO){var n=(0,o.deepAccess)(t,"mediaTypes.video");if(!(0,o.isEmpty)(n)){var d=Object.fromEntries(Object.entries(n).filter(function(e){var t=(0,i.default)(e,1)[0];return s.ORTB_VIDEO_PARAMS.has(t)}));if(n.playerSize){var c=(0,o.sizesToSizeTuples)(n.playerSize).map(o.sizeTupleToRtbSize);c.length>1&&(0,o.logWarn)("video request specifies more than one playerSize; all but the first will be ignored"),Object.assign(d,c[0])}e.video=(0,o.mergeDeep)(d,e.video)}}},t.fillVideoResponse=function(e,t,r){if(e.mediaType===a.VIDEO){if((0,o.deepAccess)(r.imp,"video.w")&&(0,o.deepAccess)(r.imp,"video.h")){var n=[r.imp.video.w,r.imp.video.h];e.playerWidth=n[0],e.playerHeight=n[1]}t.adm&&(e.vastXml=t.adm),t.nurl&&(e.vastUrl=t.nurl)}};var i=n(r(4763)),o=r(1235),a=r(8705),s=r(5045)},7701:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pbsExtensions=void 0;var n=r(8820),i=r(1727),o=r(7319),a=r(8342),s=r(1235);t.pbsExtensions=(0,s.memoize)(function(){return(0,n.mergeProcessors)((0,a.defaultProcessors)(),i.PBS_PROCESSORS,(0,o.getProcessors)(o.PBS))})},4299:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setImpAdUnitCode=function(e,t){var r=t.adUnitCode;r&&(0,n.deepSetValue)(e,"ext.prebid.adunitcode",r)};var n=r(1235)},2405:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.setRequestExtPrebidAliases=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=n.am,d=void 0===s?i.default:s;if(d.aliasRegistry[t.bidderCode]){var c=d.bidderRegistry[t.bidderCode];if(!c||!c.getSpec().skipPbsAliasing){(0,a.deepSetValue)(e,"ext.prebid.aliases.".concat(t.bidderCode),d.aliasRegistry[t.bidderCode]);var u,l=o.config.getConfig("gvlMapping.".concat(t.bidderCode))||(null==c||null===(u=c.getSpec)||void 0===u?void 0:u.call(c).gvlid);l&&(0,a.deepSetValue)(e,"ext.prebid.aliasgvlids.".concat(t.bidderCode),l)}}};var i=n(r(9293)),o=r(3408),a=r(1235)},8742:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.SUPPORTED_MEDIA_TYPES=void 0,t.extPrebidMediaType=function(e,t,r){var n,i=r.mediaType;!i&&(i=a.ORTB_MTYPES.hasOwnProperty(t.mtype)?a.ORTB_MTYPES[t.mtype]:null===(n=t.ext)||void 0===n||null===(n=n.prebid)||void 0===n?void 0:n.type,!s.hasOwnProperty(i)&&(i=o.BANNER)),e.mediaType=i};var i=n(r(9837)),o=r(8705),a=r(4524),s=t.SUPPORTED_MEDIA_TYPES=(0,i.default)((0,i.default)((0,i.default)({},o.BANNER,"banner"),o.NATIVE,"native"),o.VIDEO,"video")},5438:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setImpBidParams=function(e,t){var r=t.params;r&&(0,n.deepSetValue)(e,"ext.prebid.bidder.".concat(t.bidder),r)};var n=r(1235)},1727:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.PBS_PROCESSORS=void 0;var i=n(r(9837)),o=n(r(4763)),a=r(7319),s=r(1235),d=r(8742),c=r(2405),u=r(5438),l=r(4299),p=r(6050),f=r(2080);t.PBS_PROCESSORS=(0,i.default)((0,i.default)((0,i.default)((0,i.default)({},a.REQUEST,{extPrebid:{fn:p.setRequestExtPrebid},extPrebidChannel:{fn:p.setRequestExtPrebidChannel},extPrebidAliases:{fn:c.setRequestExtPrebidAliases}}),a.IMP,{params:{fn:u.setImpBidParams},adUnitCode:{fn:l.setImpAdUnitCode}}),a.BID_RESPONSE,{mediaType:{fn:d.extPrebidMediaType,priority:99},videoCache:{fn:f.setBidResponseVideoCache,priority:-10},bidderCode:{fn:function(e,t,r){var n;e.bidderCode=r.seatbid.seat,e.adapterCode=(0,s.deepAccess)(t,"ext.prebid.meta.adaptercode")||(null===(n=r.bidRequest)||void 0===n?void 0:n.bidder)||e.bidderCode}},pbsBidId:{fn:function(e,t){var r=(0,s.deepAccess)(t,"ext.prebid.bidid");(0,s.isStr)(r)&&(e.pbsBidId=r)}},adserverTargeting:{fn:function(e,t){var r=(0,s.deepAccess)(t,"ext.prebid.targeting");(0,s.isPlainObject)(r)&&(e.adserverTargeting=r)}},extPrebidMeta:{fn:function(e,t){e.meta=(0,s.mergeDeep)({},(0,s.deepAccess)(t,"ext.prebid.meta"),e.meta)}},pbsWurl:{fn:function(e,t){var r=(0,s.deepAccess)(t,"ext.prebid.events.win");(0,s.isStr)(r)&&(e.pbsWurl=r)}}}),a.RESPONSE,{serverSideStats:{fn:function(e,t,r){Object.entries({errors:"serverErrors",responsetimemillis:"serverResponseTimeMs"}).forEach(function(e){var n=(0,o.default)(e,2),i=n[0],a=n[1],d=(0,s.deepAccess)(t,"ext.".concat(i,".").concat(r.bidderRequest.bidderCode));d&&(r.bidderRequest[a]=d,r.bidRequests.forEach(function(e){return e[a]=d}))})}}})},6050:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setRequestExtPrebid=function(e,t){var r;(0,n.deepSetValue)(e,"ext.prebid",(0,n.mergeDeep)({auctiontimestamp:t.auctionStart,targeting:{includewinners:!0,includebidderkeys:!1}},null===(r=e.ext)||void 0===r?void 0:r.prebid)),i.config.getConfig("debug")&&(e.ext.prebid.debug=!0)},t.setRequestExtPrebidChannel=function(e){var t;(0,n.deepSetValue)(e,"ext.prebid.channel",Object.assign({name:"pbjs",version:(0,o.getGlobal)().version},null===(t=e.ext)||void 0===t||null===(t=t.prebid)||void 0===t?void 0:t.channel))};var n=r(1235),i=r(3408),o=r(9895)},2080:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setBidResponseVideoCache=function(e,t){if(e.mediaType===n.VIDEO){var r=(0,i.deepAccess)(t,"ext.prebid.cache.vastXml")||{},o=r.cacheId,a=r.url;if(!o||!a){var s=(0,i.deepAccess)(t,"ext.prebid.targeting")||{},d=s.hb_uuid,c=s.hb_cache_host,u=s.hb_cache_path;d&&c&&u&&(o=d,a="https://".concat(c).concat(u,"?uuid=").concat(d))}o&&a&&Object.assign(e,{videoCacheKey:o,vastUrl:a})}};var n=r(8705),i=r(1235)},3548:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBidFromResponse=function(e,t){return e?e.bid?!e.bid[0]&&(0,n.logError)(t.noBid):(0,n.logError)(t.hasNoArrayOfBids+JSON.stringify(e)):(0,n.logError)(t.emptySeatbid),e&&e.bid&&e.bid[0]};var n=r(1235)},5977:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.convertTypes=function(e,t){return Object.keys(e).forEach(function(r){if(t[r]){if((0,n.isFn)(e[r]))t[r]=e[r](t[r]);else{var i,o;t[r]=(i=e[r],o=t[r],"string"===i?o&&o.toString():"number"===i?Number(o):o)}isNaN(t[r])&&delete t.key}}),t};var n=r(1235)},341:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.UID1_EIDS=void 0;var i=n(r(9837));function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}t.UID1_EIDS={tdid:{source:"adserver.org",atype:1,getValue:function(e){return e.id?e.id:e},getUidExt:function(e){return a(a({},{rtiPartner:"TDID"}),e.ext)}}}},3550:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UID2_EIDS=void 0,t.UID2_EIDS={uid2:{source:"uidapi.com",atype:3,getValue:function(e){return e.id},getUidExt:function(e){if(e.ext)return e.ext}}}},418:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryAppendQueryString=function(e,t,r){return r?e+t+"="+encodeURIComponent(r)+"&":e}},5699:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUserSyncParams=function(e,t,r){var n,i={};return e&&("boolean"==typeof e.gdprApplies&&(i.gdpr=Number(e.gdprApplies)),"string"==typeof e.consentString&&(i.gdpr_consent=e.consentString)),t&&(i.us_privacy=encodeURIComponent(t)),null!=r&&r.gppString&&(i.gpp=r.gppString,i.gpp_sid=null===(n=r.applicableSections)||void 0===n?void 0:n.toString()),i}},1054:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.auctionStore=void 0,t.weakStore=i;var n=r(3136);function i(e){var t=new WeakMap;return function(r){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=e(r);if(null!=i)return!t.has(i)&&t.set(i,n),t.get(i)}}t.auctionStore=function(){return i(function(e){return n.auctionManager.index.getAuction({auctionId:e})})}},4842:function(e,t,r){"use strict";var n,i=r(1640),o=i(r(9837)),a=r(9895),s=r(1634),d=r(3408),c=r(1235),u=r(8705),l=r(7328);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var g=/^[a-zA-Z0-9_-]{22}$/,v={SIAB:"siab",INVIEW:"inview",INSTREAM:"instream"},m=["mimes","minduration","maxduration","placement","plcmt","protocols","startdelay","skip","skipafter","minbitrate","maxbitrate","delivery","playbackmethod","api","linearity"],b={uniqueSiteIds:[]};function h(e){return"".concat(e.params.siteId,":").concat(e.params.productId)}function y(e){return"".concat(e.bidId)}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return(0,c.mergeDeep)({},e,{ext:t})}function I(e){return{w:parseInt(e[0],10),h:parseInt(e[1],10)}}function E(e){return(0,c.mergeDeep)({},e,{params:{productId:S(e)}})}function S(e){var t=e.params,r=e.mediaTypes,n=r.banner,i=r.video;return i&&!n&&"instream"===i.context?v.INSTREAM:t.productId===v.INVIEW?t.productId:v.SIAB}function O(e,t,r){var n=e.getFloor({currency:"USD",mediaType:r,size:[t.w,t.h]});if(!isNaN(n.floor)&&"USD"===n.currency)return n.floor}var _={NON_MEASURABLE:"nm",code:"33across",aliases:["33across_mgni"],supportedMediaTypes:[u.BANNER,u.VIDEO],gvlid:58,isBidRequestValid:function(e){return function(e){return!!(e.params&&function(e){return null!==((0,c.deepAccess)(e,"params.siteId","")||"").trim().match(g)&&!0}(e))||!1}(e)&&function(e){var t=(0,c.deepAccess)(e,"mediaTypes.banner");return void 0===t||!!Array.isArray(t.sizes)||!1}(e)&&function(e){var t=(0,c.deepAccess)(e,"mediaTypes.video"),r=(0,c.deepAccess)(e,"params.video",{});if(void 0===t)return!0;if(!Array.isArray(t.playerSize)||!t.context)return!1;var n=f(f({},t),r);return!(!Array.isArray(n.mimes)||0===n.mimes.length||!Array.isArray(n.protocols)||0===n.protocols.length||[n.placement,n.plcmt].some(function(e){return void 0!==e&&"number"!=typeof e}))&&("instream"!==t.context||void 0===n.startdelay||"number"==typeof n.startdelay)&&!0}(e)},buildRequests:function(e,t){var r=function(e,t){var r,n,i=Object.assign({},d.config.getConfig("ttxSettings")),o=Object.assign({consentString:void 0,gdprApplies:!1},t&&t.gdprConsent);return b.uniqueSiteIds=e.map(function(e){return e.params.siteId}).filter(c.uniques),{ttxSettings:i,gdprConsent:o,uspConsent:null==t?void 0:t.uspConsent,gppConsent:null==t?void 0:t.gppConsent,pageUrl:null==t||null===(r=t.refererInfo)||void 0===r?void 0:r.page,referer:null==t||null===(n=t.refererInfo)||void 0===n?void 0:n.ref}}(e,t),n=r.ttxSettings,i=r.gdprConsent,o=r.uspConsent,a=r.gppConsent,s=r.pageUrl,p=r.referer,g=function(e,t){var r=t.map(E),n=e&&e.enableSRAMode;return function(e,t){var r={};return e.forEach(function(e){var n=t(e);r[n]=r[n]||[],r[n].push(e)}),r}(r,!0===n?h:y)}(n,e),_=[];for(var T in g)_.push(function(e){var t,r=e.bidRequests,n=e.gdprConsent,i=void 0===n?{}:n,o=e.uspConsent,a=e.gppConsent,s=void 0===a?{}:a,p=e.pageUrl,g=e.referer,b=e.ttxSettings,h=e.bidderRequest,y={},E=r[0],_=E.params,T=_.siteId,w=_.test,C=d.config.getConfig("coppa");return y.imp=[],r.forEach(function(e){y.imp.push(function(e){var t=(0,c.deepAccess)(e,"ortb2Imp.ext.gpid"),r={id:e.bidId,ext:f({ttx:{prod:(0,c.deepAccess)(e,"params.productId")}},t?{gpid:t}:{})};return(0,c.deepAccess)(e,"mediaTypes.banner")&&(r.banner=f({},function(e){var t,r,n=(0,c.deepAccess)(e,"mediaTypes.banner",{}),i=function(e){return document.getElementById(e)||document.getElementById(function(e){if((0,c.isGptPubadsDefined)()){for(var t=googletag.pubads().getSlots(),r=(0,l.isSlotMatchingAdUnitCode)(e),n=0;n<t.length;n++)if(r(t[n])){var i=t[n].getSlotElementId();return(0,c.logInfo)("[33Across Adapter] Map ad unit path to HTML element id: '".concat(e,"' -> ").concat(i)),i}}return(0,c.logWarn)("[33Across Adapter] Unable to locate element for ad unit code: '".concat(e,"'")),null}(e))}(e.adUnitCode);var o=(t=n.sizes,(0,c.isArray)(t)&&2===t.length&&!(0,c.isArray)(t[0])?[I(t)]:t.map(I));r="function"==typeof e.getFloor?o.map(function(t){var r,n=O(e,t,u.BANNER);return n&&(r={ext:{ttx:{bidfloors:[n]}}}),Object.assign({},t,r)}):o;var a=function(e){return e.reduce(function(e,t){return t.h*t.w<e.h*e.w?t:e})}(o);return{format:r,ext:function(e){return{ttx:{viewability:{amount:isNaN(e)?e:Math.round(e)}}}}(function(e){return!function(){try{return(0,c.getWindowSelf)()!==(0,c.getWindowTop)()}catch(e){return!0}}()&&null!==e}(i)?function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.w,i=r.h;return"visible"===t.document.visibilityState?function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.w,n=t.h,i=e.getBoundingClientRect(),o=i.width,a=i.height,s=i.left,d=i.top,c=i.right,u=i.bottom;return(0===o||0===a)&&r&&n&&(o=r,a=n,c=s+r,u=d+n),{width:o,height:a,left:s,top:d,right:c,bottom:u}}(e,{w:n.w,h:n.h}),o=function(e){for(var t={left:e[0].left,right:e[0].right,top:e[0].top,bottom:e[0].bottom},r=1;r<e.length;++r){if(t.left=Math.max(t.left,e[r].left),t.right=Math.min(t.right,e[r].right),t.left>=t.right)return null;if(t.top=Math.max(t.top,e[r].top),t.bottom=Math.min(t.bottom,e[r].bottom),t.top>=t.bottom)return null}return t.width=t.right-t.left,t.height=t.bottom-t.top,t}([{left:0,top:0,right:t.innerWidth,bottom:t.innerHeight},i]);return null!==o?(r=o.width*o.height,r/(i.width*i.height)*100):0}(e,t,{w:n,h:i}):0}(i,(0,c.getWindowTop)(),a):"nm")}}(e))),(0,c.deepAccess)(e,"mediaTypes.video")&&(r.video=function(e){var t,r=(0,c.deepAccess)(e,"mediaTypes.video",{}),n=(0,c.deepAccess)(e,"params.video",{}),i=f(f({},r),n),o={},a=I(i.playerSize[0]),s=a.w,d=a.h;o.w=s,o.h=d,m.forEach(function(e){i.hasOwnProperty(e)&&(o[e]=i[e])});var l=S(e);if(null!==(t=o.plcmt)&&void 0!==t||(o.plcmt=o.placement?((0,c.logWarn)("[33Across Adapter] The ORTB field `placement` is deprecated, please use `plcmt` instead"),o.placement):2),l===v.INSTREAM&&(o.startdelay=o.startdelay||0),"function"==typeof e.getFloor){var p=O(e,{w:o.w,h:o.h},u.VIDEO);p&&Object.assign(o,{ext:{ttx:{bidfloors:[p]}}})}return o}(e)),r}(e))}),y.site={id:T},y.device=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,c.getWindowSelf)(),r={ext:{ttx:f(f({},function(){var e=(0,c.getWindowSelf)(),t=e.innerWidth,r=e.innerHeight,n=e.screen,i=[Math.max(n.width,n.height),Math.min(n.width,n.height)],o=i[0],a=i[1];return r>t?{w:a,h:o}:{w:o,h:a}}()),{},{pxr:t.devicePixelRatio,vp:function(){var e=function(){var e=(0,c.getWindowSelf)();try{for(;e.parent!==e&&e.parent.document;)e=e.parent}catch(e){}return e}().document.documentElement;return{w:e.clientWidth,h:e.clientHeight}}(),ah:t.screen.availHeight,mtp:t.navigator.maxTouchPoints})}};return e.sua&&(r.sua=(0,c.pick)(e.sua,["browsers","platform","model","mobile"])),r}(null===(t=E.ortb2)||void 0===t?void 0:t.device),p&&(y.site.page=p),g&&(y.site.ref=g),y.id=null==h?void 0:h.bidderRequestId,i.consentString&&(y.user=A(y.user,{consent:i.consentString})),Array.isArray(E.userIdAsEids)&&E.userIdAsEids.length>0&&(y.user=A(y.user,{eids:E.userIdAsEids})),y.regs=A(y.regs,{gdpr:Number(i.gdprApplies)}),o&&(y.regs=A(y.regs,{us_privacy:o})),s.gppString&&Object.assign(y.regs,{gpp:s.gppString,gpp_sid:s.applicableSections}),void 0!==C&&(y.regs.coppa=Number(!!C)),y.ext={ttx:{prebidStartedAt:Date.now(),caller:[{name:"prebidjs",version:"9.17.0"}]}},E.schain&&(y.source=A(y.source,{schain:E.schain})),1===w&&(y.test=1),{method:"POST",url:b&&b.url||"".concat("https://ssc.33across.com/api/v1/hb","?guid=").concat(T),data:JSON.stringify(y),options:{contentType:"text/plain",withCredentials:!0}}}({bidRequests:g[T],gdprConsent:i,uspConsent:o,gppConsent:a,pageUrl:s,referer:p,ttxSettings:n,bidderRequest:t}));return _},interpretResponse:function(e,t){var r=e.body,n=r.seatbid,i=r.cur,o=void 0===i?"USD":i;return(0,c.isArray)(n)?n.filter(function(e){return(0,c.isArray)(e.bid)&&e.bid.length>0}).reduce(function(e,t){return e.concat(t.bid.map(function(e){return function(e,t){var r=e.adomain&&e.adomain.length,n={requestId:e.impid,cpm:e.price,width:e.w,height:e.h,ad:e.adm,ttl:e.ttl||60,creativeId:e.crid,mediaType:(0,c.deepAccess)(e,"ext.ttx.mediaType",u.BANNER),currency:t,netRevenue:!0};return r&&(n.meta={advertiserDomains:e.adomain}),n.mediaType===u.VIDEO&&("xml"===(0,c.deepAccess)(e,"ext.ttx.vastType","xml")?n.vastXml=n.ad:n.vastUrl=n.ad),n}(e,o)}))},[]):[]},getUserSyncs:function(e,t,r,n,i){var o=e.iframeEnabled?b.uniqueSiteIds.map(function(e){return function(e){var t=e.siteId,r=e.gdprConsent,n=void 0===r?{}:r,i=e.uspConsent,o=e.gppConsent,a=void 0===o?{}:o,s=d.config.getConfig("ttxSettings"),c=s&&s.syncUrl||"https://ssc-cms.33across.com/ps/?m=xch&rt=html&ru=deb",u=n.consentString,l=n.gdprApplies,p=a.gppString,f=a.applicableSections,g={type:"iframe",url:"".concat(c,"&id=").concat(void 0===t?"zzz000000000003zzz":t,"&gdpr_consent=").concat(encodeURIComponent(u),"&us_privacy=").concat(encodeURIComponent(i),"&gpp=").concat(encodeURIComponent(void 0===p?"":p),"&gpp_sid=").concat(encodeURIComponent((void 0===f?[]:f).join(",")))};return"boolean"==typeof l&&(g.url+="&gdpr=".concat(Number(l))),g}({gdprConsent:r,uspConsent:n,gppConsent:i,siteId:e})}):[];return b.uniqueSiteIds=[],o}};(0,s.registerBidder)(_),(0,a.registerModule)("33acrossBidAdapter")},27:function(e,t,r){"use strict";var n,i=r(1640),o=i(r(9837)),a=r(9895),s=r(1235),d=r(721),c=r(2885),u=r(9293),l=r(4288),p=r(5723),f=r(6198),g="33acrossId",v="33acrossIdFp",m="33acrossIdTp",b=(0,l.getStorageManager)({moduleType:p.MODULE_TYPE_UID,moduleName:g}),h={domainOverride:(0,f.domainOverrideToRootDomain)(b,g)};function y(e){if(b.cookiesAreEnabled()){var t=new Date(0).toUTCString();b.setCookie(e,"",t,"Lax",h.domainOverride())}b.removeDataFromLocalStorage(e)}function A(e,t){var r;return t.find(function(t){return t===l.STORAGE_TYPE_COOKIES?r=b.getCookie(e):t===l.STORAGE_TYPE_LOCALSTORAGE&&(r=b.getDataFromLocalStorage(e)),!!r}),r}function I(e,t,r){var n,i,o,a,s;t?(n=e,i=t,a=(o=r).enabledStorageTypes,s=o.expires,a.forEach(function(e){if(e===l.STORAGE_TYPE_COOKIES){var t=new Date(Date.now()+864e5*s);b.setCookie(n,i,t.toUTCString(),"Lax",h.domainOverride())}else e===l.STORAGE_TYPE_LOCALSTORAGE&&b.setDataInLocalStorage(n,i)})):y(e)}var E={name:g,gvlid:58,decode:function(e){return(0,o.default)({},g,{envelope:e})},getId:function(e,t){var r=e.params,n=void 0===r?{}:r,i=e.enabledStorageTypes,o=void 0===i?[]:i,a=e.storage,c=void 0===a?{}:a;if("string"!=typeof n.pid){(0,s.logError)("".concat(g,": Submodule requires a partner ID to be defined"));return}if((null==t?void 0:t.gdprApplies)===!0){(0,s.logWarn)("".concat(g,": Submodule cannot be used where GDPR applies"));return}var l=n.pid,p=n.storeFpid,f=void 0===p||p,b=n.storeTpid,h=void 0===b||b,E=n.apiUrl,S=void 0===E?"https://lexicon.33across.com/v1/envelope":E;return{callback:function(e){(0,d.ajaxBuilder)(1e4)(S,{success:function(t){var r,n={};try{;n=(r=JSON.parse(t)).succeeded?r.data.envelope?{envelope:r.data.envelope,fp:r.data.fp,tp:r.data.tp}:((0,s.logMessage)("".concat(g,": No envelope was received")),{}):("Cookied User"==r.error?(0,s.logMessage)("".concat(g,": Unsuccessful response").concat(" ",r.error)):(0,s.logError)("".concat(g,": Unsuccessful response").concat(" ",r.error)),{})}catch(e){(0,s.logError)("".concat(g,": ID reading error:"),e)}!n.envelope&&y(g),f&&I(v,n.fp,{enabledStorageTypes:o,expires:c.expires}),h&&I(m,n.tp,{enabledStorageTypes:o,expires:c.expires}),e(n.envelope)},error:function(t){(0,s.logError)("".concat(g,": ID error response"),t),e()}},function(e,t,r){var n=u.uspDataHandler.getConsentData(),i=u.coppaDataHandler.getCoppa(),o=u.gppDataHandler.getConsentData(),a={pid:e,gdpr:0,src:"pbjs",ver:"9.17.0",coppa:Number(i)};if(n&&(a.us_privacy=n),o){var s=o.gppString,d=o.applicableSections;a.gpp=void 0===s?"":s,a.gpp_sid=encodeURIComponent((void 0===d?[]:d).join(","))}null!=t&&t.consentString&&(a.gdpr_consent=t.consentString);var c=A(v,r);c&&(a.fp=encodeURIComponent(c));var l=A(m,r);return l&&(a.tp=encodeURIComponent(l)),a}(l,t,o),{method:"GET",withCredentials:!0})}}},domainOverride:h.domainOverride,eids:{"33acrossId":{source:"33across.com",atype:1,getValue:function(e){return e.envelope}}}};(0,c.submodule)("userId",E),(0,a.registerModule)("33acrossIdSystem")},9597:function(e,t,r){"use strict";var n,i=r(1640),o=i(r(4763)),a=r(9895),s=r(3408),d=r(7565);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var u="allowActivities",l="".concat(u," config");function p(e){var t=new Map,r=new Map,n=new Map;s.config.getConfig(u,function(i){n.clear(),Array.from(t.values()).flatMap(function(e){return Array.from(e.values())}).forEach(function(e){return e()}),t.clear(),Array.from(r.values()).forEach(function(e){return e()}),r.clear(),Object.entries(i[u]).forEach(function(i){var a,s=(0,o.default)(i,2),d=s[0],u=s[1];if(!1===u.default){;a=d,r.has(a)||r.set(a,e(a,l,function(){return{allow:!1,reason:"activity denied by default"}},Number.POSITIVE_INFINITY))}var p=new Map;n.set(d,p),(u.rules||[]).forEach(function(e){var t=null==e.priority?1:e.priority;!p.has(t)&&p.set(t,[]),p.get(t).push(e)}),Array.from(p.keys()).forEach(function(r){var i,a,s;return i=d,a=r,!t.has(i)&&t.set(i,new Map),void(!(s=t.get(i)).has(a)&&s.set(a,e(i,l,function(e){var t,r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(n.get(i).get(a));try{for(r.s();!(t=r.n()).done;){var s,d=t.value;if(!d.condition||d.condition((s=e,Object.fromEntries(Object.entries(s).filter(function(e){return!(0,o.default)(e,1)[0].startsWith("_")})))))return{allow:d.allow,reason:d}}}catch(e){r.e(e)}finally{r.f()}},a)))})})})}p(d.registerActivityControl),(0,a.registerModule)("allowActivities")},8706:function(e,t,r){"use strict";var n,i=r(1640),o=i(r(7251)),a=i(r(4995)),s=r(9895),d=r(1235),c=r(4389),u=r(3408),l=r(1634),p=r(8705),f=r(7448),g=r(5045),v=r(4288),m=r(4735),b=r(1270),h=r(2659),y=r(3819),A=r(9256),I=r(2788),E=r(5977),S=r(9044),O="appnexus",_=["id","minduration","maxduration","skippable","playback_method","frameworks","context","skipoffset"],T=["minduration","maxduration","skip","skipafter","playbackmethod","api","startdelay","placement","plcmt"],w=["age","externalUid","external_uid","segments","gender","dnt","language"],C=["geo","device_id"],x=["enabled","dongle","member_id","debug_timeout"],P={apn_debug_dongle:"dongle",apn_debug_member_id:"member_id",apn_debug_timeout:"debug_timeout"},D={playback_method:{unknown:0,auto_play_sound_on:1,auto_play_sound_off:2,click_to_play:3,mouse_over:4,auto_play_sound_unknown:5},context:{unknown:0,pre_roll:1,mid_roll:2,post_roll:3,outstream:4,"in-banner":5,"in-feed":6,interstitial:7,accompanying_content_pre_roll:8,accompanying_content_mid_roll:9,accompanying_content_post_roll:10}},R={body:"description",body2:"desc2",cta:"ctatext",image:{serverName:"main_image",requiredParams:{required:!0}},icon:{serverName:"icon",requiredParams:{required:!0}},sponsoredBy:"sponsored_by",privacyLink:"privacy_link",salePrice:"saleprice",displayUrl:"displayurl"},j=/\/\/cdn\.adnxs\.com\/v|\/\/cdn\.adnxs\-simple\.com\/v/,k=(0,v.getStorageManager)({bidderCode:O}),N=1,U=2,B=3,M=4,V=5,q=6,L=7,F=8,G=new Map([[N,"Mobile/Tablet - General"],[U,"Personal Computer"],[B,"Connected TV"],[M,"Phone"],[V,"Tablet"],[q,"Connected Device"],[L,"Set Top Box"],[F,"OOH Device"]]),z={code:O,gvlid:32,aliases:I.appnexusAliases,supportedMediaTypes:[p.BANNER,p.VIDEO,p.NATIVE],isBidRequestValid:function(e){return!!(e.params.placementId||e.params.placement_id||e.params.member&&(e.params.invCode||e.params.inv_code))},buildRequests:function(e,t){var r,n,i,o,s,c=(e=(0,h.convertOrtbRequestToProprietaryNative)(e)).map(W),l=(0,f.find)(e,H),p={};!0===u.config.getConfig("coppa")&&(p={coppa:!0}),l&&Object.keys(l.params.user).filter(function(e){return(0,f.includes)(w,e)}).forEach(function(e){var t=(0,I.convertCamelToUnderscore)(e);if("segments"===e&&(0,d.isArray)(l.params.user[e])){var r=[];l.params.user[e].forEach(function(e){(0,d.isNumber)(e)?r.push({id:e}):(0,d.isPlainObject)(e)&&r.push(e)}),p[t]=r}else"segments"!==e&&(p[t]=l.params.user[e])});var g=(0,f.find)(e,K);g&&g.params&&g.params.app&&(o={},Object.keys(g.params.app).filter(function(e){return(0,f.includes)(C,e)}).forEach(function(e){return o[e]=g.params.app[e]}));var v=(0,f.find)(e,Q);v&&v.params&&g.params.app&&g.params.app.id&&(s={appid:v.params.app.id});var m={},y={},O=k.getCookie("apn_prebid_debug")||null;if(O)try{m=JSON.parse(O)}catch(e){(0,d.logError)("AppNexus Debug Auction Cookie Error:\n\n"+e)}else{Object.keys(P).forEach(function(e){var t=(0,d.getParameterByName)(e);(0,d.isStr)(t)&&""!==t&&(m[P[e]]=t,m.enabled=!0)}),m=(0,E.convertTypes)({member_id:"number",debug_timeout:"number"},m);var _=(0,f.find)(e,$);_&&_.debug&&(m=_.debug)}m&&m.enabled&&Object.keys(m).filter(function(e){return(0,f.includes)(x,e)}).forEach(function(e){y[e]=m[e]});var T=(0,f.find)(e,J),D=T?parseInt(T.params.member,10):0,R=e[0].schain,j=(0,f.find)(e,Z),N={tags:(0,a.default)(c),user:p,sdk:{source:"pbjs",version:"9.17.0"},schain:R};j&&(N.iab_support={omidpn:"Appnexus",omidpv:"9.17.0"}),D>0&&(N.member_id=D),g&&(N.device=o),v&&(N.app=s),null!=t&&null!==(r=t.ortb2)&&void 0!==r&&r.device&&(N.device=N.device||{},(0,d.mergeDeep)(N.device,function(e){var t={useragent:e.ua,devicetype:G.get(e.devicetype),make:e.make,model:e.model,os:e.os,os_version:e.osv,w:e.w,h:e.h,ppi:e.ppi,pxratio:e.pxratio};return Object.keys(t).reduce(function(e,r){return t[r]&&(e[r]=t[r]),e},{})}(t.ortb2.device)));var U=(0,d.deepClone)(t&&t.ortb2),B=(0,d.deepClone)(u.config.getConfig("appnexusAuctionKeywords"))||{},M=(0,A.getANKeywordParam)(U,B);if(M.length>0&&(N.keywords=M),u.config.getConfig("adpod.brandCategoryExclusion")&&(N.brand_category_uniqueness=!0),y.enabled&&(N.debug=y,(0,d.logInfo)("AppNexus Debug Auction Settings:\n\n"+JSON.stringify(y,null,4))),t&&t.gdprConsent&&(N.gdpr_consent={consent_string:t.gdprConsent.consentString,consent_required:t.gdprConsent.gdprApplies},t.gdprConsent.addtlConsent&&-1!==t.gdprConsent.addtlConsent.indexOf("~"))){var V=t.gdprConsent.addtlConsent,q=V.substring(V.indexOf("~")+1);N.gdpr_consent.addtl_consent=q.split(".").map(function(e){return parseInt(e,10)})}if(t&&t.uspConsent&&(N.us_privacy=t.uspConsent),null!=t&&t.gppConsent?N.privacy={gpp:t.gppConsent.gppString,gpp_sid:t.gppConsent.applicableSections}:null!=t&&null!==(n=t.ortb2)&&void 0!==n&&null!==(n=n.regs)&&void 0!==n&&n.gpp&&(N.privacy={gpp:t.ortb2.regs.gpp,gpp_sid:t.ortb2.regs.gpp_sid}),t&&t.refererInfo){var L={rd_ref:encodeURIComponent(t.refererInfo.topmostLocation),rd_top:t.refererInfo.reachedTop,rd_ifs:t.refererInfo.numIframes,rd_stk:t.refererInfo.stack.map(function(e){return encodeURIComponent(e)}).join(",")},F=t.refererInfo.canonicalUrl;(0,d.isStr)(F)&&""!==F&&(L.rd_can=F),N.referrer_detection=L}if((0,f.find)(e,X)&&e.filter(X).forEach(function(e){var t=function(e,t){var r=t.mediaTypes.video,n=r.durationRangeSec,i=r.requireExactDuration,o=function(e){var t=e.adPodDurationSec,r=e.durationRangeSec,n=e.requireExactDuration,i=Math.floor(t/Math.min.apply(Math,(0,a.default)(r)));return n?Math.max(i,r.length):i}(t.mediaTypes.video),s=Math.max.apply(Math,(0,a.default)(n)),d=e.filter(function(e){return e.uuid===t.bidId}),c=I.fill.apply(void 0,(0,a.default)(d).concat([o]));if(i){var u=Math.ceil(o/n.length),l=(0,S.chunk)(c,u);n.forEach(function(e,t){l[t].map(function(t){ee(t,"minduration",e),ee(t,"maxduration",e)})})}else c.map(function(e){return ee(e,"maxduration",s)});return c}(c,e),r=N.tags.filter(function(t){return t.uuid!==e.bidId});N.tags=[].concat((0,a.default)(r),(0,a.default)(t))}),e[0].userId){var z=[];e[0].userIdAsEids.forEach(function(e){if(!!e&&!!e.uids&&!(e.uids.length<1))e.uids.forEach(function(t){var r={source:e.source,id:t.id};"adserver.org"==e.source?r.rti_partner="TDID":"uidapi.com"==e.source&&(r.rti_partner="UID2"),z.push(r)})}),z.length&&(N.eids=z)}if(null!=t&&null!==(i=t.ortb2)&&void 0!==i&&null!==(i=i.regs)&&void 0!==i&&null!==(i=i.ext)&&void 0!==i&&i.dsa){var Y=t.ortb2.regs.ext.dsa,et={};if(["dsarequired","pubrender","datatopub"].forEach(function(e){(0,d.isNumber)(Y[e])&&(et[e]=Y[e])}),(0,d.isArray)(Y.transparency)&&Y.transparency.every(function(e){return(0,d.isPlainObject)(e)})){var er=[];Y.transparency.forEach(function(e){(0,d.isStr)(e.domain)&&""!=e.domain&&(0,d.isArray)(e.dsaparams)&&e.dsaparams.every(function(e){return(0,d.isNumber)(e)})&&er.push(e)}),er.length>0&&(et.transparency=er)}!(0,d.isEmpty)(et)&&(N.dsa=et)}return c[0].publisher_id&&(N.publisher_id=c[0].publisher_id),function(e,t){var r=[],n={withCredentials:!0},i="https://ib.adnxs.com/ut/v3/prebid";if(!(0,b.hasPurpose1Consent)(null==t?void 0:t.gdprConsent)&&(i="https://ib.adnxs-simple.com/ut/v3/prebid"),("TRUE"===(0,d.getParameterByName)("apn_test").toUpperCase()||!0===u.config.getConfig("apn_test"))&&(n.customHeaders={"X-Is-Test":1}),e.tags.length>15){var o=(0,d.deepClone)(e);(0,S.chunk)(e.tags,15).forEach(function(e){o.tags=e;var a=JSON.stringify(o);r.push({method:"POST",url:i,data:a,bidderRequest:t,options:n})})}else{var a=JSON.stringify(e);r={method:"POST",url:i,data:a,bidderRequest:t,options:n}}return r}(N,t)},interpretResponse:function(e,t){var r=this,n=t.bidderRequest;e=e.body;var i=[];if(!e||e.error){var o="in response for ".concat(n.bidderCode," adapter");return e&&e.error&&(o+=": ".concat(e.error)),(0,d.logError)(o),i}if(e.tags&&e.tags.forEach(function(e){var t=function(e){return e&&e.ads&&e.ads.length&&(0,f.find)(e.ads,function(e){return e.rtb})}(e);if(t&&(!0===m.bidderSettings.get(n.bidderCode,"allowZeroCpmBids")?t.cpm>=0:t.cpm>0)&&(0,f.includes)(r.supportedMediaTypes,t.ad_type)){var o=function(e,t,r){var n=(0,d.getBidRequest)(e.uuid,[r]),i=(0,d.getUniqueIdentifierStr)(),o={adId:i,requestId:e.uuid,cpm:t.cpm,creativeId:t.creative_id,dealId:t.deal_id,currency:"USD",netRevenue:!0,ttl:300,adUnitCode:n.adUnitCode,appnexus:{buyerMemberId:t.buyer_member_id,dealPriority:t.deal_priority,dealCode:t.deal_code}};t.adomain&&(o.meta=Object.assign({},o.meta,{advertiserDomains:[t.adomain]})),t.advertiser_id&&(o.meta=Object.assign({},o.meta,{advertiserId:t.advertiser_id})),t.dsa&&(o.meta=Object.assign({},o.meta,{dsa:t.dsa}));if(t.buyer_member_id)o.meta=Object.assign({},o.meta,{dchain:{ver:"1.0",complete:0,nodes:[{bsid:t.buyer_member_id.toString()}]}});if(t.brand_id&&(o.meta=Object.assign({},o.meta,{brandId:t.brand_id})),t.rtb.video)switch(Object.assign(o,{width:t.rtb.video.player_width,height:t.rtb.video.player_height,vastImpUrl:t.notify_url,ttl:3600}),(0,d.deepAccess)(n,"mediaTypes.video.context")){case p.ADPOD:var a=y.APPNEXUS_CATEGORY_MAPPING[t.brand_category_id]?y.APPNEXUS_CATEGORY_MAPPING[t.brand_category_id]:null;o.meta=Object.assign({},o.meta,{primaryCatId:a});var s=t.deal_priority;o.video={context:p.ADPOD,durationSeconds:Math.floor(t.rtb.video.duration_ms/1e3),dealTier:s},o.vastUrl=t.rtb.video.asset_url;break;case g.OUTSTREAM:if(o.adResponse=e,o.adResponse.ad=o.adResponse.ads[0],o.adResponse.ad.video=o.adResponse.ad.rtb.video,o.vastXml=t.rtb.video.content,t.renderer_url){var u=(0,f.find)(r.bids,function(t){return t.bidId===e.uuid}),l=(0,d.deepAccess)(u,"mediaTypes.video.renderer.options");!l&&(l=(0,d.deepAccess)(u,"renderer.options")),o.renderer=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=c.Renderer.install({id:t.renderer_id,url:t.renderer_url,config:r,loaded:!1,adUnitCode:e});try{n.setRender(et)}catch(e){(0,d.logWarn)("Prebid Error calling setRender on renderer",e)}return n.setEventHandlers({impression:function(){return(0,d.logMessage)("AppNexus outstream video impression event")},loaded:function(){return(0,d.logMessage)("AppNexus outstream video loaded event")},ended:function(){(0,d.logMessage)("AppNexus outstream renderer video event"),document.querySelector("#".concat(e)).style.display="none"}}),n}(o.adUnitCode,t,l)}break;case g.INSTREAM:o.vastUrl=t.notify_url+"&redir="+encodeURIComponent(t.rtb.video.asset_url)}else if(t.rtb[p.NATIVE]){var v,m=t.rtb[p.NATIVE];if(function(e){if(!e||""===e)return!1;var t=e.match(j),r=null!=t&&t.length>=1,n=e.match("trk.js"),i=null!=n&&n.length>=1;return e.startsWith("<script")&&i&&r}(t.viewability.config)){var b="pbjs_adid="+i+";pbjs_auc="+n.adUnitCode;v=t.viewability.config.replace("dom_id=%native_dom_id%",b)}var h=m.javascript_trackers;void 0==h?h=v:(0,d.isStr)(h)?h=[h,v]:h.push(v),o[p.NATIVE]={title:m.title,body:m.desc,body2:m.desc2,cta:m.ctatext,rating:m.rating,sponsoredBy:m.sponsored,privacyLink:m.privacy_link,address:m.address,downloads:m.downloads,likes:m.likes,phone:m.phone,price:m.price,salePrice:m.saleprice,clickUrl:m.link.url,displayUrl:m.displayurl,clickTrackers:m.link.click_trackers,impressionTrackers:m.impression_trackers,video:m.video,javascriptTrackers:h},m.main_img&&(o[p.NATIVE].image={url:m.main_img.url,height:m.main_img.height,width:m.main_img.width}),m.icon&&(o[p.NATIVE].icon={url:m.icon.url,height:m.icon.height,width:m.icon.width}),o[p.NATIVE].ext={customImage1:m.image1&&{url:m.image1.url,height:m.image1.height,width:m.image1.width},customImage2:m.image2&&{url:m.image2.url,height:m.image2.height,width:m.image2.width},customImage3:m.image3&&{url:m.image3.url,height:m.image3.height,width:m.image3.width},customImage4:m.image4&&{url:m.image4.url,height:m.image4.height,width:m.image4.width},customImage5:m.image5&&{url:m.image5.url,height:m.image5.height,width:m.image5.width},customIcon1:m.icon1&&{url:m.icon1.url,height:m.icon1.height,width:m.icon1.width},customIcon2:m.icon2&&{url:m.icon2.url,height:m.icon2.height,width:m.icon2.width},customIcon3:m.icon3&&{url:m.icon3.url,height:m.icon3.height,width:m.icon3.width},customIcon4:m.icon4&&{url:m.icon4.url,height:m.icon4.height,width:m.icon4.width},customIcon5:m.icon5&&{url:m.icon5.url,height:m.icon5.height,width:m.icon5.width},customSocialIcon1:m.socialicon1&&{url:m.socialicon1.url,height:m.socialicon1.height,width:m.socialicon1.width},customSocialIcon2:m.socialicon2&&{url:m.socialicon2.url,height:m.socialicon2.height,width:m.socialicon2.width},customSocialIcon3:m.socialicon3&&{url:m.socialicon3.url,height:m.socialicon3.height,width:m.socialicon3.width},customSocialIcon4:m.socialicon4&&{url:m.socialicon4.url,height:m.socialicon4.height,width:m.socialicon4.width},customSocialIcon5:m.socialicon5&&{url:m.socialicon5.url,height:m.socialicon5.height,width:m.socialicon5.width},customTitle1:m.title1,customTitle2:m.title2,customTitle3:m.title3,customTitle4:m.title4,customTitle5:m.title5,customBody1:m.body1,customBody2:m.body2,customBody3:m.body3,customBody4:m.body4,customBody5:m.body5,customCta1:m.ctatext1,customCta2:m.ctatext2,customCta3:m.ctatext3,customCta4:m.ctatext4,customCta5:m.ctatext5,customDisplayUrl1:m.displayurl1,customDisplayUrl2:m.displayurl2,customDisplayUrl3:m.displayurl3,customDisplayUrl4:m.displayurl4,customDisplayUrl5:m.displayurl5,customSocialUrl1:m.socialurl1,customSocialUrl2:m.socialurl2,customSocialUrl3:m.socialurl3,customSocialUrl4:m.socialurl4,customSocialUrl5:m.socialurl5}}else{Object.assign(o,{width:t.rtb.banner.width,height:t.rtb.banner.height,ad:t.rtb.banner.content});try{if(t.rtb.trackers)for(var A=0;A<t.rtb.trackers[0].impression_urls.length;A++){var I=t.rtb.trackers[0].impression_urls[A],E=(0,d.createTrackPixelHtml)(I);o.ad+=E}}catch(e){(0,d.logError)("Error appending tracking pixel",e)}}return o}(e,t,n);o.mediaType=function(e){var t=e.ad_type;return t===p.VIDEO?p.VIDEO:t===p.NATIVE?p.NATIVE:p.BANNER}(t),i.push(o)}}),e.debug&&e.debug.debug_info){var a="AppNexus Debug Auction for Prebid\n\n"+e.debug.debug_info;a=a.replace(/(<td>|<th>)/gm,"	").replace(/(<\/td>|<\/th>)/gm,"\n").replace(/^<br>/gm,"").replace(/(<br>\n|<br>)/gm,"\n").replace(/<h1>(.*)<\/h1>/gm,"\n\n===== $1 =====\n\n").replace(/<h[2-6]>(.*)<\/h[2-6]>/gm,"\n\n*** $1 ***\n\n").replace(/(<([^>]+)>)/igm,""),(0,d.logMessage)("https://console.appnexus.com/docs/understanding-the-debug-auction"),(0,d.logMessage)(a)}return i},getUserSyncs:function(e,t,r,n,i){return e.iframeEnabled&&(0,b.hasPurpose1Consent)(r)?[{type:"iframe",url:"https://acdn.adnxs.com/dmp/async_usersync.html"}]:e.pixelEnabled?["https://px.ads.linkedin.com/setuid?partner=appNexus"].map(function(e){return{type:"image",url:e}}):void 0}};function W(e){var t,r={};Object.keys(e.params).forEach(function(t){var r=(0,I.convertCamelToUnderscore)(t);r!==t&&(e.params[r]=e.params[t],delete e.params[t])}),r.sizes=Y(e.sizes),r.primary_size=r.sizes[0],r.ad_types=[],r.uuid=e.bidId,e.params.placement_id?r.id=parseInt(e.params.placement_id,10):r.code=e.params.inv_code;var n=(0,d.getParameterByName)("ast_override_div");if((0,d.isStr)(n)&&""!==n){var i=decodeURIComponent(n).split(",").find(function(t){return t.startsWith("".concat(e.adUnitCode,":"))});if(i){var o=i.split(":")[1];o&&(r.force_creative_id=parseInt(o,10))}}r.allow_smaller_sizes=e.params.allow_smaller_sizes||!1,r.use_pmt_rule="boolean"==typeof e.params.use_payment_rule?e.params.use_payment_rule:"boolean"==typeof e.params.use_pmt_rule&&e.params.use_pmt_rule,r.prebid=!0,r.disable_psa=!0;var a=function(e){if(!(0,d.isFn)(e.getFloor))return e.params.reserve?e.params.reserve:null;var t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return(0,d.isPlainObject)(t)&&!isNaN(t.floor)&&"USD"===t.currency?t.floor:null}(e);if(a&&(r.reserve=a),e.params.position)r.position=({above:1,below:2})[e.params.position]||0;else{var s=(0,d.deepAccess)(e,"mediaTypes.banner.pos")||(0,d.deepAccess)(e,"mediaTypes.video.pos");(0===s||1===s||3===s)&&(r.position=3===s?2:s)}e.params.traffic_source_code&&(r.traffic_source_code=e.params.traffic_source_code),e.params.private_sizes&&(r.private_sizes=Y(e.params.private_sizes)),e.params.supply_type&&(r.supply_type=e.params.supply_type),e.params.pub_click&&(r.pubclick=e.params.pub_click),e.params.ext_inv_code&&(r.ext_inv_code=e.params.ext_inv_code),e.params.publisher_id&&(r.publisher_id=parseInt(e.params.publisher_id,10)),e.params.external_imp_id&&(r.external_imp_id=e.params.external_imp_id);var c=(0,A.getANKewyordParamFromMaps)((0,A.convertKeywordStringToANMap)((0,d.deepAccess)(e,"ortb2Imp.ext.data.keywords")),null===(t=e.params)||void 0===t?void 0:t.keywords);c.length>0&&(r.keywords=c);var u=(0,d.deepAccess)(e,"ortb2Imp.ext.gpid")||(0,d.deepAccess)(e,"ortb2Imp.ext.data.pbadslot");if(u&&(r.gpid=u),(e.mediaType===p.NATIVE||(0,d.deepAccess)(e,"mediaTypes.".concat(p.NATIVE)))&&(r.ad_types.push(p.NATIVE),0===r.sizes.length&&(r.sizes=Y([1,1])),e.nativeParams)){var l=function(e){var t={};return Object.keys(e).forEach(function(r){var n=R[r]&&R[r].serverName||R[r]||r,i=R[r]&&R[r].requiredParams;if(t[n]=Object.assign({},i,e[r]),!(n!==R.image.serverName&&n!==R.icon.serverName)&&t[n].sizes){var o=t[n].sizes;((0,d.isArrayOfNums)(o)||(0,d.isArray)(o)&&o.length>0&&o.every(function(e){return(0,d.isArrayOfNums)(e)}))&&(t[n].sizes=Y(t[n].sizes))}n===R.privacyLink&&(t.privacy_supported=!0)}),t}(e.nativeParams);r[p.NATIVE]={layouts:[l]}}var g=(0,d.deepAccess)(e,"mediaTypes.".concat(p.VIDEO)),v=(0,d.deepAccess)(e,"mediaTypes.video.context");return g&&"adpod"===v?r.hb_source=7:r.hb_source=1,(e.mediaType===p.VIDEO||g)&&r.ad_types.push(p.VIDEO),(e.mediaType===p.VIDEO||g&&"outstream"!==v)&&(r.require_asset_url=!0),e.params.video&&(r.video={},Object.keys(e.params.video).filter(function(e){return(0,f.includes)(_,e)}).forEach(function(t){switch(t){case"context":case"playback_method":var n=e.params.video[t];n=(0,d.isArray)(n)?n[0]:n,r.video[t]=D[t][n];break;case"frameworks":break;default:r.video[t]=e.params.video[t]}}),e.params.video.frameworks&&(0,d.isArray)(e.params.video.frameworks)&&(r.video_frameworks=e.params.video.frameworks)),g&&(r.video=r.video||{},Object.keys(g).filter(function(e){return(0,f.includes)(T,e)}).forEach(function(e){switch(e){case"minduration":case"maxduration":"number"!=typeof r.video[e]&&(r.video[e]=g[e]);break;case"skip":"boolean"!=typeof r.video.skippable&&(r.video.skippable=1===g[e]);break;case"skipafter":"number"!=typeof r.video.skipoffset&&(r.video.skippoffset=g[e]);break;case"playbackmethod":if("number"!=typeof r.video.playback_method){var t=g[e];(t=(0,d.isArray)(t)?t[0]:t)>=1&&t<=4&&(r.video.playback_method=t)}break;case"api":if(!r.video_frameworks&&(0,d.isArray)(g[e])){var n=g[e].map(function(e){var t=4===e?5:5===e?4:e;if(t>=1&&t<=5)return t}).filter(function(e){return e});r.video_frameworks=n}break;case"startdelay":case"plcmt":case"placement":if("number"!=typeof r.video.context){var i=g.plcmt,o=g.placement,a=g.startdelay,s=function(e,t){if(!!e){if(2===e){if(void 0===t)return;if(0===t)return"accompanying_content_pre_roll";if(-1===t)return"accompanying_content_mid_roll";else if(-2===t)return"accompanying_content_post_roll"}else if(3===e)return"interstitial";else if(4===e)return"outstream"}}(i,a)||function(e){if(!!e){if(2===e)return"in-banner";if(3===e)return"outstream";if(4===e)return"in-feed";else if(5===e)return"intersitial"}}(o)||function(e){if(!!e){if(0===e)return"pre_roll";if(-1===e)return"mid_roll";if(-2===e)return"post_roll"}}(a);r.video.context=D.context[s]}}})),e.renderer&&(r.video=Object.assign({},r.video,{custom_renderer_present:!0})),e.params.frameworks&&(0,d.isArray)(e.params.frameworks)&&(r.banner_frameworks=e.params.frameworks),(0,d.deepAccess)(e,"mediaTypes.".concat(p.BANNER))&&r.ad_types.push(p.BANNER),0===r.ad_types.length&&delete r.ad_types,r}function Y(e){var t=[],r={};if((0,d.isArray)(e)&&2===e.length&&!(0,d.isArray)(e[0]))r.width=parseInt(e[0],10),r.height=parseInt(e[1],10),t.push(r);else if("object"===(0,o.default)(e))for(var n=0;n<e.length;n++){var i=e[n];(r={}).width=parseInt(i[0],10),r.height=parseInt(i[1],10),t.push(r)}return t}function H(e){return!!e.params.user}function J(e){return!!parseInt(e.params.member,10)}function K(e){if(e.params)return!!e.params.app}function Q(e){return e.params&&e.params.app?!!e.params.app.id:!!e.params.app}function $(e){return!!e.debug}function X(e){return e.mediaTypes&&e.mediaTypes.video&&e.mediaTypes.video.context===p.ADPOD}function Z(e){var t=!1,r=e.params,n=e.params.video;return r.frameworks&&(0,d.isArray)(r.frameworks)&&(t=(0,f.includes)(e.params.frameworks,6)),!t&&n&&n.frameworks&&(0,d.isArray)(n.frameworks)&&(t=(0,f.includes)(e.params.video.frameworks,6)),t}function ee(e,t,r){(0,d.isEmpty)(e.video)&&(e.video={}),e.video[t]=r}function et(e,t){!function(e){try{var t=document.getElementById(e).querySelectorAll("div[id^='google_ads']");t[0]&&t[0].style.setProperty("display","none")}catch(e){}}(e.adUnitCode),!function(e){try{var t=document.getElementById(e).querySelectorAll("script[id^='sas_script']");t[0].nextSibling&&"iframe"===t[0].nextSibling.localName&&t[0].nextSibling.style.setProperty("display","none")}catch(e){}}(e.adUnitCode),e.renderer.push(function(){((null==t?void 0:t.defaultView)||window).ANOutstreamVideo.renderAd({tagId:e.adResponse.tag_id,sizes:[e.getSize().split("x")],targetId:e.adUnitCode,uuid:e.adResponse.uuid,adResponse:e.adResponse,rendererOptions:e.renderer.getConfig()},er.bind(null,e))})}function er(e,t,r){e.renderer.handleVideoEvent({id:t,eventName:r})}(0,l.registerBidder)(z),(0,s.registerModule)("appnexusBidAdapter")},3722:function(e,t,r){"use strict";var n,i=r(1640),o=i(r(9837)),a=i(r(7251)),s=r(9895),d=r(1235),c=r(1634),u=r(4288),l=r(1270);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var f="concert";(0,c.registerBidder)({code:f,isBidRequestValid:function(e){return!!e.params.partnerId||((0,d.logWarn)("Missing partnerId bid parameter"),!1)},buildRequests:function(e,t){(0,d.logMessage)(e),(0,d.logMessage)(t);var r,n=[],i={meta:{prebidVersion:"9.17.0",pageUrl:t.refererInfo.page,screen:[window.screen.width,window.screen.height].join("x"),browserLanguage:window.navigator.language,debug:(0,d.debugTurnedOn)(),uid:function(e,t){if(v()||!m(e))return!1;var r=(0,d.deepAccess)(t[0],"userId.sharedid.id")||(0,d.deepAccess)(t[0],"userId.pubcid"),n=(0,d.deepAccess)(t[0],"crumbs.pubcid");if(r)return r;if(n)return n;var i="c_uid",o="vmconcert_uid",a=g.getDataFromLocalStorage(i),s=g.getDataFromLocalStorage(o);return a&&(s=a,g.setDataInLocalStorage(o,s),g.removeDataFromLocalStorage(i)),!s&&(s=(0,d.generateUUID)(),g.setDataInLocalStorage(o,s)),s}(t,e),optedOut:v(),adapterVersion:"1.2.0",uspConsent:t.uspConsent,gdprConsent:t.gdprConsent,gppConsent:t.gppConsent,tdid:function(e,t){return v()||!m(e)?null:(0,d.deepAccess)(t[0],"userId.tdid")||null}(t,e)}};return!i.meta.gppConsent&&null!==(r=t.ortb2)&&void 0!==r&&null!==(r=r.regs)&&void 0!==r&&r.gpp&&(i.meta.gppConsent={gppString:t.ortb2.regs.gpp,applicableSections:t.ortb2.regs.gpp_sid}),i.slots=e.map(function(e){(function(e,t){if(t.userId){var r=function(e,t,r,n){if(e){var i={id:e,atype:n};return r&&(i.ext=r),{source:t,uids:[i]}}}(t.userId.uid2&&t.userId.uid2.id,"uidapi.com",void 0,3);e.push(r)}})(n,e);var r,i=function(e){if(e){var t=e.getBoundingClientRect();return{left:t.left+window.scrollX,top:t.top+window.scrollY}}}(document.getElementById(e.adUnitCode));return{name:e.adUnitCode,bidId:e.bidId,transactionId:null===(r=e.ortb2Imp)||void 0===r||null===(r=r.ext)||void 0===r?void 0:r.tid,sizes:e.params.sizes||e.sizes,partnerId:e.params.partnerId,slotType:e.params.slotType,adSlot:e.params.slot||e.adUnitCode,placementId:e.params.placementId||"",site:e.params.site||t.refererInfo.page,ref:t.refererInfo.ref,offsetCoordinates:{x:null==i?void 0:i.left,y:null==i?void 0:i.top}}}),i.meta.eids=n.filter(Boolean),(0,d.logMessage)(i),{method:"POST",url:"".concat("https://bids.concert.io","/bids/prebid"),data:JSON.stringify(i)}},interpretResponse:function(e,t){(0,d.logMessage)(e),(0,d.logMessage)(t);var r=e.body;if(!r||"object"!==(0,a.default)(r))return[];var n=[];return n=r.bids.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({requestId:e.bidId,cpm:e.cpm,width:e.width,height:e.height,ad:e.ad,ttl:e.ttl,meta:{advertiserDomains:e&&e.adomain?e.adomain:[]},creativeId:e.creativeId,netRevenue:e.netRevenue,currency:e.currency},e.dealid&&{dealId:e.dealid})}),(0,d.debugTurnedOn)()&&r.debug&&(0,d.logMessage)("CONCERT",r.debug),(0,d.logMessage)(n),n},onTimeout:function(e){(0,d.logMessage)("concert bidder timed out"),(0,d.logMessage)(e)},onBidWon:function(e){(0,d.logMessage)("concert bidder won bid"),(0,d.logMessage)(e)}});var g=(0,u.getStorageManager)({bidderCode:f});function v(){return"true"===g.getDataFromLocalStorage("c_nap")}function m(e){var t=!0;"string"==typeof(null==e?void 0:e.uspConsent)&&(null==e?void 0:e.uspConsent[0])==="1"&&(null==e?void 0:e.uspConsent[2].toUpperCase())==="Y"&&(t=!1);var r=(0,l.hasPurpose1Consent)(null==e?void 0:e.gdprConsent);return t&&r}(0,s.registerModule)("concertBidAdapter")},9276:function(e,t,r){"use strict";var n,i=r(9895),o=r(721),a=r(2885),s=r(7448),d=r(2583),c=r(4288),u=r(1235),l=r(9293),p=r(5723),f="connectId",g=31536e6,v=12096e5,m=2592e6,b="__PIXEL_ID__",h="https://ups.analytics.yahoo.com/ups/".concat(b,"/fed"),y=["pixelId","he","puid"],A=["yahoo.com","aol.com","aol.ca","aol.de","aol.co.uk","engadget.com","techcrunch.com","autoblog.com"],I=(0,c.getStorageManager)({moduleType:p.MODULE_TYPE_UID,moduleName:f});function E(e){var t=Date.now()+g;I.cookiesAreEnabled()&&S(f,JSON.stringify(e),new Date(t),T()),I.localStorageIsEnabled()&&I.setDataInLocalStorage(f,JSON.stringify(e))}function S(e,t,r,n){for(var i=n.split("."),o=0;o<i.length;++o){var a=i.slice(i.length-o-1,i.length).join(".");try{I.setCookie(e,t,r.toUTCString(),null,"."+a);var s=I.getCookie(e);if(s&&s===t)break}catch(e){}}}function O(){if(I.localStorageIsEnabled()){var e=I.getDataFromLocalStorage(f);if(e){try{e=JSON.parse(e)}catch(e){(0,u.logError)("".concat(f," module: error while reading the local storage data."))}return(0,u.isPlainObject)(e)&&e.__expires&&e.__expires<=Date.now()?(I.removeDataFromLocalStorage(f),null):e}}return null}function _(e){if(function(){var e=(0,d.getRefererInfo)().ref;if(e){var t=(e=(0,u.parseUrl)(e).hostname).split(".");e=t.slice(t.length-2,t.length).join(".")}return A.indexOf(e)>=0}())return!0;if((0,u.isPlainObject)(e)&&e.lastSynced){var t=e.ttl||v;return e.lastSynced+t<=Date.now()}return!1}function T(){return(0,u.parseUrl)((0,d.getRefererInfo)().page).hostname}var w={name:f,gvlid:25,decode:function(e){if(!w.userHasOptedOut())return(0,u.isPlainObject)(e)&&(e.connectId||e.connectid)?{connectId:e.connectId||e.connectid}:void 0},getId:function(e,t){if(!w.userHasOptedOut()){var r,n=e.params||{};if(!n||void 0===n.pixelId&&void 0===n.endpoint){(0,u.logError)("".concat(f," module: configuration requires the 'pixelId'."));return}var i=(!(r=function(){if(I.cookiesAreEnabled())try{return JSON.parse(I.getCookie(f))}catch(e){}return null}())&&(r=O())&&!_(r)&&!function(){if(!!I.cookiesAreEnabled()){var e=O(),t=Date.now()+g;S(f,JSON.stringify(e),new Date(t),T())}}(),r),o=_(i);if(i&&((0,u.isPlainObject)(i)&&i.puid&&i.lastUsed&&!n.puid&&i.lastUsed+m<=Date.now()&&(delete i.puid,o=!0),(n.he&&n.he!==i.he||n.puid&&n.puid!==i.puid)&&(o=!0),!o))return i.lastUsed=Date.now(),E(i),{id:i};var a=l.uspDataHandler.getConsentData()||"",c={v:"1","1p":(0,s.includes)([1,"1",!0],n["1p"])?"1":"0",gdpr:w.isEUConsentRequired(t)?"1":"0",gdpr_consent:w.isEUConsentRequired(t)?t.consentString:"",us_privacy:a},p=l.gppDataHandler.getConsentData();p&&(c.gpp="".concat(p.gppString?p.gppString:""),Array.isArray(p.applicableSections)&&(c.gpp_sid=p.applicableSections.join(",")));var A=(0,d.getRefererInfo)().topmostLocation;"string"==typeof A&&(c.url=A.split("?")[0]),y.forEach(function(e){void 0!==n[e]&&(c[e]=n[e])});var C=n.he||(null==i?void 0:i.he);C&&(c.he=C),!c.puid&&null!=i&&i.puid&&(c.puid=i.puid);var x={callback:function(e){var t=h.replace(b,n.pixelId),r="".concat(n.endpoint||t,"?").concat((0,u.formatQS)(c));w.getAjaxFn()(r,{success:function(t){var r;if(t)try{if(r=JSON.parse(t),(0,u.isPlainObject)(r)&&Object.keys(r).length>0&&(r.connectId||r.connectid)){if(r.he=n.he,r.puid=n.puid||r.puid,r.lastSynced=Date.now(),r.lastUsed=Date.now(),(0,u.isNumber)(r.ttl)){var i=36e5*r.ttl;i>v&&(i=v),r.ttl=i}E(r)}else(0,u.logError)("".concat(f," module: UPS response returned an invalid payload ").concat(t))}catch(e){(0,u.logError)(e)}e(r)},error:function(t){(0,u.logError)("".concat(f," module: ID fetch encountered an error"),t),e()}},null,{method:"GET",withCredentials:!0})}};return o&&i&&(x.id=i),x}},isEUConsentRequired:function(e){return!!(null!=e&&e.gdprApplies)},userHasOptedOut:function(){try{if(I.localStorageIsEnabled())return"1"===I.getDataFromLocalStorage("connectIdOptOut");return!0}catch(e){return!1}},getAjaxFn:function(){return o.ajax},eids:{connectId:{source:"yahoo.com",atype:3}}};(0,a.submodule)("userId",w),(0,i.registerModule)("connectIdSystem")},4896:function(e,t,r){"use strict";var n,i,o,a=r(1640),s=r(7251),d=a(r(7251)),c=r(9895),u=r(1235),l=r(3408),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=s(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&({}).hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(9293)),f=r(647),g=r(2885),v=r(8320),m=r(3323);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}var h="iab",y=50,A=!1,I={iab:function(e){var t,r=e.onSuccess,n=e.onError;var i=(t={},{consentDataCallback:function(e,i){i&&e.uspString&&(t.usPrivacy=e.uspString),t.usPrivacy?O(t,{onSuccess:r,onError:n}):n("Unable to get USP consent string.")}}),o=(0,m.cmpClient)({apiName:"__uspapi",apiVersion:1,apiArgs:["command","version","callback"]});if(!o)return n("USP CMP not found.");o.isDirect?(0,u.logInfo)("Detected USP CMP is directly accessible, calling it now..."):(0,u.logInfo)("Detected USP CMP is outside the current iframe where Prebid.js is located, calling it now..."),o({command:"getUSPData",callback:i.consentDataCallback}),o({command:"registerDeletion",callback:function(e,t){return(null==t||t)&&p.default.callDataDeletionRequest(e)}}).catch(function(e){(0,u.logError)("Error invoking CMP `registerDeletion`:",e)})},static:function(e){var t=e.onSuccess,r=e.onError;O(i,{onSuccess:t,onError:r})}};function E(e){var t=null,r=!1;function n(n,i){if(null!=t&&clearTimeout(t),r=!0,p.uspDataHandler.setConsentData(n),null!=e){for(var o=arguments.length,a=Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];e.apply(void 0,[i].concat(a))}}if(!I[h]){n(null,"USP framework (".concat(h,") is not a supported framework. Aborting consentManagement module and resuming auction."));return}var i={onSuccess:n,onError:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];n.apply(void 0,[null,"".concat(e," Resuming auction without consent data as per consentManagement config.")].concat(r))}};I[h](i),!r&&(0===y?O(void 0,i):t=setTimeout(i.onError.bind(null,"USPAPI workflow exceeded timeout threshold."),y))}var S=(0,f.timedAuctionHook)("usp",function(e,t){var r=this;!A&&T(),E(function(n){if(null!=n){for(var i=arguments.length,o=Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];u.logWarn.apply(void 0,[n].concat(o))}e.call(r,t)})});function O(e,t){var r=t.onSuccess,n=t.onError;if(!(e&&e.usPrivacy)){n("USPAPI returned unexpected value during lookup process.",e);return}(function(e){e&&e.usPrivacy&&(o=e.usPrivacy)})(e),r(o)}function _(e){(!(e=e&&e.usp)||"object"!==(0,d.default)(e))&&(0,u.logWarn)("consentManagement.usp config not defined, using defaults"),e&&(0,u.isStr)(e.cmpApi)?h=e.cmpApi:(h="iab",(0,u.logInfo)("consentManagement.usp config did not specify cmpApi. Using system default setting (".concat("iab",")."))),e&&(0,u.isNumber)(e.timeout)?y=e.timeout:(y=50,(0,u.logInfo)("consentManagement.usp config did not specify timeout. Using system default setting (".concat(50,")."))),"static"===h&&((0,u.isPlainObject)(e.consentData)&&(0,u.isPlainObject)(e.consentData.getUSPData)?(e.consentData.getUSPData.uspString&&(i={usPrivacy:e.consentData.getUSPData.uspString}),y=0):(0,u.logError)("consentManagement config with cmpApi: 'static' did not specify consentData. No consents will be available to adapters.")),T(!0)}function T(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!A&&((0,u.logInfo)("USPAPI consentManagement module has been activated".concat(e?"":" using default values (api: '".concat(h,"', timeout: ").concat(y,"ms)"))),A=!0,p.uspDataHandler.enable()),E()}function w(e,t){return e(t.then(function(e){var t=p.uspDataHandler.getConsentData();return t&&(0,u.deepSetValue)(e,"regs.ext.us_privacy",t),e}))}l.config.getConfig("consentManagement",function(e){return _(e.consentManagement)}),(0,g.getHook)("requestBids").before(S,50),v.enrichFPD.before(w),(0,c.registerModule)("consentManagementUsp")},6717:function(e,t,r){"use strict";var n,i=r(1640),o=i(r(9837)),a=r(9895),s=r(1235),d=r(1634),c=r(8705),u=r(4288),l=r(2583),p=r(1270),f=r(4389),g=r(5045),v=r(721),m=r(8342),b=r(898);function h(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return y(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var E="criteo",S=(0,u.getStorageManager)({bidderCode:E}),O="Criteo: ",_=(0,b.ortb25Translator)(),T="cto_optout",w="cto_bundle",C=(0,m.ortbConverter)({context:{netRevenue:!0,ttl:60},imp:function(e,t,r){var n,i=e(t,r),o=t.params;if(i.tagid=t.adUnitCode,(0,s.deepSetValue)(i,"ext",I(I(I({},t.params.ext),i.ext),{},{rwdd:i.rwdd,floors:function(e){try{var t,r,n,i={},o=function(e){if(e.getFloor)return e.getFloor;if(e.params.bidFloor&&e.params.bidFloorCur)try{var t=parseFloat(e.params.bidFloor);return function(){return{currency:e.params.bidFloorCur,floor:t}}}catch(e){}}(e);if(o)return null!==(t=e.mediaTypes)&&void 0!==t&&t.banner&&(i.banner={},j((0,s.deepAccess)(e,"mediaTypes.banner.sizes")).forEach(function(t){return i.banner[k(t).toString()]=o.call(e,{size:t,mediaType:c.BANNER})})),null!==(r=e.mediaTypes)&&void 0!==r&&r.video&&(i.video={},j((0,s.deepAccess)(e,"mediaTypes.video.playerSize")).forEach(function(t){return i.video[k(t).toString()]=o.call(e,{size:t,mediaType:c.VIDEO})})),null!==(n=e.mediaTypes)&&void 0!==n&&n.native&&(i.native={},i.native["*"]=o.call(e,{size:"*",mediaType:c.NATIVE})),i}catch(e){(0,s.logError)("Could not parse floors from Prebid: "+e)}}(t),bidder:{publishersubid:null==o?void 0:o.publisherSubId,zoneid:null==o?void 0:o.zoneId,uid:null==o?void 0:o.uid}})),delete i.rwdd,!r.fledgeEnabled&&null!==(n=i.ext.igs)&&void 0!==n&&n.ae&&delete i.ext.igs.ae,N(t)){var a=t.params.video;void 0!==a&&(0,s.deepSetValue)(i,"video",I(I({},i.video),{},{skip:i.video.skip||a.skip||0,placement:i.video.placement||a.placement,minduration:i.video.minduration||a.minduration,playbackmethod:i.video.playbackmethod||a.playbackmethod,startdelay:i.video.startdelay||a.startdelay||0})),(0,s.deepSetValue)(i,"video.ext",{context:t.mediaTypes.video.context,playersizes:j((0,s.deepAccess)(t,"mediaTypes.video.playerSize"),k),plcmt:t.mediaTypes.video.plcmt,poddur:t.mediaTypes.video.adPodDurationSec,rqddurs:t.mediaTypes.video.durationRangeSec})}if(i.native&&void 0!==i.native.request){var d=JSON.parse(i.native.request);!(d.assets&&(1!==d.assets.length||Object.keys(d.assets[0]).length))&&delete d.assets,(0,s.deepSetValue)(i,"native.request_native",d),delete i.native.request}return i},request:function(e,t,r,n){var i=e(t,r,n);return void 0!==n.publisherId&&(void 0!==i.app?(0,s.deepSetValue)(i,"app.publisher.id",n.publisherId):(0,s.deepSetValue)(i,"site.publisher.id",n.publisherId)),r&&r.gdprConsent&&(0,s.deepSetValue)(i,"regs.ext.gdprversion",r.gdprConsent.apiVersion),i=_(i)},bidResponse:function(e,t,r){r.mediaType=(0,s.deepAccess)(t,"ext.mediatype"),r.mediaType===c.NATIVE&&void 0!==t.adm_native&&(t.adm=t.adm_native,delete t.adm_native);var n,i=e(t,r),o=r.bidRequest;return i.currency=(0,s.deepAccess)(t,"ext.cur"),void 0!==(0,s.deepAccess)(t,"ext.meta")&&(0,s.deepSetValue)(i,"meta",I(I({},i.meta),t.ext.meta)),void 0!==(0,s.deepAccess)(t,"ext.paf.content_id")&&(0,s.deepSetValue)(i,"meta.paf.content_id",t.ext.paf.content_id),i.mediaType===c.VIDEO&&(i.vastUrl=null===(n=t.ext)||void 0===n?void 0:n.displayurl,(0,s.deepAccess)(o,"mediaTypes.video.context")===g.OUTSTREAM&&(i.renderer=function(e){if((null===(t=e.ext)||void 0===t?void 0:t.videoPlayerConfig)!==void 0&&(null===(r=e.ext)||void 0===r?void 0:r.videoPlayerType)!==void 0){var t,r,n=f.Renderer.install({url:"https://static.criteo.net/js/ld/publishertag.renderer.js",config:{documentResolver:function(e,t,r){return null!=r?r:t}}});return n.setRender(function(t,r){var n,i={slotid:e.id,vastUrl:null===(n=e.ext)||void 0===n?void 0:n.displayurl,vastXml:e.adm,documentContext:r},o=e.ext.videoPlayerConfig;window.CriteoOutStream[e.ext.videoPlayerType].play(i,o)}),n}}(t))),i},response:function(e,t,r,n){var i=e(t,r,n),o=(0,s.deepAccess)(r,"ext.paf.transmission");return i.bids.forEach(function(e){void 0!==o&&void 0!==(0,s.deepAccess)(e,"meta.paf.content_id")?(0,s.deepSetValue)(e,"meta.paf.transmission",o):delete e.meta.paf}),i}}),x={code:E,gvlid:91,supportedMediaTypes:[c.BANNER,c.VIDEO,c.NATIVE],getUserSyncs:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=i.gppString,a=void 0===o?"":o,d=i.applicableSections,c=void 0===d?[]:d,u=(0,l.getRefererInfo)(),f="criteoPrebidAdapter";if(e.iframeEnabled&&(0,p.hasPurpose1Consent)(r)){var g=[];if(g.push("origin=".concat(f)),g.push("topUrl=".concat(u.domain)),r&&(r.gdprApplies&&g.push("gdpr=".concat(!0==r.gdprApplies?1:0)),r.consentString&&g.push("gdpr_consent=".concat(r.consentString))),n&&g.push("us_privacy=".concat(n)),g.push("gpp=".concat(a)),Array.isArray(c)){var v,m=h(c);try{for(m.s();!(v=m.n()).done;){var b=v.value;g.push("gpp_sid=".concat(b))}}catch(e){m.e(e)}finally{m.f()}}var y=Math.random().toString(),A={bundle:P(w),cw:S.cookiesAreEnabled(),lsw:S.localStorageIsEnabled(),optoutCookie:P(T),origin:f,requestId:y,tld:u.domain,topUrl:u.domain,version:"9.17.0".replace(/\./g,"_")};window.addEventListener("message",function e(t){if(!!t.data&&"https://gum.criteo.com"==t.origin&&t.data.requestId===y){this.removeEventListener("message",e),t.stopImmediatePropagation();var r=t.data;r.optout?(R(w),D(T,!0,43200,u.domain)):(r.bundle&&D(w,r.bundle,9360,u.domain),r.callbacks&&r.callbacks.forEach(s.triggerPixel))}},!0);var I=JSON.stringify(A).replace(/"/g,"%22");return[{type:"iframe",url:"https://gum.criteo.com/syncframe?".concat(g.join("&"),"#").concat(I)}]}if(e.pixelEnabled&&(0,p.hasPurpose1Consent)(r)){var E=[];if(E.push("profile=207"),r&&(!0===r.gdprApplies&&E.push("gdprapplies=true"),r.consentString&&E.push("gdpr=".concat(r.consentString))),n&&E.push("ccpa=".concat(n)),E.push("gpp=".concat(a)),Array.isArray(c)){var O,_=h(c);try{for(_.s();!(O=_.n()).done;){var C=O.value;E.push("gpp_sid=".concat(C))}}catch(e){_.e(e)}finally{_.f()}}return[{type:"image",url:"https://ssp-sync.criteo.com/user-sync/redirect?".concat(E.join("&"))}]}return[]},isBidRequestValid:function(e){return!(!(e&&e.params&&(e.params.zoneId||e.params.networkId))||N(e)&&!function(e){var t=!0;return["mimes","playerSize","maxduration","protocols","api","skip","placement","playbackmethod"].forEach(function(r){"placement"===r?void 0===(0,s.deepAccess)(e,"mediaTypes.video."+r)&&void 0===(0,s.deepAccess)(e,"params.video."+r)&&void 0===(0,s.deepAccess)(e,"mediaTypes.video.plcmt")&&void 0===(0,s.deepAccess)(e,"params.video.plcmt")&&(t=!1,(0,s.logError)("Criteo Bid Adapter: mediaTypes.video."+r+" or mediaTypes.video.plcmt is required")):void 0===(0,s.deepAccess)(e,"mediaTypes.video."+r)&&void 0===(0,s.deepAccess)(e,"params.video."+r)&&(t=!1,(0,s.logError)("Criteo Bid Adapter: mediaTypes.video."+r+" is required"))}),t}(e))&&!0},buildRequests:function(e,t){e.forEach(function(e){(function(e){return void 0!==(0,s.deepAccess)(e,"mediaTypes.native")})(e)&&(!function(e){return!(e.nativeParams&&(e.nativeParams.image&&(!0!==e.nativeParams.image.sendId||!0===e.nativeParams.image.sendTargetingKeys)||e.nativeParams.icon&&(!0!==e.nativeParams.icon.sendId||!0===e.nativeParams.icon.sendTargetingKeys)||e.nativeParams.clickUrl&&(!0!==e.nativeParams.clickUrl.sendId||!0===e.nativeParams.clickUrl.sendTargetingKeys)||e.nativeParams.displayUrl&&(!0!==e.nativeParams.displayUrl.sendId||!0===e.nativeParams.displayUrl.sendTargetingKeys)||e.nativeParams.privacyLink&&(!0!==e.nativeParams.privacyLink.sendId||!0===e.nativeParams.privacyLink.sendTargetingKeys)||e.nativeParams.privacyIcon&&(!0!==e.nativeParams.privacyIcon.sendId||!0===e.nativeParams.privacyIcon.sendTargetingKeys)))}(e)&&(0,s.logWarn)(O+"all native assets containing URL should be sent as placeholders with sendId(icon, image, clickUrl, displayUrl, privacyLink, privacyIcon)"),null==(0,s.deepAccess)(e,"nativeOrtbRequest.assets")&&((0,s.logWarn)(O+"native asset requirements are missing"),(0,s.deepSetValue)(e,"nativeOrtbRequest.assets",[{}])))});var r=function(e,t){var r,n,i,o,a,d=(0,s.parseUrl)(null==t||null===(r=t.refererInfo)||void 0===r?void 0:r.topmostLocation).search;return{url:(null==t||null===(n=t.refererInfo)||void 0===n?void 0:n.page)||"",debug:"1"===d.pbt_debug,noLog:"1"===d.pbt_nolog,fledgeEnabled:null===(i=t.paapi)||void 0===i?void 0:i.enabled,amp:e.some(function(e){return"amp"===e.params.integrationMode}),networkId:null===(o=e.find(function(e){var t;return null===(t=e.params)||void 0===t?void 0:t.networkId}))||void 0===o?void 0:o.params.networkId,publisherId:null===(a=e.find(function(e){var t;return null===(t=e.params)||void 0===t?void 0:t.pubid}))||void 0===a?void 0:a.params.pubid}}(e,t),n=function(e){var t="https://grid-bidder.criteo.com/openrtb_2_5/pbjs/auction/request";t+="?profileId=207&av="+String(37)+("&wv="+encodeURIComponent("9.17.0"))+("&cb="+String(Math.floor(99999999999*Math.random()))),S.localStorageIsEnabled()?t+="&lsavail=1":t+="&lsavail=0",e.amp&&(t+="&im=1"),e.debug&&(t+="&debug=1"),e.noLog&&(t+="&nolog=1");var r=P(w);return r&&(t+="&bundle=".concat(r)),P(T)&&(t+="&optout=1"),e.networkId&&(t+="&networkId="+e.networkId),t}(r),i=C.toORTB({bidderRequest:t,bidRequests:e,context:r});if(i)return{method:"POST",url:n,data:i,bidRequests:e}},interpretResponse:function(e,t){if(void 0===(null==e?void 0:e.body))return[];var r,n=C.fromORTB({response:e.body,request:t.data}).bids||[],i=null===(r=(0,s.deepAccess)(e.body,"ext.igi"))||void 0===r?void 0:r.filter(function(e){return(0,s.isArray)(null==e?void 0:e.igs)}).flatMap(function(e){return e.igs});return null!=i&&i.length?{bids:n,paapi:i}:n},onDataDeletionRequest:function(e){var t=P(w);t&&(R(w),(0,v.ajax)("https://privacy.criteo.com/api/privacy/datadeletionrequest",null,JSON.stringify({publisherUserId:t}),{contentType:"application/json",method:"POST"}))}};function P(e){var t=S.getCookie(e),r=S.getDataFromLocalStorage(e);return t||r||void 0}function D(e,t,r,n){var i=new Date;i.setTime(i.getTime()+36e5*r);for(var o="expires=".concat(i.toUTCString()),a=n.split("."),s=0;s<a.length;++s){var d=a.slice(a.length-s-1,a.length).join(".");try{S.setCookie(e,t,o,null,"."+d);var c=S.getCookie(e);if(c&&c===t)break}catch(e){}}S.setDataInLocalStorage(e,t)}function R(e){S.setCookie(e,"",0),S.removeDataFromLocalStorage(e)}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return void 0==e?[]:Array.isArray(e[0])?e.map(function(e){return t(e)}):[t(e)]}function k(e){return e[0]+"x"+e[1]}function N(e){return void 0!==(0,s.deepAccess)(e,"mediaTypes.video")}(0,d.registerBidder)(x),(0,a.registerModule)("criteoBidAdapter")},113:function(e,t,r){"use strict";var n,i=r(9895),o=r(1235),a=r(721),s=r(2583),d=r(2885),c=r(4288),u=r(5723),l=r(9293),p="criteo",f=(0,c.getStorageManager)({moduleType:u.MODULE_TYPE_UID,moduleName:p}),g="cto_bidid",v="cto_bundle",m="html5",b="cookie",h=new Date(0).toString(),y=new Date((0,o.timestamp)()+33696e6).toString();function A(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(0,o.parseUrl)(e,{noDecodeWholeURL:!0});return t?"".concat(r.hostname):"".concat(r.protocol,"://").concat(r.hostname).concat(r.port?":"+r.port:"","/")}function I(e,t){var r,n;return(null==e||null===(r=e.storage)||void 0===r?void 0:r.type)===m?f.getDataFromLocalStorage(t):(null==e||null===(n=e.storage)||void 0===n?void 0:n.type)===b?f.getCookie(t):f.getCookie(t)||f.getDataFromLocalStorage(t)}function E(e,t,r,n){if(t&&r){var i,o;(null==e||null===(i=e.storage)||void 0===i?void 0:i.type)===m?f.setDataInLocalStorage(t,r):((null==e||null===(o=e.storage)||void 0===o?void 0:o.type)===b||f.setDataInLocalStorage(t,r),S(t,r,y,n,!0))}}function S(e,t,r,n,i){for(var o=n.split("."),a=0;a<o.length;++a){var s=o.slice(o.length-a-1,o.length).join(".");try{if(f.setCookie(e,t,r,null,"."+s),i){var d=f.getCookie(e);if(d&&d===t)break}}catch(e){}}}(0,d.submodule)("userId",{name:p,gvlid:91,decode:function(e){return e},getId:function(e){var t,r={bundle:I(t=e,v),dnaBundle:I(t,"cto_dna_bundle"),bidId:I(t,g)};return{id:r.bidId?{criteoId:r.bidId}:void 0,callback:function(t){var n,i,d,c,u,p,y,I,O,_,T,w,C,x,P,D,R,j,k,N,U,B,M,V;return n=e,i=r,d=t,I=((null==n||null===(c=n.storage)||void 0===c?void 0:c.type)===void 0||(null==n||null===(u=n.storage)||void 0===u?void 0:u.type)===b)&&f.cookiesAreEnabled(),O=((null==n||null===(p=n.storage)||void 0===p?void 0:p.type)===void 0||(null==n||null===(y=n.storage)||void 0===y?void 0:y.type)===m)&&f.localStorageIsEnabled(),_=A((0,s.getRefererInfo)().page),T=A(document.location.href,!0),w="undefined"!=typeof criteo_pubtag,V=(C=_,x=T,P=i.bundle,D=i.dnaBundle,R=I,j=O,k=w,N="https://gum.criteo.com/sid/json?origin=prebid"+"".concat(C?"&topUrl="+encodeURIComponent(C):"")+"".concat(x?"&domain="+encodeURIComponent(x):"")+"".concat(P?"&bundle="+encodeURIComponent(P):"")+"".concat(D?"&info="+encodeURIComponent(D):"")+"".concat(R?"&cw=1":"")+"".concat(k?"&pbt=1":"")+"".concat(j?"&lsw=1":""),(U=l.uspDataHandler.getConsentData())&&(N+="&us_privacy=".concat(encodeURIComponent(U))),(B=l.gdprDataHandler.getConsentData())&&(N+="".concat(B.consentString?"&gdprString="+encodeURIComponent(B.consentString):"")+"&gdpr=".concat(!0===B.gdprApplies?1:0)),(M=l.gppDataHandler.getConsentData())&&(N+="".concat(M.gppString?"&gpp="+encodeURIComponent(M.gppString):"")+"".concat(M.applicableSections?"&gpp_sid="+encodeURIComponent(M.applicableSections):"")),N),void(0,a.ajax)(V,{success:function(e){var t,r=JSON.parse(e);if(r.pixels&&r.pixels.forEach(function(e){var t,r,i;return t=n,r=T,void((i=e).writeBundleInStorage&&i.bundlePropertyName&&i.storageKeyName?(0,a.ajax)(i.pixelUrl,{success:function(e){if(e){var n=JSON.parse(e);n&&n[i.bundlePropertyName]&&E(t,i.storageKeyName,n[i.bundlePropertyName],r)}},error:function(e){(0,o.logError)("criteoIdSystem: unable to sync user id",e)}},void 0,{method:"GET",withCredentials:!0}):(0,o.triggerPixel)(i.pixelUrl))}),r.acwsUrl?("string"==typeof r.acwsUrl?[r.acwsUrl]:r.acwsUrl).forEach(function(e){return(0,o.triggerPixel)(e)}):r.bundle&&E(n,v,r.bundle,T),r.bidId)E(n,g,r.bidId,T),d({criteoId:r.bidId});else{;S(t=g,"",h,T,!0),f.removeDataFromLocalStorage(t),d()}},error:function(e){(0,o.logError)("criteoIdSystem: unable to sync user id",e),d()}},void 0,{method:"GET",contentType:"application/json",withCredentials:!0})}}},eids:{criteoId:{source:"criteo.com",atype:1}}}),(0,i.registerModule)("criteoIdSystem")},223:function(e,t,r){"use strict";var n,i,o,a=r(1640),s=a(r(4763)),d=a(r(7251)),c=r(9895),u=r(1235),l=r(2778),p=r(721),f=r(3408),g=r(2885),v=r(6607),m=r(7319),b=r(647),h=r(56),y=[],A={},I=!1,E=!0,S="USD",O=!1,_={},T={},w=(0,v.defer)();function C(e){if(i="https://cdn.jsdelivr.net/gh/prebid/currency-file@1/latest.json?date=$$TODAY$$",null!==e.rates&&"object"===(0,d.default)(e.rates)&&(_.conversions=e.rates,I=!0,E=!1),null!==e.defaultRates&&"object"===(0,d.default)(e.defaultRates)&&(o=e.defaultRates,_.conversions=o,I=!0),"string"==typeof e.adServerCurrency){(0,u.logInfo)("enabling currency support",arguments),S=e.adServerCurrency,e.conversionRateFile&&((0,u.logInfo)("currency using override conversionRateFile:",e.conversionRateFile),i=e.conversionRateFile);var t=i.indexOf("$$TODAY$$");if(-1!==t){var r=new Date,n="".concat(r.getMonth()+1),a="".concat(r.getDate());n.length<2&&(n="0".concat(n)),a.length<2&&(a="0".concat(a));var s="".concat(r.getFullYear()).concat(n).concat(a);i="".concat(i.substring(0,t)).concat(s).concat(i.substring(t+9,i.length))}(function(){A={},!O&&(O=!0,(0,c.getGlobal)().convertCurrency=function(e,t,r){return parseFloat(e)*N(t,r)},(0,g.getHook)("addBidResponse").before(R,100),(0,g.getHook)("responsesReady").before(D),(0,h.on)(l.EVENTS.AUCTION_TIMEOUT,j),(0,h.on)(l.EVENTS.AUCTION_INIT,P),P())})()}else(0,u.logInfo)("disabling currency support"),function(){O&&((0,g.getHook)("addBidResponse").getHooks({hook:R}).remove(),(0,g.getHook)("responsesReady").getHooks({hook:D}).remove(),(0,h.off)(l.EVENTS.AUCTION_TIMEOUT,j),(0,h.off)(l.EVENTS.AUCTION_INIT,P),delete c.getGlobal().convertCurrency,S="USD",A={},O=!1,I=!1,E=!0,_={},T={},w=(0,v.defer)())}();"object"===(0,d.default)(e.bidderCurrencyDefault)&&(T=e.bidderCurrencyDefault)}function x(e){o?((0,u.logWarn)(e),(0,u.logWarn)("Currency failed loading rates, falling back to currency.defaultRates")):(0,u.logError)(e)}function P(){E?(E=!1,I=!1,(0,p.ajax)(i,{success:function(e){try{_=JSON.parse(e),(0,u.logInfo)("currencyRates set to "+JSON.stringify(_)),A={},I=!0,k()}catch(t){x("Failed to parse currencyRates response: "+e)}},error:function(){x.apply(void 0,arguments),I=!0,k(),E=!0}})):k()}f.config.getConfig("currency",function(e){return C(e.currency)});function D(e,t){e(t.then(function(){return w.promise}))}var R=(0,b.timedBidResponseHook)("currency",function(e,t,r,n){if(!r)return e.call(this,t,r,n);var i=r.bidderCode||r.bidder;if(T[i]){var o=T[i];r.currency&&o!==r.currency?(0,u.logWarn)("Currency default '".concat(i,": ").concat(o,"' ignored. adapter specified '").concat(r.currency,"'")):r.currency=o}if(!r.currency&&((0,u.logWarn)('Currency not specified on bid.  Defaulted to "USD"'),r.currency="USD"),r.getCpmInNewCurrency=function(e){return(parseFloat(this.cpm)*N(this.currency,e)).toFixed(3)},r.currency===S)return e.call(this,t,r,n);y.push([e,this,t,r,n]),(!O||I)&&k()});function j(e){var t=e.auctionId;y=y.filter(function(e){var r=(0,s.default)(e,5),n=(r[0],r[1],r[2],r[3]),i=r[4];if(n.auctionId!==t)return!0;i(l.REJECTION_REASON.CANNOT_CONVERT_CURRENCY)})}function k(){for(;y.length>0;){var e=y.shift(),t=(0,s.default)(e,5),r=t[0],n=t[1],i=t[2],o=t[3],a=t[4];if(void 0!==o&&"currency"in o&&"cpm"in o){var d=o.currency;try{var c=N(d);1!==c&&(o.cpm=(parseFloat(o.cpm)*c).toFixed(4),o.currency=S)}catch(e){(0,u.logWarn)("getCurrencyConversion threw error: ",e),a(l.REJECTION_REASON.CANNOT_CONVERT_CURRENCY);continue}}r.call(n,i,o,a)}w.resolve()}function N(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S,n=null,i="".concat(e,"->").concat(r);if(i in A)n=A[i],(0,u.logMessage)("Using conversionCache value "+n+" for "+i);else if(!1===O){if("USD"===e)n=1;else throw Error("Prebid currency support has not been enabled and fromCurrency is not USD")}else if(e===r)n=1;else if(e in _.conversions){if(!(r in(t=_.conversions[e])))throw Error("Specified adServerCurrency in config '"+r+"' not found in the currency rates file");n=t[r],(0,u.logInfo)("getCurrencyConversion using direct "+e+" to "+r+" conversionRate "+n)}else if(r in _.conversions){if(!(e in(t=_.conversions[r])))throw Error("Specified fromCurrency '"+e+"' not found in the currency rates file");n=U(1/t[e],4),(0,u.logInfo)("getCurrencyConversion using reciprocal "+e+" to "+r+" conversionRate "+n)}else{var o=Object.keys(_.conversions)[0];if(!(e in _.conversions[o]))throw Error("Specified fromCurrency '"+e+"' not found in the currency rates file");var a=1/_.conversions[o][e];if(!(r in _.conversions[o]))throw Error("Specified adServerCurrency in config '"+r+"' not found in the currency rates file");n=U(a*_.conversions[o][r],4),(0,u.logInfo)("getCurrencyConversion using intermediate "+e+" thru "+o+" to "+r+" conversionRate "+n)}return!(i in A)&&((0,u.logMessage)("Adding conversionCache value "+n+" for "+i),A[i]=n),n}function U(e,t){for(var r=1,n=0;n<t;n++)r+="0";return Math.round(e*r)/r}function B(e,t,r){O&&(e.cur=e.cur||[r.currency||S])}(0,m.registerOrtbProcessor)({type:m.REQUEST,name:"currency",fn:B}),(0,c.registerModule)("currency")},568:function(e,t,r){"use strict";var n,i=r(1640),o=r(7251),a=i(r(9837)),s=i(r(4763)),d=r(9895),c=r(7328),u=r(4919),l=r(620),p=r(3136),f=r(3408),g=r(2778),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var r=I(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(56)),m=r(2885),b=r(2583),h=r(3495),y=r(1235),A=r(5505);function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(I=function(e){return e?r:t})(e)}var E={ri:b.getRefererInfo};function S(e){if(!e.params&&!e.url){(0,y.logError)("A params object or a url is required to use pbjs.adServers.dfp.buildVideoUrl");return}var t,r,n,i,o=e.adUnit,a=e.bid||h.targeting.getWinningBids(o.code)[0],d={};if(e.url&&(d=(0,y.parseUrl)(e.url,{noDecodeWholeURL:!0}),(0,y.isEmpty)(e.params)))return function(e,t,r){var n=_(t,e,"search");return n&&(e.search.description_url=n),e.search.cust_params=T(t,r,e.search.cust_params),(0,y.buildUrl)(e)}(d,a,e);var u={correlator:Date.now(),sz:(0,y.parseSizesInput)((0,y.deepAccess)(o,"mediaTypes.video.playerSize")).join("|"),url:encodeURIComponent(location.href)},f=d.search,g=f&&f.sz;g&&(u.sz=g+"|"+u.sz);var v=T(a,e,f&&f.cust_params),m=Object.assign({},A.DEFAULT_DFP_PARAMS,d.search,u,e.params,{cust_params:v},(0,A.gdprParams)()),b=_(a,e,"params");if(b&&(m.description_url=b),!m.ppid){var I=(0,l.getPPID)();null!=I&&(m.ppid=I)}var E=null===(t=e.adUnit)||void 0===t||null===(t=t.mediaTypes)||void 0===t?void 0:t.video;Object.entries({plcmt:function(){return null==E?void 0:E.plcmt},vpos:function(){var e=null==E?void 0:E.startdelay;if((0,y.isNumber)(e))return -2===e?"postroll":-1===e||e>0?"midroll":"preroll"},vpmute:function(){if(Array.isArray(null==E?void 0:E.playbackmethod)){var e=E.playbackmethod.some(function(e){return[2,6].includes(e)}),t=E.playbackmethod.some(function(e){return[1,3,4,5].includes(e)});if(e&&!t)return"1";if(t&&!e)return"0"}}}).forEach(function(e){var t=(0,s.default)(e,2),r=t[0],n=t[1];if(!m.hasOwnProperty(r)){var i=n();null!=i&&(m[r]=i)}});var S=null!==(r=null===(n=p.auctionManager.index.getBidRequest(e.bid||{}))||void 0===n?void 0:n.ortb2)&&void 0!==r?r:null===(i=p.auctionManager.index.getAuction(e.bid||{}))||void 0===i||null===(i=i.getFPD())||void 0===i?void 0:i.global,O=(0,c.getSignals)(S);return O.length&&(m.ppsj=btoa(JSON.stringify({PublisherProvidedTaxonomySignals:O}))),(0,y.buildUrl)(Object.assign({},A.DFP_ENDPOINT,d,{search:m}))}function O(e){e.call(this,"dfp")}f.config.getConfig("brandCategoryTranslation.translationFile")&&(0,m.getHook)("registerAdserver").before(O);function _(e,t,r){return(0,y.deepAccess)(t,"".concat(r,".description_url"))||encodeURIComponent(E.ri().page)}function T(e,t,r){var n=e&&e.adserverTargeting||{},i={},o=t&&t.adUnit;if(o){var s=h.targeting.getAllTargeting(o.code);i=s?s[o.code]:{}}var d=Object.assign({},{hb_uuid:e&&e.videoCacheKey},{hb_cache_id:e&&e.videoCacheKey},i,n);v.emit(g.EVENTS.SET_TARGETING,(0,a.default)({},o.code,d));var c=Object.assign({},d,(0,y.deepAccess)(t,"params.cust_params")),u=encodeURIComponent((0,y.formatQS)(c));return r&&(u=r+"%26"+u),u}(0,u.registerVideoSupport)("dfp",{buildVideoUrl:S}),(0,d.registerModule)("dfpAdServerVideo")},3457:function(e,t,r){"use strict";var n,i=r(9895),o=r(1235),a=r(721),s=r(2885),d=r(2583);function c(e,t){if(t){var r=t.split("?")[0];if(e.has(r)){var n=e.get(r);t.length>n.length&&e.set(r,t)}else e.set(r,t)}}function u(e,t,r,n){var i=n&&n.maxUrlLen||2e3,o=n&&n.maxRefLen||1e3,a=n&&n.maxSpaceAvailable||50;if(!r||!(e.length<i-a))return e;var s=i-e.length;return s>o&&(s=o),(r="&".concat(t,"=").concat(encodeURIComponent(r))).length>=s&&("%"===(r=r.substring(0,s)).charAt(r.length-1)?r=r.substring(0,s-1):"%"===r.charAt(r.length-2)&&(r=r.substring(0,s-2))),"".concat(e).concat(r)}(0,s.submodule)("userId",{name:"fabrickId",decode:function(e){return e&&e.fabrickId?{fabrickId:e.fabrickId}:void 0},getId:function(e,t,r){try{var n=e&&e.params||{};if(window.fabrickMod1&&window.fabrickMod1(n,t,r),!n||!n.apiKey||"string"!=typeof n.apiKey){(0,o.logError)("fabrick submodule requires an apiKey.");return}try{var i=function(e){return e.url?e.url:"https://fid.agkn.com/f?"}(n),s=Object.keys(n);for(var l in s){var p=s[l];if("url"!==p&&"refererInfo"!==p&&(!(p.length>3)||"max"!==p.substring(0,3))){var f=n[p];if(Array.isArray(f))for(var g in f)("string"==typeof f[g]||"number"==typeof f[g])&&(i+="".concat(p,"=").concat(f[g],"&"));else("string"==typeof f||"number"==typeof f)&&(i+="".concat(p,"=").concat(f,"&"))}}i=i.slice(0,-1);var v=function(e){return e.refererInfo?e.refererInfo:(0,d.getRefererInfo)()}(n),m=new Map;c(m,v.topmostLocation),v.stack&&v.stack[0]&&c(m,v.stack[0]),c(m,v.canonicalUrl),c(m,window.location.href),m.forEach(function(e){i=u(i,"r",e,n)});return{callback:function(e){(0,a.ajax)(i,{success:function(i){var a;if(window.fabrickMod2)return window.fabrickMod2(e,i,n,t,r);if(i)try{a=JSON.parse(i)}catch(e){(0,o.logError)(e),a={}}e(a)},error:function(t){(0,o.logError)("fabrickId fetch encountered an error",t),e()}},null,{method:"GET",withCredentials:!0})}}}catch(e){(0,o.logError)("fabrickIdSystem encountered an error",e)}}catch(e){(0,o.logError)("fabrickIdSystem encountered an error",e)}},eids:{fabrickId:{source:"neustar.biz",atype:1}}}),(0,i.registerModule)("fabrickIdSystem")},1517:function(e,t,r){"use strict";var n,i=r(7251),o=r(9895),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=i(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(1235)),s=r(2885),d=r(4288),c=r(9293),u=r(8427),l=r(5723);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}var f="ftrackId",g="FTRACK - ",v="html5",m="ftrackId",b="".concat(m,"_privacy"),h=(0,d.getStorageManager)({moduleType:l.MODULE_TYPE_UID,moduleName:f}),y={gdpr:{applies:0,consentString:null,pd:null},usPrivacy:{value:null}};(0,s.submodule)("userId",{name:"ftrack",decode:function(e,t){if(!!e){var r={ftrackId:{uid:"",ext:{}}};for(var n in e){var i=e[n];Array.isArray(i)?i=i.join("|"):"string"!=typeof e[n]&&(i=""),r.ftrackId.ext[n]=i}return r.ftrackId.ext.hasOwnProperty("DeviceID")&&(r.ftrackId.uid=r.ftrackId.ext.DeviceID),r}},getId:function(e,t,r){if(!1!==this.isConfigOk(e)&&!1!==this.isThereConsent(t))return{callback:function(t){window.D9v={UserID:"99999999999999",CampID:"3175",CCampID:"148556"},window.D9r={callback:function(e){return e&&(h.setDataInLocalStorage("".concat(m,"_exp"),new Date(Date.now()+2592e6).toUTCString()),h.setDataInLocalStorage("".concat(m),JSON.stringify(e)),h.setDataInLocalStorage("".concat(b,"_exp"),new Date(Date.now()+2592e6).toUTCString()),h.setDataInLocalStorage("".concat(b),JSON.stringify(y))),"function"==typeof t&&t(e),e}},e.params.hasOwnProperty("ids")?(e.params.ids.hasOwnProperty("device id")&&!0===e.params.ids["device id"]&&(window.D9r.DeviceID=!0),e.params.ids.hasOwnProperty("single device id")&&!0===e.params.ids["single device id"]&&(window.D9r.SingleDeviceID=!0),e.params.ids.hasOwnProperty("household id")&&!0===e.params.ids["household id"]&&(window.D9r.HHID=!0)):(window.D9r.DeviceID=!0,window.D9r.SingleDeviceID=!0),(0,u.loadExternalScript)(e.params.url,l.MODULE_TYPE_UID,f)}}},extendId:function(e,t,r){return this.isConfigOk(e),r},isConfigOk:function(e){return e.storage&&e.storage.type&&e.storage.name?(e.storage.type!==v&&a.logWarn(g+'config.storage.type recommended to be "'+v+'".'),e.storage.name!==m&&a.logWarn(g+'config.storage.name recommended to be "'+m+'".'),!!(e.hasOwnProperty("params")&&e.params.hasOwnProperty("url"))||(a.logWarn(g+"config.params.url is required for ftrack to run."),!1)):(a.logError(g+"config.storage required to be set."),!1)},isThereConsent:function(e){var t,r,n=!0;e&&e.gdprApplies&&(!0===e.gdprApplies||1===e.gdprApplies)&&(y.gdpr.applies=1,n=!1),e&&"undefined"!==e.consentString&&!a.isEmpty(e.consentString)&&!a.isEmptyStr(e.consentString)&&(y.gdpr.consentString=e.consentString);var i=c.uspDataHandler.getConsentData();return void 0!==i&&!a.isEmpty(i)&&!a.isEmptyStr(i)&&(y.usPrivacy.value=i,t=i[0],r=i[2]),1==t&&"Y"===r&&(n=!1),n},eids:{ftrackId:{source:"flashtalking.com",atype:1,getValue:function(e){var t="";return e&&e.ext&&e.ext.DeviceID&&(t=e.ext.DeviceID),t},getUidExt:function(e){return e&&e.ext}}}}),(0,o.registerModule)("ftrackIdSystem")},3916:function(e,t,r){"use strict";var n,i=r(1640),o=i(r(7251)),a=i(r(4763)),s=r(9895),d=i(r(4047)),c=r(1235),u=r(56),l=i(r(9293)),p=r(721),f={batchSize:1,batchDelay:100,method:"POST"},g={handler:"function",batchSize:"number",batchDelay:"number",gvlid:"number"};function v(){var e,t,r,n,i=(0,d.default)({analyticsType:"endpoint"}),s=(0,c.prefixLog)("Generic analytics:"),l=s.logError,p=s.logWarn,v=[],b=0;function h(){var e=v;v=[],b++;try{if(20===b&&l("detected probable infinite recursion, discarding events",e),b>=20)return;try{t(e)}catch(e){l("error executing options.handler",e)}}finally{b--}}return Object.assign(Object.create(i),{gvlid:function(e){var t;return null==e||null===(t=e.options)||void 0===t?void 0:t.gvlid},enableAnalytics:function(r){if(function(e){if(!e.url&&!e.handler)return l("options must specify either `url` or `handler`"),!1;if(e.hasOwnProperty("method")&&!["GET","POST"].includes(e.method))return l("options.method must be GET or POST"),!1;for(var t=0,r=Object.entries(g);t<r.length;t++){var n=(0,a.default)(r[t],2),i=n[0],s=n[1];if(e.hasOwnProperty(i)&&(0,o.default)(e[i])!==s)return l("options.".concat(i," must be a ").concat(s)),!1}if(e.hasOwnProperty("events")){if(!(0,c.isPlainObject)(e.events))return l("options.events must be an object"),!1;for(var d=0,f=Object.entries(e.events);d<f.length;d++){var v=(0,a.default)(f[d],2),m=v[0],b=v[1];if(!(0,u.has)(m)&&p("options.events.".concat(m," does not match any known Prebid event")),"function"!=typeof b)return l("options.events.".concat(m," must be a function")),!1}}return!0}((null==r?void 0:r.options)||{})){var s;t=(e=Object.assign({},f,r.options)).handler||m(e),n=(s=e.events)?function(e){var t=e.eventType,r=e.args;if(s.hasOwnProperty(t))try{return s[t](r)}catch(e){l("error executing options.events.".concat(t),e)}}:function(e){return e},i.enableAnalytics.call(this,r)}},track:function(t){var i=n(t);null!=i&&(v.push(i),null!=r&&(clearTimeout(r),r=null),v.length>=e.batchSize?h():r=setTimeout(h,e.batchDelay))}})}function m(e){var t=e.url,r=e.method,n=e.batchSize,i=e.ajax,o=void 0===i?(0,p.ajaxBuilder)():i,a={success:function(){},error:function(){}},s=n>1?function(e){return e}:function(e){return e[0]},d="GET"===r?function(e){return{data:JSON.stringify(e)}}:function(e){return JSON.stringify(e)};return function(e){o(t,a,d(s(e)),{method:r,keepalive:!0})}}l.default.registerAnalyticsAdapter({adapter:v(),code:"generic"}),(0,s.registerModule)("genericAnalyticsAdapter")},4131:function(e,t,r){"use strict";var n,i=r(9895),o=r(7328),a=r(3136),s=r(3408),d=r(2778),c=r(2885),u=r(7448),l=r(1235),p=void 0,f={},g=!1;function v(e){return(0,o.getSignals)(e)}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.auctionManager.index;return e.map(function(e){var r;return null===(r=t.getAuction({auctionId:e}))||void 0===r||null===(r=r.getFPD())||void 0===r?void 0:r.global}).map(v).filter(function(e){return e})}function b(e){var t={};return o.taxonomies.forEach(function(r){var n=e.flatMap(function(e){return e}).filter(function(e){return e.taxonomy===r}).map(function(e){return e.values});t[r]=n.length?n.reduce(function(e,t){return e.filter(function(e){return t.includes(e)})}):[],t[r]={values:t[r]}}),t}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.auctionManager;return Object.values(e).flatMap(function(e){return Object.entries(e)}).filter(function(e){return e[0]===d.TARGETING_KEYS.AD_ID||e[0].startsWith(d.TARGETING_KEYS.AD_ID+"_")}).flatMap(function(e){return e[1]}).map(function(e){var r;return null===(r=t.findBidByAdId(e))||void 0===r?void 0:r.auctionId}).filter(function(e){return null!=e}).filter(l.uniques)}var y=function(e){var t=f.customGptSlotMatching;if(!!(0,l.isGptPubadsDefined)()){var r=e.reduce(function(e,t){return e[t.code]=e[t.code]||[],e[t.code].push(t),e},{}),n={};return window.googletag.pubads().getSlots().forEach(function(e){var i=(0,u.find)(Object.keys(r),t?t(e):(0,l.isAdUnitCodeMatchingSlot)(e));if(i){var o={name:"gam",adslot:A(n[i]=e.getAdUnitPath())};r[i].forEach(function(e){var t;(0,l.deepSetValue)(e,"ortb2Imp.ext.data.adserver",Object.assign({},null===(t=e.ortb2Imp)||void 0===t||null===(t=t.ext)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.adserver,o))})}}),n}},A=function(e){return(s.config.getConfig("gptPreAuction")||{}).mcmEnabled?e.replace(/(^\/\d*),\d*\//,"$1/"):e},I=function(e,t,r){var n=e.ortb2Imp.ext.data;if(n.pbadslot)return n.pbadslot;if(!!(0,l.isGptPubadsDefined)()){var i=window.googletag.pubads().getSlots().filter(function(e){return e.getAdUnitPath()===r});return 0===i.length?void 0:1===i.length?t:"".concat(t,"#").concat(e.code)}},E=function(e){var t=e.ortb2Imp.ext.data,r=f.customPbAdSlot;if(!t.pbadslot){if(r){t.pbadslot=r(e.code,(0,l.deepAccess)(t,"adserver.adslot"));return}try{var n=document.getElementById(e.code);if(n.dataset.adslotid){t.pbadslot=n.dataset.adslotid;return}}catch(e){}if((0,l.deepAccess)(t,"adserver.adslot")){t.pbadslot=t.adserver.adslot;return}return t.pbadslot=e.code,!0}};function S(e){(0,l.logWarn)("pbadslot is deprecated and will soon be removed, use gpid instead",e)}var O=function(e,t){var r=y(t),n=f,i=n.useDefaultPreAuction,o=n.customPreAuction;t.forEach(function(e){e.ortb2Imp=e.ortb2Imp||{},e.ortb2Imp.ext=e.ortb2Imp.ext||{},e.ortb2Imp.ext.data=e.ortb2Imp.ext.data||{};var t=e.ortb2Imp.ext;if(o||i){null!==(n=t.data)&&void 0!==n&&n.pbadslot&&S(e);var n,a,s=(0,l.deepAccess)(t,"data.adserver.adslot");o?a=o(e,s,null==r?void 0:r[e.code]):i&&(a=I(e,s,null==r?void 0:r[e.code])),a&&(t.gpid=t.data.pbadslot=a)}else{S(e);var d=E(e);!t.gpid&&!d&&(t.gpid=t.data.pbadslot)}});for(var a=arguments.length,s=Array(a>2?a-2:0),d=2;d<a;d++)s[d-2]=arguments[d];return e.call.apply(e,[p,t].concat(s))},_=function(e,t){var r=b(m(h(t)));window.googletag.setConfig&&window.googletag.setConfig({pps:{taxonomies:r}}),e(t)},T=function(e){(f=(0,l.pick)(e,["enabled",function(e){return!1!==e},"customGptSlotMatching",function(e){return"function"==typeof e&&e},"customPbAdSlot",function(e){return"function"==typeof e&&e},"customPreAuction",function(e){return"function"==typeof e&&e},"useDefaultPreAuction",function(e){return null==e||e}])).enabled?!g&&((0,c.getHook)("makeBidRequests").before(O),(0,c.getHook)("targetingDone").after(_),g=!0):((0,l.logInfo)("".concat("GPT Pre-Auction",": Turning off module")),f={},(0,c.getHook)("makeBidRequests").getHooks({hook:O}).remove(),(0,c.getHook)("targetingDone").getHooks({hook:_}).remove(),g=!1)};s.config.getConfig("gptPreAuction",function(e){return T(e.gptPreAuction)}),T({}),(0,i.registerModule)("gptPreAuction")},552:function(e,t,r){"use strict";var n,i=r(1640),o=i(r(4973)),a=i(r(7251)),s=i(r(4763)),d=i(r(4995)),c=i(r(9837)),u=r(9895),l=r(1235),p=r(721),f=r(1634),g=r(4389),v=r(8705),m=r(3408),b=r(4288),h=r(3548),y=["mind","maxd","size","playerSize","protocols","durationRangeSec"];function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach(function(t){(0,c.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var E="grid",S="https://grid.bidswitch.net/hbjson",O="https://x.bidswitch.net/sync?ssp=themediagrid",_="tmguid",T=(0,b.getStorageManager)({bidderCode:E}),w={noAdid:"Bid from response has no adid parameter - ",noAdm:"Bid from response has no adm parameter - ",noBid:"Array of bid objects is empty",emptyUids:"Uids should be not empty",emptySeatbid:"Seatbid array from response has empty item",emptyResponse:"Response is empty",hasEmptySeatbidArray:"Response has empty seatbid array",hasNoArrayOfBids:"Seatbid from response has no array of bid objects - "},C={trustx:{endpoint:"https://grid.bidswitch.net/hbjson?sp=trustx",syncurl:"https://x.bidswitch.net/sync?ssp=themediagrid",bidResponseExternal:{netRevenue:!1}},gridNM:{defaultParams:{multiRequest:!0}}},x=!1,P={code:E,gvlid:686,aliases:["playwire","adlivetech","gridNM",{code:"trustx",skipPbsAliasing:!0}],supportedMediaTypes:[v.BANNER,v.VIDEO],isBidRequestValid:function(e){return e&&!!(e.params.uid||e.params.secid)},buildRequests:function(e,t){if(!e.length)return null;var r,n,i=null,c=null,u=null,p=null,f=null,g=null,b=null,h=!1,A=t||{},E=A.bidderRequestId,O=A.gdprConsent,w=A.uspConsent,x=A.timeout,P=A.refererInfo,D=A.gppConsent,R=P?encodeURIComponent(P.page):"",j=parseInt(x)||null,k=[],N={},U=[],B=[],M=[];e.forEach(function(e){var r={bid:e,savedPrebidBid:null};if(!!e.params.uid||!!e.params.secid){!E&&(E=e.bidderRequestId),!u&&(u=e.schain),!p&&(p=e.userIdAsEids),!b&&(b=C[e.bidder]&&C[e.bidder].endpoint);var n=e.params,d=e.mediaTypes,f=e.bidId,g=e.adUnitCode,m=e.rtd,A=e.ortb2Imp,S=I(I({},(C[e.bidder]||{}).defaultParams),n),O=S.secid,_=S.pubid,T=S.source,w=S.uid,x=S.keywords,P=S.forceBidder,D=S.multiRequest,V=S.content,q=S.video,L=function(e,t){var r=e.video?"video":"banner",n=parseFloat(t.params.bidFloor||t.params.floorcpm||0)||null;if("function"==typeof t.getFloor){var i=t.getFloor({currency:"USD",mediaType:r,size:t.sizes.map(function(e){var t=(0,s.default)(e,2);return{w:t[0],h:t[1]}})});"object"===(0,a.default)(i)&&"USD"===i.currency&&!isNaN(parseFloat(i.floor))&&(n=Math.max(n,parseFloat(i.floor)))}return n}(d||{},e),F=m&&m.jwplayer&&m.jwplayer.targeting;F&&!c&&F.content&&(c=F.content);var G={id:f.toString(),tagid:(O||w).toString(),ext:{divid:g.toString()}};if(A&&(A.instl&&(G.instl=parseInt(A.instl)||null),A.ext&&(G.ext.gpid=(null===(Y=A.ext.gpid)||void 0===Y?void 0:Y.toString())||(null===(H=A.ext.data)||void 0===H||null===(H=H.pbadslot)||void 0===H?void 0:H.toString())||(null===(J=A.ext.data)||void 0===J||null===(J=J.adserver)||void 0===J||null===(J=J.adslot)||void 0===J?void 0:J.toString()),A.ext.data&&(G.ext.data=A.ext.data))),!(0,l.isEmpty)(x)&&(!i&&(i=x),G.ext.bidder={keywords:x}),L&&(G.bidfloor=L),!d||d[v.BANNER]){var z=function(e,t){var r=t.sizes||e.sizes;if(r&&r.length){var n=r.map(function(e){return(0,l.parseGPTSingleSizeArrayToRtbSize)(e)}),i=(0,l.parseGPTSingleSizeArrayToRtbSize)(r[0]);return n.length&&(i.format=n),i}}(e,d?d[v.BANNER]:{});z&&(G.banner=z)}if(d&&d[v.VIDEO]){var W=function(e,t,r){var n=I(I({},t),e),i=n.mind,a=n.maxd,s=n.size,d=n.playerSize,c=n.protocols,u=n.durationRangeSec,p=void 0===u?[]:u,f=(0,o.default)(n,y);if(s&&(0,l.isStr)(s)){var g=s.split("x");2===g.length&&parseInt(g[0])&&parseInt(g[1])&&(f.w=parseInt(g[0]),f.h=parseInt(g[1]))}if(!f.w||!f.h){var v=((d||r||[]).toString().match(/^\d+,\d+/)||[])[0],m=v&&v.split(",").map(function(e){return parseInt(e)});m&&2===m.length&&Object.assign(f,(0,l.parseGPTSingleSizeArrayToRtbSize)(m))}if(f.w&&f.h){var b=i||p[0]||parseInt(f.minduration)||null,h=a||p[1]||parseInt(f.maxduration)||null;return b&&(f.minduration=b),h&&(f.maxduration=h),c&&c.length&&(f.protocols=c),f}}(q,d[v.VIDEO],e.sizes);W&&(G.video=W)}if(G.banner||G.video){if(D){var Y,H,J,K,Q,$={tid:null==t||null===(K=t.ortb2)||void 0===K||null===(K=K.source)||void 0===K||null===(K=K.tid)||void 0===K||null===(Q=K.toString)||void 0===Q?void 0:Q.call(K),ext:{wrapper:"Prebid_js",wrapper_version:"9.17.0"}};e.schain&&($.ext.schain=e.schain);var X={id:e.bidderRequestId&&e.bidderRequestId.toString(),site:{page:R},tmax:j,source:$,imp:[G]};_&&(X.site.publisher={id:_});var Z=V||F&&F.content;Z&&(X.site.content=Z),U.push(X),B.push(T),M.push(r)}else N[f]=r,k.push(G)}!h&&P&&C[P]&&(h=P)}}),(h=m.config.getConfig("forceBidderName")||h)&&C[h]&&(b=C[h].endpoint,this.forceBidderName=h);var V={tid:null==t||null===(r=t.ortb2)||void 0===r||null===(r=r.source)||void 0===r||null===(r=r.tid)||void 0===r||null===(n=r.toString)||void 0===n?void 0:n.call(r),ext:{wrapper:"Prebid_js",wrapper_version:"9.17.0"}};u&&(V.ext.schain=u);var q=k.length||!U.length?{id:E&&E.toString(),site:{page:R},tmax:j,source:V,imp:k}:null;return c&&(q.site.content=c),[].concat(U,[q]).forEach(function(e){if(!!e){f=null;var r=(0,l.deepAccess)(t,"ortb2.user.data");r&&r.length&&(f={data:(0,d.default)(r)}),O&&O.consentString&&(g={consent:O.consentString});var n=(0,l.deepAccess)(t,"ortb2.user.ext.device");n&&((g=g||{}).device=I({},n)),null!=t&&null!==(v=t.ortb2)&&void 0!==v&&v.device&&(e.device=t.ortb2.device),p&&p.length&&((g=g||{}).eids=(0,d.default)(p)),g&&Object.keys(g).length&&((f=f||{}).ext=g);var o=function(){return T.getDataFromLocalStorage(_)||function(){if(m.config.getConfig("localStorageWriteAllowed")){var e=(0,l.generateUUID)().replace(/-/g,"");return T.setDataInLocalStorage(_,e),e}return null}()}();o&&((f=f||{}).id=o.toString()),f&&(e.user=f);var s=(0,l.deepAccess)(t,"ortb2.user.keywords")||null,c=(0,l.deepAccess)(t,"ortb2.site.keywords")||null;s&&((i=i||{}).user=i.user||{},i.user.ortb2=[{name:"keywords",keywords:s.split(",")}]),c&&((i=i||{}).site=i.site||{},i.site.ortb2=[{name:"keywords",keywords:c.split(",")}]),i&&(i=function(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];if(n){if("site"===r||"user"===r){var i={};Object.keys(n).forEach(function(e){if(Array.isArray(n[e])){var t=[];n[e].forEach(function(e){if("object"===(0,a.default)(e)&&e.name){var r={name:e.name,segments:[]};Object.keys(e).forEach(function(t){Array.isArray(e[t])&&e[t].forEach(function(e){e&&("string"==typeof e?r.segments.push({name:t,value:e}):"segments"===t&&"string"==typeof e.name&&"string"==typeof e.value&&r.segments.push(e))})}),r.segments.length&&t.push(r)}}),t.length&&(i[e]=t)}}),t[r]=i}else t[r]=n}}),Object.keys(t).length&&t}(i))&&(e.ext={keywords:i}),O&&O.gdprApplies&&(e.regs={ext:{gdpr:O.gdprApplies?1:0}});var u=(0,l.deepAccess)(t,"ortb2.regs")||{};if(D||null!=u&&u.gpp){var v,b,h,y,A,E={gpp:null!==(h=null==D?void 0:D.gppString)&&void 0!==h?h:null==u?void 0:u.gpp,gpp_sid:null!==(y=null==D?void 0:D.applicableSections)&&void 0!==y?y:null==u?void 0:u.gpp_sid};e.regs=(0,l.mergeDeep)(null!==(A=null==e?void 0:e.regs)&&void 0!==A?A:{},E)}w&&(!e.regs&&(e.regs={ext:{}}),!e.regs.ext&&(e.regs.ext={}),e.regs.ext.us_privacy=w),!0===m.config.getConfig("coppa")&&(!e.regs&&(e.regs={}),e.regs.coppa=1),null!=u&&null!==(b=u.ext)&&void 0!==b&&b.dsa&&(!e.regs&&(e.regs={ext:{}}),!e.regs.ext&&(e.regs.ext={}),e.regs.ext.dsa=u.ext.dsa);var S=(0,l.deepAccess)(t,"ortb2.site");if(S){var C=[].concat((0,d.default)(S.cat||[]),(0,d.default)(S.pagecat||[])).filter(function(e){return e&&"string"==typeof e});C.length&&(e.site.cat=C);var x=(0,l.deepAccess)(S,"content.genre");x&&"string"==typeof x&&(e.site.content=I(I({},e.site.content),{},{genre:x}));var P=(0,l.deepAccess)(S,"content.data");if(P&&P.length){var R=e.site.content||{};e.site.content=(0,l.mergeDeep)(R,{data:P})}var j=(0,l.deepAccess)(S,"content.id");j&&(e.site.content=I(I({},e.site.content),{},{id:j}))}}}),[].concat((0,d.default)(U.map(function(e,t){var r,n=(b||S).replace(/[?&]sp=([^?&=]+)/,function(e,t){return t&&(r=t),""}),i=B[t]||r;return{method:"POST",url:n+(n.indexOf("?")>-1?"&":"?")+"no_mapping=1"+(i?"&sp=".concat(i):""),data:JSON.stringify(e),bidObject:M[t]}})),(0,d.default)(q?[{method:"POST",url:b||S,data:JSON.stringify(q),bidsMap:N}]:[]))},interpretResponse:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.Renderer;e=e&&e.body;var i=[];e?e.seatbid&&!e.seatbid.length&&(r=w.hasEmptySeatbidArray):r=w.emptyResponse;var o=this.forceBidderName||this.code;return!r&&e.seatbid&&e.seatbid.forEach(function(e){(function(e,t,r,n,i){if(e){if(!e.adid&&(o=w.noAdid+JSON.stringify(e)),o||e.adm||e.nurl){var o,a=t.bidsMap?t.bidsMap[e.impid]:t.bidObject,s=a||{},d=s.bid,c=s.savedPrebidBid;if(d&&function(e,t){return!(0,l.isNumber)(t)||e>t||e===t&&Math.random()>.5}(e.price,c&&c.cpm)){var u={requestId:d.bidId,cpm:e.price,width:e.w,height:e.h,creativeId:e.adid,currency:"USD",netRevenue:!0,ttl:360,meta:{advertiserDomains:e.adomain?e.adomain:[]},dealId:e.dealid};a.savedPrebidBid=u,e.ext&&e.ext.bidder&&e.ext.bidder.grid&&e.ext.bidder.grid.demandSource&&(u.adserverTargeting={hb_ds:e.ext.bidder.grid.demandSource},u.meta.demandSource=e.ext.bidder.grid.demandSource),e.ext&&e.ext.dsa&&(u.meta.dsa=e.ext.dsa),"video"===e.content_type?(e.adm?(u.vastXml=e.adm,u.adResponse={content:u.vastXml}):e.nurl&&(u.vastUrl=e.nurl),u.mediaType=v.VIDEO,!d.renderer&&(!d.mediaTypes||!d.mediaTypes.video||"outstream"===d.mediaTypes.video.context)&&(u.renderer=function(e,t,r){var n=r.install({id:t.id,url:t.url,loaded:!1});try{n.setRender(D)}catch(e){(0,l.logWarn)("Prebid Error calling setRender on renderer",e)}return n}(u,{id:d.bidId,url:"https://acdn.adnxs.com/video/outstream/ANOutstreamVideo.js"},n))):(u.ad=e.adm,u.mediaType=v.BANNER);var p=C[i]&&C[i].bidResponseExternal||{};r.push((0,l.mergeDeep)(u,p))}}else o=w.noAdm+JSON.stringify(e);o&&(0,l.logError)(o)}})((0,h.getBidFromResponse)(e,w),t,i,n,o)}),r&&(0,l.logError)(r),i},getUserSyncs:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t[0],i=t[2],o=t[3];if(!x&&n.pixelEnabled){var a="";i&&("boolean"==typeof i.gdprApplies&&(a+="&gdpr=".concat(Number(i.gdprApplies))),"string"==typeof i.consentString&&(a+="&gdpr_consent=".concat(i.consentString))),o&&(a+="&us_privacy=".concat(o));var s=this.forceBidderName||this.code,d=C[s]&&C[s].syncurl||O;return x=!0,{type:"image",url:d+a}}},ajaxCall:function(e,t,r,n){return n.browsingTopics=!1,(0,p.ajax)(e,t,r,n)},onDataDeletionRequest:function(e){P.ajaxCall("https://media.grid.bidswitch.net/uspapi_delete_c2s",null,null,{method:"GET"})}};function D(e){e.renderer.push(function(){window.ANOutstreamVideo.renderAd({targetId:e.adUnitCode,adResponse:e.adResponse})})}(0,f.registerBidder)(P),(0,u.registerModule)("gridBidAdapter")},9635:function(e,t,r){"use strict";var n,i=r(1640),o=i(r(9837)),a=i(r(7251)),s=i(r(4763)),d=r(9895),c=r(8705),u=r(1235),l=r(3408),p=r(4288),f=r(7448),g=r(1634);function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var h="gumgum",y=(0,p.getStorageManager)({bidderCode:h}),A={t:0,rq:8,pbv:"9.17.0"},I=[c.BANNER,c.VIDEO],E=["dac.co.jp","audigent.com","id5-sync.com","liveramp.com","intentiq.com","liveintent.com","crwdcntrl.net","quantcast.com","adserver.org","yahoo.com"],S={},O=null;function _(e){var t=0,r=0,n=0;return e.forEach(function(e){var i=(0,s.default)(e,2),o=i[0],a=i[1],d=o>a?o:a;(d>n||d===n&&o>=t&&a>=r)&&(n=d,t=o,r=a)}),[t,r]}function T(e){if(e.content&&Array.isArray(e.content.data)){var t,r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return v(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?v(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(e.content.data);try{for(r.s();!(t=r.n()).done;){var n=t.value;if((n.name.includes("iris.com")||n.name.includes("iris.tv"))&&n.ext&&Array.isArray(n.ext.cids)&&n.ext.cids.length>0)return n.ext.cids.join(",")}}catch(e){r.e(e)}finally{r.f()}}return null}function w(e,t,r){var n=T(t);n?e.irisid=n:r.irisid&&"string"==typeof r.irisid&&(e.irisid=r.irisid)}(0,g.registerBidder)({code:h,gvlid:61,aliases:["gg"],isBidRequestValid:function(e){var t=e.params,r=e.adUnitCode,n=t.inScreen||t.inScreenPubID||t.inSlot||t.ICV||t.video||t.inVideo||t.slot||t.native||t.zone||t.pubID;if(S[n])return(0,u.logWarn)("[GumGum] Please check the implementation for ".concat(n," for the placement ").concat(r)),!1;switch(!0){case!!t.zone:case!!t.pubId:case!!t.inScreen:case!!t.inScreenPubID:case!!t.inSlot:case!!t.ICV:case!!t.video:case!!t.inVideo:case!!t.videoPubID:break;default:return(0,u.logWarn)("[GumGum] No product selected for the placement ".concat(r,", please check your implementation.")),!1}return!t.bidfloor||!!("number"==typeof t.bidfloor&&isFinite(t.bidfloor))||((0,u.logWarn)("[GumGum] bidfloor must be a Number"),!1)},buildRequests:function(e,t){var n=[],i=t&&t.gdprConsent,o=t&&t.uspConsent,d=t&&t.gppConsent,c=t&&t.timeout,p=!0===l.config.getConfig("coppa")?1:0,f=t&&t.refererInfo&&t.refererInfo.page,g=t&&t.refererInfo&&t.refererInfo.topmostLocation;return(0,u._each)(e,function(e){var l,v,m,h,I,S,T,C,x,P,D,R,j,k,N,U,B,M,V,q,L,F,G,z,W,Y=e.bidId,H=e.mediaTypes,J=void 0===H?{}:H,K=e.params,Q=void 0===K?{}:K,$=e.schain,X=e.userId,Z=void 0===X?{}:X,ee=e.ortb2Imp,et=e.adUnitCode,er=void 0===et?"":et,en=function(e,t,r){var n=Object.keys(e)[0]||"banner",i={floor:0,currency:"USD"};if("function"==typeof r.getFloor){var o=r.getFloor({mediaType:n,size:"*"}),a=o.currency,s=o.floor;s&&(i.floor=s),a&&(i.currency=a),t&&s&&"USD"===a&&(i.floor=Math.max(t,parseFloat(s)))}else t&&(i.floor=t);return i}(J,Q.bidfloor,e),ei=en.currency,eo=en.floor;var ea=(ev=["uid","eid","lipbid","envelope"],Object.keys(eg=Z).reduce(function(e,t){var r=eg[t];switch((0,a.default)(r)){case"string":e[t]=r;break;case"object":var n=ev.filter(function(e){return r.hasOwnProperty(e)});n.length&&(e[t]=r[n[0]])}return e},{})),es=(0,u.deepAccess)(ee,"ext.gpid")||(0,u.deepAccess)(ee,"ext.data.pbadslot"),ed=1===(0,u.deepAccess)(ee,"ext.ae"),ec=[1,1],eu={};eu.displaymanager="Prebid.js - gumgum",eu.displaymanagerver="9.17.0";var el=new Date,ep=el.getTime(),ef=el.getTimezoneOffset();eu.lt=ep,eu.to=ef;if(Z&&Z.pubProvidedId){var eg,ev,em,eb,eh,ey=Z.pubProvidedId.filter(function(e){return E.includes(e.source)});var eA=(eb=1800,(eh=JSON.stringify(em=ey)).length<=1800?eh:eh=JSON.stringify(em.slice(0,Math.floor(em.length*(eb/eh.length)))));eu.pubProvidedId=eA}for(var eI in Z&&Z.id5id&&Z.id5id.uid&&Z.id5id.ext&&(eu.id5Id=Z.id5id.uid||null,eu.id5IdLinkType=Z.id5id.ext.linkType||null),er&&(eu.aun=er),ea)eu[eI]=ea[eI];if(J.banner)ec=J.banner.sizes;else if(J.video){;ec=J.video.playerSize,v=(l=J.video).minduration,m=l.maxduration,h=l.linearity,I=l.startdelay,S=l.placement,T=l.plcmt,x=void 0===(C=l.protocols)?[]:C,P=l.playerSize,R=(D=(0,u.parseSizesInput)(void 0===P?[]:P))[0]&&D[0].split("x"),k=(j=(0,s.default)(R,2))[0],N=j[1],U="",x.length&&(U=x.join(",")),B={mind:v,maxd:m,li:h,sd:I,pt:S,pr:U,viw:k,vih:N},null!=T&&(B.vplcmt=T),eu=B}if(es&&(eu.gpid=es),O&&(eu.pv=O),eo&&(eu.fp=eo,eu.fpc=ei),t&&t.ortb2&&t.ortb2.site&&w(eu,t.ortb2.site,Q),Q.iriscat&&"string"==typeof Q.iriscat&&(eu.iriscat=Q.iriscat),Q.zone||Q.pubId){if(Q.zone?eu.t=Q.zone:eu.pubId=Q.pubId,eu.pi=2,Q.slot){var eE=_(ec),eS=(0,s.default)(eE,2),eO=eS[0],e_=eS[1];eu.maxw=eO,eu.maxh=e_,eu.si=Q.slot,eu.pi=3,eu.bf=ec.reduce(function(e,t){return"".concat(e).concat(e&&",").concat(t[0],"x").concat(t[1])},"")}else Q.native?(eu.ni=Q.native,eu.pi=5):J.video?eu.pi=2===J.video.linearity?6:7:Q.product&&"skins"===Q.product.toLowerCase()&&(eu.pi=8)}else eu=b(b({},eu),function(e,t){var r={};if(e.inScreenPubID&&(r.pubId=e.inScreenPubID,r.pi=2),e.inScreen&&(r.t=e.inScreen,r.pi=2),e.inSlot){var n=_(t),i=(0,s.default)(n,2),o=i[0],a=i[1];r.maxw=o,r.maxh=a,r.si=e.inSlot,r.pi=3,r.bf=t.reduce(function(e,t){return"".concat(e).concat(e&&",").concat(t[0],"x").concat(t[1])},"")}return e.ICV&&(r.ni=e.ICV,r.pi=5),e.videoPubID&&(r.pubId=e.videoPubID,r.pi=7),e.video&&(r.t=e.video,r.pi=7),e.inVideo&&(r.t=e.inVideo,r.pi=6),r}(Q,ec));ed&&(eu.ae=ed),i&&(eu.gdprApplies=i.gdprApplies?1:0),eu.gdprApplies&&(eu.gdprConsent=i.consentString),o&&(eu.uspConsent=o),d?(eu.gppString=t.gppConsent.gppString?t.gppConsent.gppString:"",eu.gppSid=Array.isArray(t.gppConsent.applicableSections)?t.gppConsent.applicableSections.join(","):""):!d&&null!=t&&null!==(z=t.ortb2)&&void 0!==z&&null!==(z=z.regs)&&void 0!==z&&z.gpp&&(eu.gppString=t.ortb2.regs.gpp,eu.gppSid=Array.isArray(t.ortb2.regs.gpp_sid)?t.ortb2.regs.gpp_sid.join(","):"");var eT=(0,u.deepAccess)(t,"ortb2.regs.ext.dsa");if(eT&&(eu.dsa=JSON.stringify(eT)),p&&(eu.coppa=p),$&&$.nodes){;eu.schain=(M=$,V="".concat(M.ver,",").concat(M.complete),M.nodes.map(function(e){V+="!".concat(encodeURIComponent(e.asi||""),",")+"".concat(encodeURIComponent(e.sid||""),",")+"".concat(encodeURIComponent(e.hp||""),",")+"".concat(encodeURIComponent(e.rid||""),",")+"".concat(encodeURIComponent(e.name||""),",")+"".concat(encodeURIComponent(e.domain||""))}),V)}Object.assign(eu,function(e,t){var n,i,o,a,s,d,c,l,p,f,g,v,m=function(e){return RegExp("[?#&](".concat(e,"=(.*?))($|&)"),"i")},b={};try{c=(d=r.g.top).screen,l=e||"",p=t||""}catch(e){return(0,u.logError)(e),b}return b={vw:d.innerWidth,vh:d.innerHeight,sw:c.width,sh:c.height,pu:["ggad","ggdeal"].reduce(function(e,t){var r=n.match(m(t));return r?(r[1]&&(e=e.replace(r[1],"")),r[3]&&(e=e.replace(r[3],"")),e):e},n=l),tpl:p,ce:y.cookiesAreEnabled(),dpr:d.devicePixelRatio||1,jcsi:JSON.stringify(A),ogu:(i="",i=(o=(document&&document.getElementsByTagName("head")[0]).querySelector("meta[property='og:url']"))?o.content:null)},(v=(s=(a=window.navigator&&(window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection))&&(a.downlink||a.bandwidth))?Math.round(1024*s):null)&&(b.ns=v),(f=(l.match(m("ggad"))||[0,0,0])[2])&&(b[isNaN(f)?"eAdBuyId":"adBuyId"]=f),(g=(l.match(m("ggdeal"))||[0,0,0])[2])&&(b.ggdeal=g),b}(f,g),(q=null==t?void 0:t.ortb2,Object.keys(G={ip:(F=(0,u.deepAccess)(q,"device")||{}).ip,ipv6:F.ipv6,ua:F.ua,dnt:F.dnt,os:F.os,osv:F.osv,dt:F.devicetype,lang:F.language,make:F.make,model:F.model,ppi:F.ppi,pxratio:F.pxratio,foddid:null==F||null===(L=F.ext)||void 0===L?void 0:L.fiftyonedegrees_deviceId}).reduce(function(e,t){return void 0!==G[t]&&(e[t]=G[t]),e},{}))),n.push({id:Y,tmax:c,tId:null==ee||null===(W=ee.ext)||void 0===W?void 0:W.tid,pi:eu.pi,selector:Q.selector,sizes:ec,url:"https://g2.gumgum.com/hbid/imp",method:"GET",data:eu})}),n},interpretResponse:function(e,t){var r,n,i=[],o=e.body;if(!o||o.err){var a=t.data||{},d=a.si||a.ni||a.t||a.pubId,l=o?o.err.drt:18e5;S[d]={productId:a.pi,timestamp:new Date().getTime()},setTimeout(function(){S[d]&&delete S[d]},l),(0,u.logWarn)("[GumGum] Please check the implementation for ".concat(d))}var p=Object.assign({ad:{price:0,id:0,markup:"",width:0,height:0},pag:{pvid:0},meta:{adomain:[],mediaType:""}},o),g=p.ad,v=g.price,m=g.id,h=g.markup,y=g.cur,I=g.width,E=g.height,_=g.maxw,T=g.maxh,w=p.cw,C=p.pag.pvid,x=p.jcsi,P=p.meta,D=P.adomain,R=P.mediaType,j=t.data||{},k=j.pi,N=6===k||7===k?c.VIDEO:c.BANNER,U=3===k&&9===j.si,B=(0,u.parseSizesInput)(t.sizes);if(_&&T)B=["".concat(_,"x").concat(T)];else if(5===k&&(0,f.includes)(B,"1x1"))B=["1x1"];else if(2===k&&(0,f.includes)(B,"1x1")||3===k){var M=t.sizes&&t.sizes.reduce(function(e,t){var r=(0,s.default)(t,2),n=r[0],i=r[1];return I===n&&E===i&&e.push(t.join("x")),e},[])||[];B=M.length?M:(0,u.parseSizesInput)(t.sizes)}var V=B[0].split("x"),q=(0,s.default)(V,2),L=q[0],F=q[1];if(x&&(o.jcsi=A),O=C,m){;i.push(b(b({ad:w?(r=w,n=Object.assign({},o,{bidRequest:t}),r.replace("AD_JSON",window.btoa(JSON.stringify(n)))):h},N===c.VIDEO&&{ad:h,vastXml:h}),{},{mediaType:N,cpm:U?.1:v,creativeId:m,currency:y||"USD",height:F,netRevenue:!0,requestId:t.id,ttl:60,width:L,meta:{advertiserDomains:D||[],mediaType:R||N}}))}return i},getUserSyncs:function(e,t){return t.map(function(e){return e.body&&e.body.pxs&&e.body.pxs.scr||[]}).reduce(function(e,t){return e.concat(t)},[]).map(function(e){return{type:"f"===e.t?"iframe":"image",url:e.u}})},supportedMediaTypes:I,getCids:T}),(0,d.registerModule)("gumgumBidAdapter")},4924:function(e,t,r){"use strict";var n,i,o=r(1640),a=o(r(8129)),s=o(r(9837)),d=o(r(7822)),c=o(r(6945)),u=o(r(4920)),l=r(9895),p=r(1235),f=r(721),g=r(2885),v=r(2583),m=r(4288),b=r(9293),h=r(5723),y=r(6607),A=r(8427);function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function S(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw TypeError("Private element is not present on this object")}var O="id5id",_="User ID - ID5 submodule: ",T="id5-sync.com",w=(0,m.getStorageManager)({moduleType:h.MODULE_TYPE_UID,moduleName:"id5Id"}),C=new WeakSet;var x=(0,u.default)(function e(t,r,n,i,o){var a,s;(0,c.default)(this,e),a=this,function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(a,s=C),s.add(a),this.submoduleConfig=t,this.gdprConsentData=r,this.cacheIdObj=n,this.usPrivacyData=i,this.gppData=o},[{key:"execute",value:(n=(0,d.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=S(C,this,U).call(this),!S(C,this,P).call(this)){e.next=14;break}return e.prev=2,e.next=5,S(C,this,D).call(this,t);case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),(0,p.logError)(_+"Error while performing ID5 external module flow. Continuing with regular flow.",e.t0),e.abrupt("return",S(C,this,k).call(this,t));case 12:e.next=15;break;case 14:return e.abrupt("return",S(C,this,k).call(this,t));case 15:case"end":return e.stop()}},e,this,[[2,8]])})),function(){return n.apply(this,arguments)})}]);function P(){return"string"==typeof this.submoduleConfig.params.externalModuleUrl}function D(e){return R.apply(this,arguments)}function R(){return(R=(0,d.default)(a.default.mark(function e(t){var r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e){return z.apply(this,arguments)}(this.submoduleConfig.params.externalModuleUrl);case 2:return e.next=4,t;case 4:return r=e.sent,e.abrupt("return",S(C,this,j).call(this).fetchId5Id(r,this.submoduleConfig.params,(0,v.getRefererInfo)(),this.gdprConsentData,this.usPrivacyData,this.gppData));case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function j(){return window.id5Prebid&&window.id5Prebid.integration}function k(e){return N.apply(this,arguments)}function N(){return(N=(0,d.default)(a.default.mark(function e(t){var r,n,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:return r=e.sent,e.next=5,S(C,this,M).call(this,r.extensionsCall);case 5:return n=e.sent,e.next=8,S(C,this,q).call(this,r.fetchCall,n);case 8:return i=e.sent,e.abrupt("return",S(C,this,G).call(this,i));case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function U(){return B.apply(this,arguments)}function B(){return(B=(0,d.default)(a.default.mark(function e(){var t,r,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.submoduleConfig.params.configUrl||"https://id5-sync.com/api/config/prebid",e.next=3,(0,f.fetch)(t,{method:"POST",body:JSON.stringify(E(E({},this.submoduleConfig),{},{bounce:!0})),credentials:"include"});case 3:if((r=e.sent).ok){e.next=6;break}throw Error("Error while calling config endpoint: ",r);case 6:return e.next=8,r.json();case 8:return n=e.sent,(0,p.logInfo)(_+"config response received from the server",n),e.abrupt("return",n);case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function M(e){return V.apply(this,arguments)}function V(){return(V=(0,d.default)(a.default.mark(function e(t){var r,n,i,o,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t){e.next=2;break}return e.abrupt("return",void 0);case 2:return r=t.url,i="GET"===(n=t.method||"GET")?void 0:JSON.stringify(t.body||{}),e.next=7,(0,f.fetch)(r,{method:n,body:i});case 7:if((o=e.sent).ok){e.next=10;break}throw Error("Error while calling extensions endpoint: ",o);case 10:return e.next=12,o.json();case 12:return s=e.sent,(0,p.logInfo)(_+"extensions response received from the server",s),e.abrupt("return",s);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function q(e,t){return L.apply(this,arguments)}function L(){return(L=(0,d.default)(a.default.mark(function e(t,r){var n,i,o,s,d;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.url,i=t.overrides||{},o=JSON.stringify(E(E(E({},S(C,this,F).call(this)),i),{},{extensions:r})),e.next=5,(0,f.fetch)(n,{method:"POST",body:o,credentials:"include"});case 5:if((s=e.sent).ok){e.next=8;break}throw Error("Error while calling fetch endpoint: ",s);case 8:return e.next=10,s.json();case 10:return d=e.sent,(0,p.logInfo)(_+"fetch response received from the server",d),e.abrupt("return",d);case 13:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function F(){var e=this.submoduleConfig.params,t=this.gdprConsentData&&"boolean"==typeof this.gdprConsentData.gdprApplies&&this.gdprConsentData.gdprApplies?1:0,r=(0,v.getRefererInfo)(),n=this.cacheIdObj?this.cacheIdObj.signature:void 0,i=W(this.cacheIdObj),o=window.id5Bootstrap?window.id5Bootstrap.getTrueLinkInfo():{booted:!1},a={partner:e.partner,gdpr:t,nbPage:i,o:"pbjs",tml:r.topmostLocation,ref:r.ref,cu:r.canonicalUrl,top:r.reachedTop?1:0,u:r.stack[0]||window.location.href,v:"9.17.0",storage:this.submoduleConfig.storage,localStorage:w.localStorageIsEnabled()?1:0,true_link:o};t&&void 0!==this.gdprConsentData.consentString&&!(0,p.isEmpty)(this.gdprConsentData.consentString)&&!(0,p.isEmptyStr)(this.gdprConsentData.consentString)&&(a.gdpr_consent=this.gdprConsentData.consentString),void 0!==this.usPrivacyData&&!(0,p.isEmpty)(this.usPrivacyData)&&!(0,p.isEmptyStr)(this.usPrivacyData)&&(a.us_privacy=this.usPrivacyData),this.gppData&&(a.gpp_string=this.gppData.gppString,a.gpp_sid=this.gppData.applicableSections),void 0!==n&&!(0,p.isEmptyStr)(n)&&(a.s=n),void 0!==e.pd&&!(0,p.isEmptyStr)(e.pd)&&(a.pd=e.pd),void 0!==e.provider&&!(0,p.isEmptyStr)(e.provider)&&(a.provider=e.provider);var s=e.abTesting||{enabled:!1};return s.enabled&&(a.ab_testing={enabled:!0,control_group_pct:s.controlGroupPct}),a}function G(e){try{e.privacy&&window.id5Bootstrap&&window.id5Bootstrap.setPrivacy&&window.id5Bootstrap.setPrivacy(e.privacy)}catch(e){(0,p.logError)(_+"Error while writing privacy info into local storage.",e)}return e}function z(){return(z=(0,d.default)(a.default.mark(function e(t){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new y.GreedyPromise(function(e,r){if(window.id5Prebid)e();else try{(0,A.loadExternalScript)(t,h.MODULE_TYPE_UID,"id5",e)}catch(e){r(e)}}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function W(e){return e&&void 0!==e.nbPage?e.nbPage+1:1}function Y(e){var t=e&&"boolean"==typeof e.gdprApplies&&e.gdprApplies,r=(0,p.deepAccess)(e,"vendorData.purpose.consents.1"),n=(0,p.deepAccess)(e,"vendorData.vendor.consents.".concat("131"));return!t||!!r&&!!n||!1}(0,g.submodule)("userId",{name:"id5Id",gvlid:131,decode:function(e,t){var r,n,i={};if(!!e&&"string"==typeof e.universal_uid){r=e.universal_uid,i=e.ext||i,n=e.publisherTrueLinkId;var o={id5id:{uid:r,ext:i}};switch((0,p.isPlainObject)(i.euid)&&(o.euid={uid:i.euid.uids[0].id,source:i.euid.source,ext:{provider:T}}),n&&(o.trueLinkId={uid:n}),(0,p.deepAccess)(e,"ab_testing.result")){case"control":(0,p.logInfo)(_+"A/B Testing - user is in the Control Group: ID5 ID is NOT exposed"),(0,p.deepSetValue)(o,"id5id.ext.abTestingControlGroup",!0);break;case"error":(0,p.logError)(_+"A/B Testing ERROR! controlGroupPct must be a number >= 0 and <= 1");break;case"normal":(0,p.logInfo)(_+"A/B Testing - user is NOT in the Control Group"),(0,p.deepSetValue)(o,"id5id.ext.abTestingControlGroup",!1)}return(0,p.logInfo)(_+"Decoded ID",o),o}},getId:function(e,t,r){if(!!function(e){if(!e||!e.params||!e.params.partner)return(0,p.logError)(_+"partner required to be defined"),!1;var t=e.params.partner;if("string"==typeof t||t instanceof String){var r=parseInt(t);if(isNaN(r)||r<0)return(0,p.logError)(_+"partner required to be a number or a String parsable to a positive integer"),!1;e.params.partner=r}else if("number"!=typeof t)return(0,p.logError)(_+"partner required to be a number or a String parsable to a positive integer"),!1;return e.storage&&e.storage.type&&e.storage.name?(e.storage.name!==O&&(0,p.logWarn)(_+"storage name recommended to be '".concat(O,"'.")),!0):((0,p.logError)(_+"storage required to be set"),!1)}(e)){if(!Y(t)){(0,p.logInfo)(_+"Skipping ID5 local storage write because no consent given.");return}return{callback:function(n){new x(e,t,r,b.uspDataHandler.getConsentData(),b.gppDataHandler.getConsentData()).execute().then(function(e){n(e)}).catch(function(e){(0,p.logError)(_+"getId fetch encountered an error",e),n()})}}}},extendId:function(e,t,r){return Y(t)?((0,p.logInfo)(_+"using cached ID",r),r&&(r.nbPage=W(r)),r):((0,p.logInfo)(_+"No consent given for ID5 local storage writing, skipping nb increment."),r)},primaryIds:["id5id","trueLinkId"],eids:{id5id:{getValue:function(e){return e.uid},source:T,atype:1,getUidExt:function(e){if(e.ext)return e.ext}},euid:{getValue:function(e){return e.uid},getSource:function(e){return e.source},atype:3,getUidExt:function(e){if(e.ext)return e.ext}},trueLinkId:{getValue:function(e){return e.uid},getSource:function(e){return"true-link-id5-sync.com"},atype:1,getUidExt:function(e){if(e.ext)return e.ext}}}}),(0,l.registerModule)("id5IdSystem")},9841:function(e,t,r){"use strict";var n,i=r(7251),o=r(9895),a=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=i(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(1235)),s=r(721),d=r(2885),c=r(4288),u=r(5723),l=r(9293);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}var f="identityLink",g=(0,c.getStorageManager)({moduleType:u.MODULE_TYPE_UID,moduleName:f}),v="_lr_env";function m(e,t,r){r.notUse3P||g.getCookie("_lr_retry_request")?t():(function(){var e=new Date;e.setTime(e.getTime()+36e5),g.setCookie("_lr_retry_request","true",e.toUTCString())}(),a.logInfo("identityLink: A 3P retrieval is attempted!"),b(!1),(0,s.ajax)(e,{success:function(e){var r;if(e)try{r=JSON.parse(e)}catch(e){a.logInfo(e)}t(r&&r.envelope?r.envelope:"")},error:function(e){a.logInfo("identityLink: identityLink: ID fetch encountered an error",e),t()}},void 0,{method:"GET",withCredentials:!0}))}function b(e){var t=new Date;t.setTime(t.getTime()+2592e6),g.setCookie("_lr_env_src_ats",e,t.toUTCString())}function h(){var e=g.getCookie(v)||g.getDataFromLocalStorage(v);return e?window.atob(e):void 0}(0,d.submodule)("userId",{name:f,gvlid:97,decode:function(e){return{idl_env:e}},getId:function(e,t){var r=e&&e.params||{};if(!r||"string"!=typeof r.pid){a.logError("identityLink: requires partner id to be defined");return}var n=t&&"boolean"==typeof t.gdprApplies&&t.gdprApplies?1:0,i=n?t.consentString:"";if(n&&(!i||""===i)){a.logInfo("identityLink: Consent string is required to call envelope API.");return}var o=l.gppDataHandler.getConsentData(),s=!!o&&!!o.gppString&&o.gppString,d=!!o&&!!o.gppString&&o.applicableSections.length>0&&-1!==o.applicableSections[0]&&o.applicableSections[0],c="https://api.rlcdn.com/api/identity/envelope?pid=".concat(r.pid).concat(n?"&ct=4&cv="+i:"").concat(s&&d?"&gpp="+s+"&gpp_sid="+d:"");return{callback:function(e){if(window.ats&&window.ats.retrieveEnvelope)a.logInfo("identityLink: ATS exists!"),window.ats.retrieveEnvelope(function(t){t?(a.logInfo("identityLink: An envelope can be retrieved from ATS!"),b(!0),e(JSON.parse(t).envelope)):m(c,e,r)});else{var t=h();t?(a.logInfo("identityLink: LiveRamp envelope successfully retrieved from storage!"),e(JSON.parse(t).envelope)):m(c,e,r)}}}},eids:{idl_env:{source:"liveramp.com",atype:3}}}),(0,o.registerModule)("identityLinkIdSystem")},8041:function(e,t,r){"use strict";var n,i=r(1640),o=i(r(4995)),a=i(r(9837)),s=i(r(7251)),d=r(9895),c=r(1235),u=r(8705),l=r(3408),p=r(4288),f=r(7448),g=r(1634),v=r(5045),m=r(4389),b=r(7328);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function A(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return I(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var E=[u.BANNER,u.VIDEO,u.NATIVE],S=[144,144],O={JPY:1},_={PBJS:"p",IX:"x"},T=["id","name","domain","cat","sectioncat","pagecat","page","ref","search","mobile","privacypolicy","publisher","content","keywords","ext"],w=["id","buyeruid","yob","gender","keywords","customdata","geo","data","ext"],C={"liveramp.com":"idl","netid.de":"NETID","neustar.biz":"fabrickId","zeotap.com":"zeotapIdPlus","uidapi.com":"UID2","adserver.org":"TDID"},x=["lipbid","criteoId","merkleId","parrableId","connectid","tapadId","quantcastId","pubProvidedId","pairId"],P=["mimes","minduration","maxduration"],D=["mimes","minduration","maxduration","protocols","protocol","startdelay","placement","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype","ext","playerSize","w","h","plcmt"],R="".concat("ix","_features"),j=(0,p.getStorageManager)({bidderCode:"ix"}),k={REQUESTED_FEATURE_TOGGLES:["pbjs_enable_multiformat","pbjs_allow_all_eids"],featureToggles:{},isFeatureEnabled:function(e){return(0,c.deepAccess)(this.featureToggles,"features.".concat(e,".activated"),!1)},getFeatureToggles:function(){if(j.localStorageIsEnabled()){var e=(0,c.safeJSONParse)(j.getDataFromLocalStorage(R));(0,c.deepAccess)(e,"expiry")&&e.expiry>=new Date().getTime()?this.featureToggles=e:this.clearFeatureToggles()}},setFeatureToggles:function(e){var t=e.body,r=new Date,n=(0,c.deepAccess)(t,"ext.features");n&&(this.featureToggles={expiry:r.setHours(r.getHours()+1),features:n},j.localStorageIsEnabled()&&j.setDataInLocalStorage(R,JSON.stringify(this.featureToggles)))},clearFeatureToggles:function(){this.featureToggles={},j.localStorageIsEnabled()&&j.removeDataFromLocalStorage(R)}},N=0,U="",B="",M=!1,V={Video:2};function q(e){var t=F(e,u.VIDEO),r=(0,c.deepAccess)(e,"mediaTypes.video"),n=(0,c.deepAccess)(e,"params.video");if(Y(r,n).length)return{};t.video=n?(0,c.deepClone)(e.params.video):{};var i=(0,c.deepAccess)(e,"ortb2Imp.ext.tid");for(var o in i&&(0,c.deepSetValue)(t,"ext.tid",i),!function(e,t){if((0,c.deepAccess)(t,"mediaTypes.video.context")===v.OUTSTREAM){var r=(0,c.deepAccess)(t,"mediaTypes.video.renderer");if(!r&&(r=(0,c.deepAccess)(t,"renderer")),(0,c.deepAccess)(t,"schain",!1))e.displaymanager="pbjs_wrapper";else if(r&&"object"===(0,s.default)(r)){if(void 0!==r.url){var n="";try{n=new URL(r.url).hostname}catch(e){return}n.includes("js-sec.indexww")?e.displaymanager="ix":e.displaymanager=r.url}}else e.displaymanager="ix"}}(t,e),K(t,e),r)-1!==D.indexOf(o)&&!t.video.hasOwnProperty(o)&&(t.video[o]=r[o]);if(t.video.minduration>t.video.maxduration)return(0,c.logError)("IX Bid Adapter: video minduration [".concat(t.video.minduration,"] cannot be greater than video maxduration [").concat(t.video.maxduration,"]")),{};var a=n&&n.context||r&&r.context;if(function(e){e.video.hasOwnProperty("plcmt")&&(!(0,c.isInteger)(e.video.plcmt)||e.video.plcmt<1||e.video.plcmt>4)&&((0,c.logWarn)("IX Bid Adapter: video.plcmt [".concat(e.video.plcmt,"] must be an integer between 1-4 inclusive")),delete e.video.plcmt)}(t),a&&!t.video.hasOwnProperty("placement")&&(a===v.INSTREAM?t.video.placement=1:a===v.OUTSTREAM?(0,c.deepAccess)(n,"playerConfig.floatOnScroll")?t.video.placement=5:(t.video.placement=3,M=!0):(0,c.logWarn)("IX Bid Adapter: Video context '".concat(a,"' is not supported"))),!(t.video.w&&t.video.h)){var d=H((0,c.deepAccess)(t,"video.playerSize"))||H((0,c.deepAccess)(e,"params.size"));if(!d)return(0,c.logWarn)("IX Bid Adapter: Video size is missing in [mediaTypes.video]"),{};t.video.w=d[0],t.video.h=d[1]}return G(e,t,u.VIDEO),t}function L(e){var t=F(e,u.NATIVE),r=e.nativeOrtbRequest;r.eventtrackers=[{event:1,methods:[1,2]}],r.privacy=1,t.native={request:JSON.stringify(r),ver:"1.2"};var n=(0,c.deepAccess)(e,"ortb2Imp.ext.tid");return n&&(0,c.deepSetValue)(t,"ext.tid",n),K(t,e),G(e,t,u.NATIVE),t}function F(e,t){var r={};if(r.id=e.bidId,r.ext={},Z()&&(0,c.deepAccess)(e,"params.externalId")&&(0,c.deepSetValue)(r,"ext.externalID",e.params.externalId),(0,c.deepAccess)(e,"params.".concat(t,".siteId"))&&!isNaN(Number(e.params[t].siteId)))switch(t){case u.BANNER:(0,c.deepSetValue)(r,"ext.siteID",e.params.banner.siteId.toString());break;case u.VIDEO:(0,c.deepSetValue)(r,"ext.siteID",e.params.video.siteId.toString());break;case u.NATIVE:(0,c.deepSetValue)(r,"ext.siteID",e.params.native.siteId.toString())}else e.params.siteId&&(0,c.deepSetValue)(r,"ext.siteID",e.params.siteId.toString());return e.params.hasOwnProperty("id")&&("string"==typeof e.params.id||"number"==typeof e.params.id)&&(0,c.deepSetValue)(r,"ext.sid",String(e.params.id)),r}function G(e,t,r){var n=null,i=null;if(e.params.bidFloor&&e.params.bidFloorCur&&(n={floor:e.params.bidFloor,currency:e.params.bidFloorCur}),(0,c.isFn)(e.getFloor)){var o="*",a="*";if(r&&(0,c.contains)(E,r)){var s=t[r],d=s.w,l=s.h;o=r,a=[d,l]}try{i=e.getFloor({mediaType:o,size:a})}catch(e){(0,c.logWarn)("priceFloors module call getFloor failed, error : ",e)}}var p=!1;i?(t.bidfloor=i.floor,t.bidfloorcur=i.currency,(0,c.deepSetValue)(t,"ext.fl",_.PBJS),p=!0):n&&(t.bidfloor=n.floor,t.bidfloorcur=n.currency,(0,c.deepSetValue)(t,"ext.fl",_.IX),p=!0),p&&(r==u.BANNER?((0,c.deepSetValue)(t,"banner.ext.bidfloor",t.bidfloor),(0,c.deepSetValue)(t,"banner.ext.fl",t.ext.fl)):r==u.VIDEO?((0,c.deepSetValue)(t,"video.ext.bidfloor",t.bidfloor),(0,c.deepSetValue)(t,"video.ext.fl",t.ext.fl)):((0,c.deepSetValue)(t,"native.ext.bidfloor",t.bidfloor),(0,c.deepSetValue)(t,"native.ext.fl",t.ext.fl)))}function z(e){return Array.isArray(e)&&2===e.length&&(0,c.isInteger)(e[0])&&(0,c.isInteger)(e[1])}function W(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(z(e))return e[0]===t[0]&&e[1]===t[1];for(var r=0;r<e.length;r++)if(e[r][0]===t[0]&&e[r][1]===t[1])return!0;return!1}function Y(e,t){var r=[];!e&&(0,c.logWarn)("IX Bid Adapter: mediaTypes.video is the preferred location for video params in ad unit");var n,i=A(P);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=e&&e.hasOwnProperty(o),s=t&&t.hasOwnProperty(o);!a&&!s&&r.push("IX Bid Adapter: ".concat(o," is not included in either the adunit or params level"))}}catch(e){i.e(e)}finally{i.f()}var d=e&&e.hasOwnProperty("protocol"),u=e&&e.hasOwnProperty("protocols"),l=t&&t.hasOwnProperty("protocol"),p=t&&t.hasOwnProperty("protocols");return!(d||u||l||p)&&r.push("IX Bid Adapter: protocol/protcols is not included in either the adunit or params level"),r}function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return z(e)?e:!!z(e[0])&&e[0]}function J(e,t,r,n){var i="https://htlb.casalemedia.com/openrtb/pbjs",a=function(e){var t=[],r={};if((0,c.isArray)(e)){var n,i=A(e);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=C.hasOwnProperty(o.source);if((0,c.deepAccess)(o,"uids.0")&&(r[o.source]=!0,a&&""!==C[o.source]&&(o.uids[0].ext={rtiPartner:C[o.source]}),t.push(o),t.length>=50))break}}catch(e){i.e(e)}finally{i.f()}}return{toSend:t,seenSources:r}}((0,c.deepAccess)(e,"0.userIdAsEids")),d=a.toSend;window.headertag&&"function"==typeof window.headertag.getIdentityInfo&&function(e,t){var r=window.headertag.getIdentityInfo();if(r&&"object"===(0,s.default)(r))for(var n in r){if(e.length>=50)return;if(r.hasOwnProperty(n)){var i=r[n];!i.responsePending&&i.data&&"object"===(0,s.default)(i.data)&&Object.keys(i.data).length&&!t.seenSources[i.data.source]&&e.push(i.data)}}}(d,a);var p=[],f=function(e){var t={};return t.id=e[0].bidderRequestId.toString(),t.site={},t.ext={},t.ext.source="prebid",t.ext.ixdiag={},t.ext.ixdiag.ls=j.localStorageIsEnabled(),t.ext.ixdiag.msd=0,t.ext.ixdiag.msi=0,t.imp=[],t.at=1,t}(e);f=function(e,t){return t.length>0&&(e.ext.features={},t.forEach(function(t){e.ext.features[t]={activated:k.isFeatureEnabled(t)}})),e}(f,k.REQUESTED_FEATURE_TOGGLES);var g=function(e,t){var r=e.map(function(e){return e.adUnitCode}).filter(function(e,t,r){return r.indexOf(e)===t}),n=(0,c.deepAccess)(e,"0.userIdAsEids",[]);var i={mfu:0,bu:0,iu:0,nu:0,ou:0,allu:0,ren:!1,version:"9.17.0",userIds:(o=e[0].userId||{},x.filter(function(e){return o[e]})),url:window.location.href.split("?")[0],vpd:M,ae:t,eidLength:n.length},o,a,s=A(r);try{for(s.s();!(a=s.n()).done;)!function(){var t=a.value,r=e.filter(function(e){return e.adUnitCode===t})[0];(0,c.deepAccess)(r,"mediaTypes")&&(Object.keys(r.mediaTypes).length>1&&i.mfu++,(0,c.deepAccess)(r,"mediaTypes.native")&&i.nu++,(0,c.deepAccess)(r,"mediaTypes.banner")&&i.bu++,"outstream"===(0,c.deepAccess)(r,"mediaTypes.video.context")&&(i.ou++,X(r)&&(i.ren=!0)),"instream"===(0,c.deepAccess)(r,"mediaTypes.video.context")&&i.iu++,i.allu++)}()}catch(e){s.e(e)}finally{s.f()}return i}(e,(0,c.deepAccess)(t,"paapi.enabled"));for(var v in g)f.ext.ixdiag[v]=g[v];f=function(e,t){if(t){t.gdprConsent&&((U=t.gdprConsent).hasOwnProperty("gdprApplies")&&(e.regs={ext:{gdpr:U.gdprApplies?1:0}}),U.hasOwnProperty("consentString")&&(e.user=e.user||{},e.user.ext={consent:U.consentString||""},U.hasOwnProperty("addtlConsent")&&U.addtlConsent&&(e.user.ext.consented_providers_settings={addtl_consent:U.addtlConsent}))),t.uspConsent&&((0,c.deepSetValue)(e,"regs.ext.us_privacy",t.uspConsent),B=t.uspConsent);var r=(0,c.deepAccess)(t,"refererInfo.page");r&&(e.site.page=r),t.gppConsent&&((0,c.deepSetValue)(e,"regs.gpp",t.gppConsent.gppString),(0,c.deepSetValue)(e,"regs.gpp_sid",t.gppConsent.applicableSections))}return l.config.getConfig("coppa")&&(0,c.deepSetValue)(e,"regs.coppa",1),e}(f=function(e,t,r,n,i){var o,a=(0,c.deepAccess)(t,"timeout");return a&&(e.ext.ixdiag.tmax=a),l.config.getConfig("userSync")&&(e.ext.ixdiag.syncsPerBidder=l.config.getConfig("userSync").syncsPerBidder),e.ext.ixdiag.imps=Object.keys(r).length,e.source={tid:null==t||null===(o=t.ortb2)||void 0===o||null===(o=o.source)||void 0===o?void 0:o.tid},n[0].schain&&(e.source.ext={},e.source.ext.schain=n[0].schain),i.length>0&&(e.user={},e.user.eids=i),document.referrer&&""!==document.referrer&&(e.site.ref=document.referrer),e}(f,t,r,e,d),t);var m={};e[0].params.siteId&&(N=e[0].params.siteId,m.s=N);for(var b=Object.keys(r),h=!1,I=0;I<b.length&&!(p.length>=4);I++){;f=function(e,t,r,n){var i=e[t[n]],a=i.missingCount,s=void 0===a?0:a,d=i.missingImps,l=void 0===d?[]:d,p=i.ixImps,f={ixImps:void 0===p?[]:p,missingBannerImpressions:l},g=Object.keys(f).map(function(e){return f[e]}).filter(function(e){return Array.isArray(e)}).reduce(function(e,t){return e.concat.apply(e,(0,o.default)(t))},[]),v=e[t[n]].gpid,m=e[t[n]].dfp_ad_unit_code,b=e[t[n]].tid,h=e[t[n]].sid,y=e[t[n]].ae,A=e[t[n]].paapi,I=g.filter(function(e){return u.BANNER in e}),E=g.filter(function(e){return!(u.BANNER in e)});if(I.length>0){var S=I.reduce(function(e,t){return!e[t.adunitCode]&&(e[t.adunitCode]=[]),e[t.adunitCode].push(t),e},{});for(var O in S){for(var _=S[O],T=_[0],w=T.id,C=T.banner.topframe,x=(0,c.deepAccess)(_[0],"ext.externalID"),P={id:w,banner:{topframe:C,format:_.map(function(e){var t=e.banner;return{w:t.w,h:t.h,ext:e.ext}})}},D=0;D<P.banner.format.length;D++)null!=P.banner.format[D].ext&&(null!=P.banner.format[D].ext.sid&&delete P.banner.format[D].ext.sid,null!=P.banner.format[D].ext.externalID&&delete P.banner.format[D].ext.externalID),"bidfloor"in _[D]&&(P.banner.format[D].ext.bidfloor=_[D].bidfloor),"{}"===JSON.stringify(P.banner.format[D].ext)&&delete P.banner.format[D].ext;var R=e[t[n]].pos;(0,c.isInteger)(R)&&(P.banner.pos=R),(m||v||b||h||y||x||A)&&(P.ext={},P.ext.dfp_ad_unit_code=m,P.ext.gpid=v,P.ext.tid=b,P.ext.sid=h,P.ext.externalID=x,1==y&&(P.ext.ae=1,P.ext.paapi=A)),"bidfloor"in _[0]&&(P.bidfloor=_[0].bidfloor),"bidfloorcur"in _[0]&&(P.bidfloorcur=_[0].bidfloorcur);var j=e[t[n]].adUnitFPD;j&&(0,c.deepSetValue)(P,"ext.data",j),r.imp.push(P),!r.ext.ixdiag&&(r.ext.ixdiag={}),r.ext.ixdiag.msd+=s,r.ext.ixdiag.msi+=l.length}}return E.length>0&&E.forEach(function(e){if(v&&(0,c.deepSetValue)(e,"ext.gpid",v),r.imp.length>0){var t=!1;r.imp.forEach(function(n,i){e.id===n.id&&u.VIDEO in e?(n.video=e.video,n.video.ext=Object.assign({},e.video.ext,e.ext),(0,c.deepAccess)(n,"video.ext.bidfloor",!1)&&(0,c.deepAccess)(n,"bidfloor",!1)&&n.video.ext.bidfloor<n.bidfloor&&(n.bidfloor=n.video.ext.bidfloor),!(0,c.deepAccess)(n,"ext.siteID",!1)&&(0,c.deepAccess)(e,"video.ext.siteID")&&((0,c.deepSetValue)(n,"ext.siteID",e.video.ext.siteID),(0,c.deepSetValue)(r,"ext.ixdiag.usid",!0)),t=!0):e.id===n.id&&u.NATIVE in e&&(n.native=e.native,n.native.ext=Object.assign({},e.native.ext,e.ext),(0,c.deepAccess)(n,"native.ext.bidfloor",!1)&&(0,c.deepAccess)(n,"bidfloor",!1)&&n.native.ext.bidfloor<n.bidfloor&&(n.bidfloor=n.native.ext.bidfloor),!(0,c.deepAccess)(n,"ext.siteID",!1)&&(0,c.deepAccess)(e,"native.ext.siteID",!1)&&((0,c.deepSetValue)(n,"ext.siteID",e.native.ext.siteID),(0,c.deepSetValue)(r,"ext.ixdiag.usid",!0)),t=!0)}),!t&&r.imp.push(e)}else r.imp.push(e)}),r}(r,b,f,I);var E=(0,c.deepAccess)(t,"ortb2")||{},S=y({},E.site||E.context);S.page=function(e,t){var r=e&&e.bidderCode||"ix",n=l.config.getConfig(r),i="";return(i=(0,c.deepAccess)(e,"ortb2.site.page")?e.ortb2.site.page:(0,c.deepAccess)(e,"refererInfo.page"),n&&"object"===(0,s.default)(n.firstPartyData))?function(e,t,r,n){var i,o=Object.keys(n),a="",s="?#",d=n[o[0]].adUnitCode;try{i=new URL(t)}catch(r){(0,c.logWarn)("IX Bid Adapter: Invalid URL set in ortb2.site.page: ".concat(t,". Using referer URL instead.")),i=new URL((0,c.deepAccess)(e,"refererInfo.page"))}for(var u in r)"HVP"===u.toUpperCase()?!function(e){if(d&&e&&e[d]>=0){var t="".concat(e[d]),r=s.match(/\#PD:\S+?\#/i);r&&r[0]?s=s.replace(r[0],"".concat(r[0],"HVP:").concat(t,"#")):a="HVP:".concat(t)}}(r[u]):"PD"===u.toUpperCase()&&a?s+="".concat(u,":").concat(r[u],"#").concat(a,"#"):s+="".concat(u,":").concat(r[u],"#");return s=s.slice(0,-1),i.search="",i.toString()+s}(e,i,n.firstPartyData,t):i}(t,r);var O=y({},E.user);!(0,c.isEmpty)(E)&&!h&&((f=function(e,t,r,n,i){if(t.ext.ixdiag.fpd=!0,Object.keys(n).forEach(function(e){-1===T.indexOf(e)&&delete n[e]}),Object.keys(i).forEach(function(e){-1===w.indexOf(e)&&delete i[e]}),r.device){var o,a=y({},r.device.sua);!(0,c.isEmpty)(a)&&(0,c.deepSetValue)(t,"device.sua",a)}if(r.hasOwnProperty("regs")&&!e.gppConsent&&(r.regs.hasOwnProperty("gpp")&&"string"==typeof r.regs.gpp&&(0,c.deepSetValue)(t,"regs.gpp",r.regs.gpp),r.regs.hasOwnProperty("gpp_sid")&&Array.isArray(r.regs.gpp_sid)&&(0,c.deepSetValue)(t,"regs.gpp_sid",r.regs.gpp_sid),null!==(o=r.regs.ext)&&void 0!==o&&o.dsa)){var s=r.regs.ext.dsa,d={};if(["dsarequired","pubrender","datatopub"].forEach(function(e){(0,c.isNumber)(s[e])&&(d[e]=s[e])}),(0,c.isArray)(s.transparency)){var u=[];s.transparency.forEach(function(e){(0,c.isPlainObject)(e)&&(0,c.isStr)(e.domain)&&""!=e.domain&&(0,c.isArray)(e.dsaparams)&&e.dsaparams.every(function(e){return(0,c.isNumber)(e)})&&u.push(e)}),u.length>0&&(d.transparency=u)}!(0,c.isEmpty)(d)&&(0,c.deepSetValue)(t,"regs.ext.dsa",d)}return t}(t,f,E,S,O)).site=(0,c.mergeDeep)({},f.site,S),f.user=(0,c.mergeDeep)({},f.user,O),h=!0),f=function(e,t,r,n,i,o){var a=e[r[n]].pbadslot,s=e[r[n]].tagId,d=e[r[n]].adUnitCode,c=e[r[n]].divId;return(a||s||d||c)&&(t.ext.ixdiag.pbadslot=a,t.ext.ixdiag.tagid=s,t.ext.ixdiag.adunitcode=d,t.ext.ixdiag.divId=c),t}(r,f,b,I,m,i);var _=I===b.length-1;if(f=er(f=et(f=ei(f))),_){var P="".concat(i,"?");0!==N&&(P+="s=".concat(N)),Z()&&(P+=(0!==N?"&":"")+"p=".concat(l.config.getConfig("exchangeId"))),p.push({method:"POST",url:P,data:(0,c.deepClone)(f),option:{contentType:"text/plain"},validBidRequests:e}),f.imp=[],f.ext.ixdiag.msd=0,f.ext.ixdiag.msi=0,h=!1}}return p}function K(e,t){var r=(0,c.deepAccess)(t,"ortb2Imp.ext.data");r&&(0,c.deepSetValue)(e,"ext.data",r)}function Q(e,t){if(t)for(var r=0;r<e.length;r++){var n=e[r];if(t[0]===n[0]&&t[1]===n[1]){e.splice(r,1);break}}}function $(e){e.renderer.push(function(){var t=e.adUnitCode,r=document.getElementById(t)?t:(0,b.getGptSlotInfoForAdUnitCode)(t).divId;if(!r){(0,c.logWarn)("IX Bid Adapter: adUnitCode: ".concat(r," not found on page."));return}window.createIXPlayer(r,e)})}function X(e){if("outstream"!==(0,c.deepAccess)(e,"mediaTypes.video.context"))return!1;var t=(0,c.deepAccess)(e,"mediaTypes.video.renderer");return!t&&(t=(0,c.deepAccess)(e,"renderer")),!("object"===(0,s.default)(t)&&t.url&&t.render)||t.backupOnly}function Z(){var e=l.config.getConfig("exchangeId");return!!("number"==typeof e&&isFinite(e)||"string"==typeof e&&""!==e.trim()&&isFinite(Number(e)))||!1}function ee(e){var t={};return e.forEach(function(e){Object.keys(e).forEach(function(r){Object.keys(t).includes(r)?t[r].hasOwnProperty("ixImps")&&e[r].hasOwnProperty("ixImps")?t[r].ixImps=[].concat((0,o.default)(t[r].ixImps),(0,o.default)(e[r].ixImps)):t[r].hasOwnProperty("missingImps")&&e[r].hasOwnProperty("missingImps")?t[r].missingImps=[].concat((0,o.default)(t[r].missingImps),(0,o.default)(e[r].missingImps)):e[r].hasOwnProperty("ixImps")?t[r].ixImps=e[r].ixImps:e[r].hasOwnProperty("missingImps")&&(t[r].missingImps=e[r].missingImps):t[r]=e[r]})}),t}function et(e){return e.imp.forEach(function(t,r){var n=t.ext;if(void 0==n)return e;if(!(2>en(t)))Object.keys(n).forEach(function(i){if(u.BANNER in t){var o=t.banner.ext;if(void 0!==o&&void 0!==o[i]&&o[i]==n[i]&&delete e.imp[r].banner.ext[i],void 0!==t.banner.format)for(var a=0;a<t.banner.format.length;a++)void 0!=t.banner.format[a].ext&&void 0!=t.banner.format[a].ext[i]&&t.banner.format[a].ext[i]==n[i]&&delete e.imp[r].banner.format[a].ext[i]}if(u.VIDEO in t){var s=t.video.ext;void 0!==s&&void 0!==s[i]&&s[i]==n[i]&&delete e.imp[r].video.ext[i]}if(u.NATIVE in t){var d=t.native.ext;void 0!==d&&void 0!==d[i]&&d[i]==n[i]&&delete e.imp[r].native.ext[i]}})}),e}function er(e){return e.imp.forEach(function(t,r){if(void 0==t.ext)return e;if(!(2>en(t))){if(u.BANNER in t){var n=t.banner.ext;if(void 0!==n&&void 0!==n.siteID&&delete e.imp[r].banner.ext.siteID,void 0!==t.banner.format)for(var i=0;i<t.banner.format.length;i++)void 0!==t.banner.format[i].ext&&void 0!==t.banner.format[i].ext.siteID&&((0,c.deepSetValue)(e.imp[r],"ext.siteID",t.banner.format[i].ext.siteID),(0,c.deepSetValue)(e,"ext.ixdiag.usid",!0),delete e.imp[r].banner.format[i].ext.siteID)}if(u.VIDEO in t){var o=t.video.ext;void 0!==o&&void 0!==o.siteID&&delete e.imp[r].video.ext.siteID}if(u.NATIVE in t){var a=t.native.ext;void 0!==a&&void 0!==a.siteID&&delete e.imp[r].native.ext.siteID}}}),e}function en(e){var t=0;return void 0!==e.banner&&(t+=1),void 0!==e.video&&(t+=1),void 0!==e.native&&(t+=1),t}function ei(e){return void 0==e.device&&(e.device={}),e.device.h=window.screen.height,e.device.w=window.screen.width,e}(0,g.registerBidder)({code:"ix",gvlid:10,supportedMediaTypes:E,isBidRequestValid:function(e){var t,r,n,i=(l.config.getConfig("ix")||{}).largeFormatSizes,o=(0,c.deepAccess)(e,"params.video"),a=(0,c.deepAccess)(e,"params.size"),s=(0,c.deepAccess)(e,"mediaTypes.banner.sizes"),d=(0,c.deepAccess)(e,"mediaTypes.video"),u=(0,c.deepAccess)(e,"mediaTypes.video.playerSize"),p=e.params.hasOwnProperty("bidFloor"),f=e.params.hasOwnProperty("bidFloorCur");if(e.hasOwnProperty("mediaType")&&!(0,c.contains)(E,e.mediaType))return(0,c.logWarn)("IX Bid Adapter: media type is not supported."),!1;if((0,c.deepAccess)(e,"mediaTypes.banner")&&!s)return!1;if(a){var g=H(a);if(!g)return(0,c.logError)("IX Bid Adapter: size has invalid format."),!1;if(!W(e.sizes,g)&&!W(u,g)&&!(W(s,g)||W(i,g)))return(0,c.logError)("IX Bid Adapter: bid size is not included in ad unit sizes or player size."),!1}if(!Z()&&void 0==e.params.siteId)return(0,c.logError)("IX Bid Adapter: Invalid configuration - either siteId or exchangeId must be configured."),!1;if(void 0!==e.params.siteId){if("string"!=typeof e.params.siteId&&"number"!=typeof e.params.siteId)return(0,c.logError)("IX Bid Adapter: siteId must be string or number type."),!1;if("string"!=typeof e.params.siteId&&isNaN(Number(e.params.siteId)))return(0,c.logError)("IX Bid Adapter: siteId must valid value"),!1}if(p||f){;if(!(p&&f&&(t=e.params.bidFloor,r=e.params.bidFloorCur,"number"==typeof t&&"string"==typeof r&&r.match(/^[A-Z]{3}$/))))return(0,c.logError)("IX Bid Adapter: bidFloor / bidFloorCur parameter has invalid format."),!1}if(d&&o){var m=q(e).video,b=Y(d,o);if((0,c.deepAccess)(e,"mediaTypes.video.context")===v.OUTSTREAM&&X(e)&&m){var h=[(0,c.deepAccess)(m,"w"),(0,c.deepAccess)(m,"h")];if(!(h[0]>=144&&h[1]>=144))return(0,c.logError)("IX Bid Adapter: ".concat(h," is an invalid size for IX outstream renderer")),!1}if(b.length)return b.forEach(function(e){(0,c.logError)(e)}),!1}return n=e,void 0===(0,c.deepAccess)(n,"mediaTypes.native")||n.nativeOrtbRequest&&Array.isArray(n.nativeOrtbRequest.assets)&&n.nativeOrtbRequest.assets.length>0},resetSiteID:function(){N=0},buildRequests:function(e,t){var r=[],n={},i={},a={},s={};for(var d in k.getFeatureToggles(),e.forEach(function(e){var r=Object.keys((0,c.deepAccess)(e,"mediaTypes",{}));for(var d in r)switch(r[d]){case u.BANNER:!function(e,t,r,n){var i,a,s,d=y(y({},{detectMissingSizes:!0}),l.config.getConfig("ix"));var p=((a=F(i=e,u.BANNER)).banner={},a.adunitCode=i.adUnitCode,(s=(0,c.deepAccess)(i,"params.size"))&&(a.banner.w=s[0],a.banner.h=s[1]),a.banner.topframe=(0,c.inIframe)()?0:1,G(i,a,u.BANNER),a),f=d.largeFormatSizes||[],g=W([].concat((0,o.default)((0,c.deepAccess)(e,"mediaTypes.banner.sizes")),(0,o.default)(f)),(0,c.deepAccess)(e,"params.size"));if(!r.hasOwnProperty(e.adUnitCode)&&(r[e.adUnitCode]={}),r[e.adUnitCode].gpid=(0,c.deepAccess)(e,"ortb2Imp.ext.gpid"),r[e.adUnitCode].dfp_ad_unit_code=(0,c.deepAccess)(e,"ortb2Imp.ext.data.adserver.adslot"),r[e.adUnitCode].tid=(0,c.deepAccess)(e,"ortb2Imp.ext.tid"),r[e.adUnitCode].pbadslot=(0,c.deepAccess)(e,"ortb2Imp.ext.data.pbadslot"),r[e.adUnitCode].tagId=(0,c.deepAccess)(e,"params.tagId"),r[e.adUnitCode].pos=(0,c.deepAccess)(e,"mediaTypes.banner.pos"),(0,c.deepAccess)(n,"paapi.enabled")){var v=(0,c.deepAccess)(e,"ortb2Imp.ext.ae"),m=(0,c.deepAccess)(e,"ortb2Imp.ext.paapi");m&&(r[e.adUnitCode].paapi=m),v&&((0,c.isInteger)(v)?r[e.adUnitCode].ae=v:(0,c.logWarn)("error setting auction environment flag - must be an integer"))}var h=(0,c.deepAccess)(e,"ortb2Imp.ext.data");h&&(r[e.adUnitCode].adUnitFPD=h);var A=(0,c.deepAccess)(e,"params.id");A&&("string"==typeof A||"number"==typeof A)&&(r[e.adUnitCode].sid=String(A));var I=e.adUnitCode,E=document.getElementById(I)?I:(0,b.getGptSlotInfoForAdUnitCode)(I).divId;r[e.adUnitCode].adUnitCode=I,r[e.adUnitCode].divId=E,g&&(!r[e.adUnitCode].hasOwnProperty("ixImps")&&(r[e.adUnitCode].ixImps=[]),r[e.adUnitCode].ixImps.push(p)),d.hasOwnProperty("detectMissingSizes")&&d.detectMissingSizes&&function(e,t,r){if(t.hasOwnProperty(e.adUnitCode)){var n=[];t[e.adUnitCode].hasOwnProperty("missingSizes")&&(n=t[e.adUnitCode].missingSizes),Q(n,e.params.size),t[e.adUnitCode].missingSizes=n}else if((0,c.deepAccess)(e,"mediaTypes.banner.sizes")){var i=(0,c.deepClone)(e.mediaTypes.banner.sizes);Q(i,e.params.size);t[e.adUnitCode]={missingSizes:i,impression:r}}}(e,t,p)}(e,s,n,t);break;case u.VIDEO:!function(e,t){var r=q(e);if(0!=Object.keys(r).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(r),t[e.adUnitCode].gpid=(0,c.deepAccess)(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=(0,c.deepAccess)(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=(0,c.deepAccess)(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=(0,c.deepAccess)(e,"params.tagId");var n=e.adUnitCode,i=document.getElementById(n)?n:(0,b.getGptSlotInfoForAdUnitCode)(n).divId;t[e.adUnitCode].adUnitCode=n,t[e.adUnitCode].divId=i}}(e,i);break;case u.NATIVE:!function(e,t){var r=L(e);if(0!=Object.keys(r).length){t[e.adUnitCode]={},t[e.adUnitCode].ixImps=[],t[e.adUnitCode].ixImps.push(r),t[e.adUnitCode].gpid=(0,c.deepAccess)(e,"ortb2Imp.ext.gpid"),t[e.adUnitCode].dfp_ad_unit_code=(0,c.deepAccess)(e,"ortb2Imp.ext.data.adserver.adslot"),t[e.adUnitCode].pbadslot=(0,c.deepAccess)(e,"ortb2Imp.ext.data.pbadslot"),t[e.adUnitCode].tagId=(0,c.deepAccess)(e,"params.tagId");var n=e.adUnitCode,i=document.getElementById(n)?n:(0,b.getGptSlotInfoForAdUnitCode)(n).divId;t[e.adUnitCode].adUnitCode=n,t[e.adUnitCode].divId=i}}(e,a);break;default:(0,c.logWarn)("IX Bid Adapter: ad unit mediaTypes ".concat(d," is not supported"))}}),s)if(s.hasOwnProperty(d)){var p=s[d].missingSizes;!n.hasOwnProperty(d)&&(n[d]={}),!n[d].hasOwnProperty("missingImps")&&(n[d].missingImps=[]),!n[d].hasOwnProperty("missingCount")&&(n[d].missingCount=0);for(var f=s[d].impression,g=0;g<p.length;g++){var v=function(e,t,r){var n=(0,c.deepClone)(t);return n.banner.w=r[0],n.banner.h=r[1],G(e,n,u.BANNER),n}(e[0],f,p[g]);n[d].missingImps.push(v),n[d].missingCount++}}var m=[];return Object.keys(n).length>0&&m.push(n),Object.keys(i).length>0&&m.push(i),Object.keys(a).length>0&&m.push(a),k.isFeatureEnabled("pbjs_enable_multiformat")?r.push.apply(r,(0,o.default)(J(e,t,ee(m)))):(Object.keys(n).length>0&&r.push.apply(r,(0,o.default)(J(e,t,n,7.2))),Object.keys(i).length>0&&r.push.apply(r,(0,o.default)(J(e,t,i,8.1))),Object.keys(a).length>0&&r.push.apply(r,(0,o.default)(J(e,t,a)))),r},interpretResponse:function(e,t){var r=[],n=null,i=(0,c.deepAccess)(e,"body.ext.protectedAudienceAuctionConfigs")||[];if(k.setFeatureToggles(e),!e.hasOwnProperty("body"))return r;for(var o=e.body,a=o.seatbid||[],d=0;d<a.length;d++){if(!!a[d].hasOwnProperty("bid")){for(var l=a[d].bid,p=t.data,g=0;g<l.length;g++){var v=function(e,t,r){if(!!e)return y(y({},(0,f.find)(r,function(t){return t.bidId===e})),(0,f.find)(t,function(t){return t.id===e}))}(l[g].impid,p.imp,t.validBidRequests);if((n=function(e,t,r){var n,i={},o=!!((0,c.deepAccess)(e,"exp")&&(0,c.isInteger)(e.exp)),a=(0,c.deepAccess)(e,"dealid")||(0,c.deepAccess)(e,"ext.dealid");O.hasOwnProperty(t)?i.cpm=e.price/O[t]:i.cpm=e.price/100,i.requestId=e.impid,a&&(i.dealId=a),i.netRevenue=!0,i.currency=t,i.creativeId=e.hasOwnProperty("crid")?e.crid:"-",e.mtype!=V.Video||(!e.ext||e.ext.vasturl)&&e.ext?e.ext&&e.ext.vasturl&&(i.vastUrl=e.ext.vasturl):i.vastXml=e.adm;var s=null;if("string"==typeof e.adm&&"{"===e.adm[0]&&"}"===e.adm[e.adm.length-1])try{s=JSON.parse(e.adm)}catch(e){(0,c.logWarn)("adm looks like JSON but failed to parse: ",e)}return e.ext&&e.ext.vasturl||e.mtype==V.Video?(i.width=r.video.w,i.height=r.video.h,i.mediaType=u.VIDEO,i.mediaTypes=r.mediaTypes,i.ttl=o?e.exp:3600):s&&s.native?(i.native={ortb:s.native},i.width=e.w?e.w:1,i.height=e.h?e.h:1,i.mediaType=u.NATIVE,i.ttl=o?e.exp:3600):(i.ad=e.adm,i.width=e.w,i.height=e.h,i.mediaType=u.BANNER,i.ttl=o?e.exp:300),i.meta={},i.meta.networkId=(0,c.deepAccess)(e,"ext.dspid"),i.meta.brandId=(0,c.deepAccess)(e,"ext.advbrandid"),i.meta.brandName=(0,c.deepAccess)(e,"ext.advbrand"),e.adomain&&e.adomain.length>0&&(i.meta.advertiserDomains=e.adomain),null!==(n=e.ext)&&void 0!==n&&n.dsa&&(i.meta.dsa=e.ext.dsa),i}(l[g],o.cur,v)).mediaType===u.VIDEO&&X(v)){var b=(0,c.deepAccess)(o,"ext.videoplayerurl");if(b&&(n.renderer=function(e,t){var r=m.Renderer.install({id:e,url:t,loaded:!1});try{r.setRender($)}catch(e){return(0,c.logWarn)("Prebid Error calling setRender on renderer",e),null}return t?r:((0,c.logWarn)("Outstream renderer URL not found"),null)}(l[g].bidId,b),!n.renderer))continue}r.push(n)}if((0,c.deepAccess)(p,"ext.ixdiag.err")&&j.localStorageIsEnabled())try{j.removeDataFromLocalStorage("ixdiag")}catch(e){(0,c.logError)("ix can not clear ixdiag from localStorage.")}}}if(!Array.isArray(i)||!(i.length>0))return r;i=i.filter(function(e){return!!function(e){return"object"===(0,s.default)(e)&&null!==e}(e)||((0,c.logWarn)("Malformed auction config detected:",e),!1)});try{return{bids:r,paapi:i}}catch(e){return(0,c.logWarn)("Error attaching AuctionConfigs",e),r}},getUserSyncs:function(e,t){var r=[],n=null;if(t.length>0&&(n=(0,c.deepAccess)(t[0],"body.ext.publishersyncsperbidderoverride")),void 0!==n&&0==n)return[];if(e.iframeEnabled)r.push({type:"iframe",url:"https://js-sec.indexww.com/um/ixmatch.html"});else{var i=null;l.config.getConfig("userSync")&&(i=l.config.getConfig("userSync").syncsPerBidder),0===i&&(i=n),i=n&&(0===i||i)?n>i?i:n:1;for(var o=0;o<i;o++)r.push({type:"image",url:function(e,t){var r="",n="0";return U&&U.hasOwnProperty("gdprApplies")&&(n=U.gdprApplies?"1":"0"),U&&U.hasOwnProperty("consentString")&&(r=U.consentString||""),"https://dsum.casalemedia.com/pbusermatch?origin=prebid"+(0!==N?"&site_id="+N.toString():"")+"&p="+e.toString()+"&i="+t.toString()+"&gdpr="+n+"&gdpr_consent="+r+"&us_privacy="+(B||"")}(i,o)})}return r}}),(0,d.registerModule)("ixBidAdapter")},9443:function(e,t,r){"use strict";var n,i,o=r(9895),a=r(2885),s=r(3408),d=r(721),c=r(1235),u=r(7448),l="jwplayer",p=l+".com",f="whenEmpty",g=/^(always|never|whenEmpty)$/,v={},m={},b=0,h=f,y=f,A=f,I=f;s.config.getConfig("realTimeData",function(e){var t=e.realTimeData.dataProviders,r=t&&(0,u.find)(t,function(e){return e.name&&e.name.toLowerCase()===l}),n=r&&r.params;if(!!n)E(n),S(n)}),(0,a.submodule)("realTimeData",{name:l,getBidRequestData:function(e,t){b=0,C(e.adUnits||(0,o.getGlobal)().adUnits,e.ortb2Fragments),b<=0?t():i=t},init:function(e,t){return!0}});function E(e){var t=e.mediaIDs;if(!!t)t.forEach(function(e){_(e)})}function S(e){h=O(e.overrideContentId,f),y=O(e.overrideContentUrl,f),A=O(e.overrideContentTitle,f),I=O(e.overrideContentDescription,f)}function O(e,t){return g.test(e)?e:t}function _(e){var t=(0,d.ajaxBuilder)();m[e]=null,t("https://cdn.".concat(p,"/v2/media/").concat(e),{success:function(t){var r=function(e){var t;try{var r=JSON.parse(e);if(!r)throw"Empty response";var n=r.playlist;if(!n||!n.length)throw"Empty playlist";t=n[0]}catch(e){(0,c.logError)(e)}return t}(t);(function(e,t){e&&t&&(v[t]=e)})(r,e),w(e,!!r)},error:function(){(0,c.logError)("failed to retrieve targeting information"),w(e,!1)}})}function T(e,t){e&&t&&(v[t]=e)}function w(e,t){var r=m[e];if(r&&(r(t?P(e):{mediaID:e}),b--),delete m[e],!(b>0))i&&(i(),i=null)}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,c.deepAccess)(t.global,"site.ext.data.jwTargeting");e.forEach(function(e){var n=x(e,r);if(!!n&&!!Object.keys(n).length)(function(e,t){var r=e.playerID,n=e.playerDivId,i=e.mediaID;if(!n&&(n=r),void 0!==m[i]){(function(e,t,r){var n=D(e,t);n?r(n):(b++,m[t]=r)})(n,i,t);return}t(P(i)||D(n,i)||{mediaID:i})})(n,function(r){if(!!r){var n=r.mediaID,i=j(n),o=N(n,k(r.segments)),a=R(r);(function(e,t,r,n){if(!!e)e.forEach(function(e){M(e,t)})})(e.bids,a,i,o),U(t.global,i,o,r.title,r.description,r.mediaUrl)}})})}function x(e,t){var r,n,i;try{r=e.ortb2Imp.ext.data.jwTargeting}catch(e){}if(!!r||!!((i=(n=e.mediaTypes)&&n.video)&&"instream"===i.context))return Object.assign({},t,r)}function P(e){var t,r=v[e];if(!r)return null;var n=null!==(t=r.file)&&void 0!==t?t:function(e){var t,r;return null===(t=e.sources)||void 0===t||null===(r=t.find)||void 0===r||null===(r=r.call(t,function(e){return!!e.file}))||void 0===r?void 0:r.file}(r);return{segments:r.jwpseg,title:r.title,description:r.description,mediaUrl:n,mediaID:e}}function D(e,t){var r,n,i=V(e);if(!i)return null;var o=t?(0,u.find)(i.getPlaylist(),function(e){return e.mediaid===t}):i.getPlaylistItem();if(!o)return null;t=t||o.mediaid;var a=o.title,s=o.description,d=o.file,c=o.jwpseg;return r=o,n=t,r&&n&&(v[n]=r),{segments:c,mediaID:t,title:a,mediaUrl:d,description:s}}function R(e){var t=e.segments,r=e.mediaID,n={};return t&&t.length&&(n.segments=t),r&&(n.content={id:j(r)}),n}function j(e){if(!!e)return"jw_"+e}function k(e){if(!!e&&!!e.length)return e.reduce(function(e,t){return e.push({id:t}),e},[])}function N(e,t){if(!!e||!!t){var r={name:p,ext:{}};return e&&(r.ext.cids=[e]),t&&(r.segment=t,r.ext.segtax=502),r}}function U(e,t,r,n,i,o){null==e&&(e={});var a=e.site=e.site||{},s=a.content=a.content||{};B(s.id,t,h)&&(s.id=t),B(s.url,o,y)&&(s.url=o),B(s.title,n,A)&&(s.title=n),B(s.ext&&s.ext.description,i,I)&&(s.ext=s.ext||{},s.ext.description=i);var d=(s.data||[]).filter(function(e){return e.name!==p});return r&&d.push(r),d.length&&(s.data=d),e}function B(e,t,r){switch(r){case"always":return!!t;case"never":return!1;case f:return!!t&&void 0===e;default:return!1}}function M(e,t){if(!!t){var r=e.rtd||{},n={};n[l]=Object.assign({},r[l],{targeting:t}),e.rtd=Object.assign({},r,n)}}function V(e){var t=window.jwplayer;if(!t){(0,c.logError)(l+".js was not found on page");return}var r=t(e);if(r&&r.getPlaylist)return r;var n=document.getElementsByClassName("jwplayer").length;if(0===n){(0,c.logError)("No JWPlayer instances have been detected on the page");return}var i="player Div ID ".concat(e," did not match any players.");if(n>1){(0,c.logError)(i);return}if((r=t())&&r.getPlaylist)return(0,c.logWarn)("".concat(i," Targeting player Div ID ").concat(r.id," instead")),r;(0,c.logError)(i)}(0,o.registerModule)("jwplayerRtdProvider")},6139:function(e,t,r){"use strict";var n,i,o,a,s=r(1640),d=s(r(4763)),c=s(r(7251)),u=r(9895),l=r(1235),p=r(3408),f=r(1634),g=r(4288),v=r(8705),m=Object.freeze({CODE:"kargo",HOST:"krk2.kargo.com",REQUEST_METHOD:"POST",REQUEST_ENDPOINT:"/api/v1/prebid",TIMEOUT_ENDPOINT:"/api/v1/event/timeout",GVLID:972,SUPPORTED_MEDIA_TYPES:[v.BANNER,v.VIDEO]}),b=(0,g.getStorageManager)({bidderCode:m.CODE}),h=Object.freeze({KEY:"currency",US_DOLLAR:"USD"}),y=Object.freeze({USER_DATA:"ortb2.user.data",SOCIAL_CANVAS:"params.socialCanvas",SUA:"ortb2.device.sua",TDID_ADAPTER:"userId.tdid"}),A=Object.freeze({BROWSERS:"browsers",MOBILE:"mobile",MODEL:"model",PLATFORM:"platform",SOURCE:"source"}),I=[A.BROWSERS,A.MOBILE,A.MODEL,A.SOURCE,A.PLATFORM],E=Object.freeze({KEY:"krg_crb",SYNC_URL:"https://crb.kargo.com/api/v1/initsyncrnd/{UUID}?seed={SEED}&gdpr={GDPR}&gdpr_consent={GDPR_CONSENT}&us_privacy={US_PRIVACY}&gpp={GPP_STRING}&gpp_sid={GPP_SID}",SYNC_COUNT:5,PAGE_VIEW_ID:"pageViewId",PAGE_VIEW_TIMESTAMP:"pageViewTimestamp",PAGE_VIEW_URL:"pageViewUrl"});function S(){try{var e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=-177&e[6]|64,e[8]=-65&e[8]|128;var t=Array.prototype.map.call(new Uint8Array(e),function(e){return("00"+e.toString(16)).slice(-2)}).join("");return t.slice(0,8)+"-"+t.slice(8,12)+"-"+t.slice(12,16)+"-"+t.slice(16,20)+"-"+t.slice(20)}catch(e){return""}}function O(){return!i&&(i=S()),i}function _(e){try{return b.getDataFromLocalStorage(e)}catch(e){return null}}var T={gvlid:m.GVLID,code:m.CODE,isBidRequestValid:function(e){return!!e&&!!e.params&&!!e.params.placementId},buildRequests:function(e,t){var r,n=p.config.getConfig(h.KEY),i=n&&n.adServerCurrency?n.adServerCurrency:null,s=[];(0,l._each)(e,function(e){s.push(function(e){var t,r={id:e.bidId,tid:null===(t=e.ortb2Imp)||void 0===t||null===(t=t.ext)||void 0===t?void 0:t.tid,pid:e.params.placementId,code:e.adUnitCode};null!=e.floorData&&e.floorData.floorMin>0&&(r.floor=e.floorData.floorMin),e.bidRequestsCount>0&&(r.bidRequestCount=e.bidRequestsCount),e.bidderRequestsCount>0&&(r.bidderRequestCount=e.bidderRequestsCount),e.bidderWinsCount>0&&(r.bidderWinCount=e.bidderWinsCount);var n=(0,l.deepAccess)(e,"ortb2Imp.ext.gpid")||(0,l.deepAccess)(e,"ortb2Imp.ext.data.pbadslot");if(n&&(r.fpd={gpid:n}),e.ortb2Imp&&(r.ext={ortb2Imp:e.ortb2Imp}),e.mediaTypes){var i=e.mediaTypes,o=i.banner,a=i.video,s=i.native;o&&(r.banner=o),a&&(r.video=a),s&&(r.native=s)}return r}(e))});var d=e[0],c=(0,l.deepAccess)(d,y.TDID_ADAPTER),u=function(e){var t;return{pageURL:null==e||null===(t=e.refererInfo)||void 0===t?void 0:t.page,rawCRB:b.getCookie(E.KEY),rawCRBLocalStorage:_(E.KEY)}}(t),f=Object.assign({},{pbv:"9.17.0",aid:d.auctionId,sid:O(),url:u.pageURL,timeout:t.timeout,ts:new Date().getTime(),device:{size:[window.screen.width,window.screen.height]},imp:s,user:function(e,t,r,n,i){var o=T._getCrb(),a={crbIDs:o.syncIds||{}};if(!e&&o.tdID?a.tdID=o.tdID:e&&(a.tdID=e),t&&(a.usp=t),r&&(a.gdpr={consent:r.consentString||"",applies:!!r.gdprApplies}),null!=o.lexId&&(a.kargoID=o.lexId),null!=o.clientId&&(a.clientID=o.clientId),null!=o.optOut&&(a.optOut=o.optOut),null!=n&&(a.sharedIDEids=n),i){var s={};i.consentString&&(s.gppString=i.consentString),i.applicableSections&&(s.applicableSections=i.applicableSections),!(0,l.isEmpty)(s)&&(a.gpp=s)}return a}(c,t.uspConsent,t.gdprConsent,d.userIdAsEids,t.gppConsent),ext:function(e,t){var r={};return e&&(r.ortb2=e),t&&(r.refererInfo=t),r}(d.ortb2,null==t?void 0:t.refererInfo)});(null===(r=d.ortb2)||void 0===r||null===(r=r.site)||void 0===r?void 0:r.cat)!=null&&(f.site={cat:d.ortb2.site.cat}),d.schain&&d.schain.nodes&&(f.schain=d.schain),f.user.data=(0,l.deepAccess)(d,y.USER_DATA)||[];var g=function(){return o===window.location.pathname?++a:(o=window.location.pathname,a=0)}();null!=g&&(f.requestCount=g),null!=i&&i!=h.US_DOLLAR&&(f.cur=i),null!=u.rawCRB&&(f.rawCRB=u.rawCRB),null!=u.rawCRBLocalStorage&&(f.rawCRBLocalStorage=u.rawCRBLocalStorage);var v=(0,l.deepAccess)(d,y.SOCIAL_CANVAS);null!=v&&(f.socan=v);var S=(0,l.deepAccess)(d,y.SUA);if(S){var w=[];I.forEach(function(e){var t=S[e];if(!!t&&("string"!=typeof t||""!==t.trim()))switch(e){case A.MOBILE&&t<1:case A.SOURCE&&t<1:break;default:w.push(e)}}),f.device.sua=(0,l.pick)(S,w)}var C=null!=_(E.PAGE_VIEW_ID),x=null!=_(E.PAGE_VIEW_TIMESTAMP),P=null!=_(E.PAGE_VIEW_URL),D={};return C&&(D.id=_(E.PAGE_VIEW_ID)),x&&(D.timestamp=Number(_(E.PAGE_VIEW_TIMESTAMP))),P&&(D.url=_(E.PAGE_VIEW_URL)),!(0,l.isEmpty)(D)&&(f.page=D),f.ext&&0===Object.keys(f.ext).length&&delete f.ext,Object.assign({},t,{method:m.REQUEST_METHOD,url:"https://".concat(m.HOST).concat(m.REQUEST_ENDPOINT),data:f,currency:i})},interpretResponse:function(e,t){var r=e.body,n=[],i=[];if((0,l.isEmpty)(r)||"object"!==(0,c.default)(r))return i;for(var o=0,a=Object.entries(r);o<a.length;o++){var s,u=(0,d.default)(a[o],2),p=u[0],f=u[1],g={mediaType:f.mediaType&&m.SUPPORTED_MEDIA_TYPES.includes(f.mediaType)?f.mediaType:v.BANNER};null!==(s=f.metadata)&&void 0!==s&&s.landingPageDomain&&(g.clickUrl=f.metadata.landingPageDomain[0],g.advertiserDomains=f.metadata.landingPageDomain);var b={requestId:p,cpm:Number(f.cpm),width:f.width,height:f.height,ttl:300,creativeId:f.creativeID,dealId:f.targetingCustom,netRevenue:!0,currency:f.currency||t.currency,mediaType:g.mediaType,meta:g};g.mediaType==v.VIDEO?f.admUrl?b.vastUrl=f.admUrl:b.vastXml=f.adm:b.ad=f.adm,i.push(b),f.auctionConfig&&n.push({bidId:p,config:f.auctionConfig})}return n.length>0?{bids:i,paapi:n}:i},getUserSyncs:function(e,t,r,n,i){var o=[],a=S(),s=function(){return T._getCrb().clientId}(),d=r&&r.gdprApplies?1:0,c=r&&r.consentString?r.consentString:"",u=i&&i.consentString?i.consentString:"",l=i&&i.applicableSections&&Array.isArray(i.applicableSections)?i.applicableSections.join(","):"";return"string"==typeof n&&4==n.length&&1==n[0]&&"Y"==n[2]?o:(e.iframeEnabled&&a&&s&&o.push({type:"iframe",url:E.SYNC_URL.replace("{UUID}",s).replace("{SEED}",a).replace("{GDPR}",d).replace("{GDPR_CONSENT}",c).replace("{US_PRIVACY}",n||"").replace("{GPP_STRING}",u).replace("{GPP_SID}",l)}),o)},supportedMediaTypes:m.SUPPORTED_MEDIA_TYPES,onTimeout:function(e){if(null!=e)e.forEach(function(e){(function(e,t){try{var r=(0,l.buildUrl)({protocol:"https",hostname:m.HOST,pathname:m.TIMEOUT_ENDPOINT,search:{aid:e,ato:t}});(0,l.triggerPixel)(r)}catch(e){}})(e.auctionId,e.timeout)})},_getCrb:function(){var e=function(){try{return JSON.parse(atob(_(E.KEY)))}catch(e){return{}}}();return Object.keys(e).length?e:function(){try{var e=JSON.parse(b.getCookie(E.KEY));if(e&&e.v){var t=JSON.parse(atob(e.v));if(t)return t}return{}}catch(e){return{}}}()},_getSessionId:O};(0,f.registerBidder)(T),(0,u.registerModule)("kargoBidAdapter")},5786:function(e,t,r){"use strict";var n,i=r(1640),o=i(r(9837)),a=r(9895),s=r(1235),d=r(2885),c=r(4288),u=r(5723),l=r(9293);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var f="linkedInAdsId",g="LinkedIn Ads ID: ",v=(0,c.getStorageManager)({moduleType:u.MODULE_TYPE_UID,moduleName:f});(0,d.submodule)("userId",{name:f,getCookieIds:function(){return{li_fat:v.getCookie("li_fat"),li_giant:v.getCookie("li_giant")}},decode:function(e){var t=this.getCookieIds();return(0,s.logInfo)("".concat(g," found Legacy cookies: ").concat(JSON.stringify(t))),{linkedInAdsId:{li_adsId:e,ext:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},t)}}},getId:function(e){var t,r=(null==e||null===(t=e.storage)||void 0===t?void 0:t.name)||"li_adsId",n=v.localStorageIsEnabled()&&v.getDataFromLocalStorage(r);return this.hasConsent()&&!n&&((0,s.logInfo)("".concat(g," existing id not found, generating a new li_adsId")),n=(0,s.generateUUID)()),{id:n}},hasConsent:function(){var e=l.gdprDataHandler.getConsentData(),t=!(null!=e&&e.gdprApplies),r=l.coppaDataHandler.getCoppa(),n=l.uspDataHandler.getConsentData()||"",i=!(4===n.length&&"Y"===n[1]&&"Y"===n[2]);return t&&i&&!r},eids:{linkedInAdsId:{source:"linkedin.com",getValue:function(e){return e.li_adsId},getUidExt:function(e){if(e.ext)return e.ext},atype:1}}}),(0,a.registerModule)("linkedInAdsIdSystem")},1717:function(e,t,r){"use strict";var n,i=r(9895);r(2095),(0,i.registerModule)("liveIntentIdSystem")},3097:function(e,t,r){"use strict";var n,i=r(9895),o=r(2885),a=r(5723),s=r(4288),d="lmpid",c="__lmpid",u=(0,s.getStorageManager)({moduleType:a.MODULE_TYPE_UID,moduleName:d});(0,o.submodule)("userId",{name:d,decode:function(e){return e?{lmpid:e}:void 0},getId:function(e){var t=window[c]||(u.localStorageIsEnabled()?u.getDataFromLocalStorage(c):null);return t?{id:t}:void 0},eids:{lmpid:{source:"loblawmedia.ca",atype:3}}}),(0,i.registerModule)("lmpIdSystem")},7340:function(e,t,r){"use strict";var n,i,o=r(9895),a=r(1235),s=r(721),d=r(2885),c=r(4288),u=r(9293),l=r(5723),p="panoramaId",f="".concat(p,"_expiry"),g="_cc_id",v="lotamePanoramaId",m=(0,c.getStorageManager)({moduleType:l.MODULE_TYPE_UID,moduleName:v});function b(e){var t=null;if(m.cookiesAreEnabled()&&(t=m.getCookie(e,void 0)),m.hasLocalStorage()&&null===t){var r=m.getDataFromLocalStorage("".concat(e,"_exp"),void 0);""===r||null===r?t=m.getDataFromLocalStorage(e,void 0):r&&new Date(parseInt(r,10)).getTime()-Date.now()>0&&(t=m.getDataFromLocalStorage(e,void 0))}return t}function h(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,a.timestamp)()+6048e5;if(e&&t){var n=new Date(r).toUTCString();m.cookiesAreEnabled()&&m.setCookie(e,t,n,"Lax",i,void 0),m.hasLocalStorage()&&(m.setDataInLocalStorage("".concat(e,"_exp"),String(r),void 0),m.setDataInLocalStorage(e,t,void 0))}}function y(e){if(e){if(m.cookiesAreEnabled()){var t=new Date(0).toUTCString();m.setCookie(e,"",t,"Lax",i,void 0)}m.hasLocalStorage()&&m.removeDataFromLocalStorage(e,void 0)}}var A={name:v,gvlid:95,decode:function(e,t){return(0,a.isStr)(e)?{lotamePanoramaId:e}:void 0},getId:function(e,t,r){i=A.findRootDomain();var n,o,d=(e&&e.params||{}).clientId,c=!(0,a.isEmpty)(d),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t={data:b(p),expiryTimestampMs:0,clientExpiryTimestampMs:0};try{if(e){var r=b("".concat(f,"_").concat(e));(0,a.isStr)(r)&&(t.clientExpiryTimestampMs=parseInt(r,10))}var n=b(f);(0,a.isStr)(n)&&(t.expiryTimestampMs=parseInt(n,10))}catch(e){(0,a.logError)(e)}return t}(d),v=Date.now()>l.expiryTimestampMs;if(c&&Date.now()<l.clientExpiryTimestampMs)return{id:void 0,reason:"NO_CLIENT_CONSENT"};if(!v)return{id:l.data};var I=(m.cookiesAreEnabled()&&(o=m.getCookie(g,void 0)),!o&&m.hasLocalStorage()&&(o=m.getDataFromLocalStorage(g,void 0)),o),E=u.uspDataHandler.getConsentData();return void 0!==E&&!(0,a.isEmpty)(E)&&!(0,a.isEmptyStr)(E)&&(n=E),!n&&(n=b("us_privacy")),{callback:function(e){var r,o={};I&&(o.fp=I),t&&((0,a.isBoolean)(t.gdprApplies)&&(o.gdpr_applies=t.gdprApplies),r=t.consentString),!r&&(r=b("eupubconsent-v2")),!r&&(r=b("euconsent-v2")),r&&(o.gdpr_consent=r),n&&(o.us_privacy=n),c&&(o.c=d);var u=(0,a.buildUrl)({protocol:"https",host:navigator.userAgent&&-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")?"c.ltmsphrcl.net":"id.crwdcntrl.net",pathname:"/id",search:(0,a.isEmpty)(o)?void 0:o});(0,s.ajax)(u,function(t){var r;if(t)try{var n=JSON.parse(t),o=!((0,a.isArray)(n.errors)&&-1!==n.errors.indexOf(111));if(c){if(o)y("".concat(f,"_").concat(d));else if((0,a.isStr)(n.no_consent)&&"CLIENT"===n.no_consent){h("".concat(f,"_").concat(d),n.expiry_ts,n.expiry_ts),e();return}}h(f,n.expiry_ts,n.expiry_ts),(0,a.isStr)(n.profile_id)?(o&&!function(e){if(m.cookiesAreEnabled()){var t=new Date((0,a.timestamp)()+23328e6).toUTCString();m.setCookie(g,e,t,"Lax",i,void 0)}m.hasLocalStorage()&&m.setDataInLocalStorage(g,e,void 0)}(n.profile_id),(0,a.isStr)(n.core_id)?(h(p,n.core_id,n.expiry_ts),r=n.core_id):y(p)):(o&&y(g),y(p))}catch(e){(0,a.logError)(e)}e(r)},void 0,{method:"GET",withCredentials:!0})}}},eids:{lotamePanoramaId:{source:"crwdcntrl.net",atype:1}}};(0,d.submodule)("userId",A),(0,o.registerModule)("lotamePanoramaIdSystem")},2414:function(e,t,r){"use strict";var n,i=r(7251),o=r(9895),a=r(1235),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=i(e)&&"function"!=typeof e)return{default:e};var r=l(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(721)),d=r(2885),c=r(4288),u=r(5723);function l(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(l=function(e){return e?r:t})(e)}var p="merkleId",f="https://prebid.sv.rkdms.com/identity/",g="_svsid",v=(0,c.getStorageManager)({moduleType:u.MODULE_TYPE_UID,moduleName:p});function m(e,t){var r,n,i,o,d,c=(o=(i=null,i="string"==typeof(n=r=e).sv_session?n.sv_session:v.getCookie(g)),d=r.endpoint+"?sv_domain=".concat(r.sv_domain,"&sv_pubid=").concat(r.sv_pubid,"&ssp_ids=").concat(r.ssp_ids.join()),o&&(d="".concat(d,"&sv_session=").concat(o)),(0,a.logInfo)("Merkle url :"+d),d);return function(e){s.ajaxBuilder()(c,function(r){if(r)try{n=JSON.parse(r),!function(e,t){if((0,a.logInfo)("Merkle setting "+"".concat(g)),t&&t[g]&&"string"==typeof t[g]){var r,n,i,o;r=g,n=t[g],i=e.expires,(o=new Date).setTime(o.getTime()+6e4*i),v.setCookie(r,n,o.toUTCString(),"Lax")}}(t,n),(0,a.logInfo)("Merkle responseObj "+JSON.stringify(n))}catch(e){(0,a.logError)(e)}var n,i=new Date().toUTCString();n.date=i,(0,a.logInfo)("Merkle responseObj with date "+JSON.stringify(n)),e(n)},function(t){(0,a.logError)("".concat(p,": merkleId fetch encountered an error"),t),e()},{method:"GET",withCredentials:!0})}}var b={name:p,decode:function(e){var t=e&&e.pam_id&&"string"==typeof e.pam_id.id?e.pam_id:void 0;if((0,a.logInfo)("Merkle id "+JSON.stringify(t)),t)return{merkleId:t};var r=e&&null!=e&&e.merkleId&&Array.isArray(e.merkleId)?e.merkleId:void 0;return(0,a.logInfo)("merkleIds: "+JSON.stringify(r)),r?{merkleId:r}:void 0},getId:function(e,t){(0,a.logInfo)("User ID - merkleId generating id");var r=e&&e.params||{};if("string"!=typeof r.sv_pubid){(0,a.logError)("User ID - merkleId submodule requires a valid sv_pubid string to be defined");return}if(!Array.isArray(r.ssp_ids)){(0,a.logError)("User ID - merkleId submodule requires a valid ssp_ids array to be defined");return}if(t&&"boolean"==typeof t.gdprApplies&&t.gdprApplies){(0,a.logError)("User ID - merkleId submodule does not currently handle consent strings");return}return"string"!=typeof r.endpoint&&((0,a.logWarn)("User ID - merkleId submodule endpoint string is not defined"),r.endpoint=f),"string"!=typeof r.sv_domain&&(r.sv_domain=b.findRootDomain()),{callback:m(r,e&&e.storage||{})}},extendId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0;(0,a.logInfo)("User ID - stored id "+r);var n=e&&e.params||{};if("string"!=typeof n.endpoint&&((0,a.logWarn)("User ID - merkleId submodule endpoint string is not defined"),n.endpoint=f),t&&"boolean"==typeof t.gdprApplies&&t.gdprApplies){(0,a.logError)("User ID - merkleId submodule does not currently handle consent strings");return}"string"!=typeof n.sv_domain&&(n.sv_domain=b.findRootDomain());var i=e&&e.storage||{};if(i&&i.refreshInSeconds&&"number"==typeof n.refreshInSeconds)return{id:r};var o=25200;n&&n.refreshInSeconds&&"number"==typeof n.refreshInSeconds&&(o=n.refreshInSeconds,(0,a.logInfo)("User ID - merkleId param refreshInSeconds"+o));var s=new Date(r.date),d=!1;return s&&(d=s&&Date.now()-s.getTime()>1e3*o)?((0,a.logInfo)("User ID - merkleId needs refreshing id"),{callback:m(n,i)}):((0,a.logInfo)("User ID - merkleId not refreshed"),{id:r})},eids:{merkleId:{atype:3,getSource:function(e){var t;return null!=e&&null!==(t=e.ext)&&void 0!==t&&t.ssp?"".concat(e.ext.ssp,".merkleinc.com"):"merkleinc.com"},getValue:function(e){return e.id},getUidExt:function(e){return e.keyID?{keyID:e.keyID}:e.ext?e.ext:void 0}}}};(0,d.submodule)("userId",b),(0,o.registerModule)("merkleIdSystem")},1025:function(e,t,r){"use strict";var n,i=r(1640),o=i(r(4995)),a=i(r(9709)),s=i(r(4237)),d=i(r(4271)),c=i(r(6945)),u=i(r(4920)),l=r(9895),p=r(1235),f=r(1634),g=r(8705),v=r(8342);function m(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(m=function(){return!!e})()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var h=(0,v.ortbConverter)({context:{netRevenue:!0,ttl:30},imp:function(e,t,r){var n=e(t,r);return n.tagid=t.adUnitCode,n}}),y="nativo",A=[g.BANNER],I=(0,l.getGlobal)();function E(){var e={},t=[];function r(t,r){!e.hasOwnProperty(t)&&(e[t]=r)}return{addBidData:function(e,n){var i=t.length;if(t.push(e),Array.isArray(n)){n.forEach(function(e){r(String(e),i)});return}r(String(n),i)},getBidData:function(r){var n=String(r);if(e.hasOwnProperty(n))return t[e[n]]}}}var S={},O={},_={},T=new Set,w=new Set,C=new Set,x={url:function(e){return"string"==typeof e},placementId:function(e){return"string"==typeof e||"number"==typeof e}};(0,f.registerBidder)({code:y,gvlid:263,aliases:["ntv"],supportedMediaTypes:A,isBidRequestValid:function(e){return e.params?!Object.keys(e.params).some(function(t){var r=e.params[t],n=x[t];return!!n&&!n(r)}):e.bidder===y},buildRequests:function(e,t){var r,n,i=JSON.stringify(h.toORTB({bidRequests:e,bidderRequest:t})),o=new P;o.addBidRequestDataSource(new R);var a=new Set,s=E(),d={length:0},c={};e.forEach(function(e){n=G(e)||t.refererInfo.location,r=(0,p.deepAccess)(e,"params.placementId");var i=[e.adUnitCode];r&&!a.has(r)&&(a.add(r),i.push(r),d[r]=e.sizes,d.length++);var u={bidId:e.bidId,size:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L;return e&&0!==e.length?1===e.length?e[0]:e.reduce(function(e,r){return t(r)>t(e)?r:e}):[]}(e.sizes)};s.addBidData(u,i);var l=N(e);l&&(c[e.adUnitCode]=l),o.processBidRequestData(e,t)}),S[t.bidderRequestId]=s;var u=function(e){return e.map(function(e){return O[e.adUnitCode]=void 0!==O[e.adUnitCode]?O[e.adUnitCode]+1:0,{adUnitCode:e.adUnitCode,mediaTypes:e.mediaTypes}})}(e),l=[{key:"ntv_pbv",value:I.version},{key:"ntv_pb_rid",value:t.bidderRequestId},{key:"ntv_ppc",value:btoa(JSON.stringify(u))},{key:"ntv_dbr",value:btoa(JSON.stringify(O))},{key:"ntv_url",value:encodeURIComponent(n)}];if(Object.keys(c).length&&l.unshift({key:"ntv_ppf",value:btoa(JSON.stringify(c))}),T.size>0&&l.unshift({key:"ntv_atf",value:Array.from(T).join(",")}),w.size>0&&l.unshift({key:"ntv_avtf",value:Array.from(w).join(",")}),C.size>0&&l.unshift({key:"ntv_ctf",value:Array.from(C).join(",")}),d.length&&l.unshift({key:"ntv_pas",value:btoa(JSON.stringify(d))}),a.size>0){var f=[];a.forEach(function(e){return f.push(e)}),l.unshift({key:"ntv_ptd",value:f.join(",")})}t.gdprConsent&&l.unshift({key:"ntv_gdpr_consent",value:t.gdprConsent.consentString}),t.uspConsent&&l.unshift({key:"us_privacy",value:t.uspConsent});var g=q("https://exchange.postrelease.com/prebid",[o.getRequestDataQueryString(),function(e){return e.reduce(function(e,t){return V(e,t.key,t.value)},"")}(l)]);return{method:"POST",url:g,data:i}},interpretResponse:function(e,t){var r=this;if(!e||!e.body||(0,p.isEmpty)(e.body))return[];try{var n,i,o="string"==typeof e.body?JSON.parse(e.body):e.body,a=[];return o.seatbid.forEach(function(e){e.bid.forEach(function(e){n={requestId:(i=r.getAdUnitData(o.id,e)).bidId,cpm:e.price,currency:o.cur,width:e.w||i.size[0],height:e.h||i.size[1],creativeId:e.crid,dealId:e.id,netRevenue:!0,ttl:e.ttl||360,ad:e.adm,meta:{advertiserDomains:e.adomain}},e.ext&&(_[e.id]=e.ext),a.push(n)})}),delete S[o.id],a}catch(e){return[]}},getUserSyncs:function(e,t,r,n){var i,o="";r&&(o=V(o,"gdpr",r.gdprApplies?1:0),o=V(o,"gdpr_consent",encodeURIComponent(r.consentString||""))),n&&(o=V(o,"us_privacy",encodeURIComponent(n.uspConsent)));var a={iframe:e.iframeEnabled,image:e.pixelEnabled},s=[];return t.forEach(function(e){if(!e||!e.body||(0,p.isEmpty)(e.body))return s;try{i="string"==typeof e.body?JSON.parse(e.body):e.body}catch(e){return}i&&i.seatbid&&0!==i.seatbid.length&&i.seatbid.forEach(function(e){e.syncUrls.forEach(function(e){a[e.type]&&""!==e.url.trim()&&s.push({type:e.type,url:e.url.replace("{GDPR_params}",o)})})})}),s},onBidWon:function(e){var t=_[e.dealId];t&&(F(T,t.adsToFilter),F(w,t.advertisersToFilter),F(C,t.campaignsToFilter))},getAdUnitData:function(e,t){var r=S[e],n=t.impid,i=(0,p.deepAccess)(t,"ext.ad_unit_id");return r.getBidData(i)||r.getBidData(n)}});var P=(0,u.default)(function e(){(0,c.default)(this,e),this.bidRequestDataSources=[]},[{key:"addBidRequestDataSource",value:function(e){e instanceof D&&this.bidRequestDataSources.push(e)}},{key:"processBidRequestData",value:function(e,t){var r,n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(this.bidRequestDataSources);try{for(n.s();!(r=n.n()).done;)r.value.processBidRequestData(e,t)}catch(e){n.e(e)}finally{n.f()}}},{key:"getRequestDataQueryString",value:function(){if(0!=this.bidRequestDataSources.length)return this.bidRequestDataSources.map(function(e){return e.getRequestQueryString()}).filter(function(e){return""!==e}).join("&")}}]),D=(0,u.default)(function e(){(0,c.default)(this,e),this.type="BidRequestDataSource"},[{key:"processBidRequestData",value:function(e,t){}},{key:"getRequestQueryString",value:function(){return""}}]),R=function(e){function t(){var e,r,n,i;return(0,c.default)(this,t),r=this,n=t,n=(0,s.default)(n),(e=(0,a.default)(r,m()?Reflect.construct(n,[],(0,s.default)(r).constructor):n.apply(r,i))).type="UserEIDs",e.qsParam=new j("ntv_pb_eid"),e.eids=[],e}return(0,d.default)(t,e),(0,u.default)(t,[{key:"processBidRequestData",value:function(e,t){void 0!==e.userIdAsEids&&!(this.eids.length>0)&&(this.eids=e.userIdAsEids)}},{key:"getRequestQueryString",value:function(){if(0===this.eids.length)return"";var e=k(this.eids);return this.qsParam.value=e,this.qsParam.toString()}}])}(D),j=(0,u.default)(function e(t,r){(0,c.default)(this,e),this.key=t,this.value=r});function k(e){try{return btoa(JSON.stringify(e))}catch(e){}}function N(e){if("function"==typeof e.getFloor){var t={},r=e.mediaTypes,n=new Set;Object.keys(r).forEach(function(i){var o=r[i],a={};(o.sizes||o.playerSize||[]).forEach(function(t){var r=e.getFloor({currency:"USD",mediaType:i,size:t});a[M(t)]=r.floor,n.add(t)}),t[i]=a;var s=U(e,i);s.floor>0&&(a["*"]=s.floor)});var i=B(e,["*"].concat((0,o.default)(Array.from(n))));return t["*"]=i,t}}function U(e,t){return e.getFloor({currency:"USD",mediaType:t,size:"*"})}function B(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["*"],r={};return t.forEach(function(t){var n=e.mediaTypes;e.mediaTypes={PRICE_FLOOR_WILDCARD:n.sizes};var i=e.getFloor({currency:"USD",mediaType:"*",size:t});e.mediaTypes=n,r["*"!==t?M(t):"*"]=i.floor}),r}function M(e){return!Array.isArray(e)||e.length<2?"":"".concat(e[0],"x").concat(e[1])}j.prototype.toString=function(){return"".concat(this.key,"=").concat(this.value)};function V(e,t,r){return e+"".concat(e.length?"&":"").concat(t,"=").concat(r)}function q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length||!Array.isArray(t))return e;var r=t.filter(function(e){return""!==e.trim()});if(0===r.length)return e;for(var n="".concat(e,"?").concat(r[0]),i=1;i<r.length;i++)n+="&".concat(r[i]);return n}var L=function(e){return e[0]*e[1]};function F(e,t){t&&Array.isArray(t)&&t.length&&t.forEach(function(t){return e.add(t)})}function G(e){var t=(0,p.deepAccess)(e,"params.url");if(void 0!=t){if(z(t))return t;t=W(t);try{return new URL(t).href}catch(e){}}}function z(e){return/^http[s]?\:/.test(e)}function W(e){if(z(e))return e;var t="https:";return 0!==e.indexOf("//")&&(t+="//"),"".concat(t).concat(e)}(0,l.registerModule)("nativoBidAdapter")},5114:function(e,t,r){"use strict";var n,i=r(1640),o=r(7251),a=i(r(9837)),s=i(r(4763));i(r(3477));var d=r(9895),c=r(3408),u=r(1634),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(1235)),p=r(8705),f=r(8342);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var b={code:"openx",gvlid:69,supportedMediaTypes:[p.BANNER,p.VIDEO],isBidRequestValid:function(e){var t=e.params.delDomain||e.params.platform;return l.deepAccess(e,"mediaTypes.banner")&&t?!!e.params.unit||l.deepAccess(e,"mediaTypes.banner.sizes.length")>0:!!(e.params.unit&&t)},buildRequests:function(e,t){var r=e.filter(function(e){return A(e)}),n=e.filter(function(e){return function(e){return l.deepAccess(e,"mediaTypes.banner")||!A(e)}(e)}),i=n.length?[y(n,t,p.BANNER)]:[];return r.forEach(function(e){i.push(y([e],t,p.VIDEO))}),i},interpretResponse:function(e,t){return!e.body&&(e.body={nbr:0}),h.fromORTB({request:t.data,response:e.body})},getUserSyncs:function(e,t,r,n){if(e.iframeEnabled||e.pixelEnabled){var i=e.iframeEnabled?"iframe":"image",o=[],a="https://u.openx.net/w/1.0/pd";if(r&&(o.push("gdpr="+(r.gdprApplies?1:0)),o.push("gdpr_consent="+encodeURIComponent(r.consentString||""))),n&&o.push("us_privacy="+encodeURIComponent(n)),t.length>0&&t[0].body&&t[0].body.ext){var s=t[0].body.ext;s.delDomain?a="https://".concat(s.delDomain,"/w/1.0/pd"):s.platform&&o.push("ph="+s.platform)}else o.push("ph=2d1251ae-7f3a-47cf-bd2a-2f288854a0ba");return[{type:i,url:"".concat(a).concat(o.length>0?"?"+o.join("&"):"")}]}}};(0,u.registerBidder)(b);var h=(0,f.ortbConverter)({context:{netRevenue:!0,ttl:300},imp:function(e,t,r){var n=e(t,r);return(0,l.mergeDeep)(n,{tagid:t.params.unit,ext:{divid:t.adUnitCode}}),t.params.customParams&&l.deepSetValue(n,"ext.customParams",t.params.customParams),t.params.customFloor&&!n.bidfloor&&(n.bidfloor=t.params.customFloor),n},request:function(e,t,r,n){var i=e(t,r,n);(0,l.mergeDeep)(i,{at:1,ext:{bc:"".concat("hb_pb_ortb","_").concat("2.0"),pv:"9.17.0"}});var o=n.bidRequests[0];return o.params.coppa&&l.deepSetValue(i,"regs.coppa",1),o.params.doNotTrack&&l.deepSetValue(i,"device.dnt",1),o.params.platform&&l.deepSetValue(i,"ext.platform",o.params.platform),o.params.delDomain&&l.deepSetValue(i,"ext.delDomain",o.params.delDomain),o.params.response_template_name&&l.deepSetValue(i,"ext.response_template_name",o.params.response_template_name),o.params.test&&(i.test=1),i},bidResponse:function(e,t,r){var n=e(t,r);return t.ext&&(n.meta.networkId=t.ext.dsp_id,n.meta.advertiserId=t.ext.buyer_id,n.meta.brandId=t.ext.brand_id),n},response:function(e,t,r,n){var i=n.ortbRequest;i.ext&&(i.ext.delDomain&&l.deepSetValue(r,"ext.delDomain",i.ext.delDomain),i.ext.platform&&l.deepSetValue(r,"ext.platform",i.ext.platform));var o=e(t,r,n),a=l.deepAccess(r,"ext.fledge_auction_configs");return a?(a=Object.entries(a).map(function(e){var t,r=(0,s.default)(e,2),i=r[0],o=r[1];return{bidId:i,config:(0,l.mergeDeep)(Object.assign({},o),{auctionSignals:{ortb2Imp:null===(t=n.impContext[i])||void 0===t?void 0:t.imp}})}}),{bids:o.bids,paapi:a}):o},overrides:{imp:{bidfloor:function(e,t,r,n){var i={};e(i,r,m(m({},n),{},{currency:"USD"})),"USD"===i.bidfloorcur&&Object.assign(t,i)},video:function(e,t,r,n){var i=r.mediaTypes[p.VIDEO];i&&(i=Object.assign({},i,r.params.video),r=m(m({},r),{},{mediaTypes:(0,a.default)({},p.VIDEO,i)})),e(t,r,n)}}}});function y(e,t,r){return{method:"POST",url:c.config.getConfig("openxOrtbUrl")||"https://rtb.openx.net/openrtbb/prebidjs",data:h.toORTB({bidRequests:e,bidderRequest:t,context:{mediaType:r}})}}function A(e){return l.deepAccess(e,"mediaTypes.video")}(0,d.registerModule)("openxBidAdapter")},7262:function(e,t,r){"use strict";var n,i=r(1640),o=i(r(7251)),a=r(9895),s=r(1235),d=r(1634),c=r(8705),u=r(3408),l=r(4359),p=r(4389),f=r(2583);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var v="https://elb.the-ozone-project.com",m="/openrtb2/auction",b="/static/load-cookie.html",h="https://test.ozpr.net",y="2.9.4",A={gvlid:524,aliases:[{code:"lmc",gvlid:524},{code:"venatus",gvlid:524}],version:y,code:"ozone",supportedMediaTypes:[c.VIDEO,c.BANNER],cookieSyncBag:{publisherId:null,siteId:null,userIdObject:{}},propertyBag:{pageId:null,buildRequestsStart:0,buildRequestsEnd:0,endpointOverride:null},whitelabel_defaults:{logId:"OZONE",bidder:"ozone",keyPrefix:"oz",auctionUrl:v+m,cookieSyncUrl:v+b,rendererUrl:"https://prebid.the-ozone-project.com/ozone-renderer.js",batchRequests:!1},loadWhitelabelData:function(e){if(!this.propertyBag.whitelabel){this.propertyBag.whitelabel=JSON.parse(JSON.stringify(this.whitelabel_defaults));var t=e.bidder||"ozone";this.propertyBag.whitelabel.logId=t.toUpperCase(),this.propertyBag.whitelabel.bidder=t;var r=u.config.getConfig(t)||{};(0,s.logInfo)("got bidderConfig: ",(0,s.deepClone)(r)),r.kvpPrefix&&(this.propertyBag.whitelabel.keyPrefix=r.kvpPrefix);var n=this.getGetParametersAsObject();if(r.endpointOverride&&(r.endpointOverride.origin&&(this.propertyBag.endpointOverride=r.endpointOverride.origin,this.propertyBag.whitelabel.auctionUrl=r.endpointOverride.origin+m,this.propertyBag.whitelabel.cookieSyncUrl=r.endpointOverride.origin+b),n.hasOwnProperty("renderer")?n.renderer.match("%3A%2F%2F")?this.propertyBag.whitelabel.rendererUrl=decodeURIComponent(n.renderer):this.propertyBag.whitelabel.rendererUrl=n.renderer:r.endpointOverride.rendererUrl&&(this.propertyBag.whitelabel.rendererUrl=r.endpointOverride.rendererUrl),r.endpointOverride.cookieSyncUrl&&(this.propertyBag.whitelabel.cookieSyncUrl=r.endpointOverride.cookieSyncUrl),r.endpointOverride.auctionUrl&&(this.propertyBag.endpointOverride=r.endpointOverride.auctionUrl,this.propertyBag.whitelabel.auctionUrl=r.endpointOverride.auctionUrl)),r.hasOwnProperty("batchRequests")&&(this.batchValueIsValid(r.batchRequests)?this.propertyBag.whitelabel.batchRequests=r.batchRequests:(0,s.logError)("bidderConfig.batchRequests must be boolean or a number. Found & ignored data type: "+(0,o.default)(r.batchRequests))),r.hasOwnProperty("videoParams")&&(this.propertyBag.whitelabel.videoParams=r.videoParams),n.hasOwnProperty("batchRequests")){var i=parseInt(n.batchRequests);this.batchValueIsValid(i)?this.propertyBag.whitelabel.batchRequests=i:(0,s.logError)("Ignoring query param: batchRequests - this must be a positive number")}try{n.hasOwnProperty("auction")&&"dev"===n.auction&&((0,s.logInfo)("GET: auction=dev"),this.propertyBag.whitelabel.auctionUrl=h+m),n.hasOwnProperty("cookiesync")&&"dev"===n.cookiesync&&((0,s.logInfo)("GET: cookiesync=dev"),this.propertyBag.whitelabel.cookieSyncUrl=h+b)}catch(e){}(0,s.logInfo)("set propertyBag.whitelabel to",this.propertyBag.whitelabel)}},batchValueIsValid:function(e){return"boolean"==typeof e||"number"==typeof e&&e>0},getAuctionUrl:function(){return this.propertyBag.whitelabel.auctionUrl},getCookieSyncUrl:function(){return this.propertyBag.whitelabel.cookieSyncUrl},getRendererUrl:function(){return this.propertyBag.whitelabel.rendererUrl},getVideoPlacementValue:function(e){return 0>["instream","outstream"].indexOf(e)?null:(0,s.deepAccess)(this.propertyBag,"whitelabel.videoParams.".concat(e),null)},getBatchRequests:function(){return((0,s.logInfo)("getBatchRequests going to return ",this.propertyBag.whitelabel.batchRequests),!0===this.propertyBag.whitelabel.batchRequests)?10:"number"==typeof this.propertyBag.whitelabel.batchRequests&&!!(this.propertyBag.whitelabel.batchRequests>0)&&this.propertyBag.whitelabel.batchRequests},isBidRequestValid:function(e){this.loadWhitelabelData(e),(0,s.logInfo)("isBidRequestValid : ",u.config.getConfig(),e);var t=e.adUnitCode,r="VALIDATION FAILED : missing {param} : siteId, placementId and publisherId are REQUIRED";if(!e.params.hasOwnProperty("placementId"))return(0,s.logError)(r.replace("{param}","placementId"),t),!1;if(!this.isValidPlacementId(e.params.placementId))return(0,s.logError)("VALIDATION FAILED : placementId must be exactly 10 numeric characters",t),!1;if(!e.params.hasOwnProperty("publisherId"))return(0,s.logError)(r.replace("{param}","publisherId"),t),!1;if(!e.params.publisherId.toString().match(/^[a-zA-Z0-9\-]{12}$/))return(0,s.logError)("VALIDATION FAILED : publisherId must be exactly 12 alphanumeric characters including hyphens",t),!1;if(!e.params.hasOwnProperty("siteId"))return(0,s.logError)(r.replace("{param}","siteId"),t),!1;if(!e.params.siteId.toString().match(/^[0-9]{10}$/))return(0,s.logError)("VALIDATION FAILED : siteId must be exactly 10 numeric characters",t),!1;if(e.params.hasOwnProperty("customParams"))return(0,s.logError)("VALIDATION FAILED : customParams should be renamed to customData",t),!1;if(e.params.hasOwnProperty("customData")){if(!Array.isArray(e.params.customData))return(0,s.logError)("VALIDATION FAILED : customData is not an Array",t),!1;if(e.params.customData.length<1)return(0,s.logError)("VALIDATION FAILED : customData is an array but does not contain any elements",t),!1;if(!e.params.customData[0].hasOwnProperty("targeting"))return(0,s.logError)('VALIDATION FAILED : customData[0] does not contain "targeting"',t),!1;if("object"!=(0,o.default)(e.params.customData[0].targeting))return(0,s.logError)("VALIDATION FAILED : customData[0] targeting is not an object",t),!1}if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(c.VIDEO)){if(!e.mediaTypes[c.VIDEO].hasOwnProperty("context"))return(0,s.logError)("No video context key/value in bid. Rejecting bid: ",e),!1;if("instream"!==e.mediaTypes[c.VIDEO].context&&"outstream"!==e.mediaTypes[c.VIDEO].context)return(0,s.logError)("video.context is invalid. Only instream/outstream video is supported. Rejecting bid: ",e),!1}return!0},isValidPlacementId:function(e){return e.toString().match(/^[0-9]{10}$/)},buildRequests:function(e,t){var r,n,i=this;this.loadWhitelabelData(e[0]),this.propertyBag.buildRequestsStart=new Date().getTime();var a=this.propertyBag.whitelabel.bidder,d=this.propertyBag.whitelabel.keyPrefix;if((0,s.logInfo)("buildRequests time: ".concat(this.propertyBag.buildRequestsStart," v ").concat(y," validBidRequests"),(0,s.deepClone)(e),"bidderRequest",(0,s.deepClone)(t)),this.blockTheRequest())return[];var l=!!t.fledgeEnabled,p={publisherId:"",siteId:""};e.length>0&&(this.cookieSyncBag.userIdObject=Object.assign(this.cookieSyncBag.userIdObject,this.findAllUserIdsFromEids(e[0])),this.cookieSyncBag.siteId=(0,s.deepAccess)(e[0],"params.siteId"),this.cookieSyncBag.publisherId=(0,s.deepAccess)(e[0],"params.publisherId"),p=e[0].params),(0,s.logInfo)("cookie sync bag",this.cookieSyncBag);var f=this.getWhitelabelConfigItem("ozone.singleRequest");f=!1!==f,(0,s.logInfo)("config ".concat(a,".singleRequest : "),f);var g={};(0,s.logInfo)("going to get ortb2 from bidder request...");var v=(0,s.deepAccess)(t,"ortb2",null);(0,s.logInfo)("got fpd: ",v),v&&(0,s.deepAccess)(v,"user")&&((0,s.logInfo)("added FPD user object"),g.user=v.user);var m=this.getGetParametersAsObject(),b=d+"testmode",h=m[b]||null;g.device=(null==t||null===(r=t.ortb2)||void 0===r?void 0:r.device)||{};var A=this.getPlacementIdOverrideFromGetParam(),I=null,E=(0,s.deepAccess)(e,"0.ortb2.source.tid");"0"===E&&(E=null);var S=e.map(function(e){var t={},r=A||i.getPlacementId(e);t.id=e.bidId,t.tagid=r;var n=(0,s.parseUrl)(i.getRefererInfo().page);t.secure="https"===n.protocol?1:0;var d=[];if(e.hasOwnProperty("mediaTypes")){if(e.mediaTypes.hasOwnProperty(c.BANNER)&&(d=e.mediaTypes[c.BANNER].sizes,(0,s.logInfo)("setting banner size from the mediaTypes.banner element for bidId "+t.id+": ",d)),e.mediaTypes.hasOwnProperty(c.VIDEO)){if((0,s.logInfo)("openrtb 2.5 compliant video"),"object"==(0,o.default)(e.mediaTypes[c.VIDEO])){var u=(0,s.deepAccess)(e,"params.video",{});t.video=i.unpackVideoConfigIntoIABformat(e.mediaTypes[c.VIDEO],u),t.video=i.addVideoDefaults(t.video,e.mediaTypes[c.VIDEO],u)}var p=P(t.video);(0,s.logInfo)("setting video object from the mediaTypes.video element: "+t.id+":",t.video,"wh=",p),p&&"object"===(0,o.default)(p)?(t.video.w=p.w,t.video.h=p.h,D(t.video)?((0,s.logInfo)("setting obj.video.format to be an array of objects"),t.video.ext.format=[p]):((0,s.logInfo)("setting obj.video.format to be an object"),t.video.ext.format=p)):(0,s.logWarn)("cannot set w, h & format values for video; the config is not right")}e.mediaTypes.hasOwnProperty(c.NATIVE)&&(t.native=e.mediaTypes[c.NATIVE],(0,s.logInfo)("setting native object from the mediaTypes.native element: "+t.id+":",t.native)),e.hasOwnProperty("getFloor")?((0,s.logInfo)("This bidRequest object has property: getFloor"),t.floor=i.getFloorObjectForAuction(e),(0,s.logInfo)("obj.floor is : ",t.floor)):(0,s.logInfo)("This bidRequest object DOES NOT have property: getFloor")}else e.hasOwnProperty("sizes")?((0,s.logInfo)("no mediaTypes detected - will use the sizes array in the config root"),d=e.sizes):(0,s.logInfo)("no mediaTypes detected, no sizes array in the config root either. Cannot set sizes for banner type");if(d.length>0&&(t.banner={topframe:1,w:d[0][0]||0,h:d[0][1]||0,format:d.map(function(e){return{w:e[0],h:e[1]}})}),t.placementId=r,(0,s.deepSetValue)(t,"ext.prebid",{storedrequest:{id:r}}),t.ext[a]={},t.ext[a].adUnitCode=e.adUnitCode,e.params.hasOwnProperty("customData")&&(t.ext[a].customData=e.params.customData),(0,s.logInfo)("obj.ext.".concat(a," is "),t.ext[a]),null!=h){if((0,s.logInfo)("setting isTestMode to ",h),t.ext[a].hasOwnProperty("customData"))for(var f=0;f<t.ext[a].customData.length;f++)t.ext[a].customData[f].targeting[b]=h;else t.ext[a].customData=[{settings:{},targeting:{}}],t.ext[a].customData[0].targeting[b]=h}v&&(0,s.deepAccess)(v,"site")&&((0,s.logInfo)("adding fpd.site"),(0,s.deepAccess)(t,"ext."+a+".customData.0.targeting",!1)?t.ext[a].customData[0].targeting=Object.assign(t.ext[a].customData[0].targeting,v.site):(0,s.deepSetValue)(t,"ext."+a+".customData.0.targeting",v.site)),!I&&(0,s.deepAccess)(e,"schain")&&(I=e.schain);var g=(0,s.deepAccess)(e,"ortb2Imp.ext.gpid");g&&(0,s.deepSetValue)(t,"ext.gpid",g);var m=(0,s.deepAccess)(e,"ortb2Imp.ext.tid");if(m&&(t.ext[a].transactionId=m),E&&(t.ext[a].auctionId=E),l){var y=(0,s.deepAccess)(e,"ortb2Imp.ext.ae");(0,s.isInteger)(y)?(0,s.deepSetValue)(t,"ext.ae",y):(0,s.logError)("ortb2Imp.ext.ae is not an integer - ignoring it for obj.id="+t.id)}return t}),O={};if(O[a]={},O[a][d+"_pb_v"]=y,O[a][d+"_rw"]=A?1:0,e.length>0){var _=this.cookieSyncBag.userIdObject;_.hasOwnProperty("pubcid.org")&&(O[a].pubcid=_["pubcid.org"])}O[a].pv=this.getPageId();var T=this.getWhitelabelConfigItem("ozone.oz_omp_floor");(0,s.logInfo)("".concat(d,"_omp_floor dollar value = "),T),"number"==typeof T?O[a][d+"_omp_floor"]=T:void 0!==T&&(0,s.logError)("".concat(d,"_omp_floor is invalid - IF SET then this must be a number, representing dollar value eg. ").concat(d,"_omp_floor: 1.55. You have it set as a ")+(0,o.default)(T));var w=this.getWhitelabelConfigItem("ozone.oz_whitelist_adserver_keys"),C=(0,s.isArray)(w)&&w.length>0;O[a][d+"_kvp_rw"]=C?1:0,"ozone"!==a&&((0,s.logInfo)("setting aliases object"),O.prebid={aliases:{ozone:a}}),m.hasOwnProperty("ozf")&&(O[a].ozf="true"===m.ozf||"1"===m.ozf?1:0),m.hasOwnProperty("ozpf")&&(O[a].ozpf="true"===m.ozpf||"1"===m.ozpf?1:0),m.hasOwnProperty("ozrp")&&m.ozrp.match(/^[0-3]$/)&&(O[a].ozrp=parseInt(m.ozrp)),m.hasOwnProperty("ozip")&&m.ozip.match(/^\d+$/)&&(O[a].ozip=parseInt(m.ozip)),null!=this.propertyBag.endpointOverride&&(O[a].origin=this.propertyBag.endpointOverride);var x=(0,s.deepAccess)(e,"0.userIdAsEids",[]);if(g.site={publisher:{id:p.publisherId},page:this.getRefererInfo().page,id:p.siteId},g.test=u.config.getConfig("debug")?1:0,t&&t.gdprConsent){(0,s.logInfo)("ADDING GDPR info");var R=(0,s.deepAccess)(t,"gdprConsent.apiVersion",1);g.regs={ext:{gdpr:t.gdprConsent.gdprApplies?1:0,apiVersion:R}},(0,s.deepAccess)(g,"regs.ext.gdpr")?(0,s.deepSetValue)(g,"user.ext.consent",t.gdprConsent.consentString):(0,s.logInfo)("**** Strange CMP info: bidderRequest.gdprConsent exists BUT bidderRequest.gdprConsent.gdprApplies is false. See bidderRequest logged above. ****")}else(0,s.logInfo)("WILL NOT ADD GDPR info; no bidderRequest.gdprConsent object");t&&t.uspConsent?((0,s.logInfo)("ADDING USP consent info"),(0,s.deepSetValue)(g,"regs.ext.us_privacy",t.uspConsent)):(0,s.logInfo)("WILL NOT ADD USP consent info; no bidderRequest.uspConsent."),null!=t&&null!==(n=t.ortb2)&&void 0!==n&&null!==(n=n.regs)&&void 0!==n&&n.gpp&&((0,s.deepSetValue)(g,"regs.gpp",t.ortb2.regs.gpp),(0,s.deepSetValue)(g,"regs.gpp_sid",t.ortb2.regs.gpp_sid)),I&&((0,s.logInfo)("schain found"),(0,s.deepSetValue)(g,"source.ext.schain",I)),!0===u.config.getConfig("coppa")&&(0,s.deepSetValue)(g,"regs.coppa",1),O[a].cookieDeprecationLabel=(0,s.deepAccess)(t,"ortb2.device.ext.cdep","none"),(0,s.logInfo)("cookieDeprecationLabel from bidderRequest object = "+O[a].cookieDeprecationLabel);var j=this.getBatchRequests();if("number"==typeof j){(0,s.logInfo)("going to batch the requests");for(var k=[],N=0;N<S.length;N+=j)g.id=(0,s.generateUUID)(),(0,s.deepSetValue)(g,"user.ext.eids",x),E&&(0,s.deepSetValue)(g,"source.tid",E),g.imp=S.slice(N,N+j),g.ext=O,g.imp.length>0&&k.push({method:"POST",url:this.getAuctionUrl(),data:JSON.stringify(g),bidderRequest:t});return(0,s.logInfo)("batch request going to return : ",k),k}if((0,s.logInfo)("requests will not be batched."),f){(0,s.logInfo)("buildRequests starting to generate response for a single request"),g.id=(0,s.generateUUID)(),g.imp=S,g.ext=O,(0,s.deepSetValue)(g,"user.ext.eids",x),E&&(0,s.deepSetValue)(g,"source.tid",E);var U={method:"POST",url:this.getAuctionUrl(),data:JSON.stringify(g),bidderRequest:t};return(0,s.logInfo)("buildRequests request data for single = ",(0,s.deepClone)(g)),this.propertyBag.buildRequestsEnd=new Date().getTime(),(0,s.logInfo)("buildRequests going to return for single at time ".concat(this.propertyBag.buildRequestsEnd," (took ").concat(this.propertyBag.buildRequestsEnd-this.propertyBag.buildRequestsStart,"ms): "),U),U}var B=S.map(function(e){(0,s.logInfo)("buildRequests starting to generate non-single response, working on imp : ",e);var r=Object.assign({},g);return r.id=(0,s.generateUUID)(),r.imp=[e],r.ext=O,(0,s.deepSetValue)(r,"user.ext.eids",x),E&&(0,s.deepSetValue)(r,"source.tid",E),(0,s.logInfo)("buildRequests RequestSingle (for non-single) = ",r),{method:"POST",url:i.getAuctionUrl(),data:JSON.stringify(r),bidderRequest:t}});return this.propertyBag.buildRequestsEnd=new Date().getTime(),(0,s.logInfo)("buildRequests going to return for non-single at time ".concat(this.propertyBag.buildRequestsEnd," (took ").concat(this.propertyBag.buildRequestsEnd-this.propertyBag.buildRequestsStart,"ms): "),B),B},getFloorObjectForAuction:function(e){var t={banner:(0,s.deepAccess)(e,"mediaTypes.banner.sizes",null),video:(0,s.deepAccess)(e,"mediaTypes.video.playerSize",null),native:(0,s.deepAccess)(e,"mediaTypes.native.image.sizes",null)};(0,s.logInfo)("getFloorObjectForAuction mediaTypesSizes : ",t);var r={};return t.banner&&(r.banner=e.getFloor({mediaType:"banner",currency:"USD",size:t.banner})),t.video&&(r.video=e.getFloor({mediaType:"video",currency:"USD",size:t.video})),t.native&&(r.native=e.getFloor({mediaType:"native",currency:"USD",size:t.native})),(0,s.logInfo)("getFloorObjectForAuction returning : ",(0,s.deepClone)(r)),r},interpretResponse:function(e,t){var r=this;t&&t.bidderRequest&&t.bidderRequest.bids&&this.loadWhitelabelData(t.bidderRequest.bids[0]);var n=new Date().getTime(),i=this.propertyBag.whitelabel.bidder,a=this.propertyBag.whitelabel.keyPrefix;(0,s.logInfo)("interpretResponse time: ".concat(n," . Time between buildRequests done and interpretResponse start was ").concat(n-this.propertyBag.buildRequestsEnd,"ms")),(0,s.logInfo)("serverResponse, request",(0,s.deepClone)(e),(0,s.deepClone)(t));var d=(e=e.body||{}).id;if(!e.hasOwnProperty("seatbid")||"object"!==(0,o.default)(e.seatbid))return[];var u=[],l=this.getWhitelabelConfigItem("ozone.enhancedAdserverTargeting");(0,s.logInfo)("enhancedAdserverTargeting",l),void 0===l&&(l=!0),(0,s.logInfo)("enhancedAdserverTargeting",l),e.seatbid=I(e.seatbid),e.seatbid=this.removeSingleBidderMultipleBids(e.seatbid);for(var f=this.getWhitelabelConfigItem("ozone.oz_omp_floor"),g="number"==typeof f,v=this.getWhitelabelConfigItem("ozone.oz_whitelist_adserver_keys"),m=(0,s.isArray)(v)&&v.length>0,b=0;b<e.seatbid.length;b++){for(var h=e.seatbid[b],E=0;E<h.bid.length;E++)!function(){var n=r.getBidRequestForBidId(h.bid[E].impid,t.bidderRequest.bids);(0,s.logInfo)("seatbid:".concat(b,", bid:").concat(E," Going to set default w h for seatbid/bidRequest"),h.bid[E],n);var o=S(n),I=o.defaultWidth,w=o.defaultHeight,C=x(h.bid[E],I,w);C.meta={advertiserDomains:C.adomain||[]};var P=null,D=!1,R=(0,s.deepAccess)(C,"ext.prebid.type");(0,s.logInfo)("this bid type is : ".concat(R),E);var k={};if(R===c.VIDEO){if(D=!0,r.setBidMediaTypeIfNotExist(C,c.VIDEO),"outstream"===(P=r.getVideoContextForBidId(C.bidId,t.bidderRequest.bids)))(0,s.logInfo)("going to set thisBid.mediaType = VIDEO & attach a renderer to OUTSTREAM video : ",E),C.renderer=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=window.ozoneVideo;(0,s.logInfo)("newRenderer going to set loaded to ".concat(r?"true":"false"));var n=p.Renderer.install({url:A.getRendererUrl(),config:t,loaded:r,adUnitCode:e});try{n.setRender(j)}catch(e){(0,s.logError)("Prebid Error when calling setRender on renderer",n,e)}return(0,s.logInfo)("returning renderer object"),n}(C.bidId);else if((0,s.logInfo)("bid is not an outstream video, will set thisBid.mediaType = VIDEO and thisBid.vastUrl and not attach a renderer: ",E),C.vastUrl="https://".concat((0,s.deepAccess)(C,"ext.prebid.targeting.hb_cache_host","missing_host")).concat((0,s.deepAccess)(C,"ext.prebid.targeting.hb_cache_path","missing_path"),"?id=").concat((0,s.deepAccess)(C,"ext.prebid.targeting.hb_cache_id","missing_id")),k.hb_cache_host=(0,s.deepAccess)(C,"ext.prebid.targeting.hb_cache_host","no-host"),k.hb_cache_path=(0,s.deepAccess)(C,"ext.prebid.targeting.hb_cache_path","no-path"),C.hasOwnProperty("videoCacheKey"))(0,s.logInfo)("videoCacheKey already exists on the bid object, will not add it");else{var N=(0,s.deepAccess)(C,"ext.prebid.targeting.hb_uuid","no_hb_uuid");(0,s.logInfo)("Adding videoCacheKey: ".concat(N)),C.videoCacheKey=N}}else r.setBidMediaTypeIfNotExist(C,c.BANNER);if(l){var U=_(C.bidId,e.seatbid,I,w);(0,s.logInfo)("Going to iterate allBidsForThisBidId",(0,s.deepClone)(U)),Object.keys(U).forEach(function(e,t,r){(0,s.logInfo)("adding adserverTargeting for ".concat(e," for bidId ").concat(C.bidId)),k[a+"_"+e]=e,k[a+"_"+e+"_crid"]=String(U[e].crid),k[a+"_"+e+"_adv"]=String(U[e].adomain),k[a+"_"+e+"_adId"]=String(U[e].adId),k[a+"_"+e+"_pb_r"]=T(U[e].price,U[e].ext.prebid.type),k[a+"_"+e+"_size"]=String(U[e].width)+"x"+String(U[e].height),U[e].hasOwnProperty("dealid")&&(k[a+"_"+e+"_dealid"]=String(U[e].dealid)),g&&(k[a+"_"+e+"_omp"]=U[e].price>=f?"1":"0"),D&&(k[a+"_"+e+"_vid"]=P);var n=(0,s.deepAccess)(U[e],"ext.bidder.".concat(i,".floor"),null);null!=n&&(k[a+"_"+e+"_flr"]=n);var o=(0,s.deepAccess)(U[e],"ext.bidder.".concat(i,".ruleId"),null);null!=o&&(k[a+"_"+e+"_rid"]=o),e.match(/^ozappnexus/)&&(k[a+"_"+e+"_sid"]=String(U[e].cid))})}else m?(0,s.logWarn)("You have set a whitelist of adserver keys but this will be ignored because ".concat(i,".enhancedAdserverTargeting is set to false. No per-bid keys will be sent to adserver.")):(0,s.logInfo)("".concat(i,".enhancedAdserverTargeting is set to false, so no per-bid keys will be sent to adserver."));var B=O(C.bidId,e.seatbid),M=B.seat,V=B.bid;V=x(V,I,w),k[a+"_auc_id"]=String(d),k[a+"_winner"]=String(M),k[a+"_bid"]="true",k[a+"_cache_id"]=(0,s.deepAccess)(C,"ext.prebid.targeting.hb_cache_id","no-id"),k[a+"_uuid"]=(0,s.deepAccess)(C,"ext.prebid.targeting.hb_uuid","no-id"),l&&(k[a+"_imp_id"]=String(V.impid),k[a+"_pb_v"]=y,k[a+"_pb"]=V.price,k[a+"_pb_r"]=T(V.price,R),k[a+"_adId"]=String(V.adId),k[a+"_size"]="".concat(V.width,"x").concat(V.height)),m&&((0,s.logInfo)("Going to filter out adserver targeting keys not in the whitelist: ",v),Object.keys(k).forEach(function(e){-1===v.indexOf(e)&&delete k[e]})),C.adserverTargeting=k,u.push(C)}()}var w=u,C=(0,s.deepAccess)(e,"ext.igi")||[];Array.isArray(C)&&C.length>0&&(w={bids:u,fledgeAuctionConfigs:C=C.filter(function(e){return!!r.isValidAuctionConfig(e)||((0,s.logWarn)("Malformed auction config detected:",e),!1)})});var P=new Date().getTime();return(0,s.logInfo)("interpretResponse going to return at time ".concat(P," (took ").concat(P-n,"ms) Time from buildRequests Start -> interpretRequests End = ").concat(P-this.propertyBag.buildRequestsStart,"ms")),(0,s.logInfo)("interpretResponse arrAllBids (serialised): ",(0,s.deepClone)(w)),w},isValidAuctionConfig:function(e){return"object"===(0,o.default)(e)&&null!==e},setBidMediaTypeIfNotExist:function(e,t){e.hasOwnProperty("mediaType")?(0,s.logInfo)("found value for thisBid.mediaType: ".concat(e.mediaType)):((0,s.logInfo)("setting thisBid.mediaType = ".concat(t)),e.mediaType=t)},getWhitelabelConfigItem:function(e){if("ozone"===this.propertyBag.whitelabel.bidder)return u.config.getConfig(e);var t=e.replace("ozone",this.propertyBag.whitelabel.bidder);return t=t.replace("oz_",this.propertyBag.whitelabel.keyPrefix+"_"),u.config.getConfig(t)},removeSingleBidderMultipleBids:function(e){for(var t=[],r=0;r<e.length;r++){for(var n=e[r],i={seat:n.seat,bid:[]},o=[],a=0;a<n.bid.length;a++){var d=n.bid[a];if(!(0,s.contains)(o,d.impid)){o.push(d.impid);for(var c=a+1;c<n.bid.length;c++)n.bid[c].impid===d.impid&&n.bid[c].price>d.price&&(d=n.bid[c]);i.bid.push(d)}}t.push(i)}return t},getUserSyncs:function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if((0,s.logInfo)("getUserSyncs optionsType",e,"serverResponse",t,"gdprConsent",r,"usPrivacy",n,"cookieSyncBag",this.cookieSyncBag),!t||0===t.length)return[];var o=i.gppString,a=i.applicableSections,d=void 0===a?[]:a;if(e.iframeEnabled){var c=[];for(var l in u.config.getConfig("debug")&&c.push("pbjs_debug=true"),c.push("gdpr="+((0,s.deepAccess)(r,"gdprApplies",!1)?"1":"0")),c.push("gdpr_consent="+(0,s.deepAccess)(r,"consentString","")),c.push("usp_consent="+(n||"")),c.push("gpp="+(void 0===o?"":o)),Array.isArray(d)&&c.push("gpp_sid=".concat(d.join())),this.cookieSyncBag.userIdObject)c.push(l+"="+this.cookieSyncBag.userIdObject[l]);c.push("publisherId="+this.cookieSyncBag.publisherId),c.push("siteId="+this.cookieSyncBag.siteId),c.push("cb="+Date.now()),c.push("bidder="+this.propertyBag.whitelabel.bidder);var p=c.join("&");return p.length>0&&(p="?"+p),(0,s.logInfo)("getUserSyncs going to return cookie sync url : "+this.getCookieSyncUrl()+p),[{type:"iframe",url:this.getCookieSyncUrl()+p}]}},getBidRequestForBidId:function(e,t){for(var r=0;r<t.length;r++)if(t[r].bidId===e)return t[r];return null},getVideoContextForBidId:function(e,t){var r=this.getBidRequestForBidId(e,t);return null!=r?(0,s.deepAccess)(r,"mediaTypes.video.context","unknown"):null},findAllUserIdsFromEids:function(e){var t={};if(!e.hasOwnProperty("userIdAsEids"))return(0,s.logInfo)("findAllUserIdsFromEids - no bidRequest.userIdAsEids object - will quit"),this.tryGetPubCidFromOldLocation(t,e),t;var r,n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return g(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(e.userIdAsEids);try{for(n.s();!(r=n.n()).done;){var i=r.value;t[i.source]=(0,s.deepAccess)(i,"uids.0.id")}}catch(e){n.e(e)}finally{n.f()}return this.tryGetPubCidFromOldLocation(t,e),t},tryGetPubCidFromOldLocation:function(e,t){if(!e.hasOwnProperty("pubcid")){var r=(0,s.deepAccess)(t,"crumbs.pubcid");r&&(e["pubcid.org"]=r)}},getPlacementId:function(e){return e.params.placementId.toString()},getPlacementIdOverrideFromGetParam:function(){var e=this.propertyBag.whitelabel.keyPrefix,t=this.getGetParametersAsObject();if(t.hasOwnProperty(e+"storedrequest")){if(this.isValidPlacementId(t[e+"storedrequest"]))return(0,s.logInfo)("using GET ".concat(e,"storedrequest ")+t[e+"storedrequest"]+" to replace placementId"),t[e+"storedrequest"];(0,s.logError)("GET ".concat(e,"storedrequest FAILED VALIDATION - will not use it"))}return null},getGetParametersAsObject:function(){var e=(0,s.parseUrl)(this.getRefererInfo().location);return(0,s.logInfo)("getGetParametersAsObject found:",e.search),e.search},getRefererInfo:function(){if((0,f.getRefererInfo)().hasOwnProperty("location"))return(0,s.logInfo)("FOUND location on getRefererInfo OK (prebid >= 7); will use getRefererInfo for location & page"),(0,f.getRefererInfo)();(0,s.logInfo)("DID NOT FIND location on getRefererInfo (prebid < 7); will use legacy code that ALWAYS worked reliably to get location & page ;-)");try{return{page:top.location.href,location:top.location.href}}catch(e){return{page:window.location.href,location:window.location.href}}},blockTheRequest:function(){var e=this.getWhitelabelConfigItem("ozone.oz_request");return"boolean"==typeof e&&!e&&((0,s.logWarn)("Will not allow auction : ".concat(this.propertyBag.whitelabel.keyPrefix,"_request is set to false")),!0)},getPageId:function(){if(null==this.propertyBag.pageId){for(var e="",t=20;t>0;t--)e+="0123456789abcdefghijklmnopqrstuvwxyz"[Math.floor(36*Math.random())];this.propertyBag.pageId=new Date().getTime()+"_"+e}return this.propertyBag.pageId},unpackVideoConfigIntoIABformat:function(e,t){var r={ext:{}};return r=this._unpackVideoConfigIntoIABformat(r,e),r=this._unpackVideoConfigIntoIABformat(r,t)},_unpackVideoConfigIntoIABformat:function(e,t){var r=["mimes","minduration","maxduration","protocols","w","h","startdelay","placement","plcmt","linearity","skip","skipmin","skipafter","sequence","battr","maxextended","minbitrate","maxbitrate","boxingallowed","playbackmethod","playbackend","delivery","pos","companionad","api","companiontype"],n,i=function(i){n=!1,r.forEach(function(r){r===i&&(e[i]=t[i],n=!0)}),!n&&(e.ext[i]=t[i])};for(var a in t)i(a);return t.hasOwnProperty("ext")&&"object"===(0,o.default)(t.ext)&&(t.hasOwnProperty("ext")?e.ext=(0,s.mergeDeep)(e.ext,t.ext):e.ext=t.ext),e},addVideoDefaults:function(e,t,r){return e=this._addVideoDefaults(e,t,!1),e=this._addVideoDefaults(e,r,!0)},_addVideoDefaults:function(e,t,r){var n=this.getVideoPlacementValue((0,s.deepAccess)(t,"context"));n&&(e.placement=n);var i=(0,s.deepAccess)(t,"skippable",null);return null==i?r&&!e.hasOwnProperty("skip")&&(e.skip=i?1:0):e.skip=i?1:0,e},getLoggableBidObject:function(e){var t={ad:e.ad,adId:e.adId,adUnitCode:e.adUnitCode,adm:e.adm,adomain:e.adomain,adserverTargeting:e.adserverTargeting,auctionId:e.auctionId,bidId:e.bidId,bidder:e.bidder,bidderCode:e.bidderCode,cpm:e.cpm,creativeId:e.creativeId,crid:e.crid,currency:e.currency,h:e.h,w:e.w,impid:e.impid,mediaType:e.mediaType,params:e.params,price:e.price,transactionId:e.transactionId,ttl:e.ttl,ortb2:(0,s.deepAccess)(e,"ortb2"),ortb2Imp:(0,s.deepAccess)(e,"ortb2Imp")};return e.hasOwnProperty("floorData")&&(t.floorData=e.floorData),t}};function I(e){(0,s.logInfo)("injectAdIdsIntoAllBidResponses",(0,s.deepClone)(e));for(var t=0;t<e.length;t++){for(var r=e[t],n=0;n<r.bid.length;n++)r.bid[n].adId="".concat(r.bid[n].impid,"-").concat(t,"-").concat(A.propertyBag.whitelabel.keyPrefix,"-").concat(n)}return e}function E(e){return Array.isArray(e)?Array.isArray(e[0])?e[0]:e:e}function S(e){if(!e)return(0,s.logInfo)("defaultSize received empty bid obj! going to return fixed default size"),{defaultHeight:250,defaultWidth:300};var t=e.sizes,r={};return r.defaultWidth=E(t)[0],r.defaultHeight=E(t)[1],r}function O(e,t){for(var r=null,n=null,i=0;i<t.length;i++){for(var o=t[i].bid,a=t[i].seat,s=0;s<o.length;s++)if(o[s].impid===e&&(null==r||r.price<o[s].price)){r=o[s],n=a;break}}return{seat:n,bid:r}}function _(e,t,r,n){for(var i={},o=0;o<t.length;o++){for(var a=t[o].bid,s=t[o].seat,d=0;d<a.length;d++)a[d].impid===e&&(i.hasOwnProperty(s)?i[s].price<a[d].price&&(i[s]=x(a[d],r,n)):(i[s]=a[d],i[s]=x(a[d],r,n)))}return i}function T(e,t){var r=u.config.getConfig("mediaTypePriceGranularity.".concat(t)),n=u.config.getConfig("customPriceBucket"),i=u.config.getConfig("priceGranularity"),o=C(t,r,i,n),a=w(t,r,i);(0,s.logInfo)("getRoundedBid. price:",e,"mediaType:",t,"configkey:",a,"configObject:",o,"mediaTypeGranularity:",r,"strBuckets:",i);var d=(0,l.getPriceBucketString)(e,o,u.config.getConfig("currency.granularityMultiplier"));(0,s.logInfo)("priceStringsObj",d);var c={medium:"med",custom:"custom",high:"high",low:"low",dense:"dense"};if(c.hasOwnProperty(a)){var p=c[a];return(0,s.logInfo)("getRoundedBid: looking for priceStringsKey:",p),d[p]}return d.auto}function w(e,t,r){return"string"==typeof t?t:"object"===(0,o.default)(t)?"custom":"string"==typeof r?r:"auto"}function C(e,t,r,n){return"object"===(0,o.default)(t)?t:"custom"===r?n:""}function x(e,t,r){return e.cpm=e.price,e.bidId=e.impid,e.requestId=e.impid,e.width=e.w||t,e.height=e.h||r,e.ad=e.adm,e.netRevenue=!0,e.creativeId=e.crid,e.currency="USD",e.ttl=300,e}function P(e){var t=R(e);return t?t[0]&&"object"===(0,o.default)(t[0])&&((0,s.logInfo)("getWidthAndHeightFromVideoObject found nested array inside playerSize.",t[0]),"number"!=typeof(t=t[0])[0]&&"string"!=typeof t[0])?((0,s.logInfo)("getWidthAndHeightFromVideoObject found non-number/string type inside the INNER array in playerSize. This is totally wrong - cannot continue.",t[0]),null):2!==t.length?((0,s.logInfo)("getWidthAndHeightFromVideoObject found playerSize with length of "+t.length+". This is totally wrong - cannot continue."),null):{w:t[0],h:t[1]}:null}function D(e){var t=R(e);return!t||t.length<1?null:t[0]&&"object"===(0,o.default)(t[0])}function R(e){(0,s.logInfo)("getPlayerSizeFromObject received object",e);var t=(0,s.deepAccess)(e,"playerSize");return(!t&&(t=(0,s.deepAccess)(e,"ext.playerSize")),t)?"object"!==(0,o.default)(t)?((0,s.logError)("getPlayerSizeFromObject FAILED: playerSize is not an object/array",e),null):t:((0,s.logError)("getPlayerSizeFromObject FAILED: no playerSize in video object or ext",e),null)}function j(e){(0,s.logInfo)("outstreamRender called. Going to push the call to window.ozoneVideo.outstreamRender(bid) bid = (first static, then reference)"),(0,s.logInfo)((0,s.deepClone)(A.getLoggableBidObject(e))),e.renderer.push(function(){(0,s.logInfo)("Going to execute window.ozoneVideo.outstreamRender"),window.ozoneVideo.outstreamRender(e)})}(0,d.registerBidder)(A),(0,s.logInfo)("*BidAdapter ".concat(y," was loaded")),(0,a.registerModule)("ozoneBidAdapter")},2598:function(e,t,r){"use strict";var n,i,o=r(1640),a=r(7251),s=o(r(7251)),d=o(r(9837)),c=o(r(4763)),u=r(9895),l=r(3408),p=r(2885),f=r(1235),g=r(7319),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=S(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&({}).hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(56)),m=r(2778),b=r(801),h=r(6439),y=r(1054),A=r(1634),I=r(6607),E=r(3136);function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(S=function(e){return e?r:t})(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach(function(t){(0,d.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var T="PAAPI",w=[],C=new WeakSet;function x(e){w.push(e),e.init&&e.init({getPAAPIConfig:$,expandFilters:Q})}(0,p.module)("paapi",x);var P=(0,y.auctionStore)(),D=(0,y.auctionStore)(),R=(0,y.auctionStore)(),j=(0,y.auctionStore)(),k={},N={};l.config.getConfig("paapi",function(e){U(e.paapi)});function U(e){e&&!0===e.enabled?(!N.enabled&&function(){(0,p.getHook)("addPaapiConfig").before(z),(0,p.getHook)("makeBidRequests").before(er),(0,p.getHook)("makeBidRequests").after(en),(0,p.getHook)("processBidderRequests").before(ea),v.on(m.EVENTS.AUCTION_INIT,es),v.on(m.EVENTS.AUCTION_END,V)}(),N=e,(0,f.logInfo)("".concat(T," enabled (browser ").concat(X()?"supports":"does NOT support"," runAdAuction)"),e)):(N.enabled&&function(){(0,p.getHook)("addPaapiConfig").getHooks({hook:z}).remove(),(0,p.getHook)("makeBidRequests").getHooks({hook:er}).remove(),(0,p.getHook)("makeBidRequests").getHooks({hook:en}).remove(),(0,p.getHook)("processBidderRequests").getHooks({hook:ea}).remove(),v.off(m.EVENTS.AUCTION_INIT,es),v.off(m.EVENTS.AUCTION_END,V)}(),N={},(0,f.logInfo)("".concat(T," disabled"),e))}function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},r=et(e);return r&&(t.requestedSize=r),t}function M(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:H,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null!==(t=null===(r=N)||void 0===r?void 0:r.componentSeller)&&void 0!==t?t:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{compact:function(e){return J(e.map(function(e){return e[1]})).map(function(e){return[{},e]})},expand:K};return i.auctionConfig?(0,o[i.separateAuctions?"expand":"compact"])(e).map(function(e){var t=(0,c.default)(e,2),r=t[0],o=t[1],a=(0,f.mergeDeep)(n(o),i.auctionConfig);return a.auctionSignals=L(a.auctionSignals||{},r),[r,a]}):((0,f.logWarn)(T,"Cannot use IG buyers: paapi.componentSeller.auctionConfig not set",e.map(function(e){return e[1]})),[])}function V(e){var t=e.auctionId,r=e.bidsReceived,n=e.bidderRequests,i=e.adUnitCodes,o=e.adUnits,a=Object.fromEntries((null==o?void 0:o.map(function(e){return[e.code,e]}))||[]),d=null==n?void 0:n.flatMap(function(e){return e.bids}),u=P(t);(i||[]).forEach(function(e){!u.hasOwnProperty(e)&&(u[e]=null),k.hasOwnProperty(e)||(k[e]=null)});var l=D(t),p=R(t);l&&p&&Object.entries(p).forEach(function(e){var t=(0,c.default)(e,2),r=t[0];M(t[1]).forEach(function(e){var t=(0,c.default)(e,2),n=t[0].bidder,i=t[1];return q(l,r,{id:G(n),config:i})})});var g=j(t),v=Object.fromEntries(Array.from(new Set(Object.keys(l).concat(Object.keys(g)))).map(function(e){k[e]=t;var n=function(t){return t.adUnitCode===e};return[e,_(_({},B(a[e])),function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(r.length>0){var i=r.reduce((0,h.maximum)((0,b.currencyCompare)(function(e){return[e.cpm,e.currency]})));e=i.cpm,t=i.currency}else{var o=n.map(function(e){return"function"==typeof e.getFloor&&e.getFloor()}).filter(function(e){return e}),a=o.length&&o.reduce((0,h.minimum)((0,b.currencyCompare)(function(e){return[e.floor,e.currency]})));e=null==a?void 0:a.floor,t=null==a?void 0:a.currency}var s={};return e&&((0,f.deepSetValue)(s,"auctionSignals.prebid.bidfloor",e),t&&(0,f.deepSetValue)(s,"auctionSignals.prebid.bidfloorcur",t)),s}(null==r?void 0:r.filter(n),null==d?void 0:d.filter(n)))]})),m={};function y(e,t){Object.entries(t).forEach(function(t){var r,n=(0,c.default)(t,2),i=n[0],o=n[1],a=o.resolve,d=o.default,u=e.hasOwnProperty(i)?e[i]:null;a(u=null==u&&null==d?void 0:"object"===(0,s.default)(d)&&"object"===(0,s.default)(u)?(0,f.mergeDeep)({},d,u):null!==(r=u)&&void 0!==r?r:d)})}Object.entries(l||{}).forEach(function(e){var t=(0,c.default)(e,2),r=t[0];t[1].forEach(function(e){var t=e.id,n=e.config;return q(m,t,{adUnitCode:r,config:(0,f.mergeDeep)({},v[r],n)})})}),Object.entries(g).forEach(function(e){var t=(0,c.default)(e,2),r=t[0],n=t[1],i=n.top,o=n.components;y(v[r],i),Object.entries(o).forEach(function(e){var t,n=(0,c.default)(e,2),i=n[0],o=n[1].deferrals,a=m.hasOwnProperty(i)?m[i]:[];a.length>1&&(0,f.logWarn)("Received multiple PAAPI configs for the same bidder and seller (".concat(i,"), active PAAPI auctions will only see the first")),y((null!==(t=a.shift())&&void 0!==t?t:{config:_({},v[r])}).config,o)})});var A=Object.values(m).flatMap(function(e){return e}),I=Object.keys(g).length>0;N.parallel&&I&&A.length>0&&(0,f.logError)("Received PAAPI configs after PAAPI auctions were already started in parallel with their contextual auction",A),A.forEach(function(e){var t=e.adUnitCode,r=e.config;null==u[t]&&(u[t]=_(_({},v[t]),{},{componentAuctions:[]})),u[t].componentAuctions.push((0,f.mergeDeep)({},v[t],r))}),(!N.parallel||!I)&&w.forEach(function(e){var r;return null===(r=e.onAuctionConfig)||void 0===r?void 0:r.call(e,t,u)})}function q(e,t,r){e.hasOwnProperty(t)||(e[t]=[]),e[t].push(r)}function L(e,t){var r,n,i=t.ortb2,o=t.ortb2Imp;return null!=i&&(0,f.deepSetValue)(e,"prebid.ortb2",(0,f.mergeDeep)({},i,null===(r=e.prebid)||void 0===r?void 0:r.ortb2)),null!=o&&(0,f.deepSetValue)(e,"prebid.ortb2Imp",(0,f.mergeDeep)({},o,null===(n=e.prebid)||void 0===n?void 0:n.ortb2Imp)),e}function F(e,t){return"".concat(e,"::").concat(t)}function G(e){return N.componentSeller.separateAuctions?"igb::".concat(e):"igb"}function z(e,t,r){if(Z(l.config.getCurrentBidder()).enabled){var n=t.adUnitCode,i=t.auctionId,o=t.bidder;function a(e,t){var r=e(i);null!=r?q(r,n,t):(0,f.logWarn)(T,"Received PAAPI config for auction that has closed (auction '".concat(i,"', adUnit '").concat(n,"')"),t)}var s=r.config,d=r.igb;if(s){s.auctionSignals=L(s.auctionSignals||{},t);var c,u=s.perBuyerSignals=null!==(c=s.perBuyerSignals)&&void 0!==c?c:{};(s.interestGroupBuyers||[]).forEach(function(e){var r;u[e]=L(null!==(r=u[e])&&void 0!==r?r:{},t)}),a(D,{id:F(o,s.seller),config:s})}d&&Y(d)&&(d.pbs=L(d.pbs||{},t),a(R,[t,d]))}e(t,r)}var W={cur:"perBuyerCurrencies",pbs:"perBuyerSignals",ps:"perBuyerPrioritySignals",maxbid:"auctionSignals.prebid.perBuyerMaxbid"};function Y(e){if(e.origin)return!0;(0,f.logWarn)("PAAPI buyer does not specify origin and will be ignored",e)}function H(e){var t=new Set;return Object.assign(e.reduce(function(r,n){return Y(n)&&(t.has(n.origin)?(0,f.logWarn)(T,"Duplicate buyer: ".concat(n.origin,". All but the first will be ignored"),e):(t.add(n.origin),Object.entries(W).forEach(function(e){var t=(0,c.default)(e,2),i=t[0],o=t[1];if(null!=n[i]){var a=(0,f.deepAccess)(r,o)||{};a[n.origin]=n[i],(0,f.deepSetValue)(r,o,a)}}))),r},{}),{interestGroupBuyers:Array.from(t.keys())})}function J(e){return e.reduce(function(e,t){if(Y(t)){var r=e.find(function(e){return!e.hasOwnProperty(t.origin)||(0,f.deepEqual)(e[t.origin],t)});!r&&(r={},e.push(r)),r[t.origin]=t}return e},[]).map(function(e){return Object.values(e)})}function K(e){var t={},r={};return e.forEach(function(e){var n=(0,c.default)(e,2),i=n[0],o=n[1];t.hasOwnProperty(i.bidder)||(t[i.bidder]=i),q(r,i.bidder,o)}),Object.entries(r).map(function(e){var r=(0,c.default)(e,2),n=r[0],i=r[1];return[t[n],i]})}function Q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.auctionId,r=e.adUnitCode,n=[];return null==r?n=Object.keys(k):k.hasOwnProperty(r)&&(n=[r]),Object.fromEntries(n.map(function(e){return[e,null!=t?t:k[e]]}))}function $(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={};return Object.entries(Q(e)).forEach(function(e){var n=(0,c.default)(e,2),i=n[0],o=n[1],a=P(o);if(null!=a&&a.hasOwnProperty(i)){var s=a[i];s&&!C.has(s)?(r[i]=s,C.add(s)):t&&(r[i]=null)}else null==o&&t&&(r[i]=null)}),r}function X(){return"runAdAuction"in navigator&&"joinAdInterestGroup"in navigator}function Z(e){var t,r,n=N.enabled&&(null==e||!(null!==(t=N.bidders)&&void 0!==t&&t.length)||(null===(r=N.bidders)||void 0===r?void 0:r.includes(e)));return{enabled:n,ae:n?N.defaultForSlots:void 0}}(0,u.getGlobal)().getPAAPIConfig=function(e){return $(e)};var ee=(0,p.hook)("sync",function(e){var t,r;if(null!==(r=e=null===(t=e)||void 0===t?void 0:t.filter(function(e){var t=(0,c.default)(e,2),r=t[0];return!(r===t[1]&&r<=5)}))&&void 0!==r&&r.length)return e.reduce((0,h.maximum)((0,h.keyCompare)(function(e){var t=(0,c.default)(e,2);return t[0]*t[1]})))},"getPAAPISize");function et(e){var t;return(null===(t=e.ortb2Imp)||void 0===t||null===(t=t.ext)||void 0===t||null===(t=t.paapi)||void 0===t?void 0:t.requestedSize)||function(t){var r=ee((0,f.sizesToSizeTuples)(null===(t=e.mediaTypes)||void 0===t||null===(t=t.banner)||void 0===t?void 0:t.sizes));if(r)return{width:r[0],height:r[1]}}()}function er(e,t){X()&&N.enabled&&t.forEach(function(e){var t,r,n,i=(null===(t=e.ortb2Imp)||void 0===t||null===(t=t.ext)||void 0===t?void 0:t.igs)!=null?e.ortb2Imp.ext.igs.ae||1:null,o=null===(r=e.ortb2Imp)||void 0===r||null===(r=r.ext)||void 0===r?void 0:r.ae;i!==o&&null!=i&&null!=o&&(0,f.logWarn)(T,"Ad unit defines conflicting ortb2Imp.ext.ae and ortb2Imp.ext.igs, using the latter",e);var a=null!==(n=null!=i?i:o)&&void 0!==n?n:N.defaultForSlots;if(a){(0,f.deepSetValue)(e,"ortb2Imp.ext.ae",a),e.ortb2Imp.ext.igs=Object.assign({ae:a,biddable:1},e.ortb2Imp.ext.igs);var s=et(e);s&&(0,f.deepSetValue)(e,"ortb2Imp.ext.paapi.requestedSize",s),e.bids.forEach(function(e){!Z(e.bidder).enabled&&((0,f.deepSetValue)(e,"ortb2Imp.ext.ae",0),e.ortb2Imp.ext.igs={ae:0,biddable:0})})}});for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];e.apply(void 0,[t].concat(n))}function en(e,t){X()&&t.forEach(function(e){var t,r=Z(e.bidderCode).enabled;Object.assign(e,{paapi:{enabled:r,componentSeller:!!(null!==(t=N.componentSeller)&&void 0!==t&&t.auctionConfig)}})}),e(t)}var ei=["auctionSignals","sellerSignals","perBuyerSignals","perBuyerTimeouts","directFromSellerSignals"];var eo=(n=[{props:["seller"],validate:function(e){return"string"==typeof e}},{props:["interestGroupBuyers"],validate:function(e){return Array.isArray(e)&&e.length>0}},{props:["decisionLogicURL","decisionLogicUrl"],validate:function(e){return"string"==typeof e}}],function(e){var t=n.find(function(t){var r=t.props,n=t.validate;return r.every(function(t){return!e.hasOwnProperty(t)||!e[t]||!n(e[t])})});return!t||((0,f.logError)('Partial PAAPI config has missing or invalid property "'.concat(t.props[0],'"'),e),!1)});function ea(e,t,r,n){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return[Object.fromEntries(ei.map(function(r){var n=(0,I.defer)({promiseFactory:function(e){return new Promise(e)}});return n.default=e.hasOwnProperty(r)?e[r]:null,t[r]=n.promise,[r,n]})),t]}var o=n.auctionId,a=n.paapi,s=void 0===a?{}:a,d=s.enabled,u=s.componentSeller,l=P(o);if(r.map(function(e){return e.adUnitCode}).forEach(function(e){k[e]=o,!l.hasOwnProperty(e)&&(l[e]=null)}),d&&t.buildPAAPIConfigs){var p,g,v=(0,A.adapterMetrics)(n),m=(0,A.guardTids)(n);v.measureTime("buildPAAPIConfigs",function(){try{g=t.buildPAAPIConfigs(r.map(m.bidRequest),m.bidderRequest(n))}catch(e){(0,f.logError)('Error invoking "buildPAAPIConfigs":',e)}});var b=Object.fromEntries(r.map(function(e){return[e.bidId,e]}));(null!==(p=g)&&void 0!==p?p:[]).forEach(function(e){var r=e.bidId,n=e.config,a=e.igb,s=b.hasOwnProperty(r)&&b[r];if(s){var d=s.adUnitCode;k[d]=o;var p=j(o),g=function(){if(!p.hasOwnProperty(d)){var e=i(),t=(0,c.default)(e,2),r=t[0],n=t[1];l[d]=_(_(_({},B(E.auctionManager.index.getAdUnit(s))),n),{},{componentAuctions:[]}),p[d]={top:r,components:{},auctionConfig:l[d]}}return p[d]};if(n&&eo(n)){var v=F(s.bidder,n.seller),m=g();if(m.components.hasOwnProperty(v))(0,f.logWarn)("Received multiple PAAPI configs for the same bidder and seller; config will be ignored",{config:n,bidder:s.bidder});else{var h=i(n),y=(0,c.default)(h,2),A=y[0],I=y[1],S=_(_(_({},B(s)),n),I);m.auctionConfig.componentAuctions.push(S),m.components[v]={auctionConfig:S,deferrals:A}}}if(u&&a&&Y(a)){var O=G(t.code),T=g(),w=M([[s,a]])[0][1];if(T.components.hasOwnProperty(O)){var C=T.components[O],x=C.auctionConfig,P=C.deferrals;if(x.interestGroupBuyers.includes(a.origin))(0,f.logWarn)("Received the same PAAPI buyer multiple times for the same PAAPI auction. Consider setting paapi.componentSeller.separateAuctions: true",a);else{var D={};Object.entries(w).forEach(function(e){var t=(0,c.default)(e,2),r=t[0],n=t[1];P.hasOwnProperty(r)?(0,f.mergeDeep)(P[r],{default:n}):D[r]=n}),(0,f.mergeDeep)(x,D)}}else{var R=i(w),N=(0,c.default)(R,2),U=N[0],V=N[1],q=_(_(_({},w),B(s)),V);T.components[O]={auctionConfig:q,deferrals:U},T.auctionConfig.componentAuctions.push(q)}}}else(0,f.logError)("Received partial PAAPI config for unknown bidId",{bidId:r,config:n})})}for(var h=arguments.length,y=Array(h>4?h-4:0),S=4;S<h;S++)y[S-4]=arguments[S];return e.call.apply(e,[this,t,r,n].concat(y))}function es(e){var t=e.auctionId;N.parallel&&E.auctionManager.index.getAuction({auctionId:t}).requestsDone.then(function(){Object.keys(j(t)).length>0&&w.forEach(function(e){var r;return null===(r=e.onAuctionConfig)||void 0===r?void 0:r.call(e,t,P(t))})})}function ed(e,t,r){var n,i,o;!(null!==(n=r.bidderRequest.paapi)&&void 0!==n&&n.enabled)&&(null===(i=e.ext)||void 0===i||delete i.ae,null===(o=e.ext)||void 0===o||delete o.igs)}function ec(e,t,r){var n;eu(((null===(n=t.ext)||void 0===n?void 0:n.igi)||[]).flatMap(function(e){return((null==e?void 0:e.igs)||[]).map(function(t){var r;return t.impid!==e.impid&&null!=t.impid&&null!=e.impid&&(0,f.logWarn)(T,"ORTB response ext.igi.igs.impid conflicts with parent's impid",e),{config:t.config,impid:null!==(r=t.impid)&&void 0!==r?r:e.impid}}).concat(((null==e?void 0:e.igb)||[]).map(function(t){return{igb:t,impid:e.impid}}))}),e,r)}function eu(e,t,r){e.forEach(function(e){var t,n=r.impContext[e.impid];null!=n&&null!==(t=n.imp)&&void 0!==t&&null!==(t=t.ext)&&void 0!==t&&t.ae?(n.paapiConfigs=n.paapiConfigs||[],n.paapiConfigs.push(e)):(0,f.logWarn)(T,"Received auction configuration for an impression that was not in the request or did not ask for it",e,null==n?void 0:n.imp)})}function el(e,t,r){var n;eu((null===(n=t.ext)||void 0===n||null===(n=n.prebid)||void 0===n||null===(n=n.fledge)||void 0===n?void 0:n.auctionconfigs)||[],e,r)}function ep(e,t,r){var n=Object.values(r.impContext).flatMap(function(e){return(e.paapiConfigs||[]).map(function(t){return _({bidId:e.bidRequest.bidId},t)})});n.length>0&&(e.paapi=n)}(0,g.registerOrtbProcessor)({type:g.IMP,name:"impExtAe",fn:ed}),(0,g.registerOrtbProcessor)({type:g.RESPONSE,name:"extPrebidFledge",fn:el,dialects:[g.PBS]}),(0,g.registerOrtbProcessor)({type:g.RESPONSE,name:"extIgiIgs",fn:ec}),(0,g.registerOrtbProcessor)({type:g.RESPONSE,name:"paapiConfigs",priority:-1,fn:ep}),(0,u.registerModule)("paapi")},6123:function(e,t,r){"use strict";var n,i,o,a=r(1640),s=a(r(4763)),d=r(9895),c=r(2885),u=r(1235),l=r(3408),p=r(6439),f=r(3495),g="paapiForGpt";function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,d.getGlobal)().setPAAPIConfigForGPT;return function(t,r,n){(Array.isArray(r)?r:[r]).map(function(e){return null==e?void 0:{adUnitCode:e}}).forEach(function(t){return e(t,n)}),t(r,n)}}function m(){var e={};return function(t,r,n){var i=!(arguments.length>3)||void 0===arguments[3]||arguments[3];if(r.length>0){var o,a=null!==(o=e[t])&&void 0!==o?o:{},d=Object.fromEntries(n.map(function(e){return[e.seller,e]})),c=Object.keys(d);i?(d=Object.assign(a,d),a=Object.fromEntries(c.map(function(e){return[e,null]}))):c.forEach(function(e){a[e]=null}),Object.keys(a).length?e[t]=a:delete e[t];var l=Object.entries(d).map(function(e){var t=(0,s.default)(e,2);return{configKey:t[0],auctionConfig:t[1]}});l.length>0&&r.forEach(function(e){e.setConfig({componentAuction:l}),(0,u.logInfo)(g,"register component auction configs for: ".concat(t,": ").concat(e.getAdUnitPath()),n)})}else n.length>0&&(0,u.logWarn)(g,"unable to register component auction config for ".concat(t),n)}}l.config.getConfig("paapi",function(e){(0,u.deepAccess)(e,"paapi.gpt.configWithTargeting",!0)?((0,u.logInfo)(g,"enabling PAAPI configuration with setTargetingForGPTAsync"),f.targeting.setTargetingForGPT.before(A)):f.targeting.setTargetingForGPT.getHooks({hook:A}).remove()});var b=m();var h=(n=[[728,90],[336,280],[300,250],[300,50],[160,600],[1024,768],[970,250],[970,90],[768,1024],[480,320],[468,60],[320,480],[320,100],[320,50],[300,600],[300,100],[250,250],[234,60],[200,200],[180,150],[125,125],[120,600],[120,240],[120,60],[88,31],[980,120],[980,90],[950,90],[930,180],[750,300],[750,200],[750,100],[580,400],[250,360],[240,400]].sort((0,p.keyCompare)(function(e){var t=(0,s.default)(e,2);return-(t[0]*t[1])})).map(function(e){return[e,(0,u.sizeTupleToSizeString)(e)]}),i=function(e,t){if(null!=t&&t.length){var r=new Set(t.map(u.sizeTupleToSizeString)),i=n.find(function(e){var t=(0,s.default)(e,2),n=(t[0],t[1]);return r.has(n)});if(i){e.bail(i[0]);return}}e(t)});function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return o(e,!0)},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f.getGPTSlotsForAdUnits;return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0,o=!1,a=e(n)||{},d=r(Object.keys(a),i);Object.entries(a).forEach(function(e){var r=(0,s.default)(e,2),n=r[0],i=r[1];null!=i&&(o=!0),t(n,d[n],(null==i?void 0:i.componentAuctions)||[],!0)}),!o&&(0,u.logInfo)("".concat(g,": No component auctions available to set"))}}(0,d.getGlobal)().setPAAPIConfigForGPT=y();var A=v();(0,c.submodule)("paapi",{name:"gpt",init:function(e){o=e.getPAAPIConfig,(0,c.getHook)("getPAAPISize").before(h)}}),(0,d.registerModule)("paapiForGpt")},4750:function(e,t,r){"use strict";var n,i=r(1640),o=i(r(7251)),a=r(9895),s=r(2885),d=r(4288),c=r(1235),u=r(5723),l="pairId",p="pairId",f=(0,d.getStorageManager)({moduleType:u.MODULE_TYPE_UID,moduleName:l});function g(e){return f.localStorageIsEnabled()?f.getDataFromLocalStorage(e):null}function v(e){return f.cookiesAreEnabled()?f.getCookie(e):null}(0,s.submodule)("userId",{name:l,gvlid:755,decode:function(e){return e&&Array.isArray(e)?{pairId:e}:void 0},getId:function(e){var t=g(p)||v(p),r=[];if(t&&"string"==typeof t)try{r=r.concat(JSON.parse(atob(t)))}catch(e){(0,c.logInfo)(e)}var n=e&&e.params||{};if(n&&n.liveramp){var i=n.liveramp.storageKey||"_lr_pairId",a=g(i)||v(i);if(a)try{var s=atob(a);if(s){var d=JSON.parse(s);d&&"object"===(0,o.default)(d)&&d.envelope?r=r.concat(d.envelope):(0,c.logInfo)("Pairid: Parsed object is not valid or does not contain envelope")}else(0,c.logInfo)("Pairid: Decoded value is empty")}catch(e){(0,c.logInfo)("Pairid: Error parsing JSON: ",e)}else(0,c.logInfo)("Pairid: liverampValue for pairId from storage is empty or null")}if(0==r.length){(0,c.logInfo)("PairId not found.");return}return{id:r}},eids:{pairId:{source:"google.com",atype:571187}}}),(0,a.registerModule)("pairIdSystem")},395:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.S2S_VENDORS=void 0,t.S2S_VENDORS={}},4581:function(e,t,r){"use strict";var n,i=r(1640),o=r(7251);Object.defineProperty(t,"__esModule",{value:!0}),t.PrebidServer=N,t.processAttr=k,t.processPBSRequest=t.processBidders=void 0,t.resetSyncedStatus=function(){w=0},t.resetWurlMap=function(){P={}},t.s2sDefaultConfig=void 0;var a=i(r(9837)),s=r(9895),d=i(r(4530)),c=r(1235),u=r(2778),l=i(r(9293)),p=r(3408),f=r(1634),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var r=E(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(56)),v=r(7448),m=r(395),b=r(721),h=r(2885),y=r(1270),A=r(8969),I=r(647);function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(E=function(e){return e?r:t})(e)}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var _=p.config.getConfig,T=u.S2S.SRC,w=0,C=t.s2sDefaultConfig={bidders:Object.freeze([]),syncTimeout:1e3,maxBids:1,adapter:"prebidServer",allowUnknownBidderCodes:!1,adapterOptions:{},syncUrlModifier:{},ortbNative:{eventtrackers:[{event:1,methods:[1,2]}]},maxTimeout:1500};p.config.setDefaults({s2sConfig:C});var x=t.processBidders=function(e,t,r,n){if((null===(i=r[t])||void 0===i||!i.ignoreDuplicateBidders)&&!!Array.isArray(e.bidders)){var i,o=e.bidders.filter(function(e){return -1===n.indexOf(e)&&(n.push(e),!0)});r[t].bidders=o}};_("s2sConfig",function(e){return function(e){if(!!e){var t=Array.isArray(e)?e:[e],r=[];if(t.every(function(e,t,n){var i;return(i=e,["endpoint","syncEndpoint"].forEach(function(e){if((0,c.isStr)(i[e])){var t=i[e];i[e]={p1Consent:t,noP1Consent:t}}(0,c.isPlainObject)(i[e])&&(!i[e].p1Consent||!i[e].noP1Consent)&&["p1Consent","noP1Consent"].forEach(function(t){!i[e][t]&&(0,c.logWarn)("s2sConfig.".concat(e,".").concat(t," not defined.  PBS request will be skipped in some P1 scenarios."))})}),!1!==function(e){if(e.defaultVendor){var t=e.defaultVendor,r=Object.keys(e);if(!m.S2S_VENDORS[t])return(0,c.logError)("Incorrect or unavailable prebid server default vendor option: "+t),!1;Object.keys(m.S2S_VENDORS[t]).forEach(function(n){(C[n]===e[n]||!(0,v.includes)(r,n))&&(e[n]=m.S2S_VENDORS[t][n])})}return e.enabled="boolean"==typeof e.enabled&&e.enabled}(e)&&!1!==function(e){var t=Object.keys(e);if(["accountId","endpoint"].filter(function(e){return!(0,v.includes)(t,e)&&((0,c.logError)(e+" missing in server to server config"),!0)}).length>0)return!1}(e))?(x(e,t,n,r),!0):((0,c.logWarn)("prebidServer: s2s config is disabled"),!1)}))return n=t}}(e.s2sConfig)});var P={};function D(e){var t,r,n=function(e,t){if([e,t].every(c.isStr))return P["".concat(e).concat(t)]}(e.auctionId,e.adId);if((0,c.isStr)(n)){;(0,c.logMessage)('Invoking image pixel for wurl on BID_WIN: "'.concat(n,'"')),(0,c.triggerPixel)(n),t=e.auctionId,[t,r=e.adId].every(c.isStr)&&(P["".concat(t).concat(r)]=void 0)}}function R(e,t){var r=(0,y.hasPurpose1Consent)(t),n=r?e.p1Consent:e.noP1Consent;return!n&&(0,c.logWarn)("Missing matching consent URL when gdpr="+r),n}function j(e){var t,r,n;return Array.isArray(e)&&e.length>0&&(t=e[0].gdprConsent,r=e[0].uspConsent,n=e[0].gppConsent),{gdprConsent:t,uspConsent:r,gppConsent:n}}function k(e,t,r){var n,i=(null==e||null===(n=e.seatbid)||void 0===n?void 0:n.flatMap(function(e){return e.bid.map(function(e){return{attr:e.attr}})}))||[];return null!=i&&i[r]&&null!=t&&t.bid&&(t.bid.meta=O(O({},t.bid.meta),{},{isInBannerVideo:!!(i[r].attr&&Array.isArray(i[r].attr)&&i[r].attr.includes(6))})),t}function N(){var e=new d.default("prebidServer");return e.callBids=function(e,t,r,i,o){var a=e.metrics=(0,I.useMetrics)((0,c.deepAccess)(t,"0.metrics")).newMetrics().renameWith(function(t){return["adapter.s2s.".concat(t),"adapters.s2s.".concat(e.s2sConfig.defaultVendor,".").concat(t)]});i=a.startTiming("total").stopBefore(i),t.forEach(function(e){return(0,I.useMetrics)(e.metrics).join(a,{continuePropagation:!1})});var s=j(t),d=s.gdprConsent,v=s.uspConsent,m=s.gppConsent;if(Array.isArray(n)){if(e.s2sConfig&&e.s2sConfig.syncEndpoint&&R(e.s2sConfig.syncEndpoint,d)){var h,y=null!==(h=e.s2sConfig.extPrebid&&e.s2sConfig.extPrebid.aliases)&&void 0!==h?h:{};!function(e,t,r,i,o){if(n.length!==w){w++;var a={},s=_("userSync.filterSettings");if(s){var d=s.all,u=s.iframe,l=s.image,p=u||d,f=l||d;p&&(a=Object.assign({iframe:p},a)),f&&(a=Object.assign({image:f},a))}var g={uuid:(0,c.generateUUID)(),bidders:e,account:o.accountId,filterSettings:a},v=o.userSyncLimit;(0,c.isNumber)(v)&&v>0&&(g.limit=v),t&&(g.gdpr=t.gdprApplies?1:0,!1!==t.gdprApplies&&(g.gdpr_consent=t.consentString)),r&&(g.us_privacy=r),i&&(g.gpp_sid=i.applicableSections.join(),g.gpp=i.gppString),"boolean"==typeof o.coopSync&&(g.coopSync=o.coopSync);var m=JSON.stringify(g);(0,b.ajax)(R(o.syncEndpoint,t),function(e){try{e=JSON.parse(e),function e(t,r){if(0!==t.length){var n=t.shift();n.no_cookie?function(e,t,r,n,i){i.syncUrlModifier&&"function"==typeof i.syncUrlModifier[r]&&(t=i.syncUrlModifier[r](e,t,r)),function(e,t,r,n,i){t?"image"===e||"redirect"===e?((0,c.logMessage)('Invoking image pixel user sync for bidder: "'.concat(r,'"')),(0,c.triggerPixel)(t,n,i)):"iframe"===e?((0,c.logMessage)('Invoking iframe user sync for bidder: "'.concat(r,'"')),(0,c.insertUserSyncIframe)(t,n,i)):((0,c.logError)('User sync type "'.concat(e,'" not supported for bidder: "').concat(r,'"')),n()):((0,c.logError)('No sync url for bidder "'.concat(r,'": ').concat(t)),n())}(e,t,r,n,i.syncTimeout)}(n.usersync.type,n.usersync.url,n.bidder,e.bind(null,t,r),r):e(t,r)}}(e.bidder_status,o)}catch(e){(0,c.logError)(e)}},m,{contentType:"text/plain",withCredentials:!0})}}(e.s2sConfig.bidders.map(function(e){return l.default.aliasRegistry[e]||y[e]||e}).filter(function(e,t,r){return r.indexOf(e)===t}),d,v,m,e.s2sConfig)}U(e,t,o,{onResponse:function(r,n,o){null!=o&&o.app&&t.forEach(function(e){return e.app=!0}),r&&t.forEach(function(e){return g.emit(u.EVENTS.BIDDER_DONE,e)});var s=function(e,t){return{atagData:function(e){var t;return null==e||null===(t=e.ext)||void 0===t||null===(t=t.prebid)||void 0===t||null===(t=t.analytics)||void 0===t?void 0:t.tags}(t),seatNonBidData:function(e,t){var r,n;return null!=e&&null!==(r=e.extPrebid)&&void 0!==r&&r.returnallbidstatus?null==t||null===(n=t.ext)||void 0===n?void 0:n.seatnonbid:void 0}(e,t)}}(e.s2sConfig,o),c=s.seatNonBidData,f=s.atagData;if(c&&g.emit(u.EVENTS.SEAT_NON_BID,{seatnonbid:o.ext.seatnonbid,auctionId:t[0].auctionId,requestedBidders:n,response:o,adapterMetrics:a}),c||f){var b={seatnonbid:c,atag:f,auctionId:t[0].auctionId,requestedBidders:n,response:o,adapterMetrics:a};g.emit(u.EVENTS.PBS_ANALYTICS,b)}i(!1),!function(e,t,r,n){e.forEach(function(e){var i=l.default.getBidAdapter(e);i&&i.registerSyncs&&p.config.runWithBidder(e,i.registerSyncs.bind(i,[],t,r,n))})}(n,d,v,m)},onError:function(r,n){var o,a=(null==e||null===(o=e.s2sConfig)||void 0===o?void 0:o.endpoint)||{},s=a.p1Consent,d=void 0===s?"":s,l=a.noP1Consent,p=void 0===l?"":l;d===p?(0,c.logError)("Prebid server call failed: '".concat(r,"'. Endpoint: \"").concat(d,'"}'),n):(0,c.logError)("Prebid server call failed: '".concat(r,"'. Endpoints: p1Consent \"").concat(d,'", noP1Consent "').concat(p,'"}'),n),t.forEach(function(e){return g.emit(u.EVENTS.BIDDER_ERROR,{error:n,bidderRequest:e})}),i(n.timedOut)},onBid:function(t){var n,i,o,a=t.adUnit,s=t.bid,d=s.metrics=e.metrics.fork().renameWith();if(d.checkpoint("addBidResponse"),null!=s.requestId&&null!=s.requestBidder||e.s2sConfig.allowUnknownBidderCodes){if(d.measureTime("addBidResponse.validate",function(){return(0,f.isValid)(a,s)})){if(r(a,s),s.pbsWurl){;n=s.auctionId,i=s.adId,o=s.pbsWurl,[n,i].every(c.isStr)&&(P["".concat(n).concat(i)]=o)}}else r.reject(a,s,u.REJECTION_REASON.INVALID)}else(0,c.logWarn)("PBS adapter received bid from unknown bidder (".concat(s.bidder,"), but 's2sConfig.allowUnknownBidderCodes' is not set. Ignoring bid.")),r.reject(a,s,u.REJECTION_REASON.BIDDER_DISALLOWED)},onFledge:function(e){p.config.runWithBidder(e.bidder,function(){(0,f.addPaapiConfig)(O({auctionId:t[0].auctionId},e),{config:e.config})})}})}},g.on(u.EVENTS.BID_WON,D),Object.assign(this,{callBids:e.callBids,setBidderCode:e.setBidderCode,type:T})}var U=t.processPBSRequest=(0,h.hook)("sync",function(e,t,r,n){var i=n.onResponse,o=n.onError,a=n.onBid,s=n.onFledge,d=j(t).gdprConsent,u=(0,c.deepClone)(e.ad_units),p={},f=u.map(function(e){return e.bids.map(function(e){var t=l.default.aliasRegistry[e.bidder];return t&&(p[e.bidder]=t),e.bidder}).filter(c.uniques)}).reduce(c.flatten,[]).filter(c.uniques),g=e.metrics.measureTime("buildRequests",function(){return(0,A.buildPBSRequest)(e,t,u,f,p)}),m=g&&JSON.stringify(g);(0,c.logInfo)("BidRequest: "+m);var b=R(e.s2sConfig.endpoint,d),h=(0,c.deepAccess)(e,"s2sConfig.customHeaders",{});if(g&&m&&b){var y=e.metrics.startTiming("net");r(b,{success:function(t){y();try{r=JSON.parse(t);var r,n=e.metrics.measureTime("interpretResponse",function(){return(0,A.interpretPBSResponse)(r,g)}),o=n.bids,d=n.paapi;o.forEach(function(e,t){var n;(null===(n=e)||void 0===n||null===(n=n.bid)||void 0===n?void 0:n.bidderCode)==="pubm_ss"&&(e=k(r,e,t)),a(e)}),d&&d.forEach(s),null!=g&&g.app&&(r.app=!0)}catch(e){(0,c.logError)(e)}!r||r.status&&(0,v.includes)(r.status,"Error")?((0,c.logError)("error parsing response: ",r?r.status:"not valid JSON"),i(!1,f)):i(!0,f,r)},error:function(){y(),o.apply(this,arguments)}},m,{contentType:"text/plain",withCredentials:!0,customHeaders:h})}else(0,c.logError)("PBS request not made.  Check endpoints.")},"processPBSRequest");l.default.registerBidAdapter(new N,"prebidServer"),(0,s.registerModule)("prebidServerBidAdapter")},8969:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.buildPBSRequest=function(e,t,r,n,i){var a,s,u=(0,d.timestamp)(),l=new Set,p=[],f=(0,b.s2sActivityParams)(e.s2sConfig);var g=(a=(0,m.redactor)(f),s={},function(e){return null==e?a:(!s.hasOwnProperty(e)&&(s[e]=(0,m.redactor)((0,h.activityParams)(y.MODULE_TYPE_BIDDER,e))),s[e])});(r=r.map(function(e){return g().bidRequest(e)})).forEach(function(o){var a=new Map;r.bids=o.bids.map(function(e){return g(e.bidder).bidRequest(e)}),o.bids.forEach(function(r){null!=r.mediaTypes&&(0,d.logWarn)("Prebid Server adapter does not (yet) support bidder-specific mediaTypes for the same adUnit. Size mapping configuration will be ignored for adUnit: ".concat(o.code,", bidder: ").concat(r.bidder));var s=a.get(r.bidder),c=(0,d.getBidRequest)(r.bid_id,t);s?j(r,c,e,a,n,i):a.set(r.bidder,c)});for(var s=o.code,c=1;l.has(s);)c++,s="".concat(o.code,"-").concat(c);l.add(s),p.push(T(T({},o),{},{adUnitCode:o.code,pbsData:{impId:s,actualBidRequests:a,adUnit:o}}))});var v=T(T({},Object.fromEntries(Object.entries(t[0]).filter(function(e){var t=(0,o.default)(e,1)[0];return!x.has(t)}))),{},{paapi:{enabled:t.some(function(e){var t;return null===(t=e.paapi)||void 0===t?void 0:t.enabled})}}),E=D.toORTB({bidderRequest:v,bidRequests:p,context:{currency:c.config.getConfig("currency.adServerCurrency")||"USD",ttl:e.s2sConfig.defaultTtl||60,requestTimestamp:u,s2sBidRequest:e,requestedBidders:n,actualBidderRequests:t,nativeRequest:e.s2sConfig.ortbNative,getRedactor:g,transmitTids:(0,A.isActivityAllowed)(I.ACTIVITY_TRANSMIT_TID,f)}});return k(e,E,c.config.getConfig("appDataConfig")),E},t.convertDynamicAliasToOriginalBidder=R,t.createBidUsingDynamicAlias=j,t.interpretPBSResponse=function(e,t){return R(e),D.fromORTB({response:e,request:t})},t.setAppData=k,t.setConfigToApp=N;var i=n(r(9837)),o=n(r(4763)),a=n(r(7251)),s=r(8342),d=r(1235),c=r(3408),u=r(2778),l=r(5108),p=r(7701),f=r(5438),g=r(8742),v=r(7319),m=r(6755),b=r(9293),h=r(1676),y=r(5723),A=r(7565),I=r(7939),E=r(801),S=r(6439),O=r(4581);function _(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function w(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return C(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var x=new Set(["bidderCode","bidderRequestId","uniquePbsTid","bids","timeout"]),P={},D=(0,s.ortbConverter)({processors:p.pbsExtensions,context:{netRevenue:!0},imp:function(e,t,r){Object.assign(r,t.pbsData);var n=e(t,r);if((t.bids||[]).forEach(function(e){e.ortb2Imp&&Object.keys(e.ortb2Imp).length>0&&(0,d.deepSetValue)(n,"ext.prebid.imp.".concat(e.bidder),e.ortb2Imp)}),Object.values(g.SUPPORTED_MEDIA_TYPES).some(function(e){return n[e]}))return n.secure=r.s2sBidRequest.s2sConfig.secure,n},request:function(e,t,r,n){if(t.length){var i,o,a,s=n.s2sBidRequest,c=e(t,r,n),u=(null==r||null===(i=r.adUnitsS2SCopy)||void 0===i?void 0:i.length)&&r.adUnitsS2SCopy[0].refresh;return c.tmax=null!==(o=u&&s.s2sConfig.refreshTimeout||s.s2sConfig.timeout)&&void 0!==o?o:Math.min(.75*s.requestBidsTimeout,null!==(a=s.s2sConfig.maxTimeout)&&void 0!==a?a:O.s2sDefaultConfig.maxTimeout),c.ext.tmaxmax=c.ext.tmaxmax||s.requestBidsTimeout,[c.app,c.dooh,c.site].forEach(function(e){var t;e&&!(null!==(t=e.publisher)&&void 0!==t&&t.id)&&(0,d.deepSetValue)(e,"publisher.id",s.s2sConfig.accountId)}),!n.transmitTids&&(0,d.deepSetValue)(c,"ext.prebid.createtids",!1),c}(0,d.logError)("Request to Prebid Server rejected due to invalid media type(s) in adUnit.")},bidResponse:function(e,t,r){var n,i,o=r.actualBidRequests.get(r.seatbid.seat);null==o&&(o=r.actualBidRequests.get(null)),o&&Object.assign(r,{bidRequest:o,bidderRequest:r.actualBidderRequests.find(function(e){return e.bidderCode===o.bidder})});var a=e(t,r);return a.requestBidder=null===(n=o)||void 0===n?void 0:n.bidder,null!==(i=a.native)&&void 0!==i&&i.ortb&&(a.adm=a.native.ortb),a.requestTimestamp=r.requestTimestamp,{bid:Object.assign((0,l.createBid)(u.STATUS.GOOD,{src:u.S2S.SRC,bidId:o?o.bidId||o.bid_Id:null,transactionId:r.adUnit.transactionId,adUnitId:r.adUnit.adUnitId,auctionId:r.bidderRequest.auctionId}),a,{deferRendering:!!r.adUnit.deferBilling,deferBilling:!!r.adUnit.deferBilling}),adUnit:r.adUnit.code}},overrides:(0,i.default)((0,i.default)((0,i.default)({},v.IMP,{id:function(e,t,r,n){t.id=n.impId},params:function(e,t,r,n){var i=n.s2sBidRequest.s2sConfig.adapterOptions,o,a=w(n.actualBidRequests.values());try{for(a.s();!(o=a.n()).done;){var s=o.value;(0,f.setImpBidParams)(t,s,n,n),i&&i[s.bidder]&&Object.assign(t.ext.prebid.bidder[s.bidder],i[s.bidder])}}catch(e){a.e(e)}finally{a.f()}},bidfloor:function(e,t,r,n){var i=(0,S.minimum)((0,E.currencyCompare)(function(e){return[e.bidfloor,e.bidfloorcur]})),o,a,s=w(n.actualBidRequests.values());try{for(s.s();!(a=s.n()).done;){var d=a.value,c={};if(e(c,d,n),null==c.bidfloorcur||null==c.bidfloor){o=null;break}o=null==o?c:i(o,c)}}catch(e){s.e(e)}finally{s.f()}null!=o&&Object.assign(t,o)}}),v.REQUEST,{fpd:function(e,t,r,n){n.transmitTids&&(0,d.deepSetValue)(t,"source.tid",r.auctionId),(0,d.mergeDeep)(t,null===(i=n.s2sBidRequest.ortb2Fragments)||void 0===i?void 0:i.global),n.s2sBidRequest.s2sConfig.extPrebid&&"object"===(0,a.default)(n.s2sBidRequest.s2sConfig.extPrebid)&&(0,d.deepSetValue)(t,"ext.prebid",(0,d.mergeDeep)((null===(c=t.ext)||void 0===c?void 0:c.prebid)||{},n.s2sBidRequest.s2sConfig.extPrebid)),n.getRedactor().ortb2(t);var i,s,c,u=Object.entries((null===(s=n.s2sBidRequest.ortb2Fragments)||void 0===s?void 0:s.bidder)||{}).filter(function(e){var t=(0,o.default)(e,1)[0],r=n.s2sBidRequest.s2sConfig.bidders;return n.s2sBidRequest.s2sConfig.allowUnknownBidderCodes||r&&r.includes(t)}).map(function(e){var t=(0,o.default)(e,2),r=t[0],i=t[1];return{bidders:[r],config:{ortb2:n.getRedactor(r).ortb2(i)}}});u.length&&(0,d.deepSetValue)(t,"ext.prebid.bidderconfig",(0,d.deepClone)(u))},extPrebidAliases:function(e,t,r,n){n.actualBidderRequests.forEach(function(r){e(t,r,n)})},sourceExtSchain:function(e,t,r,n){var i=(0,d.deepAccess)(t,"ext.prebid.schains")||[],o=new Set(i.flatMap(function(e){return e.bidders}));(i=Object.values(i.concat(n.actualBidderRequests.filter(function(e){return!o.has(e.bidderCode)}).map(function(e){return{bidders:[e.bidderCode],schain:(0,d.deepAccess)(e,"bids.0.schain")}})).filter(function(e){var t=e.bidders,r=e.schain;return(null==t?void 0:t.length)>0&&r}).reduce(function(e,t){var r=t.bidders,n=t.schain,i=JSON.stringify(n);return!e.hasOwnProperty(i)&&(e[i]={bidders:new Set,schain:n}),r.forEach(function(t){return e[i].bidders.add(t)}),e},{})).map(function(e){var t=e.bidders,r=e.schain;return{bidders:Array.from(t),schain:r}})).length&&(0,d.deepSetValue)(t,"ext.prebid.schains",i)}}),v.RESPONSE,{serverSideStats:function(e,t,r,n){n.actualBidderRequests.forEach(function(i){return e(t,r,T(T({},n),{},{bidderRequest:i,bidRequests:i.bids}))})},paapiConfigs:function(e,t,r,n){var i=Object.values(n.impContext).flatMap(function(e){return(e.paapiConfigs||[]).map(function(t){var r=e.actualBidderRequests.find(function(e){return e.bidderCode===t.bidder}),n=e.actualBidRequests.get(t.bidder);return{adUnitCode:e.adUnit.code,ortb2:null==r?void 0:r.ortb2,ortb2Imp:null==n?void 0:n.ortb2Imp,bidder:t.bidder,config:t.config}})});i.length>0&&(t.paapi=i)}})});function R(e){e.seatbid&&e.seatbid.map(function(e){var t=e.seat;for(var r in P)(P[r].bidders||[]).indexOf(t)>-1&&(e.seat=r);return e})}function j(e,t,r,n,i,o){var a=T({},e),s=P[a.bidder]=P[a.bidder]||{};s.bidders=s.bidders||[],s.next=s.next||{};var d=s.next[e.auctionId]||1;s.next[e.auctionId]=d+1;var c="".concat(a.bidder).concat(d);a.bidder=c,!s.bidders.includes(c)&&s.bidders.push(c),t.bidder=c,n.set(c,t);var u=r.s2sConfig,l=u.extPrebid=u.extPrebid||{},p=l.aliases=l.aliases||{},f=l.aliases[e.bidder]||o[e.bidder]||e.bidder;p[c]=f,i.push(c)}function k(e,t,r){var n,i,o,a,s=null==e||null===(n=e.s2sConfig)||void 0===n?void 0:n.appData,d=(null==r?void 0:r.bseat)||[],c=Object.keys((null==t?void 0:t.imp)&&t.imp.length&&(null===(i=t.imp[0].ext)||void 0===i||null===(i=i.prebid)||void 0===i?void 0:i.bidder)||{}).some(function(e){var t;return null==r||null===(t=r.bidders)||void 0===t?void 0:t.includes(e)});s&&t&&c&&(t.app=s,t.app.ext=null==t||null===(o=t.site)||void 0===o?void 0:o.ext,t.app.publisher=null==t||null===(a=t.site)||void 0===a?void 0:a.publisher,d.length&&(t.bseat=d),delete t.site,N(t),t.imp=t.imp.map(function(e){var t,n=null===(t=e.ext)||void 0===t||null===(t=t.prebid)||void 0===t?void 0:t.bidder;return n&&(e.ext.prebid.bidder=Object.keys(n).reduce(function(e,t){var i;return null!=r&&null!==(i=r.bidders)&&void 0!==i&&i.includes(t)&&(e[t]=T({},n[t])),e},{})),e}))}function N(e){var t;(null==e||null===(t=e.ext)||void 0===t||null===(t=t.prebid)||void 0===t||null===(t=t.bidderconfig)||void 0===t?void 0:t.length)>0&&e.ext.prebid.bidderconfig.forEach(function(t,r){t.config&&t.config.ortb2&&t.config.ortb2.site&&(e.ext.prebid.bidderconfig[r].config.ortb2.app=T({},t.config.ortb2.site),delete e.ext.prebid.bidderconfig[r].config.ortb2.site)})}},9246:function(e,t,r){"use strict";var n,i,o=r(1640),a=r(7251),s=o(r(7251)),d=o(r(4973)),c=o(r(9837)),u=r(9895),l=r(1235),p=r(3408),f=r(721),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=a(e)&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&({}).hasOwnProperty.call(e,o)){var s=i?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(n,o,s):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}(r(56)),v=r(2778),m=r(2885),b=r(7448),h=r(2583),y=r(4735),A=r(3136),I=r(7319),E=r(647),S=r(8763),O=r(7328),_=r(801),T=["modelGroups"];function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach(function(t){(0,c.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var P={NOT_FOUND:"not_found",RANDOM:"random"},D="Price Floors",R=(0,f.ajaxBuilder)(1e4),j=Symbol(),k=[j,"gptSlot","adUnitCode","size","domain","mediaType"],N=!1,U=!1,B={},M=[],V={};function q(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.index,i=void 0===n?A.auctionManager.index:n;return(null==e?void 0:e.adUnitCode)||i.getAdUnit(t).code}var L=(0,c.default)((0,c.default)((0,c.default)((0,c.default)((0,c.default)((0,c.default)({},j,function(){return"*"}),"size",function(e,t){return(0,l.parseGPTSingleSizeArray)(t.size)||"*"}),"mediaType",function(e,t){return t.mediaType||"banner"}),"gptSlot",function(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.index,n=(void 0===r?A.auctionManager.index:r).getAdUnit({adUnitId:e});return"gam"===(0,l.deepAccess)(n,"ortb2Imp.ext.data.adserver.name")&&n.ortb2Imp.ext.data.adserver.adslot}((e||t).adUnitId)||(0,O.getGptSlotInfoForAdUnitCode)(q(e,t)).gptSlot}),"domain",function(){return null==n&&(n=(0,l.parseUrl)((0,h.getRefererInfo)().topmostLocation,{noDecodeWholeURL:!0}).hostname),n}),"adUnitCode",function(e,t){return q(e,t)});function F(e,t){var r,n,i,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var s=(r=(0,l.deepAccess)(e,"schema.fields")||[],n=t,i=a,r.length?r.reduce(function(e,t){var r=L[t](n,i)||"*";return e.push("*"===r?["*"]:[r.toLowerCase(),"*"]),e},[]):[]);if(!s.length)return{matchingFloor:void 0};var d=s.map(function(e){return e[0]}).join("-"),c=(0,l.deepAccess)(e,"matchingInputs.".concat(d));if(c)return x({},c);var u=function(e,t){return e.reduce(function(e,r){var n=[];return e.map(function(e){r.map(function(r){n.push(e+t+r)})}),n}).sort(function(e,t){return e.split("*").length-t.split("*").length})}(s,(0,l.deepAccess)(e,"schema.delimiter")||"|"),p=(0,b.find)(u,function(t){return e.values.hasOwnProperty(t)}),f={floorMin:e.floorMin||0,floorRuleValue:e.values[p],matchingData:u[0],matchingRule:p===(null===(o=e.meta)||void 0===o?void 0:o.defaultRule)?void 0:p},g=(0,l.deepAccess)(t,"ortb2Imp.ext.prebid.floors.floorMin");return"number"==typeof g&&(f.floorMin=g),f.matchingFloor=Math.max(f.floorMin,f.floorRuleValue),(0,l.deepSetValue)(e,"matchingInputs.".concat(d),x({},f)),f}function G(e,t,r){return parseFloat((0,S.adjustCpm)(e,x(x({},t),{},{cpm:e}),r))}function z(e,t){return 1e10*e/(1e10*t)*(1e10*e)/1e10}var W={banner:function(e){return(0,l.deepAccess)(e,"mediaTypes.banner.sizes")||[]},video:function(e){return(0,l.deepAccess)(e,"mediaTypes.video.playerSize")||[]},native:function(e){return(0,l.deepAccess)(e,"mediaTypes.native.image.sizes")?[(0,l.deepAccess)(e,"mediaTypes.native.image.sizes")]:[]}};function Y(){var e,t,r,n,i,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{currency:"USD",mediaType:"*",size:"*"},a=V[this.auctionId];if(!a||a.skipped)return{};e=this,t=o,r=Object.keys(e.mediaTypes||{}),"*"===t.mediaType&&1===r.length&&(t.mediaType=r[0]),"*"===t.size&&-1!==r.indexOf(t.mediaType)&&W[t.mediaType]&&1===W[t.mediaType](e).length&&(t.size=W[t.mediaType](e)[0]),o=t;var s=F(a.data,x({},this),{mediaType:o.mediaType,size:o.size}),d=o.currency||a.data.currency;if(s.matchingFloor&&d!==a.data.currency)try{s.matchingFloor=(0,u.getGlobal)().convertCurrency(s.matchingFloor,a.data.currency,d)}catch(e){(0,l.logWarn)("".concat(D,": Unable to get currency conversion for getFloor for bidder ").concat(this.bidder,". You must have currency module enabled with defaultRates in your currency config")),d=a.data.currency}if(a.enforcement.bidAdjustment&&s.matchingFloor){var c=y.bidderSettings.get(this.bidder,"inverseBidAdjustment");if(c)s.matchingFloor=c(s.matchingFloor,this);else{var p=G(s.matchingFloor,null,this);s.matchingFloor=p?z(s.matchingFloor,p):s.matchingFloor}}if(s.matchingFloor){;return{floor:(n=s.matchingFloor,i=4,Math.ceil((parseFloat(n)*Math.pow(10,4)).toFixed(1))/Math.pow(10,i)),currency:d}}return{}}function H(e,t){var r=(0,l.deepClone)(e);return r.schema.delimiter=e.schema.delimiter||"|",r.values=function(e,t){var r=e.schema.fields,n=e.schema.delimiter,i=t&&-1===r.indexOf("adUnitCode")&&r.unshift("adUnitCode");return Object.keys(e.values).reduce(function(r,o){return r[(i?"".concat(t).concat(n).concat(o):o).toLowerCase()]=e.values[o],r},{})}(r,t),r.currency=r.currency||"USD",r}function J(e){var t=e.find(function(e){var t;return(null===(t=e.floors)||void 0===t?void 0:t.schema)!=null});return e.reduce(function(e,r){if((null===(n=r.floors)||void 0===n?void 0:n.schema)!=null&&!(0,l.deepEqual)(r.floors.schema,null==t||null===(i=t.floors)||void 0===i?void 0:i.schema))return(0,l.logError)("".concat(D,": adUnit '").concat(r.code,"' declares a different schema from one previously declared by adUnit '").concat(t.code,"'. Floor config for '").concat(r.code,"' will be ignored.")),e;var n,i,o=Object.assign({},null==t?void 0:t.floors,{values:void 0},r.floors);if(er(o)){if(e.values){var a=H(o,r.code).values;Object.assign(e.values,a)}else(e=H(o,r.code)).location="adUnit"}else null!=r.floors&&(0,l.logWarn)("adUnit '".concat(r.code,"' provides an invalid `floor` definition, it will be ignored for floor calculations"),r);return e},{})}function K(e,t,r){var n,i,o,a,s,d=(a=(n=t).data,s=n.enforcement,(null==a||null===(i=a.noFloorSignalBidders)||void 0===i?void 0:i.length)>0?a.noFloorSignalBidders:(null==s||null===(o=s.noFloorSignalBidders)||void 0===o?void 0:o.length)>0?s.noFloorSignalBidders:[]);e.forEach(function(e){e.bids.forEach(function(e){var n,i=d.some(function(t){return t===e.bidder});t.skipped||i?(i&&(0,l.logInfo)("noFloorSignal to ".concat(e.bidder)),delete e.getFloor):e.getFloor=Y,e.auctionId=r,e.floorData={noFloorSignaled:i,skipped:t.skipped,skipRate:null!==(n=(0,l.deepAccess)(t,"data.skipRate"))&&void 0!==n?n:t.skipRate,skippedReason:t.skippedReason,floorMin:t.floorMin,modelVersion:(0,l.deepAccess)(t,"data.modelVersion"),modelWeight:(0,l.deepAccess)(t,"data.modelWeight"),modelTimestamp:(0,l.deepAccess)(t,"data.modelTimestamp"),location:(0,l.deepAccess)(t,"data.location","noData"),floorProvider:t.floorProvider,fetchStatus:B.fetchStatus}})})}function Q(e,t){for(var r=Math.floor(Math.random()*t+1),n=0;n<e.length;n++)if((r-=e[n].modelWeight)<=0)return e[n]}function $(e,t){var r=(0,l.deepClone)(B);if(2===(0,l.deepAccess)(r,"data.floorsSchemaVersion")){var n=r.data,i=n.modelGroups,o=(0,d.default)(n,T);r.data=Object.assign(o,Q(i,o.modelWeightSum))}if(0===Object.keys((0,l.deepAccess)(r,"data.values")||{}).length?r.data=J(e):r.data=H(r.data),0===Object.keys((0,l.deepAccess)(r,"data.values")||{}).length)r.skipped=!0,r.skippedReason=P.NOT_FOUND;else{var a,s=100*Math.random()<parseFloat((0,l.getParameterByName)("pbjs_skipRate")||(null!==(a=(0,l.deepAccess)(r,"data.skipRate"))&&void 0!==a?a:r.skipRate));r.skipped=s,s&&(r.skippedReason=P.RANDOM)}return r.hasOwnProperty("floorMin")&&(r.data.floorMin=r.floorMin),K(e,r,t),r}function X(e){if(!e.hasExited){M=M.filter(function(t){return t.timer!==e.timer}),e.reqBidsConfigObj.auctionId=e.reqBidsConfigObj.auctionId||(0,l.generateUUID)();var t=(e.reqBidsConfigObj.adUnits||(0,u.getGlobal)()).filter(function(t){var r;return!(null!==(r=e.reqBidsConfigObj.adUnitCodes)&&void 0!==r&&r.length)||e.reqBidsConfigObj.adUnitCodes.includes(t.code)});V[e.reqBidsConfigObj.auctionId]=$(t,e.reqBidsConfigObj.auctionId),e.nextFn.apply(e.context,[e.reqBidsConfigObj]),e.hasExited=!0}}function Z(e){if((0,l.isNumber)(e.default)){var t,r,n="*",i=((null===(t=e.schema)||void 0===t?void 0:t.fields)||[]).length;i?n=Array(i).fill("*").join((null===(r=e.schema)||void 0===r?void 0:r.delimiter)||"|"):(0,l.deepSetValue)(e,"schema.fields",[j]),e.values=e.values||{},null==e.values[n]&&(e.values[n]=e.default,e.meta={defaultRule:n})}return e}function ee(e){var t,r,n;if(e=Z(e),!function(e){if(Array.isArray(e)&&e.length>0){if(e.every(function(e){return k.includes(e)}))return!0;(0,l.logError)("".concat(D,": Fields received do not match allowed fields"))}return!1}((0,l.deepAccess)(e,"schema.fields")))return!1;return t=e,r=e.schema.fields.length,n=e.schema.delimiter||"|","object"===(0,s.default)(t.values)&&(t.values=Object.keys(t.values).reduce(function(e,i){var o,a,s,d;if(o=i,a=t.values[i],s=r,d=n,"string"==typeof o&&o.split(d).length===s&&"number"==typeof a)e[i]=t.values[i];return e},{}),Object.keys(t.values).length>0)}var et={1:function(e){return ee(e)},2:function(e){return!!Array.isArray(e.modelGroups)&&0!==e.modelGroups.length&&(e.modelWeightSum=0,e.modelGroups.every(function(t){return!!("number"==typeof t.modelWeight&&ee(t))&&(e.modelWeightSum+=t.modelWeight,!0)}))}};function er(e){return"object"===(0,s.default)(e)&&((e.floorsSchemaVersion=e.floorsSchemaVersion||1,"function"!=typeof et[e.floorsSchemaVersion])?((0,l.logError)("".concat(D,": Unknown floorsSchemaVersion: "),e.floorsSchemaVersion),!1):et[e.floorsSchemaVersion](e))}function en(e,t){if(e&&"object"===(0,s.default)(e)&&er(e))return(0,l.logInfo)("".concat(D,": A ").concat(t," set the auction floor data set to "),e),x(x({},e),{},{location:t});(0,l.logError)("".concat(D,": The floors data did not contain correct values"),e)}var ei=(0,E.timedAuctionHook)("priceFloors",function(e,t){var r={reqBidsConfigObj:t,context:this,nextFn:e,haveExited:!1,timer:null};B.auctionDelay>0&&N?(r.timer=setTimeout(function(){(0,l.logWarn)("".concat(D,": Fetch attempt did not return in time for auction")),B.fetchStatus="timeout",X(r)},B.auctionDelay),M.push(r)):X(r)});function eo(){M.forEach(function(e){clearTimeout(e.timer),X(e)}),M=[]}function ea(e){N=!1,B.fetchStatus="success";try{t=JSON.parse(e)}catch(r){t=e}var t,r=en(t,"fetch");r&&(B.data=r,B.skipRate=(0,l.isNumber)(r.skipRate)?r.skipRate:B.skipRate,B.floorProvider=r.floorProvider||B.floorProvider),eo()}function es(e){N=!1,B.fetchStatus="error",(0,l.logError)("".concat(D,": Fetch errored with: "),e),eo()}function ed(e){e.url&&!N?"GET"!==(e.method||"GET")?(0,l.logError)("".concat(D,": 'GET' is the only request method supported at this time!")):(R(e.url,{success:ea,error:es},null,{method:"GET"}),N=!0):N&&(0,l.logWarn)("".concat(D,": A fetch is already occuring. Skipping."))}function ec(e){(B=(0,l.pick)(e,["floorMin","enabled",function(e){return!1!==e},"auctionDelay",function(e){return e||0},"floorProvider",function(t){return(0,l.deepAccess)(e,"data.floorProvider",t)},"endpoint",function(e){return e||{}},"skipRate",function(){return isNaN((0,l.deepAccess)(e,"data.skipRate"))?e.skipRate||0:e.data.skipRate},"enforcement",function(e){return(0,l.pick)(e||{},["enforceJS",function(e){return!1!==e},"enforcePBS",function(e){return!0===e},"floorDeals",function(e){return!0===e},"bidAdjustment",function(e){return!1!==e},"noFloorSignalBidders",function(e){return e||[]}])},"additionalSchemaFields",function(e){return"object"===(0,s.default)(e)&&Object.keys(e).length>0?function(e){Object.keys(e).forEach(function(t){-1===k.indexOf(t)&&"function"==typeof e[t]&&(k.push(t),L[t]=e[t])})}(e):void 0},"data",function(e){return e&&en(e,"setConfig")||void 0}])).enabled?(ed(B.endpoint),!U&&(g.on(v.EVENTS.AUCTION_END,function(e){setTimeout(function(){return delete V[e.auctionId]},3e3)}),(0,u.getGlobal)().requestBids.before(ei,50),(0,m.getHook)("addBidResponse").before(eu,(0,l.debugTurnedOn)()?4:50),U=!0)):((0,l.logInfo)("".concat(D,": Turning off module")),B={},V={},(0,m.getHook)("addBidResponse").getHooks({hook:eu}).remove(),(0,u.getGlobal)().requestBids.getHooks({hook:ei}).remove(),U=!1)}var eu=(0,E.timedBidResponseHook)("priceFloors",function(e,t,r,n){var i,o,a,s,d,c,p,f,g,m,b,h,y=V[r.auctionId];if(!y||!r||y.skipped)return e.call(this,t,r,n);var I=A.auctionManager.index.getBidRequest(r),E=F(y.data,I,x(x({},r),{},{size:[r.width,r.height]}));if(!E.matchingFloor)return 0!==E.matchingFloor&&(0,l.logWarn)("".concat(D,": unable to determine a matching price floor for bidResponse"),r),e.call(this,t,r,n);var S=y.data.currency.toUpperCase(),O=r.currency||"USD";if(S===O.toUpperCase())b=r.cpm;else if(r.originalCurrency&&S===r.originalCurrency.toUpperCase())b=r.originalCpm;else try{b=(0,u.getGlobal)().convertCurrency(r.cpm,O.toUpperCase(),S)}catch(i){return(0,l.logError)("".concat(D,": Unable do get currency conversion for bidResponse to Floor Currency. Do you have Currency module enabled? ").concat(r)),e.call(this,t,r,n)}if(b=G(b,r,I),i=y,o=E,a=r,s=b,a.floorData={floorValue:o.matchingFloor,floorRule:o.matchingRule,floorRuleValue:o.floorRuleValue,floorCurrency:i.data.currency,cpmAfterAdjustments:s,enforcements:x({},i.enforcement),matchedFields:{}},i.data.schema.fields.forEach(function(e,t){var r=o.matchingData.split(i.data.schema.delimiter)[t];a.floorData.matchedFields[e]=r}),d=y,c=E,p=r,f=!1!==(0,l.deepAccess)(d,"enforcement.enforceJS"),g=!0===(0,l.deepAccess)(d,"enforcement.floorDeals")||!p.dealId,m=p.floorData.cpmAfterAdjustments<c.matchingFloor,f&&m&&g){n(v.REJECTION_REASON.FLOOR_NOT_MET),(0,l.logWarn)("".concat(D,": ").concat(r.bidderCode,"'s Bid Response for ").concat(t," was rejected due to floor not met (adjusted cpm: ").concat(null==r||null===(h=r.floorData)||void 0===h?void 0:h.cpmAfterAdjustments,", floor: ").concat(null==E?void 0:E.matchingFloor,")"),r);return}return e.call(this,t,r,n)});function el(e,t,r){if("function"==typeof t.getFloor){var n,i;try{var o=t.getFloor({currency:r.currency||p.config.getConfig("currency.adServerCurrency")||"USD",mediaType:r.mediaType||"*",size:"*"});n=o.currency,i=o.floor}catch(e){(0,l.logWarn)("Cannot compute floor for bid",t);return}i=parseFloat(i),null!=n&&null!=i&&!isNaN(i)&&Object.assign(e,{bidfloor:i,bidfloorcur:n})}}function ep(e,t,r){if(null!=e.bidfloor){var n,i,o,a,s=r.reqContext.floorMin||{},d=s.floorMinCur,c=s.floorMin;null==d&&(d=e.bidfloorcur);var u=(null===(n=e.ext)||void 0===n||null===(n=n.prebid)||void 0===n||null===(n=n.floors)||void 0===n?void 0:n.floorMinCur)||(null===(i=e.ext)||void 0===i||null===(i=i.prebid)||void 0===i?void 0:i.floorMinCur)||d,p=(null===(o=e.ext)||void 0===o||null===(o=o.prebid)||void 0===o||null===(o=o.floors)||void 0===o?void 0:o.floorMin)||(null===(a=e.ext)||void 0===a||null===(a=a.prebid)||void 0===a?void 0:a.floorMin),f=(0,_.convertCurrency)(e.bidfloor,e.bidfloorcur,d),g=!!p&&!!u&&(0,_.convertCurrency)(p,u,d),v=g&&g<f?g:f;(0,l.deepSetValue)(e,"ext.prebid.floors.floorMin",v),(null==c||c>v)&&(c=v),r.reqContext.floorMin={floorMin:c,floorMinCur:d}}}function ef(e,t,r){if(U){var n;(0,l.deepSetValue)(e,"ext.prebid.floors.enabled",(null===(n=e.ext)||void 0===n||null===(n=n.prebid)||void 0===n||null===(n=n.floors)||void 0===n?void 0:n.enabled)||!1)}null!=r&&r.floorMin&&(0,l.mergeDeep)(e,{ext:{prebid:{floors:r.floorMin}}})}p.config.getConfig("floors",function(e){return ec(e.floors)}),(0,I.registerOrtbProcessor)({type:I.IMP,name:"bidfloor",fn:el}),(0,I.registerOrtbProcessor)({type:I.IMP,name:"extPrebidFloors",fn:ep,dialects:[I.PBS],priority:-1}),(0,I.registerOrtbProcessor)({type:I.REQUEST,name:"extPrebidFloors",fn:ef,dialects:[I.PBS]}),(0,u.registerModule)("priceFloors")},7544:function(e,t,r){"use strict";var n,i=r(1640),o=i(r(4763)),a=i(r(4995)),s=i(r(9837)),d=i(r(7251)),c=r(9895),u=r(1235),l=r(1634),p=r(8705),f=r(3408),g=r(4389),v=r(4735),m=r(2778);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var y="pubmatic",A="PubMatic: ",I=void 0,E="https://pubmatic.bbvms.com/r/".concat("$RENDERER",".js"),S={kadpageurl:"",gender:"",yob:"",lat:"",lon:"",wiid:"",profId:"",verId:""},O={NUMBER:"number",STRING:"string",BOOLEAN:"boolean",ARRAY:"array"},_={mimes:O.ARRAY,minduration:O.NUMBER,maxduration:O.NUMBER,startdelay:O.NUMBER,playbackmethod:O.ARRAY,api:O.ARRAY,protocols:O.ARRAY,w:O.NUMBER,h:O.NUMBER,battr:O.ARRAY,linearity:O.NUMBER,placement:O.NUMBER,plcmt:O.NUMBER,minbitrate:O.NUMBER,maxbitrate:O.NUMBER,skip:O.NUMBER},T={ICON:1,IMAGE:3},w={battr:O.ARRAY},C={1:"PMP",5:"PREF",6:"PMPG"},x={bootstrapPlayer:function(e){var t,r={code:e.adUnitCode};if(e.vastXml?r.vastXml=e.vastXml:e.vastUrl&&(r.vastUrl=e.vastUrl),!e.vastXml&&!e.vastUrl){(0,u.logWarn)("".concat(A,": No vastXml or vastUrl on bid, bailing..."));return}for(var n=x.getRendererId("pubmatic",e.rendererCode),i=document.getElementById(e.adUnitCode),o=0;o<window.bluebillywig.renderers.length;o++)if(window.bluebillywig.renderers[o]._id===n){t=window.bluebillywig.renderers[o];break}t?t.bootstrap(r,i):(0,u.logWarn)("".concat(A,": Couldn't find a renderer with ").concat(n))},newRenderer:function(e,t){var r=E.replace("$RENDERER",e),n=g.Renderer.install({url:r,loaded:!1,adUnitCode:t});try{n.setRender(x.outstreamRender)}catch(e){(0,u.logWarn)("".concat(A,": Error tying to setRender on renderer"),e)}return n},outstreamRender:function(e){e.renderer.push(function(){x.bootstrapPlayer(e)})},getRendererId:function(e,t){return"".concat(e,"-").concat(t)}},P=[p.BANNER,p.VIDEO,p.NATIVE],D=0,R=!1,j=["pubmatic"],k=["all"];function N(e){var t=document.createElement("a");return t.href=e,t.hostname}function U(e,t){if(!(0,u.isStr)(t))return t&&(0,u.logWarn)(A+"Ignoring param key: "+e+", expects string-value, found "+(0,d.default)(t)),I;switch(e){case"pmzoneid":return t.split(",").slice(0,50).map(function(e){return e.trim()}).join();case"kadfloor":case"lat":case"lon":return parseFloat(t)||I;case"yob":return parseInt(t)||I;default:return t}}function B(){var e=window.navigator&&(window.navigator.connection||window.navigator.mozConnection||window.navigator.webkitConnection);switch(null==e?void 0:e.effectiveType){case"ethernet":return 1;case"wifi":return 2;case"slow-2g":case"2g":return 4;case"3g":return 5;case"4g":return 6;default:return 0}}function M(e,t,r){var n,i="Ignoring param key: "+e+", expects "+r+", found "+(0,d.default)(t);switch(r){case O.BOOLEAN:n=u.isBoolean;break;case O.NUMBER:n=u.isNumber;break;case O.STRING:n=u.isStr;break;case O.ARRAY:n=u.isArray}return n(t)?t:((0,u.logWarn)(A+i),I)}var V={desc:"desc",desc2:"desc2",body:"desc",body2:"desc2",sponsoredBy:"sponsored",cta:"ctatext",rating:"rating",address:"address",downloads:"downloads",likes:"likes",phone:"phone",price:"price",salePrice:"saleprice",displayUrl:"displayurl",saleprice:"saleprice",displayurl:"displayurl"},q=Object.values(V);function L(e){if(!e&&!(0,u.isPlainObject)(e)){(0,u.logWarn)("".concat(A,": Native assets object is empty or not an object: ").concat(e)),R=!0;return}var t={ver:"1.2",assets:[]};for(var r in e)if(!m.NATIVE_KEYS_THAT_ARE_NOT_ASSETS.includes(r)){if(!m.NATIVE_KEYS.hasOwnProperty(r)&&!q.includes(r)){(0,u.logWarn)("".concat(A,": Unrecognized native asset code: ").concat(r,". Asset will be ignored."));continue}var n=e[r],i=0;n.required&&(0,u.isBoolean)(n.required)&&(i=Number(n.required));var o={id:t.assets.length,required:i};if(r in V)o.data={type:m.NATIVE_ASSET_TYPES[V[r]]},(n.len||n.length)&&(o.data.len=n.len||n.length),n.ext&&(o.data.ext=n.ext);else if("icon"===r||"image"===r){if(o.img={type:"icon"===r?m.NATIVE_IMAGE_TYPES.ICON:m.NATIVE_IMAGE_TYPES.MAIN},n.aspect_ratios){if((0,u.isArray)(n.aspect_ratios)){if(n.aspect_ratios.length){var a=n.aspect_ratios[0],s=a.min_width,d=a.min_height;(0,u.isInteger)(s)&&(0,u.isInteger)(d)?(o.img.wmin=s,o.img.hmin=d):(0,u.logWarn)("".concat(A,": image.aspect_ratios min_width or min_height are invalid: ").concat(s,", ").concat(d));var c=n.aspect_ratios.filter(function(e){return e.ratio_width&&e.ratio_height}).map(function(e){return"".concat(e.ratio_width,":").concat(e.ratio_height)});c.length>0&&(o.img.ext={aspectratios:c})}else(0,u.logWarn)("".concat(A,": image.aspect_ratios was passed, but it's empty: ").concat(n.aspect_ratios))}else(0,u.logWarn)("".concat(A,": image.aspect_ratios was passed, but it's not a an array: ").concat(n.aspect_ratios))}o.img.w=n.w||n.width,o.img.h=n.h||n.height,o.img.wmin=n.wmin||n.minimumWidth||(n.minsizes?n.minsizes[0]:I),o.img.hmin=n.hmin||n.minimumHeight||(n.minsizes?n.minsizes[1]:I),n.sizes&&(2===n.sizes.length&&(0,u.isInteger)(n.sizes[0])&&(0,u.isInteger)(n.sizes[1])?((0,u.logInfo)("".concat(A,": if asset.sizes exist, by OpenRTB spec we should remove wmin and hmin")),o.img.w=n.sizes[0],o.img.h=n.sizes[1],delete o.img.hmin,delete o.img.wmin):(0,u.logWarn)("".concat(A,": image.sizes was passed, but its value is not an array of integers: ").concat(n.sizes))),n.ext&&(o.img.ext=n.ext),n.mimes&&(o.img.mimes=n.mimes)}else"title"===r?(o.title={len:n.len||n.length||140},n.ext&&(o.title.ext=n.ext)):"ext"===r&&(o.ext=n,delete o.required);t.assets.push(o)}if(t.assets.length<1){(0,u.logWarn)("".concat(A,": Could not find any valid asset")),R=!0;return}return t}function F(e,t){!(0,u.deepAccess)(e,"plcmt")&&(0,u.logWarn)("Video.plcmt param missing for "+t)}function G(e,t){(t=t.filter(function(e){return"string"==typeof e||((0,u.logWarn)(A+"acat: Each category should be a string, ignoring category: "+e),!1)}).map(function(e){return e.trim()}).filter(function(e,t,r){return r.indexOf(e)===t})).length>0&&((0,u.logWarn)(A+"acat: Selected: ",t),e.ext.acat=t)}function z(e,t,r){if(!!(null!=t&&null!==(n=t.ext)&&void 0!==n&&n.prebiddealpriority)){var n,i,o=(0,u.getBidRequest)(e.requestId,[r.bidderRequest]),a=(0,u.deepAccess)(o,"mediaTypes.video");if((null==a?void 0:a.context)==p.ADPOD){var s=(null==t||null===(i=t.ext)||void 0===i||null===(i=i.video)||void 0===i?void 0:i.duration)||(null==a?void 0:a.maxduration);e.video={context:p.ADPOD,durationSeconds:s,dealTier:t.ext.prebiddealpriority}}}}function W(e){return!0===(0,u.isArray)(e)&&!!(e.length>0)||!1}function Y(e,t,r){e.meta={},t.ext&&t.ext.dspid&&(e.meta.networkId=t.ext.dspid,e.meta.demandSource=t.ext.dspid),t.ext&&t.ext.dchain&&(e.meta.dchain=t.ext.dchain);var n=r||t.ext&&t.ext.advid;n&&(e.meta.advertiserId=n,e.meta.agencyId=n,e.meta.buyerId=n),t.adomain&&W(t.adomain)&&(e.meta.advertiserDomains=t.adomain,e.meta.clickUrl=t.adomain[0],e.meta.brandId=t.adomain[0]),t.cat&&W(t.cat)&&(e.meta.secondaryCatIds=t.cat,e.meta.primaryCatId=t.cat[0]),null!=t&&t.attr&&Array.isArray(t.attr)&&(e.meta.isInBannerVideo=t.attr.includes(6)),t.ext&&t.ext.dsa&&Object.keys(t.ext.dsa).length&&(e.meta.dsa=t.ext.dsa)}var H={code:y,gvlid:76,supportedMediaTypes:[p.BANNER,p.VIDEO,p.NATIVE],isBidRequestValid:function(e){if(e&&e.params){if(!(0,u.isStr)(e.params.publisherId))return(0,u.logWarn)(A+"Error: publisherId is mandatory and cannot be numeric (wrap it in quotes in your config). Call to OpenBid will not be sent for ad unit: "+JSON.stringify(e)),!1;if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(p.VIDEO)){var t=(0,u.deepAccess)(e.mediaTypes,"video.mimes"),r=(0,u.deepAccess)(e,"params.video.mimes");if(!1===W(t)&&!1===W(r))return(0,u.logWarn)(A+"Error: For video ads, bid.mediaTypes.video.mimes OR bid.params.video.mimes should be present and must be a non-empty array. Call to OpenBid will not be sent for ad unit:"+JSON.stringify(e)),!1;if(!e.mediaTypes[p.VIDEO].hasOwnProperty("context"))return(0,u.logError)("".concat(A,": no context specified in bid. Rejecting bid: "),e),!1;if("outstream"===e.mediaTypes[p.VIDEO].context&&!(0,u.isStr)(e.params.outstreamAU)&&!e.hasOwnProperty("renderer")&&!e.mediaTypes[p.VIDEO].hasOwnProperty("renderer")){if(!(e.mediaTypes.hasOwnProperty(p.BANNER)||e.mediaTypes.hasOwnProperty(p.NATIVE)))return(0,u.logError)("".concat(A,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting bid: '),e),!1;delete e.mediaTypes[p.VIDEO],(0,u.logWarn)("".concat(A,': for "outstream" bids either outstreamAU parameter must be provided or ad unit supplied renderer is required. Rejecting mediatype Video of bid: '),e)}}return!0}return!1},buildRequests:function(e,t){t&&t.refererInfo&&(x=t.refererInfo);var r,n,i,o,s,c,l,g,m,b,E,O,C,x,P,V,q={pageURL:(null==(l=x)?void 0:l.page)||window.location.href,refURL:(null==l?void 0:l.ref)||window.document.referrer};var z=(r=q,{id:""+new Date().getTime(),at:1,cur:["USD"],imp:[],site:{page:r.pageURL,ref:r.refURL,publisher:{}},device:{ua:navigator.userAgent,js:1,dnt:"yes"==navigator.doNotTrack||"1"==navigator.doNotTrack||"1"==navigator.msDoNotTrack?1:0,h:screen.height,w:screen.width,language:navigator.language,connectiontype:B()},user:{},ext:{}}),W="",Y=[],H=[],J=[],K=(0,u.generateUUID)();if(e.forEach(function(e){if(e.params.wiid=e.params.wiid||t.auctionId||K,(P=(0,u.deepClone)(e)).params.adSlot=P.params.adSlot||"",!function(e){e.params.adUnit="",e.params.adUnitIndex="0",e.params.width=0,e.params.height=0,e.params.adSlot=(t=e.params.adSlot,(0,u.isStr)(t)?t.replace(/^\s+/g,"").replace(/\s+$/g,""):(t&&(0,u.logWarn)(y+": adSlot must be a string. Ignoring adSlot"),""));var t,r=e.params.adSlot,n=r.split(":");if(r=n[0],2==n.length&&(e.params.adUnitIndex=n[1]),n=r.split("@"),e.params.adUnit=n[0],n.length>1){if(2!=(n=n[1].split("x")).length){(0,u.logWarn)(A+"AdSlot Error: adSlot not in required format");return}e.params.width=parseInt(n[0],10),e.params.height=parseInt(n[1],10)}else if(e.hasOwnProperty("mediaTypes")&&e.mediaTypes.hasOwnProperty(p.BANNER)&&e.mediaTypes.banner.hasOwnProperty("sizes")){for(var i=0,o=[];i<e.mediaTypes.banner.sizes.length;i++)2===e.mediaTypes.banner.sizes[i].length&&o.push(e.mediaTypes.banner.sizes[i]);e.mediaTypes.banner.sizes=o,e.mediaTypes.banner.sizes.length>=1&&(e.params.width=e.mediaTypes.banner.sizes[0][0],e.params.height=e.mediaTypes.banner.sizes[0][1],e.mediaTypes.banner.sizes=e.mediaTypes.banner.sizes.splice(1,e.mediaTypes.banner.sizes.length-1))}}(P),P.mediaTypes&&P.mediaTypes.hasOwnProperty("video")||P.params.hasOwnProperty("video"));else if(!(P.hasOwnProperty("mediaTypes")&&P.mediaTypes.hasOwnProperty(p.NATIVE))&&0===P.params.width&&0===P.params.height){(0,u.logWarn)(A+"Skipping the non-standard adslot: ",P.params.adSlot,JSON.stringify(P));return}q.pubId=q.pubId||P.params.publisherId,(q=function(e,t){var r,n,i;for(r in!t.kadpageurl&&(t.kadpageurl=t.pageURL),S)S.hasOwnProperty(r)&&(n=e[r])&&(i=S[r],"object"===(0,d.default)(i)&&(n=i.f(n,t)),(0,u.isStr)(n)?t[r]=n:(0,u.logWarn)(A+"Ignoring param : "+r+" with value : "+S[r]+", expects string-value, found "+(0,d.default)(n)));return t}(P.params,q)).transactionId=null===(r=P.ortb2Imp)||void 0===r||null===(r=r.ext)||void 0===r?void 0:r.tid,""===W?W=P.params.currency||I:P.params.hasOwnProperty("currency")&&W!==P.params.currency&&(0,u.logWarn)(A+"Currency specifier ignored. Only one currency permitted."),P.params.currency=W,P.params.hasOwnProperty("dctr")&&(0,u.isStr)(P.params.dctr)&&Y.push(P.params.dctr),P.params.hasOwnProperty("bcat")&&(0,u.isArray)(P.params.bcat)&&(H=H.concat(P.params.bcat)),P.params.hasOwnProperty("acat")&&(0,u.isArray)(P.params.acat)&&(J=J.concat(P.params.acat));var r,n=function(e,t){var r,n,i,o,a,s,c={},l={},g=e.hasOwnProperty("sizes")?e.sizes:[],v="",m=[],b=null==t||null===(i=t.paapi)||void 0===i?void 0:i.enabled;if(r=c={id:e.bidId,tagid:e.params.adUnit||void 0,bidfloor:U("kadfloor",e.params.kadfloor),secure:1,ext:{pmZoneId:U("pmzoneid",e.params.pmzoneid)},bidfloorcur:e.params.currency?U("currency",e.params.currency):"USD",displaymanager:"Prebid.js",displaymanagerver:"9.17.0",pmp:(null===(o=e.ortb2Imp)||void 0===o?void 0:o.pmp)||void 0},(n=e).params.deals&&((0,u.isArray)(n.params.deals)?n.params.deals.forEach(function(e){(0,u.isStr)(e)&&e.length>3?(!r.pmp&&(r.pmp={private_auction:0,deals:[]}),r.pmp.deals.push({id:e})):(0,u.logWarn)(A+"Error: deal-id present in array bid.params.deals should be a strings with more than 3 charaters length, deal-id ignored: "+e)}):(0,u.logWarn)(A+"Error: bid.params.deals should be an array of strings.")),!function(e,t){var r,n="";if(t.params.dctr){if(n=t.params.dctr,(0,u.isStr)(n)&&n.length>0){var i=n.split("|");n="",i.forEach(function(e){n+=e.length>0?e.trim()+"|":""}),r=n.length,"|"===n.substring(r,r-1)&&(n=n.substring(0,r-1)),e.ext.key_val=n.trim()}else(0,u.logWarn)(A+"Ignoring param : dctr with value : "+n+", expects string-value, found empty or non-string value")}}(c,e),!function(e,t){var r,n=t.rtd&&t.rtd.jwplayer&&t.rtd.jwplayer.targeting||void 0,i="";if(void 0!==n&&""!==n&&n.hasOwnProperty("segments")){var o=n.segments.length;i+="jw-id="+n.content.id;for(var a=0;a<o;a++)i+="|jw-"+n.segments[a]+"=1";(r=e.ext)&&void 0===r.key_val?r.key_val=i:r.key_val+="|"+i}}(c,e),e.hasOwnProperty("mediaTypes"))for(v in e.mediaTypes)switch(v){case p.BANNER:(a=function(e){var t,r=e.mediaTypes.banner.sizes,n=[];if(r!==I&&(0,u.isArray)(r)){if(t={},e.params.width||e.params.height)t.w=e.params.width,t.h=e.params.height;else{if(0===r.length)return t=I,(0,u.logWarn)(A+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t;t.w=parseInt(r[0][0],10),t.h=parseInt(r[0][1],10),r=r.splice(1,r.length-1)}r.length>0&&(n=[],r.forEach(function(e){e.length>1&&n.push({w:e[0],h:e[1]})}),n.length>0&&(t.format=n)),t.pos=0,t.topframe=(0,u.inIframe)()?0:1;var i=h({},(0,u.deepAccess)(e,"ortb2Imp.banner"));for(var o in w)i.hasOwnProperty(o)&&(t[o]=M(o,i[o],w[o]))}else(0,u.logWarn)(A+"Error: mediaTypes.banner.size missing for adunit: "+e.params.adUnit+". Ignoring the banner impression in the adunit."),t=I;return t}(e))!==I&&(c.banner=a);break;case p.NATIVE:l.request=JSON.stringify(function(e){var t;if(e.ortb){t=h(h({ver:"1.2"},e=e.ortb),{},{assets:[]});var r=e.assets,n=function(e){return e.title||e.img||e.data||e.video};if(r.length<1||!r.some(function(e){return n(e)}))return(0,u.logWarn)("".concat(A,": Native assets object is empty or contains some invalid object")),R=!0,t;r.forEach(function(e){e.img&&(e.img.type==T.IMAGE?(e.w=e.w||e.width||(e.sizes?e.sizes[0]:I),e.h=e.h||e.height||(e.sizes?e.sizes[1]:I),e.wmin=e.wmin||e.minimumWidth||(e.minsizes?e.minsizes[0]:I),e.hmin=e.hmin||e.minimumHeight||(e.minsizes?e.minsizes[1]:I)):e.img.type==T.ICON&&(e.w=e.w||e.width||(e.sizes?e.sizes[0]:I),e.h=e.h||e.height||(e.sizes?e.sizes[1]:I))),e&&void 0!==e.id&&n(e)&&t.assets.push(e)})}else t=L(e);return t}(e.nativeParams)),R?((0,u.logWarn)(A+"Error: Error in Native adunit "+e.params.adUnit+". Ignoring the adunit. Refer to http://prebid.org/dev-docs/show-native-ads.html for more details."),R=!1):c.native=l;break;case p.VIDEO:(s=function(e){var t,r=(0,u.mergeDeep)((0,u.deepAccess)(e.mediaTypes,"video"),e.params.video);if(r!==I){for(var n in t={},F(r,e.adUnitCode),_)r.hasOwnProperty(n)&&(t[n]=M(n,r[n],_[n]));(0,u.isArray)(e.mediaTypes.video.playerSize[0])?(t.w=parseInt(e.mediaTypes.video.playerSize[0][0],10),t.h=parseInt(e.mediaTypes.video.playerSize[0][1],10)):(0,u.isNumber)(e.mediaTypes.video.playerSize[0])&&(t.w=parseInt(e.mediaTypes.video.playerSize[0],10),t.h=parseInt(e.mediaTypes.video.playerSize[1],10))}else t=I,(0,u.logWarn)(A+"Error: Video config params missing for adunit: "+e.params.adUnit+" with mediaType set as video. Ignoring video impression in the adunit.");return t}(e))!==I&&(c.video=s)}else a={pos:0,w:e.params.width,h:e.params.height,topframe:(0,u.inIframe)()?0:1},(0,u.isArray)(g)&&g.length>1&&((g=g.splice(1,g.length-1)).forEach(function(e){m.push({w:e[0],h:e[1]})}),a.format=m),c.banner=a;return function(e,t){var r=h({},(0,u.deepAccess)(t,"ortb2Imp.ext.data"));Object.keys(r).forEach(function(t){"pbadslot"===t?"string"==typeof r[t]&&r[t]&&(0,u.deepSetValue)(e,"ext.data.pbadslot",r[t]):"adserver"===t?["name","adslot"].forEach(function(t){var n=(0,u.deepAccess)(r,"adserver.".concat(t));"string"==typeof n&&n&&((0,u.deepSetValue)(e,"ext.data.adserver.".concat(t.toLowerCase()),n),"adslot"===t&&(0,u.deepSetValue)(e,"ext.dfp_ad_unit_code",n))}):(0,u.deepSetValue)(e,"ext.data.".concat(t),r[t])});var n=(0,u.deepAccess)(t,"ortb2Imp.ext.gpid");n&&(0,u.deepSetValue)(e,"ext.gpid",n)}(c,e),function(e,t){var r=-1;"function"==typeof t.getFloor&&!f.config.getConfig("pubmatic.disableFloors")&&[p.BANNER,p.VIDEO,p.NATIVE].forEach(function(n){if(e.hasOwnProperty(n)){var i=[];"banner"===n&&(e[n].w&&e[n].h&&i.push([e[n].w,e[n].h]),(0,u.isArray)(e[n].format)&&e[n].format.forEach(function(e){return i.push([e.w,e.h])})),0===i.length&&i.push("*"),i.forEach(function(i){var o=t.getFloor({currency:e.bidfloorcur,mediaType:n,size:i});if((0,u.logInfo)(A,"floor from floor module returned for mediatype:",n," and size:",i," is: currency",o.currency,"floor",o.floor),"object"===(0,d.default)(o)&&o.currency===e.bidfloorcur&&!isNaN(parseInt(o.floor))){var a=parseFloat(o.floor);(0,u.logInfo)(A,"floor from floor module:",a,"previous floor value",r,"Min:",Math.min(a,r)),r=-1===r?a:Math.min(a,r),(0,u.logInfo)(A,"new floor value:",r)}})}}),e.bidfloor&&((0,u.logInfo)(A,"floor from floor module:",r,"impObj.bidfloor",e.bidfloor,"Max:",Math.max(r,e.bidfloor)),r=Math.max(r,e.bidfloor)),e.bidfloor=!isNaN(r)&&r>0?r:I,(0,u.logInfo)(A,"new impObj.bidfloor value:",e.bidfloor)}(c,e),function(e,t,r){var n,i;r?(e.ext=e.ext||{},(null==t||null===(n=t.ortb2Imp)||void 0===n||null===(n=n.ext)||void 0===n?void 0:n.ae)!==void 0&&(e.ext.ae=t.ortb2Imp.ext.ae)):null!==(i=e.ext)&&void 0!==i&&i.ae&&delete e.ext.ae}(c,e,b),c.hasOwnProperty(p.BANNER)||c.hasOwnProperty(p.NATIVE)||c.hasOwnProperty(p.VIDEO)?c:I}(P,t);n&&z.imp.push(n)}),0!=z.imp.length){z.site.publisher.id=q.pubId.trim(),D=q.pubId.trim(),z.ext.wrapper={},z.ext.wrapper.profile=parseInt(q.profId)||I,z.ext.wrapper.version=parseInt(q.verId)||I,z.ext.wrapper.wiid=q.wiid||t.auctionId,z.ext.wrapper.wv="prebid_prebid_9.17.0",z.ext.wrapper.transactionId=q.transactionId,z.ext.wrapper.wp="pbjs";var Q=t?v.bidderSettings.get(t.bidderCode,"allowAlternateBidderCodes"):void 0;if(void 0!==Q){if(z.ext.marketplace={},t&&!0==Q){var $=v.bidderSettings.get(t.bidderCode,"allowedAlternateBidderCodes");j=(0,u.isArray)($)?($=$.map(function(e){return e.trim().toLowerCase()}).filter(function(e){return!!e}).filter(u.uniques)).includes("*")?k:[].concat((0,a.default)(j),(0,a.default)($)):k}z.ext.marketplace.allowedbidders=j.filter(u.uniques)}z.user.gender=q.gender?q.gender.trim():I,z.user.geo={},z.user.yob=U("yob",q.yob),z.site.page=q.kadpageurl.trim()||z.site.page.trim(),z.site.domain=N(z.site.page),"object"===(0,d.default)(f.config.getConfig("content"))&&(z.site.content=f.config.getConfig("content")),"object"===(0,d.default)(f.config.getConfig("device"))&&(z.device=Object.assign(z.device,f.config.getConfig("device"))),z.device.language=z.device.language&&z.device.language.split("-")[0],(0,u.deepSetValue)(z,"source.tid",null==t||null===(g=t.ortb2)||void 0===g||null===(g=g.source)||void 0===g?void 0:g.tid),-1!==window.location.href.indexOf("pubmaticTest=true")&&(z.test=1),e[0].schain&&(0,u.deepSetValue)(z,"source.ext.schain",e[0].schain),t&&t.gdprConsent&&((0,u.deepSetValue)(z,"user.ext.consent",t.gdprConsent.consentString),(0,u.deepSetValue)(z,"regs.ext.gdpr",t.gdprConsent.gdprApplies?1:0)),t&&t.uspConsent&&(0,u.deepSetValue)(z,"regs.ext.us_privacy",t.uspConsent),null!=t&&null!==(m=t.gppConsent)&&void 0!==m&&m.gppString?((0,u.deepSetValue)(z,"regs.gpp",t.gppConsent.gppString),(0,u.deepSetValue)(z,"regs.gpp_sid",t.gppConsent.applicableSections)):null!=t&&null!==(b=t.ortb2)&&void 0!==b&&null!==(b=b.regs)&&void 0!==b&&b.gpp&&((0,u.deepSetValue)(z,"regs.gpp",t.ortb2.regs.gpp),(0,u.deepSetValue)(z,"regs.gpp_sid",t.ortb2.regs.gpp_sid)),!0===f.config.getConfig("coppa")&&(0,u.deepSetValue)(z,"regs.coppa",1),null!=t&&null!==(E=t.ortb2)&&void 0!==E&&null!==(E=E.regs)&&void 0!==E&&null!==(E=E.ext)&&void 0!==E&&E.dsa&&(0,u.deepSetValue)(z,"regs.ext.dsa",t.ortb2.regs.ext.dsa),n=z,i=e,o=(0,u.deepAccess)(i,"0.userIdAsEids"),(0,u.isArray)(o)&&o.length>0&&(0,u.deepSetValue)(n,"user.eids",o);var X=t&&t.ortb2||{},Z=X.user,ee=X.device,et=X.site,er=X.bcat,en=X.badv;if(et){var ei=z.site,eo=ei.page,ea=ei.domain,es=ei.ref;(0,u.mergeDeep)(z,{site:et}),z.site.page=eo,z.site.domain=ea,z.site.ref=es}return Z&&(0,u.mergeDeep)(z,{user:Z}),en&&(0,u.mergeDeep)(z,{badv:en}),er&&(H=H.concat(er)),null!=ee&&ee.sua&&(z.device.sua=null==ee?void 0:ee.sua),null!=ee&&null!==(O=ee.ext)&&void 0!==O&&O.cdep&&(0,u.deepSetValue)(z,"device.ext.cdep",ee.ext.cdep),null!=Z&&Z.geo&&null!=ee&&ee.geo?(z.device.geo=h(h({},z.device.geo),ee.geo),z.user.geo=h(h({},z.user.geo),Z.geo)):(null!=Z&&Z.geo||null!=ee&&ee.geo)&&(z.user.geo=z.device.geo=null!=Z&&Z.geo?h(h({},z.user.geo),Z.geo):h(h({},z.user.geo),ee.geo)),null!==(C=X.ext)&&void 0!==C&&null!==(C=C.prebid)&&void 0!==C&&null!==(C=C.bidderparams)&&void 0!==C&&null!==(C=C[t.bidderCode])&&void 0!==C&&C.acat?G(z,X.ext.prebid.bidderparams[t.bidderCode].acat):J.length&&G(z,J),s=z,(c=(c=H).filter(function(e){return"string"==typeof e||((0,u.logWarn)(A+"bcat: Each category should be a string, ignoring category: "+e),!1)}).map(function(e){return e.trim()}).filter(function(e,t,r){if(e.length>3)return r.indexOf(e)===t;(0,u.logWarn)(A+"bcat: Each category should have a value of a length of more than 3 characters, ignoring category: "+e)})).length>0&&((0,u.logWarn)(A+"bcat: Selected: ",c),s.bcat=c),null!=t&&t.timeout?z.tmax=t.timeout:z.tmax=null===(V=window)||void 0===V||null===(V=V.PWT)||void 0===V||null===(V=V.versionDetails)||void 0===V?void 0:V.timeout,z.ext.epoch=new Date().getTime(),"object"===(0,d.default)(f.config.getConfig("app"))&&(z.app=f.config.getConfig("app"),z.app.publisher=z.site.publisher,z.app.ext=z.site.ext||I,"object"!==(0,d.default)(z.app.content)&&(z.app.content=z.site.content||I),delete z.site),{method:"POST",url:"https://hbopenbid.pubmatic.com/translator?source=prebid-client",data:JSON.stringify(z),bidderRequest:t}}},interpretResponse:function(e,t){var r=[],n="USD",i=JSON.parse(t.data),a=i.site&&i.site.ref?i.site.ref:"";try{e.body&&e.body.seatbid&&(0,u.isArray)(e.body.seatbid)&&(n=e.body.cur||n,e.body.seatbid.forEach(function(e){e.bid&&(0,u.isArray)(e.bid)&&e.bid.forEach(function(o){var s={requestId:o.impid,cpm:parseFloat((o.price||0).toFixed(2)),width:o.w,height:o.h,creativeId:o.crid||o.id,dealId:o.dealid,currency:n,netRevenue:!0,ttl:300,referrer:a,ad:o.adm,pm_seat:e.seat||null,pm_dspid:o.ext&&o.ext.dspid?o.ext.dspid:null,partnerImpId:o.id||""};i.imp&&i.imp.length>0&&i.imp.forEach(function(e){if(o.impid===e.id)switch(!function(e,t){if(e.ext&&void 0!=e.ext.bidtype)t.mediaType=P[e.ext.bidtype];else{(0,u.logInfo)(A+"bid.ext.bidtype does not exist, checking alternatively for mediaType");var r=e.adm,n="",i=new RegExp(/VAST\s+version/);if(r.indexOf('span class="PubAPIAd"')>=0)t.mediaType=p.BANNER;else if(i.test(r))t.mediaType=p.VIDEO;else try{(n=JSON.parse(r.replace(/\\/g,"")))&&n.native&&(t.mediaType=p.NATIVE)}catch(e){(0,u.logWarn)(A+"Error: Cannot parse native reponse for ad response: "+r)}}}(o,s),s.mediaType){case p.BANNER:break;case p.VIDEO:s.width=o.hasOwnProperty("w")?o.w:e.video.w,s.height=o.hasOwnProperty("h")?o.h:e.video.h,s.vastXml=o.adm,!function(e,t){var r,n,i;if(t.bidderRequest&&t.bidderRequest.bids){for(var o=0;o<t.bidderRequest.bids.length;o++)if(t.bidderRequest.bids[o].bidId===e.requestId){r=t.bidderRequest.bids[o].params;n=t.bidderRequest.bids[o].mediaTypes[p.VIDEO].context,i=t.bidderRequest.bids[o].adUnitCode}n&&"outstream"===n&&r&&r.outstreamAU&&i&&(e.rendererCode=r.outstreamAU,e.renderer=x.newRenderer(e.rendererCode,i))}}(s,t),z(s,o,t);break;case p.NATIVE:!function(e,t){if(e.hasOwnProperty("adm")){var r="";try{r=JSON.parse(e.adm.replace(/\\/g,""))}catch(e){(0,u.logWarn)(A+"Error: Cannot parse native reponse for ad response: "+t.adm);return}t.native={ortb:h({},r.native)},t.mediaType=p.NATIVE,!t.width&&(t.width=0),!t.height&&(t.height=0)}}(o,s)}}),o.ext&&o.ext.deal_channel&&(s.dealChannel=C[o.ext.deal_channel]||null),Y(s,o,e.seat),e.ext&&e.ext.buyid&&(s.adserverTargeting={hb_buyid_pubmatic:e.ext.buyid}),o.ext&&o.ext.marketplace&&(s.bidderCode=o.ext.marketplace),r.push(s)})}));var s=(0,u.deepAccess)(e.body,"ext.fledge_auction_configs");if(s)return s=Object.entries(s).map(function(e){var t=(0,o.default)(e,2),r=t[0],n=t[1];return{bidId:r,config:Object.assign({auctionSignals:{}},n)}}),{bids:r,paapi:s}}catch(e){(0,u.logError)(e)}return r},getUserSyncs:function(e,t,r,n,i){var o,a,s=""+D;return(r&&(s+="&gdpr="+(r.gdprApplies?1:0)+("&gdpr_consent="+encodeURIComponent(r.consentString||""))),n&&(s+="&us_privacy="+encodeURIComponent(n)),null!=i&&i.gppString&&null!=i&&null!==(o=i.applicableSections)&&void 0!==o&&o.length&&(s+="&gpp="+encodeURIComponent(i.gppString)+("&gpp_sid="+encodeURIComponent(null==i||null===(a=i.applicableSections)||void 0===a?void 0:a.join(",")))),!0===f.config.getConfig("coppa")&&(s+="&coppa=1"),e.iframeEnabled)?[{type:"iframe",url:"https://ads.pubmatic.com/AdServer/js/user_sync.html?kdntuid=1&p="+s}]:[{type:"image",url:"https://image8.pubmatic.com/AdServer/ImgSync?p="+s}]}};(0,l.registerBidder)(H),(0,c.registerModule)("pubmaticBidAdapter")},8541:function(e,t,r){"use strict";var n,i=r(1640),o=r(9895),a=r(1235),s=i(r(4047)),d=r(2778),c=i(r(9293)),u=r(7448),l=r(721),p=r(4288),f=r(5723),g="roxot",v=(0,p.getStorageManager)({moduleType:f.MODULE_TYPE_ANALYTICS,moduleName:g}),m=(0,l.ajaxBuilder)(0),b="pa.rxthdr.com/v3",h=d.EVENTS.AUCTION_INIT,y=d.EVENTS.AUCTION_END,A=d.EVENTS.BID_REQUESTED,I=d.EVENTS.BID_ADJUSTMENT,E=d.EVENTS.BIDDER_DONE,S=d.EVENTS.BID_WON,O={RUNNING:"running",FINISHED:"finished"},_={REQUESTED:"requested",BID:"bid",NO_BID:"noBid",TIMEOUT:"timeout"},T="a",w="i",C="bat",x={},P=["utm_source","utm_medium","utm_campaign","utm_term","utm_content"],D="utm_ttl",R={},j=[],k=null;function N(){v.setDataInLocalStorage(U(D),Date.now())}function U(e){return"roxot_analytics_".concat(e)}function B(e){return!x.adUnits.length||(0,u.includes)(x.adUnits,e)}function M(e){return e.adUnitCode.toLowerCase()}function V(e){return e.bidder.toLowerCase()}var q=Object.assign((0,s.default)({url:b,analyticsType:"endpoint"}),{track:function(e){var t,r,n,i=e.eventType,o=e.args;switch(i){case h:;R[(t=o).auctionId]={id:(r=t).auctionId,start:r.timestamp,timeout:r.timeout,adUnits:{}},function(){for(var e in R){var t=R[e];Date.now()-t.start>36e5&&delete R[e]}}();break;case A:!function(e){var t=R[e.auctionId];e.bids.forEach(function(e){var r,n,i,o=M(e),a=V(e);if(!!B(o)){t.adUnits[o]=t.adUnits[o]||(r=t,{adUnit:M(e),start:r.start,timeout:r.timeout,finish:0,status:O.RUNNING,bidders:{}});var s=t.adUnits[o];s.bidders[a]=s.bidders[a]||(n=t,{bidder:V(i=e),isAfterTimeout:n.status===O.FINISHED?1:0,start:i.startTime||Date.now(),finish:0,status:_.REQUESTED,cpm:-1,size:{width:0,height:0},mediaType:"-",source:i.source||"client"})}})}(o);break;case I:!function(e){var t=M(e),r=V(e);if(!!B(t)){var n=R[e.auctionId].adUnits[t];if(n.status===O.FINISHED){(function(e,t){var r,n,i=V(t),o=e.bidders[i];var s=(r=e,n=t,{auction:(0,a.deepClone)(r),adUnit:M(n),bidder:V(n),cpm:n.cpm,size:{width:n.width||0,height:n.height||0},mediaType:n.mediaType||"-",start:n.requestTimestamp,finish:n.responseTimestamp});s.cpm>o.cpm&&(o.cpm=s.cpm,o.isAfterTimeout=1,o.finish=s.finish,o.size=s.size,o.mediaType=s.mediaType,o.status=0===s.cpm?_.NO_BID:_.BID),L(C,"Bid After Timeout",s)})(n,e);return}var i=n.bidders[r];i.cpm<e.cpm&&(i.cpm=e.cpm,i.finish=e.responseTimestamp,i.status=0===e.cpm?_.NO_BID:_.BID,i.size.width=e.width||0,i.size.height=e.height||0,i.mediaType=e.mediaType||"-",i.source=e.source||"client")}}(o);break;case E:!function(e){var t=R[e.auctionId];e.bids.forEach(function(e){var r=M(e),n=V(e);if(!B(r))return;var i=t.adUnits[r];if(i.status===O.FINISHED)return;var o=i.bidders[n];if(o.status===_.REQUESTED)o.finish=Date.now(),o.status=_.NO_BID,o.cpm=0})}(o);break;case y:!function(e){var t=R[e.auctionId];!Object.keys(t.adUnits).length&&delete R[e.auctionId];var r=Date.now();for(var n in t.finish=r,t.adUnits){var i=t.adUnits[n];for(var o in i.finish=r,i.status=O.FINISHED,i.bidders){var a=i.bidders[o];if(a.status===_.REQUESTED)a.status=_.TIMEOUT}}L(T,"Auction",t)}(o);break;case S:!function(e){var t,r,n,i,o=M(e);if(!!B(o)){var s=(t=R[e.auctionId].adUnits[o],r=e,{isNew:(n=U("is_new_flag"),i=Number(v.getDataFromLocalStorage(n)),v.setDataInLocalStorage(n,Date.now()),Date.now()-i>36e5)?1:0,auction:(0,a.deepClone)(t),adUnit:M(r),bidder:V(r),cpm:r.cpm,size:{width:r.width,height:r.height},mediaType:r.mediaType,source:r.source||"client"});L(w,"Bid won",s)}}(o);break;default:;L(n=i,n,o)}}});function L(e,t,r){var n={eventType:e,eventName:t,data:r};j.push(n),z("Register event",n),void 0===x.serverConfig?G():F()}function F(){if(k&&(clearTimeout(k),k=null),void 0===x.serverConfig){G();return}for(;j.length;){var e=j.shift();if(0===Number(x.serverConfig[e.eventType]||0)){z("Skip event "+e.eventName,e);continue}(function(e,t,r){var n="https://"+x.server+"/"+e+"?publisherId="+x.publisherId+"&host="+x.host,i={event:e,eventName:t,options:x,data:r};m(n,function(){z(t+" sent",i)},JSON.stringify(i),{contentType:"text/plain",method:"POST",withCredentials:!0})})(e.eventType,e.eventName,e.data)}}function G(){if(!k)k=setTimeout(F,1e3)}q.originEnableAnalytics=q.enableAnalytics,q.enableAnalytics=function(e){this.initConfig(e)&&(z("Analytics adapter enabled",x),q.originEnableAnalytics(e))},q.buildUtmTagData=function(){var e={},t=!1;return P.forEach(function(r){var n=(0,a.getParameterByName)(r);""!==n&&(t=!0),e[r]=n}),P.forEach(function(r){if(t)v.setDataInLocalStorage(U(r),e[r]),N();else{var n;if(n=v.getDataFromLocalStorage(U(D)),!(Date.now()-n>36e5))e[r]=v.getDataFromLocalStorage(U(r))?v.getDataFromLocalStorage(U(r)):"",N()}}),e},q.initConfig=function(e){var t=!0;return(x={}).options=(0,a.deepClone)(e.options),x.publisherId=x.options.publisherId||x.options.publisherIds[0]||null,!x.publisherId&&(function(e){(0,a.logError)(W(e))}('"options.publisherId" is empty'),t=!1),x.adUnits=x.options.adUnits||[],x.adUnits=x.adUnits.map(function(e){return e.toLowerCase()}),x.server=x.options.server||b,x.configServer=x.options.configServer||x.options.server||"pa.rxthdr.com/v3",x.utmTagData=this.buildUtmTagData(),x.host=x.options.host||window.location.hostname,x.device=/ipad|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase())?"tablet":/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase())?"mobile":"desktop",function(){m("https://"+x.configServer+"/c?publisherId="+x.publisherId+"&host="+x.host,{success:function(e){x.serverConfig=JSON.parse(e)},error:function(){x.serverConfig={},x.serverConfig[T]=1,x.serverConfig[w]=1,x.serverConfig[C]=1,x.serverConfig.isError=1}},null,{contentType:"text/json",method:"GET",withCredentials:!0})}(),t},q.getOptions=function(){return x};function z(e,t){(0,a.logInfo)(W(e),t)}function W(e){return"Roxot Prebid Analytics: "+e}c.default.registerAnalyticsAdapter({adapter:q,code:g});(0,o.registerModule)("roxotAnalyticsAdapter")},6390:function(e,t,r){"use strict";var n,i=r(1640),o=i(r(4763)),a=i(r(4995)),s=i(r(9837)),d=r(9895),c=r(1235),u=r(5340),l=r(8705),p=r(1634),f=r(7448),g=r(2659),v=r(3408);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var h=["prebid-eu","prebid-us","prebid-asia"],y="https://fledge-ssp.creativecdn.com",A="https://fledge-ssp.creativecdn.com/component-seller-prebid.js",I=["USD"],E=[l.BANNER,l.NATIVE],S=[{name:"dsarequired",min:0,max:3},{name:"pubrender",min:0,max:2},{name:"datatopub",min:0,max:2}],O={NATIVE:{IMAGE_TYPE:{ICON:1,MAIN:3},ASSET_ID:{TITLE:1,IMAGE:2,ICON:3,BODY:4,SPONSORED:5,CTA:6},DATA_ASSET_TYPE:{SPONSORED:1,DESC:2,CTA_TEXT:12}}};(0,p.registerBidder)({code:"rtbhouse",supportedMediaTypes:E,gvlid:16,isBidRequestValid:function(e){return!!((0,f.includes)(h,e.params.region)&&e.params.publisherId)},buildRequests:function(e,t){e=(0,g.convertOrtbRequestToProprietaryNative)(e);var r,n={id:t.bidderRequestId,imp:e.map(function(e){return function(e,t){var r,n,i,o,a,s={id:e.bidId,banner:function(e){if("banner"===e.mediaType||(0,c.deepAccess)(e,"mediaTypes.banner")||!e.mediaType&&!e.mediaTypes){var t=e.sizes||e.mediaTypes.banner.sizes;return{w:t[0][0],h:t[0][1],format:t.map(function(e){return{w:e[0],h:e[1]}})}}}(e),native:function(e){if("native"===e.mediaType||(0,c.deepAccess)(e,"mediaTypes.native"))return{request:{assets:function(e){var t=e.nativeParams||(0,c.deepAccess)(e,"mediaTypes.native"),r=[];return t.title&&r.push({id:O.NATIVE.ASSET_ID.TITLE,required:t.title.required?1:0,title:{len:t.title.len||25}}),t.image&&r.push({id:O.NATIVE.ASSET_ID.IMAGE,required:t.image.required?1:0,img:_(t.image,O.NATIVE.IMAGE_TYPE.MAIN)}),t.icon&&r.push({id:O.NATIVE.ASSET_ID.ICON,required:t.icon.required?1:0,img:_(t.icon,O.NATIVE.IMAGE_TYPE.ICON)}),t.sponsoredBy&&r.push({id:O.NATIVE.ASSET_ID.SPONSORED,required:t.sponsoredBy.required?1:0,data:{type:O.NATIVE.DATA_ASSET_TYPE.SPONSORED,len:t.sponsoredBy.len}}),t.body&&r.push({id:O.NATIVE.ASSET_ID.BODY,required:t.body.request?1:0,data:{type:O.NATIVE.DATA_ASSET_TYPE.DESC,len:t.body.len}}),t.cta&&r.push({id:O.NATIVE.ASSET_ID.CTA,required:t.cta.required?1:0,data:{type:O.NATIVE.DATA_ASSET_TYPE.CTA_TEXT,len:t.cta.len}}),r}(e)},ver:"1.1"}}(e),tagid:e.adUnitCode.toString()};var d=(n=[],"function"==typeof(r=e).getFloor&&Object.keys(r.mediaTypes).forEach(function(e){(0,f.includes)(E,e)&&n.push(r.getFloor({currency:I[0],mediaType:e,size:r.sizes||"*"}).floor)}),n.length>0?Math.max.apply(Math,n):parseFloat(r.params.bidfloor));d&&(s.bidfloor=d),null!==(i=t.paapi)&&void 0!==i&&i.enabled?(s.ext=s.ext||{},s.ext.ae=null==e||null===(o=e.ortb2Imp)||void 0===o||null===(o=o.ext)||void 0===o?void 0:o.ae):null!==(a=s.ext)&&void 0!==a&&a.ae&&delete s.ext.ae;var u=(0,c.deepAccess)(e,"ortb2Imp.ext.tid");return u&&(s.ext=s.ext||{},s.ext.tid=u),s}(e,t)}),site:function(e,t){var r="unknown",n=null;e&&e.length>0&&(r=e[0].params.publisherId,n=e[0].params.channel&&e[0].params.channel.toString().slice(0,50));var i={publisher:{id:r.toString()},page:t.refererInfo.page,name:(0,u.getOrigin)()};return n&&(i.channel=n),i}(e,t),cur:I,test:e[0].params.test||0,source:function(e,t){return{tid:(null==t?void 0:t.auctionId)||""}}(e[0],t)};if(t&&t.gdprConsent&&t.gdprConsent.gdprApplies){var i=t.gdprConsent.consentString?t.gdprConsent.consentString.replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,""):"",o=t.gdprConsent.gdprApplies?1:0;n.regs={ext:{gdpr:o}},n.user={ext:{consent:i}}}if(e[0].schain){var a=function(e){return e?!function(e){if(!e.nodes)return!1;var t=["asi","sid","hp"];return e.nodes.every(function(e){return t.every(function(t){return e[t]})})}(e)?((0,c.logError)("RTB House: required schain params missing"),null):e:null}(e[0].schain);a&&(n.ext={schain:a})}if(e[0].userIdAsEids){var d={eids:e[0].userIdAsEids};n.user&&n.user.ext?n.user.ext=b(b({},n.user.ext),d):n.user={ext:d}}var l=(null==t?void 0:t.ortb2)||{};["site","user","device","bcat","badv"].forEach(function(e){var t=l[e];t&&(0,c.mergeDeep)(n,(0,s.default)({},e,t))});var p=(0,c.deepAccess)(l,"regs.ext.dsa");(function(e){return!(0,c.isEmpty)(e)&&!!(0,c.isPlainObject)(e)&&S.reduce(function(t,r){var n=e[r.name];return t&&(!e.hasOwnProperty(r.name)||(0,c.isNumber)(n)&&n>=r.min&&n<=r.max)},!0)&&(!e.hasOwnProperty("transparency")||(0,c.isArray)(e.transparency)&&e.transparency.every(function(e){return(0,c.isPlainObject)(e)&&(0,c.isStr)(e.domain)&&e.domain&&(0,c.isArray)(e.dsaparams)&&e.dsaparams.every(function(e){return(0,c.isNumber)(e)})}))})(p)&&(0,c.mergeDeep)(n,{regs:{ext:{dsa:p}}});var m="creativecdn.com/bidder/prebid/bids";if(null!==(r=t.paapi)&&void 0!==r&&r.enabled){var h=b({seller:y,decisionLogicUrl:A},v.config.getConfig("paapiConfig")||v.config.getConfig("fledgeConfig")||{sellerTimeout:500});(0,c.mergeDeep)(n,{ext:{fledge_config:h}}),m="creativecdn.com/bidder/prebidfledge/bids"}return{method:"POST",url:"https://"+e[0].params.region+"."+m,data:JSON.stringify(n)}},interpretOrtbResponse:function(e,t){var r=e.body;if(!(0,c.isArray)(r))return[];var n=[];return r.forEach(function(e){var t;if(!!e.price)t=0===e.adm.indexOf("{")?function(e){return{requestId:e.impid,mediaType:l.NATIVE,cpm:e.price,creativeId:e.adid,width:1,height:1,ttl:55,meta:{advertiserDomains:e.adomain},netRevenue:!0,currency:"USD",native:function(e){var t=JSON.parse(e).native,r={clickUrl:encodeURI(t.link.url),impressionTrackers:t.imptrackers};return t.assets.forEach(function(e){switch(e.id){case O.NATIVE.ASSET_ID.TITLE:r.title=e.title.text;break;case O.NATIVE.ASSET_ID.IMAGE:r.image={url:encodeURI(e.img.url),width:e.img.w,height:e.img.h};break;case O.NATIVE.ASSET_ID.ICON:r.icon={url:encodeURI(e.img.url),width:e.img.w,height:e.img.h};break;case O.NATIVE.ASSET_ID.BODY:r.body=e.data.value;break;case O.NATIVE.ASSET_ID.SPONSORED:r.sponsoredBy=e.data.value;break;case O.NATIVE.ASSET_ID.CTA:r.cta=e.data.value}}),r}(e.adm)}}(e):function(e){return{requestId:e.impid,mediaType:l.BANNER,cpm:e.price,creativeId:e.adid,ad:e.adm,width:e.w,height:e.h,ttl:55,meta:{advertiserDomains:e.adomain},netRevenue:!0,currency:"USD"}}(e),e.ext&&(t.ext=(0,c.deepClone)(e.ext),e.ext.dsa&&(t.meta=Object.assign({},t.meta,{dsa:e.ext.dsa}))),n.push(t)}),n},interpretResponse:function(e,t){var r=e.body,n=null;if(r.bidid&&(0,c.isArray)(null==r||null===(i=r.ext)||void 0===i?void 0:i.igbid)){s=this.interpretOrtbResponse({body:null===(d=r.seatbid[0])||void 0===d?void 0:d.bid},t);var i,s,d,u=v.config.getConfig("paapiConfig")||v.config.getConfig("fledgeConfig")||{},l=u.interestGroupBuyers||[],p=r.ext,f=p.decisionLogicUrl,g=void 0===f?u.decisionLogicUrl||u.decisionLogicURL||A:f,m=p.seller,h=void 0===m?u.seller||y:m,I=p.sellerTimeout,E={seller:h,decisionLogicUrl:g,decisionLogicURL:g,sellerTimeout:void 0===I?500:I};(0,c.mergeDeep)(E,u,E),r.ext.igbid.forEach(function(e){var t=b({},E.perBuyerSignals);e.igbuyer.forEach(function(e){t[e.igdomain]=e.buyersignal}),(n=n||{})[e.impid]=(0,c.mergeDeep)({},E,{interestGroupBuyers:(0,a.default)(new Set([].concat((0,a.default)(l),(0,a.default)(Object.keys(t))))),perBuyerSignals:t})})}else s=this.interpretOrtbResponse(e,t);return n?(n=Object.entries(n).map(function(e){var t=(0,o.default)(e,2);return{bidId:t[0],config:Object.assign({auctionSignals:{}},t[1])}}),(0,c.logInfo)("Response with FLEDGE:",{bids:s,fledgeAuctionConfigs:n}),{bids:s,paapi:n}):s}});function _(e,t){var r={type:t};if(e.aspect_ratios){var n=e.aspect_ratios[0],i=n.min_width||100;r.wmin=i,r.hmin=i/n.ratio_width*n.ratio_height}if(e.sizes){var o=Array.isArray(e.sizes[0])?e.sizes[0]:e.sizes;r.w=o[0],r.h=o[1]}return r}(0,d.registerModule)("rtbhouseBidAdapter")},7185:function(e,t,r){"use strict";var n,i,o,a,s=r(1640),d=r(7251),c=s(r(7251)),u=s(r(4763)),l=s(r(9837)),p=r(9895),f=r(3408),g=r(2885),v=r(1235),m=_(r(56)),b=r(2778),h=_(r(9293)),y=r(7448),A=r(647),I=r(5087),E=r(5723),S=r(2434);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function _(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=d(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&({}).hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var T=(0,r(492).activityParamsBuilder)(function(e){return h.default.resolveAlias(e)}),w=[],C=[],x=[];function P(e){return w.push(e),I.GDPR_GVLIDS.register(E.MODULE_TYPE_RTD,e.name,e.gvlid),function(){var t=w.indexOf(e);t>=0&&(w.splice(t,1),k())}}var D=(n=!1,function(){!n&&(Object.entries((0,l.default)((0,l.default)((0,l.default)((0,l.default)((0,l.default)({},b.EVENTS.AUCTION_INIT,["onAuctionInitEvent"]),b.EVENTS.AUCTION_END,["onAuctionEndEvent",U]),b.EVENTS.BID_RESPONSE,["onBidResponseEvent"]),b.EVENTS.BID_REQUESTED,["onBidRequestEvent"]),b.EVENTS.BID_ACCEPTED,["onBidAcceptedEvent"])).forEach(function(e){var t=(0,u.default)(e,2),r=t[0],n=(0,u.default)(t[1],2),i=n[0],o=n[1];m.on(r,function(e){o&&o(e),C.forEach(function(t){try{t[i]&&t[i](e,t.config,a)}catch(e){(0,v.logError)("RTD provider '".concat(t.name,"': error in '").concat(i,"':"),e)}})})}),n=!0)});function R(e){var t=e.getConfig("realTimeData",function(e){var r=e.realTimeData;if(!r.dataProviders){(0,v.logError)("missing parameters for real time module");return}t(),o=r,x=r.dataProviders,D(),(0,g.getHook)("startAuction").before(N,20),h.default.callDataDeletionRequest.before(M),k()})}function j(){return{gdpr:h.gdprDataHandler.getConsentData(),usp:h.uspDataHandler.getConsentData(),gpp:h.gppDataHandler.getConsentData(),coppa:!!f.config.getConfig("coppa")}}function k(){a=j();var e=[];x.forEach(function(t){var r=(0,y.find)(w,function(e){return e.name===t.name});r&&r.init&&r.init(t,a)&&e.push(Object.assign(r,{config:t}))}),C=e,(0,v.logInfo)("Real time data module enabled, using submodules: ".concat(C.map(function(e){return e.name}).join(", ")))}var N=(0,A.timedAuctionHook)("rtd",function(e,t){a=j();var r,n=[],i=[];C.forEach(function(e){if("function"==typeof e.getBidRequestData){n.push(e);var t=e.config;t&&t.waitForIt&&i.push(e)}});var s=i.length&&o.auctionDelay&&o.auctionDelay>0,d=i.length,c=!1,u=[];if(!n.length)return p();function l(){if(!c)this.config&&this.config.waitForIt&&d--,0===d&&setTimeout(p,0)}function p(){if(!c)c=!0,clearTimeout(r),u.forEach(function(e){return e()}),e.call(this,t)}r=setTimeout(p,s?o.auctionDelay:0),n.forEach(function(e){var r=(0,S.guardOrtb2Fragments)(t.ortb2Fragments||{},T(E.MODULE_TYPE_RTD,e.name));u.push(r.verify),t.ortb2Fragments=r.obj,e.getBidRequestData(t,l.bind(e),e.config,a)})});function U(e){var t=C.filter(function(e){return"function"==typeof e.getTargetingData});if(!t.length)return;var r=e.adUnitCodes;if(!!r){for(var n=[],i=t.length-1;i>=0;i--){var o=t[i].getTargetingData(r,t[i].config,a,e);o&&"object"===(0,c.default)(o)?n.push(o):(0,v.logWarn)("invalid getTargetingData response for sub module",t[i].name)}var s=B(n);return e.adUnits.forEach(function(e){var t=e.code&&s[e.code];if(!!t)(0,v.logInfo)("RTD set ad unit targeting of",t,"for",e),e[b.JSON_MAPPING.ADSERVER_TARGETING]=Object.assign(e[b.JSON_MAPPING.ADSERVER_TARGETING]||{},t)}),e.adUnits}}function B(e){return Array.isArray(e)&&e.length?e.reduce(function(e,t){for(var r in t)if(t.hasOwnProperty(r)){if(e.hasOwnProperty(r)){var n=t[r];for(var i in n)n.hasOwnProperty(i)&&(e[r][i]=n[i])}else e[r]=t[r]}return e},{}):{}}function M(e){C.forEach(function(e){if("function"==typeof e.onDataDeletionRequest)try{e.onDataDeletionRequest(e.config)}catch(t){(0,v.logError)("Error executing ".concat(e.name,".onDataDeletionRequest"),t)}});for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];e.apply(this,r)}(0,g.module)("realTimeData",P),R(f.config),(0,p.registerModule)("rtdModule")},3651:function(e,t,r){"use strict";var n,i=r(1640),o=r(7251),a=i(r(4995)),s=i(r(9837)),d=i(r(4763)),c=i(r(7251)),u=r(9895),l=r(8342),p=r(7701),f=r(1634),g=r(3408),v=r(8705),m=r(7448),b=r(4389),h=r(1235),y=r(8629),A=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var r=S(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(56)),I=r(2778),E=r(5699);function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(S=function(e){return e?r:t})(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var T=g.config.getConfig("rubicon")||{};g.config.getConfig("rubicon",function(e){(0,h.mergeDeep)(T,e.rubicon)});var w={1:"468x60",2:"728x90",5:"120x90",7:"125x125",8:"120x600",9:"160x600",10:"300x600",13:"200x200",14:"250x250",15:"300x250",16:"336x280",17:"240x400",19:"300x100",31:"980x120",32:"250x360",33:"180x500",35:"980x150",37:"468x400",38:"930x180",39:"750x100",40:"750x200",41:"750x300",42:"2x4",43:"320x50",44:"300x50",48:"300x300",53:"1024x768",54:"300x1050",55:"970x90",57:"970x250",58:"1000x90",59:"320x80",60:"320x150",61:"1000x1000",64:"580x500",65:"640x480",66:"930x600",67:"320x480",68:"1800x1000",72:"320x320",73:"320x160",78:"980x240",79:"980x300",80:"980x400",83:"480x300",85:"300x120",90:"548x150",94:"970x310",95:"970x100",96:"970x210",101:"480x320",102:"768x1024",103:"480x280",105:"250x800",108:"320x240",113:"1000x300",117:"320x100",125:"800x250",126:"200x600",144:"980x600",145:"980x150",152:"1000x250",156:"640x320",159:"320x250",179:"250x600",195:"600x300",198:"640x360",199:"640x200",213:"1030x590",214:"980x360",221:"1x1",229:"320x180",230:"2000x1400",232:"580x400",234:"6x6",251:"2x2",256:"480x820",257:"400x600",258:"500x200",259:"998x200",261:"480x480",264:"970x1000",265:"1920x1080",274:"1800x200",278:"320x500",282:"320x400",288:"640x380",484:"720x1280",524:"1x2",548:"500x1000",550:"980x480",552:"300x200",558:"640x640",562:"300x431",564:"320x431",566:"320x300",568:"300x150",570:"300x125",572:"250x350",574:"620x891",576:"610x877",578:"980x552",580:"505x656",622:"192x160",632:"1200x450",634:"340x450"};(0,h._each)(w,function(e,t){return w[e]=t});var C=(0,l.ortbConverter)({request:function(e,t,r,n){var i,o=n.bidRequests,s=e(t,r,n);s.cur=["USD"],s.test=g.config.getConfig("debug")?1:0,(0,h.deepSetValue)(s,"ext.prebid.cache",{vastxml:{returnCreative:!0===T.returnVast}}),(0,h.deepSetValue)(s,"ext.prebid.bidders",{rubicon:{integration:T.int_type||"pbjs"}}),(0,h.deepSetValue)(s,"ext.prebid.targeting.pricegranularity",B(g.config));var d=(0,u.getGlobal)().installedModules;return d&&(!d.length||-1!==d.indexOf("rubiconAnalyticsAdapter"))&&(0,h.deepSetValue)(s,"ext.prebid.analytics",{rubicon:{"client-analytics":!0}}),function(e,t,r){var n,i={},o=y.getAllOrtbKeywords.apply(void 0,[r].concat((0,a.default)(t.map(function(e){return e.params.keywords}))));t.forEach(function(t){var r,n={user:{ext:{data:_({},t.params.visitor)}},site:{ext:{data:_({},t.params.inventory)}}},o=e.imp.find(function(e){var t;return null===(t=e.ext)||void 0===t||null===(t=t.prebid)||void 0===t||null===(t=t.bidder)||void 0===t||null===(t=t.rubicon)||void 0===t||null===(t=t.video)||void 0===t?void 0:t.language});o&&(n.site.content={language:null===(r=o.ext)||void 0===r||null===(r=r.prebid)||void 0===r||null===(r=r.bidder)||void 0===r||null===(r=r.rubicon)||void 0===r||null===(r=r.video)||void 0===r?void 0:r.language}),i=(0,h.mergeDeep)(i,t.ortb2||{},n);var a=g.config.getConfig("user.id");i.user.id=i.user.id||a}),(0,h.mergeDeep)(e,i),o&&o.length&&(0,h.deepSetValue)(e,"site.keywords",o.join(",")),null==e||null===(n=e.ext)||void 0===n||null===(n=n.prebid)||void 0===n||delete n.storedrequest}(s,o,r.ortb2),null==s||null===(i=s.ext)||void 0===i||null===(i=i.prebid)||void 0===i||delete i.storedrequest,!0===T.disableFloors&&delete s.ext.prebid.floors,o.filter(function(e){return"object"===(0,c.default)(e.floorData)}).length>0&&(s.ext.prebid.floors={enabled:!1}),s},imp:function(e,t,r){var n,i=N(t);if(!i.includes(v.BANNER)||1!=i.length){var o=e(t,r);return o.id=t.adUnitCode,delete o.banner,"atf"===t.params.position&&o.video&&(o.video.pos=1),"btf"===t.params.position&&o.video&&(o.video.pos=3),null===(n=o.ext)||void 0===n||null===(n=n.prebid)||void 0===n||delete n.storedrequest,!0===t.params.bidonmultiformat&&i.length>1&&(0,h.deepSetValue)(o,"ext.prebid.bidder.rubicon.formats",i),function(e,t){if("USD"!=t.bidfloorcur&&(delete t.bidfloor,delete t.bidfloorcur),!t.bidfloor){var r=parseFloat((0,h.deepAccess)(e,"params.floor"));!isNaN(r)&&(t.bidfloor=r,t.bidfloorcur="USD")}}(t,o),o}},bidResponse:function(e,t,r){var n,i=e(t,r);i.meta.mediaType=(0,h.deepAccess)(t,"ext.prebid.type");var o=r.bidRequest,a=(null===(n=o.mediaTypes.video)||void 0===n?void 0:n.context)==="outstream"?D(o,v.VIDEO):[void 0,void 0],s=(0,d.default)(a,2),c=s[0],u=s[1];return i.width=t.w||c||i.playerWidth||0,i.height=t.h||u||i.playerHeight||0,i.mediaType===v.VIDEO&&"outstream"===o.mediaTypes.video.context&&(i.renderer=function(e){var t=b.Renderer.install({id:e.adId,url:T.rendererUrl||"https://video-outstream.rubiconproject.com/apex-2.2.1.js",config:T.rendererConfig||{},loaded:!1,adUnitCode:e.adUnitCode});try{t.setRender(P)}catch(e){(0,h.logWarn)("Prebid Error calling setRender on renderer",e)}return t}(i)),(0,h.deepAccess)(t,"ext.bidder.rp.advid")&&(0,h.deepSetValue)(i,"meta.advertiserId",t.ext.bidder.rp.advid),i},context:{netRevenue:!1!==T.netRevenue,ttl:360},processors:p.pbsExtensions}),x={code:"rubicon",gvlid:52,supportedMediaTypes:[v.BANNER,v.VIDEO,v.NATIVE],isBidRequestValid:function(e){var t=!0;if("object"!==(0,c.default)(e.params))return!1;for(var r=0,n=["accountId","siteId","zoneId"];r<n.length;r++)if(e.params[n[r]]=parseInt(e.params[n[r]]),isNaN(e.params[n[r]]))return(0,h.logError)("Rubicon: wrong format of accountId or siteId or zoneId."),!1;var i=N(e,!0);if(!i.length)return!1;i.includes(v.VIDEO)&&(t=M(e));var o=[v.BANNER,v.NATIVE].filter(function(e){return i.includes(e)}).length>0;return o?t&&o:t},buildRequests:function(e,t){var r,n=[],i=[];if((r=e.filter(function(e){var t=N(e)||[],r=t.length,n=e.params||{},i=n.bidonmultiformat,o=n.video;return 1===r&&(t.includes(v.VIDEO)||t.includes(v.NATIVE))||2===r&&!t.includes(v.BANNER)||o&&t.includes(v.VIDEO)||i&&(t.includes(v.VIDEO)||t.includes(v.NATIVE))}))&&r.length){var o=C.toORTB({bidRequests:r,bidderRequest:t});i.push({method:"POST",url:"https://".concat(T.videoHost||"prebid-server",".rubiconproject.com/openrtb2/auction"),data:o,bidRequest:r})}var a=e.filter(function(e){var t=N(e)||[],r=e.params||{},n=r.bidonmultiformat,i=r.video;return t.includes(v.BANNER)&&(1===t.length||n||!n&&!i||!n&&i&&!t.includes(v.VIDEO))});if(!0!==T.singleRequest)n=i.concat(a.map(function(e){var r=x.createSlotParams(e,t);return{method:"GET",url:"https://".concat(T.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:x.getOrderedParams(r).reduce(function(e,t){var n=r[t];return(0,h.isStr)(n)&&""!==n||(0,h.isNumber)(n)?"".concat(e).concat(q(t,n),"&"):e},"")+"slots=1&rand=".concat(Math.random()),bidRequest:e}}));else{var s=a.reduce(function(e,t){return(e[t.params.siteId]=e[t.params.siteId]||[]).push(t),e},{});n=i.concat(Object.keys(s).reduce(function(e,r){return(function(e,t){return e.map(function(r,n){return n%t==0?e.slice(n,n+t):null}).filter(function(e){return e})})(s[r],10).forEach(function(r){var n=x.combineSlotUrlParams(r.map(function(e){return x.createSlotParams(e,t)}));e.push({method:"GET",url:"https://".concat(T.bannerHost||"fastlane",".rubiconproject.com/a/api/fastlane.json"),data:x.getOrderedParams(n).reduce(function(e,t){var r=n[t];return(0,h.isStr)(r)&&""!==r||(0,h.isNumber)(r)?"".concat(e).concat(q(t,r),"&"):e},"")+"slots=".concat(r.length,"&rand=").concat(Math.random()),bidRequest:r})}),e},[]))}return n},getOrderedParams:function(e){var t=/^tg_v/,r=/^tg_i/,n=/^eid_|^tpid_/,i=["account_id","site_id","zone_id","size_id","alt_size_ids","p_pos","gdpr","gdpr_consent","us_privacy","gpp","gpp_sid","rp_schain"].concat(Object.keys(e).filter(function(e){return n.test(e)})).concat(["x_liverampidl","ppuid","rf","p_geo.latitude","p_geo.longitude","kw"]).concat(Object.keys(e).filter(function(e){return t.test(e)})).concat(Object.keys(e).filter(function(e){return r.test(e)})).concat(["tk_flint","x_source.tid","l_pb_bid_id","p_screen_res","o_ae","o_cdep","rp_floor","rp_secure","tk_user_key"]);return i.concat(Object.keys(e).filter(function(e){return -1===i.indexOf(e)}))},combineSlotUrlParams:function(e){if(1===e.length)return e[0];var t=e.reduce(function(t,r,n){return Object.keys(r).forEach(function(i){!t.hasOwnProperty(i)&&(t[i]=Array(e.length)),t[i].splice(n,1,r[i])}),t},{}),r=RegExp("^([^;]*)(;\\1)+$");return Object.keys(t).forEach(function(e){var n=t[e].join(";"),i=n.match(r);t[e]=i?i[1]:n}),t},createSlotParams:function(e,t){e.startTime=new Date().getTime();var r,n,i,o,a,s,u,l=e.params,p=D(e,"banner"),f=l.latLong||[],b=(0,d.default)(f,2),y=b[0],A=b[1],I={account_id:l.accountId,site_id:l.siteId,zone_id:l.zoneId,size_id:p[0],alt_size_ids:p.slice(1).join(",")||void 0,rp_floor:(l.floor=parseFloat(l.floor))>=.01?l.floor:void 0,rp_secure:"1",tk_flint:"".concat(T.int_type||"pbjs_lite","_v9.17.0"),"x_source.tid":null===(r=t.ortb2)||void 0===r||null===(r=r.source)||void 0===r?void 0:r.tid,"x_imp.ext.tid":null===(n=e.ortb2Imp)||void 0===n||null===(n=n.ext)||void 0===n?void 0:n.tid,l_pb_bid_id:e.bidId,o_cdep:null===(i=e.ortb2)||void 0===i||null===(i=i.device)||void 0===i||null===(i=i.ext)||void 0===i?void 0:i.cdep,p_screen_res:function(){return[window.screen.width,window.screen.height].join("x")}(),tk_user_key:l.userId,"p_geo.latitude":isNaN(parseFloat(y))?void 0:parseFloat(y).toFixed(4),"p_geo.longitude":isNaN(parseFloat(A))?void 0:parseFloat(A).toFixed(4),"tg_fl.eid":e.code,rf:function(e,t){var r;return r=e.params.referrer?e.params.referrer:t.refererInfo.page,e.params.secure?r.replace(/^http:/i,"https:"):r}(e,t)};if("function"==typeof e.getFloor&&!T.disableFloors){try{s=e.getFloor({currency:"USD",mediaType:"banner",size:"*"})}catch(e){(0,h.logError)("Rubicon: getFloor threw an error: ",e)}I.rp_hard_floor="object"!==(0,c.default)(s)||"USD"!==s.currency||isNaN(parseInt(s.floor))?void 0:s.floor}!0===l.bidonmultiformat&&(0,h.deepAccess)(e,"mediaTypes")&&Object.keys(e.mediaTypes).length>1&&(I.p_formats=Object.keys(e.mediaTypes).join(","));var E={1:"atf",3:"btf"}[(0,h.deepAccess)(e,"mediaTypes.banner.pos")]||"";I.p_pos="atf"===l.position||"btf"===l.position?l.position:E;var S=g.config.getConfig("user.id");return S&&(I.ppuid=S),null!=e&&null!==(o=e.ortb2Imp)&&void 0!==o&&null!==(o=o.ext)&&void 0!==o&&o.ae&&(I.o_ae=1),function(e,t){if(!1!==T.readTopics){var r,n,i,o,a=[1,2,5,6,7,507].concat((null===(r=T.sendSiteSegtax)||void 0===r?void 0:r.map(function(e){return Number(e)}))||[]),s=[4,508].concat((null===(n=T.sendUserSegtax)||void 0===n?void 0:n.map(function(e){return Number(e)}))||[]),d=(null===(i=e.ortb2)||void 0===i||null===(i=i.user)||void 0===i?void 0:i.data)||[],c=(null===(o=e.ortb2)||void 0===o||null===(o=o.site)||void 0===o||null===(o=o.content)||void 0===o?void 0:o.data)||[];d.forEach(R(t,"v",s)),c.forEach(R(t,"i",a))}}(t,I),e.userIdAsEids&&e.userIdAsEids.forEach(function(e){try{if("adserver.org"===e.source)I.tpid_tdid=e.uids[0].id,I["eid_adserver.org"]=e.uids[0].id;else if("liveintent.com"===e.source)I["tpid_liveintent.com"]=e.uids[0].id,I["eid_liveintent.com"]=e.uids[0].id,e.ext&&Array.isArray(e.ext.segments)&&e.ext.segments.length&&(I["tg_v.LIseg"]=e.ext.segments.join(","));else if("liveramp.com"===e.source)I.x_liverampidl=e.uids[0].id;else if("id5-sync.com"===e.source)I["eid_id5-sync.com"]="".concat(e.uids[0].id,"^").concat(e.uids[0].atype,"^").concat(e.uids[0].ext&&e.uids[0].ext.linkType||"");else{var t="rubiconproject.com"===e.source?e.uids[0].id:"".concat(e.uids[0].id,"^").concat(e.uids[0].atype||"");I["eid_".concat(e.source)]=t}if(!I.ppuid){var r=(0,m.find)(e.uids,function(e){return e.ext&&"ppuid"===e.ext.stype});r&&r.id&&(I.ppuid=r.id)}}catch(t){(0,h.logWarn)("Rubicon: error reading eid:",e,t)}}),t.gdprConsent&&("boolean"==typeof t.gdprConsent.gdprApplies&&(I.gdpr=Number(t.gdprConsent.gdprApplies)),I.gdpr_consent=t.gdprConsent.consentString),t.uspConsent&&(I.us_privacy=encodeURIComponent(t.uspConsent)),null!==(a=t.gppConsent)&&void 0!==a&&a.gppString&&(I.gpp=t.gppConsent.gppString,I.gpp_sid=null===(u=t.gppConsent)||void 0===u||null===(u=u.applicableSections)||void 0===u?void 0:u.toString()),I.rp_maxbids=t.bidLimit||1,function(e,t,r){var n={user:{ext:{data:_({},e.params.visitor)}},site:{ext:{data:_({},e.params.inventory)}}};e.params.keywords&&(n.site.keywords=(0,h.isArray)(e.params.keywords)?e.params.keywords.join(","):e.params.keywords);var i=(0,h.mergeDeep)({},e.ortb2||{},n),o=(0,h.deepAccess)(e.ortb2Imp,"ext")||{},a=(0,h.deepAccess)(e.ortb2Imp,"ext.data")||{},s=(0,h.deepAccess)(e,"ortb2Imp.ext.gpid"),u=(0,h.deepAccess)(i,"regs.ext.dsa"),l={user:[4],site:[1,2,5,6]},p={user:"tg_v.",site:"tg_i.",adserver:"tg_i.dfp_ad_unit_code",pbadslot:"tg_i.pbadslot",keywords:"kw"},f=function(e,t,r){if("data"===t&&Array.isArray(e))return e.filter(function(e){return e.segment&&(0,h.deepAccess)(e,"ext.segtax")&&l[r]&&-1!==l[r].indexOf((0,h.deepAccess)(e,"ext.segtax"))}).map(function(e){var t=e.segment.filter(function(e){return e.id}).reduce(function(e,t){return e.push(t.id),e},[]);if(t.length>0)return t.toString()}).toString();if("object"!==(0,c.default)(e)||!!Array.isArray(e)){if(void 0!==e)return Array.isArray(e)?e.filter(function(e){if("object"!==(0,c.default)(e)&&void 0!==e)return e.toString();(0,h.logWarn)("Rubicon: Filtered value: ",e,"for key",t,": Expected value to be string, integer, or an array of strings/ints")}).toString():e.toString()}},g=function(e,t,n){var i=!(arguments.length>3)||void 0===arguments[3]||arguments[3],o=f(e,n,t),a=p[n]&&i?"".concat(p[n]):"data"===n?"".concat(p[t],"iab"):"".concat(p[t]).concat(n);r[a]=r[a]?r[a].concat(",",o):o};if(t===v.BANNER){["site","user"].forEach(function(e){Object.keys(i[e]).forEach(function(t){"site"===e&&"content"===t&&i[e][t].data?g(i[e][t].data,e,"data"):"ext"!==t?g(i[e][t],e,t):i[e][t].data&&Object.keys(i[e].ext.data).forEach(function(t){g(i[e].ext.data[t],e,t,!1)})})}),Object.keys(a).forEach(function(e){"adserver"!==e?g(a[e],"site",e):"gam"===a[e].name&&g(a[e].adslot,name,e)}),s&&(r.p_gpid=s),u&&Object.keys(u).length&&(0,h.pick)(u,["dsainfo",function(e){return r.dsainfo=e},"dsarequired",function(e){return r.dsarequired=e},"pubrender",function(e){return r.dsapubrender=e},"datatopub",function(e){return r.dsadatatopubs=e},"transparency",function(e){Array.isArray(e)&&e.length&&(r.dsatransparency=e.reduce(function(e,t){var r=t.domain||"";if(!r)return e;var n=t.dsaparams||t.params;return Array.isArray(n)&&0!==n.length?(e&&(e+="~~"),e+"".concat(r,"~").concat(n.join("_"))):e},""))}]),r["tg_i.pbadslot"]&&delete r["tg_i.dfp_ad_unit_code"];var m=(0,h.deepAccess)(i,"device.sua");m&&!1!==T.chEnabled&&(0,h.pick)(m,["architecture",function(e){return r.m_ch_arch=e},"bitness",function(e){return r.m_ch_bitness=e},"browsers",function(e){if(Array.isArray(e)){var t,n,i=e.reduce(function(e,t){var r,n,i;return e[0].push('"'.concat(null==t?void 0:t.brand,'"|v="').concat(null==t||null===(r=t.version)||void 0===r?void 0:r[0],'"')),e[1].push('"'.concat(null==t?void 0:t.brand,'"|v="').concat(null==t||null===(n=t.version)||void 0===n||null===(i=n.join)||void 0===i?void 0:i.call(n,"."),'"')),e},[[],[]]),o=(0,d.default)(i,2),a=o[0],s=o[1];r.m_ch_ua=null==a||null===(t=a.join)||void 0===t?void 0:t.call(a,","),r.m_ch_full_ver=null==s||null===(n=s.join)||void 0===n?void 0:n.call(s,",")}},"mobile",function(e){return r.m_ch_mobile="?".concat(e)},"model",function(e){return r.m_ch_model=e},"platform",function(e){var t,n;r.m_ch_platform=null==e?void 0:e.brand,r.m_ch_platform_ver=null==e||null===(t=e.version)||void 0===t||null===(n=t.join)||void 0===n?void 0:n.call(t,".")}])}else Object.keys(o).length&&(0,h.mergeDeep)(r.imp[0].ext,o),s&&(r.imp[0].ext.gpid=s),(0,h.mergeDeep)(r,i)}(e,v.BANNER,I),!0===g.config.getConfig("coppa")&&(I.coppa=1),e.schain&&V(e.schain)&&(I.rp_schain=x.serializeSupplyChain(e.schain)),I},serializeSupplyChain:function(e){if(!V(e))return"";var t=e.ver,r=e.complete,n=e.nodes;return"".concat(t,",").concat(r,"!").concat(x.serializeSupplyChainNodes(n))},serializeSupplyChainNodes:function(e){var t=["asi","sid","hp","rid","name","domain"];return e.map(function(e){return t.map(function(t){return encodeURIComponent(e[t]||"")}).join(",")}).join("!")},interpretResponse:function(e,t){e=e.body;var r=t.data;if(!e||"object"!==(0,c.default)(e))return[];if(e.seatbid){var n=(0,h.deepAccess)(e,"ext.errors.rubicon");return Array.isArray(n)&&n.length>0&&(0,h.logWarn)("Rubicon: Error in video response"),C.fromORTB({request:r,response:e}).bids}var i=e.ads,o=0,a=t.bidRequest,s=t.url;if(null!=s&&s.includes("fastlane")){var u,l,p,f=(null===(p=e)||void 0===p?void 0:p.error_code)||(0,h.deepAccess)(i,"0.error_code"),g=null==a?void 0:a.adUnitCode;f&&g&&A.emit(I.EVENTS.RUBICON_BID_ERROR,{errorCode:f,adUnitCode:g})}if("object"===(0,c.default)(a)&&!Array.isArray(a)&&N(a).includes(v.VIDEO)&&"object"===(0,c.default)(i)&&(i=i[a.adUnitCode]),!Array.isArray(i)||i.length<1)return[];var m=i.reduce(function(t,r,n){if(r.impression_id&&l===r.impression_id?o++:l=r.impression_id,"ok"!==r.status)return t;var i=Array.isArray(a)?a[n-o]:a;if(i&&"object"===(0,c.default)(i)){var s={requestId:i.bidId,currency:"USD",creativeId:r.creative_id||"".concat(r.network||"","-").concat(r.advertiser||""),cpm:r.cpm||0,dealId:r.deal,ttl:360,netRevenue:!1!==T.netRevenue,rubicon:{advertiserId:r.advertiser,networkId:r.network},meta:{advertiserId:r.advertiser,networkId:r.network,mediaType:v.BANNER}};if(r.creative_type&&(s.mediaType=r.creative_type),r.dsa&&Object.keys(r.dsa).length&&(s.meta.dsa=r.dsa),r.adomain&&(s.meta.advertiserDomains=Array.isArray(r.adomain)?r.adomain:[r.adomain]),r.creative_type===v.VIDEO)s.width=i.params.video.playerWidth,s.height=i.params.video.playerHeight,s.vastUrl=r.creative_depot_url,s.impression_id=r.impression_id,s.videoCacheKey=r.impression_id;else{s.ad=function(e,t){return"<html>\n<head><script type='text/javascript'>inDapIF=true;<\/script></head>\n<body style='margin : 0; padding: 0;'>\n\x3c!-- Rubicon Project Ad Tag --\x3e\n<div data-rp-impression-id='".concat(t,"'>\n<script type='text/javascript'>").concat(e,"<\/script>\n</div>\n</body>\n</html>")}(r.script,r.impression_id);var u=w[r.size_id].split("x").map(function(e){return Number(e)}),p=(0,d.default)(u,2);s.width=p[0],s.height=p[1]}s.rubiconTargeting=(Array.isArray(r.targeting)?r.targeting:[]).reduce(function(e,t){return e[t.key]=t.values[0],e},{rpfl_elemid:i.adUnitCode}),t.push(s)}else(0,h.logError)("Rubicon: bidRequest undefined at index position:".concat(n),a,e);return t},[]).sort(function(e,t){return(t.cpm||0)-(e.cpm||0)}),b=null===(u=e.component_auction_config)||void 0===u?void 0:u.map(function(e){return{config:e,bidId:e.bidId}});return b?{bids:m,paapi:b}:m},getUserSyncs:function(e,t,r,n,i){if(!L&&e.iframeEnabled){var o=(0,E.getUserSyncParams)(r,n,i);return o=Object.keys(o).length?"?".concat((0,h.formatQS)(o)):"",L=!0,{type:"iframe",url:"https://".concat(T.syncHost||"eus",".rubiconproject.com/usync.html")+o}}}};function P(e){var t,r,n,i=document.getElementById(e.adUnitCode);(t=i.querySelector("div[id^='google_ads']"))&&t.style.setProperty("display","none"),(n=(r=i.querySelector("script[id^='sas_script']"))&&r.nextSibling)&&"iframe"===n.localName&&n.style.setProperty("display","none");var o=_(_({},{align:"center",position:"append",closeButton:!1,label:void 0,collapse:!0}),e.renderer.getConfig());e.renderer.push(function(){window.MagniteApex.renderAd({width:e.width,height:e.height,vastUrl:e.vastUrl,placement:{attachTo:i,align:o.align,position:o.position},closeButton:o.closeButton,label:o.label,collapse:o.collapse})})}function D(e,t){var r=e.params;if(t===v.VIDEO){var n=[];return r.video&&r.video.playerWidth&&r.video.playerHeight?n=[r.video.playerWidth,r.video.playerHeight]:Array.isArray((0,h.deepAccess)(e,"mediaTypes.video.playerSize"))&&1===e.mediaTypes.video.playerSize.length?n=e.mediaTypes.video.playerSize[0]:Array.isArray(e.sizes)&&e.sizes.length>0&&Array.isArray(e.sizes[0])&&e.sizes[0].length>1&&(n=e.sizes[0]),n}var i=[];return Array.isArray(r.sizes)?i=r.sizes:void 0!==(0,h.deepAccess)(e,"mediaTypes.banner.sizes")?i=j(e.mediaTypes.banner.sizes):Array.isArray(e.sizes)&&e.sizes.length>0?i=j(e.sizes):(0,h.logWarn)("Rubicon: no sizes are setup or found"),U(i)}function R(e,t,r){return function(n){var i,o,a=Number(null===(i=n.ext)||void 0===i?void 0:i.segtax);r.includes(a)&&(e["tg_".concat(t,".tax").concat(a)]=null===(o=n.segment)||void 0===o?void 0:o.map(function(e){return e.id}).join(","))}}function j(e){return(0,h.parseSizesInput)(e).reduce(function(e,t){var r=parseInt(w[t],10);return r&&e.push(r),e},[])}function k(e){var t=void 0!==(0,h.deepAccess)(e,"mediaTypes.".concat(v.VIDEO)),r=void 0!==(0,h.deepAccess)(e,"mediaTypes.".concat(v.BANNER)),n=void 0!==(0,h.deepAccess)(e,"params.bidonmultiformat"),i="object"!==(0,c.default)((0,h.deepAccess)(e,"params.video"));return!!t&&!!n||(r&&i&&(t=!1),t&&i&&(0,h.deepSetValue)(e,"params.video",{}),t)}function N(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[];if(k(e)){if(-1===["outstream","instream"].indexOf((0,h.deepAccess)(e,"mediaTypes.".concat(v.VIDEO,".context"))))return t&&(0,h.logError)("Rubicon: mediaTypes.video.context must be outstream or instream"),r;if(D(e,v.VIDEO).length<2)return t&&(0,h.logError)("Rubicon: could not determine the playerSize of the video"),r;t&&(0,h.logMessage)("Rubicon: making video request for adUnit",e.adUnitCode),r.push(v.VIDEO)}if(void 0!==(0,h.deepAccess)(e,"mediaTypes.".concat(v.NATIVE))&&r.push(v.NATIVE),void 0!==(0,h.deepAccess)(e,"mediaTypes.".concat(v.BANNER))){if(0===D(e,v.BANNER).length)return t&&(0,h.logError)("Rubicon: could not determine the sizes for banner request"),r;t&&(0,h.logMessage)("Rubicon: making banner request for adUnit",e.adUnitCode),r.push(v.BANNER)}return r}function U(e){var t=[15,2,9];return e.sort(function(e,r){var n=t.indexOf(e),i=t.indexOf(r);if(n>-1||i>-1)return -1===n?1:-1===i?-1:n-i;return e-r})}function B(e){return{ranges:({low:[{max:5,increment:.5}],medium:[{max:20,increment:.1}],high:[{max:20,increment:.01}],auto:[{max:5,increment:.05},{min:5,max:10,increment:.1},{min:10,max:20,increment:.5}],dense:[{max:3,increment:.01},{min:3,max:8,increment:.05},{min:8,max:20,increment:.5}],custom:e.getConfig("customPriceBucket")&&e.getConfig("customPriceBucket").buckets})[e.getConfig("priceGranularity")]}}function M(e){var t=!0,r=Object.prototype.toString.call([]),n={mimes:r,protocols:r,linearity:Object.prototype.toString.call(0)};return Object.keys(n).forEach(function(r){Object.prototype.toString.call((0,h.deepAccess)(e,"mediaTypes.video."+r))!==n[r]&&(t=!1,(0,h.logError)("Rubicon: mediaTypes.video."+r+" is required and must be of type: "+n[r]))}),t}function V(e){var t=!1,r=["asi","sid","hp"];return e.nodes?(!(t=e.nodes.reduce(function(e,t){return e?r.every(function(e){return t.hasOwnProperty(e)}):e},!0))&&(0,h.logError)("Rubicon: required schain params missing"),t):t}function q(e,t){return"rp_schain"===e?"rp_schain=".concat(t):"".concat(e,"=").concat(encodeURIComponent(t))}var L=!1;(0,f.registerBidder)(x),(0,u.registerModule)("rubiconBidAdapter")},9073:function(e,t,r){"use strict";var n,i=r(1640),o=r(9895),a=r(3408),s=i(r(9293)),d=r(1235),c=r(7319),u="Invalid schain object found: ",l={STRICT:"strict",RELAXED:"relaxed",OFF:"off"},p=[];function f(e,t){return!0}function g(e){return void 0!==e&&(!!(0,d.isPlainObject)(e)||((0,d.logError)(u+"the following schain config will not be used as schain is not an object.",e),!1))}(0,d._each)(l,function(e){return p.push(e)});function v(e,t){var r=a.config.getConfig("schain"),n=a.config.getBidderConfig();t.forEach(function(e){var t,i=e.bidderCode;var o=n[t=i]&&n[t].schain||r;e.bids.forEach(function(e){var t=function(e,t){var r,n,i=l.STRICT;if(g(e)){;if((0,d.isStr)(e.validation)&&-1!=p.indexOf(e.validation)&&(i=e.validation),i===l.OFF)return e.config;r=e.config,n=l.STRICT;return e.config}return null}(o,i);t&&(e.schain=(0,d.deepClone)(t))})}),e(t)}function m(){s.default.makeBidRequests.after(v)}function b(e,t,r){if(!(0,d.deepAccess)(e,"source.ext.schain")){var n=(0,d.deepAccess)(r,"bidRequests.0.schain");n&&(0,d.deepSetValue)(e,"source.ext.schain",n)}}m(),(0,c.registerOrtbProcessor)({type:c.REQUEST,name:"sourceExtSchain",fn:b}),(0,o.registerModule)("schain")},614:function(e,t,r){"use strict";var n,i=r(1640),o=i(r(7251)),a=r(9895),s=r(1235),d=r(2885),c=r(9293),u=r(4288),l=r(5087),p=r(5723),f=r(6198),g=(0,u.getStorageManager)({moduleType:p.MODULE_TYPE_UID,moduleName:"sharedId"}),v="cookie",m="html5",b="_pubcid_optout",h="PublisherCommonId";function y(e,t){if(t===v)return g.getCookie(e);if(t===m&&g.hasLocalStorage()){var r=g.getDataFromLocalStorage("".concat(e,"_exp"));if(!r)return g.getDataFromLocalStorage(e);if(new Date(r).getTime()-Date.now()>0)return g.getDataFromLocalStorage(e)}}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2?arguments[2]:void 0;if(!!e){var n=(0,s.parseUrl)(e);n.search.id=encodeURIComponent("pubcid:"+t);var i=(0,s.buildUrl)(n);return function(){(0,s.triggerPixel)(i,r)}}}function I(){return!!(g.cookiesAreEnabled()&&y(b,v)||g.hasLocalStorage()&&y(b,m))}var E={name:"sharedId",aliasName:"pubCommonId",gvlid:l.VENDORLESS_GVLID,decode:function(e,t){if(I()){(0,s.logInfo)("PubCommonId decode: Has opted-out");return}return(0,s.logInfo)(" Decoded value PubCommonId "+e),{pubcid:e}},getId:function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments.length>1&&arguments[1];var n=arguments.length>2?arguments[2]:void 0;if(I()){(0,s.logInfo)("PubCommonId: Has opted-out");return}if(c.coppaDataHandler.getCoppa()){(0,s.logInfo)("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId");return}var i=r.params,a=void 0===i?{}:i,d=a.create,u=a.pixelUrl,l=n;if(!l){try{"object"===(0,o.default)(window[h])&&(l=window[h].getId())}catch(e){}!l&&(l=(void 0===d||d)&&(0,s.hasDeviceAccess)()?(0,s.generateUUID)():void 0)}return{id:l,callback:(e=l,t=u,function(r,n){t?A(t,e,function(){r(n()||e)})():r(e)})}},extendId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};arguments.length>1&&arguments[1];var t=arguments.length>2?arguments[2]:void 0;if(I())return(0,s.logInfo)("PubCommonId: Has opted-out"),{id:void 0};if(c.coppaDataHandler.getCoppa()){(0,s.logInfo)("PubCommonId: IDs not provided for coppa requests, exiting PubCommonId");return}var r=e.params,n=void 0===r?{}:r,i=n.extend,o=n.pixelUrl;if(void 0!==i&&i)return o?{callback:A(o,t)}:{id:t}},domainOverride:(0,f.domainOverrideToRootDomain)(g,"sharedId"),eids:{pubcid:{source:"pubcid.org",atype:1}}};(0,d.submodule)("userId",E),(0,a.registerModule)("sharedIdSystem")},8829:function(e,t,r){"use strict";var n,i=r(1640),o=i(r(7251)),a=i(r(4763)),s=i(r(9837)),d=r(9895),c=r(1634),u=r(3408),l=r(8705),p=r(1235);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var v="https://btlr.sharethrough.com/universal/v1?supply_id=".concat("WYu2BXv1"),m={getProtocol:function(){return window.location.protocol}},b={code:"sharethrough",supportedMediaTypes:[l.VIDEO,l.BANNER],gvlid:80,isBidRequestValid:function(e){return!!e.params.pkey},buildRequests:function(e,t){var r,n,i,s,d,c,l=t.timeout,f=t.ortb2||{},b=0>m.getProtocol().indexOf("http")||m.getProtocol().indexOf("https")>-1,h={id:(0,p.generateUUID)(),at:1,cur:["USD"],tmax:l,site:g({domain:(0,p.deepAccess)(t,"refererInfo.domain",window.location.hostname),page:(0,p.deepAccess)(t,"refererInfo.page",window.location.href),ref:(0,p.deepAccess)(t,"refererInfo.ref")},f.site),device:{ua:navigator.userAgent,language:navigator.language,js:1,dnt:"1"===navigator.doNotTrack?1:0,h:window.screen.height,w:window.screen.width,ext:{}},regs:{coppa:!0===u.config.getConfig("coppa")?1:0,ext:{}},source:{tid:null===(r=t.ortb2)||void 0===r||null===(r=r.source)||void 0===r?void 0:r.tid,ext:{version:"9.17.0",str:"4.3.0",schain:e[0].schain}},bcat:(0,p.deepAccess)(t.ortb2,"bcat")||e[0].params.bcat||[],badv:(0,p.deepAccess)(t.ortb2,"badv")||e[0].params.badv||[],test:0};if(null!==(n=t.ortb2)&&void 0!==n&&null!==(n=n.device)&&void 0!==n&&null!==(n=n.ext)&&void 0!==n&&n.cdep&&(h.device.ext.cdep=t.ortb2.device.ext.cdep),null!=t&&null!==(i=t.ortb2)&&void 0!==i&&i.device&&(0,p.mergeDeep)(h.device,t.ortb2.device),h.user=function(e,t){return null==e?t:e}(f.user,{}),!h.user.ext&&(h.user.ext={}),h.user.ext.eids=e[0].userIdAsEids||[],t.gdprConsent){var y=!0===t.gdprConsent.gdprApplies;h.regs.ext.gdpr=y?1:0,y&&(h.user.ext.consent=t.gdprConsent.consentString)}return t.uspConsent&&(h.regs.ext.us_privacy=t.uspConsent),null!=t&&null!==(s=t.gppConsent)&&void 0!==s&&s.gppString?(h.regs.gpp=t.gppConsent.gppString,h.regs.gpp_sid=t.gppConsent.applicableSections):null!=t&&null!==(d=t.ortb2)&&void 0!==d&&null!==(d=d.regs)&&void 0!==d&&d.gpp&&(h.regs.ext.gpp=t.ortb2.regs.gpp,h.regs.ext.gpp_sid=t.ortb2.regs.gpp_sid),null!=t&&null!==(c=t.ortb2)&&void 0!==c&&null!==(c=c.regs)&&void 0!==c&&null!==(c=c.ext)&&void 0!==c&&c.dsa&&(h.regs.ext.dsa=t.ortb2.regs.ext.dsa),e.map(function(e){var r,n={ext:{}},i=(0,p.deepAccess)(e,"ortb2Imp.ext.tid");i&&(n.ext.tid=i);var s=(0,p.deepAccess)(e,"ortb2Imp.ext.gpid")||(0,p.deepAccess)(e,"ortb2Imp.ext.data.pbadslot");s&&(n.ext.gpid=s);var d=(0,p.deepAccess)(e,"mediaTypes.video");if(null!==(r=t.paapi)&&void 0!==r&&r.enabled&&e.mediaTypes.banner&&(0,p.mergeDeep)(n,{ext:{ae:1}}),d){var c=640,u=360;if(d.playerSize&&d.playerSize[0]&&d.playerSize[0][0]&&d.playerSize[0][1]){var l=(0,a.default)(d.playerSize[0],2);c=l[0],u=l[1]}var f=function(e,t,r){if(["api","battr","mimes","playbackmethod","protocols"].includes(e)&&(!Array.isArray(t[e])||0===t[e].length)&&t[e]){(0,p.logWarn)("".concat("Sharethrough:",' Invalid video request property: "').concat(e,'" must be an array with at least 1 entry.  Value supplied: "').concat(t[e],'".  This will not be added to the bid request.'));return}t[e]&&(r.video[e]=t[e])};n.video={pos:function(e,t){return null==e?t:e}(d.pos,0),topframe:(0,p.inIframe)()?0:1,w:c,h:u};["api","battr","companionad","companiontype","delivery","linearity","maxduration","mimes","minduration","placement","playbackmethod","plcmt","protocols","skip","skipafter","skipmin","startdelay"].forEach(function(e){f(e,d,n)})}else{n.banner={pos:(0,p.deepAccess)(e,"mediaTypes.banner.pos",0),topframe:(0,p.inIframe)()?0:1,format:e.sizes.map(function(e){return{w:+e[0],h:+e[1]}})};var v=(0,p.deepAccess)(e,"mediaTypes.banner.battr",null)||(0,p.deepAccess)(e,"ortb2Imp.banner.battr");v&&(n.banner.battr=v)}return g({id:e.bidId,tagid:String(e.params.pkey),secure:b?1:0,bidfloor:function(e){var t=null;if("function"==typeof e.getFloor){var r=e.getFloor({currency:"USD",mediaType:e.mediaTypes&&e.mediaTypes.video?"video":"banner",size:e.sizes.map(function(e){return{w:e[0],h:e[1]}})});"object"===(0,o.default)(r)&&"USD"===r.currency&&!isNaN(parseFloat(r.floor))&&(t=parseFloat(r.floor))}return null!==t?t:e.params.floor}(e)},n)}).filter(function(e){return!!e}).map(function(e){return{method:"POST",url:v,data:g(g({},h),{},{imp:[e]})}})},interpretResponse:function(e,t){var r,n,i=e.body;if(!i||!i.seatbid||0===i.seatbid.length||!i.seatbid[0].bid||0===i.seatbid[0].bid.length)return[];var o=null===(r=i.ext)||void 0===r?void 0:r.auctionConfigs,a=i.seatbid[0].bid.map(function(e){var r,n,o,a,s,d,c,u,p,f,g,v,m,b={requestId:e.impid,width:+e.w,height:+e.h,cpm:+e.price,creativeId:e.crid,dealId:e.dealid||null,mediaType:t.data.imp[0].video?l.VIDEO:l.BANNER,currency:i.cur||"USD",netRevenue:!0,ttl:360,ad:e.adm,nurl:e.nurl,meta:{advertiserDomains:e.adomain||[],networkId:(null===(r=e.ext)||void 0===r?void 0:r.networkId)||null,networkName:(null===(n=e.ext)||void 0===n?void 0:n.networkName)||null,agencyId:(null===(o=e.ext)||void 0===o?void 0:o.agencyId)||null,agencyName:(null===(a=e.ext)||void 0===a?void 0:a.agencyName)||null,advertiserId:(null===(s=e.ext)||void 0===s?void 0:s.advertiserId)||null,advertiserName:(null===(d=e.ext)||void 0===d?void 0:d.advertiserName)||null,brandId:(null===(c=e.ext)||void 0===c?void 0:c.brandId)||null,brandName:(null===(u=e.ext)||void 0===u?void 0:u.brandName)||null,demandSource:(null===(p=e.ext)||void 0===p?void 0:p.demandSource)||null,dchain:(null===(f=e.ext)||void 0===f?void 0:f.dchain)||null,primaryCatId:(null===(g=e.ext)||void 0===g?void 0:g.primaryCatId)||null,secondaryCatIds:(null===(v=e.ext)||void 0===v?void 0:v.secondaryCatIds)||null,mediaType:(null===(m=e.ext)||void 0===m?void 0:m.mediaType)||null}};return b.mediaType===l.VIDEO&&(b.ttl=3600,b.vastXml=e.adm),b});return o?{bids:a,paapi:(null===(n=i.ext)||void 0===n?void 0:n.auctionConfigs)||{}}:a},getUserSyncs:function(e,t){return e.pixelEnabled&&void 0!==(0,p.deepAccess)(t,"0.body.cookieSyncUrls")?t[0].body.cookieSyncUrls.map(function(e){return{type:"image",url:e}}):[]},onTimeout:function(e){},onBidWon:function(e){},onSetTargeting:function(e){}};function h(e,t){return null==e?t:e}(0,c.registerBidder)(b),(0,d.registerModule)("sharethroughBidAdapter")},1174:function(e,t,r){"use strict";var n,i=r(1640),o=i(r(7251)),a=i(r(4763)),s=i(r(9837)),d=r(9895),c=r(3408),u=r(1235),l=r(7448),p=r(8705),f=r(9293),g=[];function v(e){g=e}function m(e,t){return e.labelAll?{labelAll:!0,labels:e.labelAll,activeLabels:t}:{labelAll:!1,labels:e.labelAny,activeLabels:t}}f.setupAdUnitMediaTypes.before(function(e,t,r){return e(A(t,r),r)}),c.config.getConfig("sizeConfig",function(e){g=e.sizeConfig});var b=(0,s.default)({},p.BANNER,"banner.sizes");function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.labels,r=void 0===t?[]:t,n=e.labelAll,i=void 0!==n&&n,o=e.activeLabels,s=void 0===o?[]:o,d=arguments.length>1?arguments[1]:void 0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g,p=y(c),f=!1,v=!1,m={before:{},after:{}};p.shouldFilter?Object.entries(b).forEach(function(e){var t=(0,a.default)(e,2),r=t[0],n=t[1],i=(0,u.deepAccess)(d,n);if(i){!f&&(d=(0,u.deepClone)(d),f=!0);var o=i.filter(function(e){return p.sizesSupported[e]});(0,u.deepSetValue)(d,n,o),v=v||o.length>0,i.length!==o.length&&(m.before[r]=i,m.after[r]=o)}}):v=null!=Object.values(b).find(function(e){var t;return null===(t=(0,u.deepAccess)(d,e))||void 0===t?void 0:t.length});var h={active:!Object.keys(b).find(function(e){return d.hasOwnProperty(e)})||v&&(0===r.length||!i&&(r.some(function(e){return p.labels[e]})||r.some(function(e){return(0,l.includes)(s,e)}))||i&&r.reduce(function(e,t){return e?p.labels[t]||(0,l.includes)(s,t):e},!0)),mediaTypes:d};return Object.keys(m.before).length>0&&(h.filterResults=m),h}function y(e){return e.reduce(function(e,t){if("object"===(0,o.default)(t)&&"string"==typeof t.mediaQuery&&t.mediaQuery.length>0){var r=!1;try{r=(0,u.getWindowTop)().matchMedia(t.mediaQuery).matches}catch(e){(0,u.logWarn)("Unfriendly iFrame blocks sizeConfig from being correctly evaluated"),r=matchMedia(t.mediaQuery).matches}r&&(Array.isArray(t.sizesSupported)&&(e.shouldFilter=!0),["labels","sizesSupported"].forEach(function(r){return(t[r]||[]).forEach(function(t){return e[r][t]=!0})}))}else(0,u.logWarn)('sizeConfig rule missing required property "mediaQuery"');return e},{labels:{},sizesSupported:{},shouldFilter:!1})}function A(e,t){return e.reduce(function(e,r){var n=h(m(r,t),r.mediaTypes),i=n.active,o=n.mediaTypes,a=n.filterResults;return i?(a&&(0,u.logInfo)('Size mapping filtered adUnit "'.concat(r.code,'" sizes from '),a.before,"to ",a.after),r.mediaTypes=o,r.bids=r.bids.reduce(function(e,n){var i=h(m(n,t),r.mediaTypes),o=i.active,a=i.mediaTypes,s=i.filterResults;return o?(s&&((0,u.logInfo)('Size mapping filtered adUnit "'.concat(r.code,'" bidder "').concat(n.bidder,'" sizes from '),s.before,"to ",s.after),n.mediaTypes=a),e.push(n)):(0,u.logInfo)('Size mapping deactivated adUnit "'.concat(r.code,'" bidder "').concat(n.bidder,'"')),e},[]),e.push(r)):(0,u.logInfo)('Size mapping disabled adUnit "'.concat(r.code,'"')),e},[])}b[p.VIDEO]="video.playerSize",(0,d.registerModule)("sizeMapping")},6191:function(e,t,r){"use strict";var n,i=r(1640),o=i(r(9837)),a=r(9895),s=r(1235),d=r(1634),c=r(4288),u=r(2050),l=r(9156);function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var g="teads",v={GDPR_APPLIES_PUBLISHER:12,GDPR_APPLIES_GLOBAL:11,GDPR_DOESNT_APPLY:0,CMP_NOT_FOUND_OR_ERROR:22},m=(0,c.getStorageManager)({bidderCode:g});function b(e){var t,r={},n=(0,s.getValue)(e.params,"placementId"),i=(0,s.getValue)(e.params,"pageId"),o=(0,s.deepAccess)(e,"ortb2Imp.ext.gpid"),a=(0,s.deepAccess)(e,"mediaTypes.video.plcmt");return r.sizes=function(e){return(0,s.parseSizesInput)(function(e){var t=(0,s.deepAccess)(e,"mediaTypes.video.playerSize"),r=(0,s.deepAccess)(e,"mediaTypes.video.sizes"),n=(0,s.deepAccess)(e,"mediaTypes.banner.sizes");return(0,s.isArray)(n)||(0,s.isArray)(t)||(0,s.isArray)(r)?[n,r,t].reduce(function(e,t){return(0,s.isArray)(t)&&((0,s.isArray)(t[0])?t.forEach(function(t){e.push(t)}):e.push(t)),e},[]):e.sizes}(e))}(e),r.bidId=(0,s.getBidIdParameter)("bidId",e),r.bidderRequestId=(0,s.getBidIdParameter)("bidderRequestId",e),r.placementId=parseInt(n,10),r.pageId=parseInt(i,10),r.adUnitCode=(0,s.getBidIdParameter)("adUnitCode",e),r.transactionId=(null===(t=e.ortb2Imp)||void 0===t||null===(t=t.ext)||void 0===t?void 0:t.tid)||"",o&&(r.gpid=o),a&&(r.videoPlcmt=a),r}function h(e){return parseInt(e)>0}(0,d.registerBidder)({code:g,gvlid:132,supportedMediaTypes:["video","banner"],isBidRequestValid:function(e){var t=!1;if(void 0!==e.params){var r=h((0,s.getValue)(e.params,"placementId")),n=h((0,s.getValue)(e.params,"pageId"));t=r&&n}return!t&&(0,s.logError)("Teads placementId and pageId parameters are required. Bid aborted."),t},buildRequests:function(e,t){var r,n,i,o,a=e.map(b),d=window.top,c=f(f({referrer:function(e){var t="";return e&&e.refererInfo&&e.refererInfo.page&&(t=e.refererInfo.page),t}(t),pageReferrer:document.referrer,pageTitle:(function(){try{var e=window.top.document.querySelector('meta[property="og:title"]');return window.top.document.title||e&&e.content||""}catch(e){var t=document.querySelector('meta[property="og:title"]');return document.title||t&&t.content||""}})().slice(0,300),pageDescription:(function(){var e;try{e=window.top.document.querySelector('meta[name="description"]')||window.top.document.querySelector('meta[property="og:description"]')}catch(t){e=document.querySelector('meta[name="description"]')||document.querySelector('meta[property="og:description"]')}return e&&e.content||""})().slice(0,300),networkBandwidth:function(e){return e&&e.connection&&e.connection.downlink>=0?e.connection.downlink.toString():""}(window.navigator),timeToFirstByte:function(e){var t=e.performance||e.webkitPerformance||e.msPerformance||e.mozPerformance,r=t&&"function"==typeof t.getEntriesByType&&"[object Function]"===Object.prototype.toString.call(t.getEntriesByType)&&t.getEntriesByType("navigation")[0]&&t.getEntriesByType("navigation")[0].responseStart&&t.getEntriesByType("navigation")[0].requestStart&&t.getEntriesByType("navigation")[0].responseStart>0&&t.getEntriesByType("navigation")[0].requestStart>0&&Math.round(t.getEntriesByType("navigation")[0].responseStart-t.getEntriesByType("navigation")[0].requestStart);if(r)return r.toString();var n=t&&t.timing.responseStart&&t.timing.requestStart&&t.timing.responseStart>0&&t.timing.requestStart>0&&t.timing.responseStart-t.timing.requestStart;return n?n.toString():""}(window),data:a,device:(null==t||null===(r=t.ortb2)||void 0===r?void 0:r.device)||{},deviceWidth:screen.width,deviceHeight:screen.height,devicePixelRatio:d.devicePixelRatio,screenOrientation:null===(n=screen.orientation)||void 0===n?void 0:n.type,historyLength:(0,l.getHLen)(),viewportHeight:null===(i=d.visualViewport)||void 0===i?void 0:i.height,viewportWidth:null===(o=d.visualViewport)||void 0===o?void 0:o.width,hardwareConcurrency:void 0,deviceMemory:void 0,hb_version:"9.17.0"},function(e){var t={unifiedId2:"uid2.id",liveRampId:"idl_env",lotamePanoramaId:"lotamePanoramaId",id5Id:"id5id.uid",criteoId:"criteoId",yahooConnectId:"connectId",quantcastId:"quantcastId",epsilonPublisherLinkId:"publinkId",publisherFirstPartyViewerId:"pubcid",merkleId:"merkleId.id",kinessoId:"kpuid"},r={};for(var n in t){var i=t[n],o=(0,s.deepAccess)(e,"0.userId.".concat(i));o&&(r[n]=o)}return r}(e)),function(e){var t=(0,s.deepAccess)(e,"0.userId.teadsId");if(t)return{firstPartyCookieTeadsId:t};if(m.cookiesAreEnabled(null)){var r=m.getCookie("_tfpvi",null);if(r)return{firstPartyCookieTeadsId:r}}return{}}(e)),u=e[0];u.schain&&(c.schain=u.schain);var p=t.gppConsent;if(t&&p){var g="string"==typeof p.gppString,h=Array.isArray(p.applicableSections)&&p.applicableSections.every(function(e){return"number"==typeof e});c.gpp={consentString:g?p.gppString:"",applicableSectionIds:h?p.applicableSections:[]}}var y=t.gdprConsent;if(t&&y){var A="boolean"==typeof y.gdprApplies,I="string"==typeof y.consentString,E=A?function(e,t){var r=v.GDPR_APPLIES_PUBLISHER;return e?t&&!t.isServiceSpecific&&(r=v.GDPR_APPLIES_GLOBAL):r=v.GDPR_DOESNT_APPLY,r}(y.gdprApplies,y.vendorData):v.CMP_NOT_FOUND_OR_ERROR;c.gdpr_iab={consent:I?y.consentString:"",status:E,apiVersion:y.apiVersion}}t&&t.uspConsent&&(c.us_privacy=t.uspConsent);var S=(0,s.deepAccess)(u,"ortb2.device.sua");S&&(c.userAgentClientHints=S);var O=(0,s.deepAccess)(t,"ortb2.regs.ext.dsa");return O&&(c.dsa=O),{method:"POST",url:"https://a.teads.tv/hb/bid-request",data:JSON.stringify(c)}},interpretResponse:function(e,t){if(!(e=e.body).responses)return[];var r=(0,u.isAutoplayEnabled)();return e.responses.filter(function(e){return!e.needAutoplay||r}).map(function(e){var t,r={cpm:e.cpm,width:e.width,height:e.height,currency:e.currency,netRevenue:!0,ttl:e.ttl,meta:{advertiserDomains:e&&e.adomain?e.adomain:[]},ad:e.ad,requestId:e.bidId,creativeId:e.creativeId,placementId:e.placementId};return e.dealId&&(r.dealId=e.dealId),null!=e&&null!==(t=e.ext)&&void 0!==t&&t.dsa&&(r.meta.dsa=e.ext.dsa),r})}}),(0,a.registerModule)("teadsBidAdapter")},5123:function(e,t,r){"use strict";var n,i=r(1640),o=r(7251),a=i(r(7251)),s=i(r(9837)),d=r(9895),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(1235)),u=r(8705),l=r(1634),p=r(3408),f=r(4288),g=r(418);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){(0,s.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var h="triplelift",y=null,A=null,I=(0,f.getStorageManager)({bidderCode:h}),E={gvlid:28,code:h,supportedMediaTypes:[u.BANNER,u.VIDEO],isBidRequestValid:function(e){return void 0!==e.params.inventoryCode},buildRequests:function(e,t){var r,n="https://tlx.3lift.com/header/auction?",i=function(e,t){var r,n={},i=e[0].schain,o=function(e){var t={},r={},n={},i=e.ortb2||{},o=function(){var e=I.getDataFromLocalStorage("opecloud_ctx");if(!e)return null;try{return JSON.parse(e)}catch(e){return(0,c.logError)("Triplelift: error parsing JSON: ",e),null}}(),a=Object.assign({},i.site),s=Object.assign({},i.user);if(o){s.data=s.data||[];try{s.data.push({name:"www.1plusx.com",ext:o})}catch(e){(0,c.logError)("Triplelift: error adding 1plusX segments: ",e)}}return T(r,a),T(n,s),!(0,c.isEmpty)(r)&&(t.context=r),!(0,c.isEmpty)(n)&&(t.user=n),t}(t);n.imp=e.map(function(e,t){var r={id:t,tagid:e.params.inventoryCode,floor:function(e){var t=null;if("function"==typeof e.getFloor)try{var r=e.getFloor({currency:"USD",mediaType:S(e)?"video":"banner",size:"*"});"object"===(0,a.default)(r)&&"USD"===r.currency&&!isNaN(parseFloat(r.floor))&&(t=parseFloat(r.floor))}catch(e){(0,c.logError)("Triplelift: getFloor threw an error: ",e)}return null!==t?t:e.params.floor}(e)};return S(e)&&(r.video=function(e){var t=b(b({},e.params.video),e.mediaTypes.video);try{!t.w&&(t.w=t.playerSize[0][0]),!t.h&&(t.h=t.playerSize[0][1])}catch(e){(0,c.logWarn)("Video size not defined",e)}return t.playbackmethod&&Number.isInteger(t.playbackmethod)&&(t.playbackmethod=Array.from(String(t.playbackmethod),Number)),delete t.playerSize,t}(e)),e.mediaTypes.banner&&!O(e)&&(r.banner={format:function(e){return e.filter(w).map(function(e){return{w:e[0],h:e[1]}})}(e.sizes)}),!(0,c.isEmpty)(e.ortb2Imp)&&(r.fpd=function(e){var t={},r={};return T(r,e.ext),!(0,c.isEmpty)(r)&&(t.context=r),t}(e.ortb2Imp),!(0,c.isEmpty)(e.ortb2Imp.ext)&&(r.ext=b({},e.ortb2Imp.ext))),r});var s=[];e[0].userIdAsEids&&(s=c.deepAccess(e[0],"userIdAsEids"),n.user={ext:{eids:s}});var d=function(e,t){var r={};return!(0,c.isEmpty)(e)&&(r.schain=b({},e)),!(0,c.isEmpty)(t)&&(r.fpd=b({},t)),r}(i,o);return!(0,c.isEmpty)(d)&&(n.ext=d),null!=t&&null!==(r=t.ortb2)&&void 0!==r&&null!==(r=r.regs)&&void 0!==r&&r.gpp&&(n.regs=Object.assign({},t.ortb2.regs)),null!=t&&t.ortb2&&(n.ext.ortb2=Object.assign({},t.ortb2)),n}(e,t);if(n=(0,g.tryAppendQueryString)(n,"lib","prebid"),n=(0,g.tryAppendQueryString)(n,"v","9.17.0"),t&&t.refererInfo){var o=t.refererInfo.page;n=(0,g.tryAppendQueryString)(n,"referrer",o)}return t&&t.timeout&&(n=(0,g.tryAppendQueryString)(n,"tmax",t.timeout)),t&&t.gdprConsent&&(y=void 0===t.gdprConsent.gdprApplies||t.gdprConsent.gdprApplies,n=(0,g.tryAppendQueryString)(n,"gdpr",y.toString()),void 0!==t.gdprConsent.consentString&&(A=t.gdprConsent.consentString,n=(0,g.tryAppendQueryString)(n,"cmp_cs",A))),t&&t.uspConsent&&(n=(0,g.tryAppendQueryString)(n,"us_privacy",t.uspConsent)),null!=t&&null!==(r=t.paapi)&&void 0!==r&&r.enabled&&(n=(0,g.tryAppendQueryString)(n,"fledge",t.paapi.enabled)),!0===p.config.getConfig("coppa")&&(n=(0,g.tryAppendQueryString)(n,"coppa",!0)),n.lastIndexOf("&")===n.length-1&&(n=n.substring(0,n.length-1)),(0,c.logMessage)("tlCall request built: "+n),{method:"POST",url:n,data:i,bidderRequest:t}},interpretResponse:function(e,t){var r=t.bidderRequest,n=e.body.bids||[],i=e.body.paapi||[];if(n=n.map(function(e){return function(e,t){var r={},n=t.width||1,i=t.height||1,o=t.deal_id||"",a=t.crid||"",s=e.bids[t.imp_id];return 0!=t.cpm&&t.ad&&(r={requestId:s.bidId,cpm:t.cpm,width:n,height:i,netRevenue:!0,ad:t.ad,creativeId:a,dealId:o,currency:"USD",ttl:300,tl_source:t.tl_source,meta:{}},S(s)&&"video"===t.media_type&&(r.vastXml=t.ad,r.mediaType="video",r.ttl=3600),t.advertiser_name&&(r.meta.advertiserName=t.advertiser_name),t.adomain&&t.adomain.length&&(r.meta.advertiserDomains=t.adomain),t.tl_source&&"hdx"==t.tl_source&&(S(s)&&"video"===t.media_type?r.meta.mediaType="video":r.meta.mediaType="banner"),t.tl_source&&"tlx"==t.tl_source&&(r.meta.mediaType="native"),a&&(r.meta.networkId=a.slice(0,a.indexOf("_")))),r}(r,e)}),!(i.length>0))return n;var o=i.map(function(e){return{bidId:r.bids[e.imp_id].bidId,config:e.auctionConfig}});return(0,c.logMessage)("Response with FLEDGE:",{bids:n,fledgeAuctionConfigs:o}),{bids:n,paapi:o}},getUserSyncs:function(e,t,r,n,i){var o=function(e){if(e){if(e.iframeEnabled)return"iframe";if(e.pixelEnabled)return"image"}}(e);if(o){var a="https://eb2.3lift.com/sync?";return"image"===o&&(a=(0,g.tryAppendQueryString)(a,"px",1),a=(0,g.tryAppendQueryString)(a,"src","prebid")),(null!==A||y)&&(a=(0,g.tryAppendQueryString)(a,"gdpr",y),a=(0,g.tryAppendQueryString)(a,"cmp_cs",A)),n&&(a=(0,g.tryAppendQueryString)(a,"us_privacy",n)),i&&(i.gppString&&(a=(0,g.tryAppendQueryString)(a,"gpp",i.gppString)),i.applicableSections&&0!==i.applicableSections.length&&(a=(0,g.tryAppendQueryString)(a,"gpp_sid",function(e){return e.filter(function(e){return Number.isInteger(e)}).join(",")}(i.applicableSections)))),[{type:o,url:a}]}}};function S(e){return _(e)&&(O(e)||function(e){return _(e)&&"outstream"===e.mediaTypes.video.context.toLowerCase()}(e))}function O(e){return _(e)&&"instream"===e.mediaTypes.video.context.toLowerCase()}function _(e){return e.mediaTypes.video&&e.mediaTypes.video.context}function T(e,t){!(0,c.isEmpty)(t)&&Object.keys(t).forEach(function(r){null!=t[r]&&(e[r]=t[r])})}function w(e){return 2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]}(0,l.registerBidder)(E),(0,d.registerModule)("tripleliftBidAdapter")},8265:function(e,t,r){"use strict";var n,i=r(1640),o=r(7251),a=i(r(9837)),s=r(9895),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(1235)),c=r(3408),u=r(1634),l=r(8705),p=r(2413);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var m={BANNER:1,VIDEO:2};function b(e){if(e.params.bidfloor)return e.params.bidfloor;if(!d.isFn(e.getFloor))return null;var t=e.getFloor({currency:"USD",mediaType:"*",size:"*"});return d.isPlainObject(t)&&!isNaN(t.floor)&&"USD"===t.currency?t.floor:null}var h={code:"ttd",gvlid:21,aliases:["thetradedesk"],supportedMediaTypes:[l.BANNER,l.VIDEO],isBidRequestValid:function(e){if(!e||!e.params)return d.logWarn("ttd: Missing bid parameters"),!1;if(!e.params.supplySourceId)return d.logWarn("ttd: Missing required parameter params.supplySourceId"),!1;if(!/^[\w+]+$/.test(e.params.supplySourceId))return d.logWarn("ttd: supplySourceId must only contain alphabetic characters"),!1;if(!e.params.publisherId)return d.logWarn("ttd: Missing required parameter params.publisherId"),!1;if(e.params.publisherId.length>32)return d.logWarn("ttd: params.publisherId must be 32 characters or less"),!1;if(e.params.bidfloor&&isNaN(parseFloat(e.params.bidfloor)))return!1;var t=d.deepAccess(e,"ortb2Imp.ext.gpid");if(!e.params.placementId&&!t)return d.logWarn("ttd: one of params.placementId or gpid (via the GPT module https://docs.prebid.org/dev-docs/modules/gpt-pre-auction.html) must be passed"),!1;var r=d.deepAccess(e,"mediaTypes.banner"),n=d.deepAccess(e,"mediaTypes.video");if(!r&&!n)return d.logWarn("ttd: one of mediaTypes.banner or mediaTypes.video must be passed"),!1;if(n){if(!n.maxduration||!d.isInteger(n.maxduration))return d.logWarn("ttd: mediaTypes.video.maxduration must be set to the maximum video ad duration in seconds"),!1;if(!n.api||0===n.api.length)return d.logWarn("ttd: mediaTypes.video.api should be an array of supported api frameworks. See the Open RTB v2.5 spec for valid values"),!1;if(!n.mimes||0===n.mimes.length)return d.logWarn("ttd: mediaTypes.video.mimes should be an array of supported mime types"),!1;if(!n.protocols)return d.logWarn("ttd: mediaTypes.video.protocols should be an array of supported protocols. See the Open RTB v2.5 spec for valid values"),!1}return!0},buildRequests:function(e,t){var r=t.ortb2||{};var n={id:t.bidderRequestId,imp:e.map(function(e){var t,r,n,i,o,a,s,c;return r={id:(t=e).bidId},(n=d.deepAccess(t,"ortb2Imp.ext.gpid")||t.params.placementId)&&(r.tagid=n),i=d.deepAccess(t,"mediaTypes.video"),o=d.deepAccess(t,"mediaTypes.banner"),a={},o&&(a[l.BANNER]=function(e){var t,r=(t=e.mediaTypes.banner.sizes,d.parseSizesInput(t).filter(function(e){return e}).map(function(e){return e.split("x")}).map(function(e){return{width:parseInt(e[0]),height:parseInt(e[1])}})).map(function(e){return{w:e.width,h:e.height}}),n=parseInt(d.deepAccess(e,"mediaTypes.banner.pos")),i=d.deepAccess(e,"params.banner.expdir"),o={};n&&(o.pos=n),i&&Array.isArray(i)&&(o.expdir=i);var a=Object.assign({w:r[0].w,h:r[0].h,format:r},o),s=d.deepAccess(e,"ortb2Imp.banner.battr");return s&&(a.battr=s),a}(t)),i&&(a[l.VIDEO]=function(e){var t=d.deepAccess(e,"mediaTypes.video.minduration"),r=d.deepAccess(e,"mediaTypes.video.maxduration"),n=d.deepAccess(e,"mediaTypes.video.playerSize"),i=d.deepAccess(e,"mediaTypes.video.api"),o=d.deepAccess(e,"mediaTypes.video.mimes"),a=d.deepAccess(e,"mediaTypes.video.placement"),s=d.deepAccess(e,"mediaTypes.video.plcmt"),c=d.deepAccess(e,"mediaTypes.video.protocols"),u=d.deepAccess(e,"mediaTypes.video.playbackmethod"),l=d.deepAccess(e,"mediaTypes.video.pos"),p=d.deepAccess(e,"mediaTypes.video.startdelay"),f=d.deepAccess(e,"mediaTypes.video.skip"),g=d.deepAccess(e,"mediaTypes.video.skipmin"),v=d.deepAccess(e,"mediaTypes.video.skipafter"),m=d.deepAccess(e,"mediaTypes.video.minbitrate"),b=d.deepAccess(e,"mediaTypes.video.maxbitrate");(!t||!d.isInteger(t))&&(t=0);var h={minduration:t,maxduration:r,api:i,mimes:o,placement:a,protocols:c};void 0!==n&&(d.isArray(n[0])?(h.w=parseInt(n[0][0]),h.h=parseInt(n[0][1])):d.isNumber(n[0])&&(h.w=parseInt(n[0]),h.h=parseInt(n[1]))),u&&(h.playbackmethod=u),s&&(h.plcmt=s),l&&(h.pos=l),p&&d.isInteger(p)&&(h.startdelay=p),f&&(0===f||1===f)&&(h.skip=f),g&&d.isInteger(g)&&(h.skipmin=g),v&&d.isInteger(v)&&(h.skipafter=v),m&&d.isInteger(m)&&(h.minbitrate=m),b&&d.isInteger(b)&&(h.maxbitrate=b);var y=d.deepAccess(e,"ortb2Imp.video.battr");return y&&(h.battr=y),h}(t)),Object.assign(r,a),(s=b(t))&&(r.bidfloor=parseFloat(s),r.bidfloorcur="USD"),c=d.deepAccess(t,"ortb2Imp.secure"),r.secure=(0,d.isNumber)(c)?c:1,d.mergeDeep(r,t.ortb2Imp),r}),site:(i=t,o=r,a=d.mergeDeep({page:d.deepAccess(i,"refererInfo.page"),ref:d.deepAccess(i,"refererInfo.ref"),publisher:{id:d.deepAccess(i,"bids.0.params.publisherId")}},o.site),(s=i.refererInfo.domain)&&d.deepSetValue(a,"publisher.domain",s),a),device:(u=r,f=navigator.language||navigator.browserLanguage||navigator.userLanguage||navigator.systemLanguage,g={ua:navigator.userAgent,dnt:d.getDNT()?1:0,language:f,connectiontype:(0,p.getConnectionType)()},d.mergeDeep(g,u.device),g),user:(m=t,h=r,y={},m.gdprConsent&&d.deepSetValue(y,"ext.consent",m.gdprConsent.consentString),d.isStr(d.deepAccess(m,"bids.0.userId.tdid"))&&(y.buyeruid=m.bids[0].userId.tdid),(A=d.deepAccess(m,"bids.0.userIdAsEids"))&&A.length&&d.deepSetValue(y,"ext.eids",A),d.mergeDeep(y,h.user),y),at:1,cur:["USD"],regs:(S={},(I=t).gdprConsent&&"boolean"==typeof I.gdprConsent.gdprApplies&&d.deepSetValue(S,"ext.gdpr",I.gdprConsent.gdprApplies?1:0),I.uspConsent&&d.deepSetValue(S,"ext.us_privacy",I.uspConsent),!0===c.config.getConfig("coppa")&&(S.coppa=1),null!==(E=I.ortb2)&&void 0!==E&&E.regs&&d.mergeDeep(S,I.ortb2.regs),S),source:(O=e,w={tid:null==(_=t)||null===(T=_.ortb2)||void 0===T||null===(T=T.source)||void 0===T?void 0:T.tid},O[0].schain&&d.deepSetValue(w,"ext.schain",O[0].schain),w),ext:{ttdprebid:{ver:"TTD-PREBID-2024.07.26",pbjs:"9.17.0",keywords:null!==(x=(C=r).site)&&void 0!==x&&x.keywords?C.site.keywords.split(",").map(function(e){return e.trim()}):[]}}};if(r&&r.bcat&&(n.bcat=r.bcat),r&&r.badv&&(n.badv=r.badv),r&&r.app&&(n.app=r.app),r&&r.pmp&&r.pmp.deals&&r.pmp.deals.length){var i,o,a,s,u,f,g,m,h,y,A,I,E,S,O,_,T,w,C,x,P,D=null==t||null===(P=t.bids[0])||void 0===P?void 0:P.mediaTypes,R=r.pmp.deals.filter(function(e){return null!=D&&D.banner?!e.isVideo:e.isVideo}).map(function(e){return v({},e)});if(R.length){var j=b(e[0]);n.pmp=v(v({deals:R},r.pmp.ext&&{ext:r.pmp.ext}),r.pmp.private_auction&&{private_auction:r.pmp.private_auction}),n.pmp.deals[0].bidfloor=Math.max(R[0].bidfloor,j),n.pmp.deals.forEach(function(e){delete e.isVideo})}}var k=(t.bids[0].params.useHttp2?"https://d2.adsrvr.org/bid/bidder/":"https://direct.adsrvr.org/bid/bidder/")+t.bids[0].params.supplySourceId;return{method:"POST",url:k,data:n,options:{withCredentials:!0}}},interpretResponse:function(e,t){var r=d.deepAccess(e,"body.seatbid"),n=d.deepAccess(e,"body.cur");if(!r||0===r.length)return[];var i=[],o=d.deepAccess(t,"data.imp");return r.forEach(function(e){e.bid.forEach(function(e){var t=o.find(function(t){return t.id===e.impid}),r=e.price||0,a={requestId:e.impid,cpm:r,creativeId:e.crid,dealId:e.dealid||null,currency:n||"USD",netRevenue:!0,ttl:e.ttl||360,meta:{}};e.adomain&&e.adomain.length>0&&(a.meta.advertiserDomains=e.adomain),e.ext.mediatype===m.BANNER?Object.assign(a,{width:e.w,height:e.h,ad:d.replaceAuctionPrice(e.adm,r),mediaType:l.BANNER}):e.ext.mediatype===m.VIDEO&&(Object.assign(a,{width:t.video.w,height:t.video.h,mediaType:l.VIDEO}),(e.dur||e.duration)&&(a.duration=e.dur||e.duration),e.nurl?a.vastUrl=d.replaceAuctionPrice(e.nurl,r):a.vastXml=d.replaceAuctionPrice(e.adm,r)),i.push(a)})}),i},getUserSyncs:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=[],o="&gdpr=".concat(r.gdprApplies?1:0,"&gdpr_consent=").concat(encodeURIComponent(r.consentString)),a="".concat("https://match.adsrvr.org","/track/usersync?us_privacy=").concat(encodeURIComponent(n)).concat(o);return e.pixelEnabled?i.push({type:"image",url:a+"&ust=image"}):e.iframeEnabled&&i.push({type:"iframe",url:a+"&ust=iframe"}),i}};(0,u.registerBidder)(h),(0,s.registerModule)("ttdBidAdapter")},5839:function(e,t,r){"use strict";var n,i=r(1640);i(r(9837));var o=r(9895),a=r(1235),s=r(2885),d=r(4288),c=r(5723),u=r(7709),l=r(3550),p="uid2",f=u.Uid2CodeVersion,g="PrebidJS-".concat("9.17.0","-UID2Module-").concat(f),v="UID2: ";function m(e,t){return function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(void 0,[t+" "].concat(n))}}var b=m(a.logInfo,v),h=m(a.logWarn,v),y=(0,d.getStorageManager)({moduleType:c.MODULE_TYPE_UID,moduleName:p}),A={name:p,decode:function(e){var t=function(e){if("string"==typeof e)return b("Found server-only token. Refresh is unavailable for this token."),{uid2:{id:e}};return"optout"===e.latestToken?(b("Found optout token.  Refresh is unavailable for this token."),{uid2:{optout:!0}}):Date.now()<e.latestToken.identity_expires?{uid2:{id:e.latestToken.advertising_token}}:null}(e);return b("UID2 decode returned",t),t},getId:function(e,t){if((null==t?void 0:t.gdprApplies)===!0){h("UID2 is not intended for use where GDPR applies. The UID2 module will not run.");return}var r,n,i,o,a,s,d,c,p,f={apiBaseUrl:null!==(r=null==e||null===(n=e.params)||void 0===n?void 0:n.uid2ApiBase)&&void 0!==r?r:"https://prod.uidapi.com",paramToken:null==e||null===(i=e.params)||void 0===i?void 0:i.uid2Token,serverCookieName:null!==(o=null==e||null===(a=e.params)||void 0===a?void 0:a.uid2Cookie)&&void 0!==o?o:null==e||null===(s=e.params)||void 0===s?void 0:s.uid2ServerCookie,storage:null!==(d=null==e||null===(c=e.params)||void 0===c?void 0:c.storage)&&void 0!==d?d:"localStorage",clientId:g,internalStorage:"__uid2_advertising_token"};null!=e&&null!==(p=e.params)&&void 0!==p&&p.declareBridged&&(l.UID2_EIDS.uid2.bridged=!0);b("UID2 configuration loaded and mapped.",f);var v=(0,u.Uid2GetId)(f,y,b,h);return b("UID2 getId returned",v),v},eids:l.UID2_EIDS};(0,s.submodule)("userId",A),(0,o.registerModule)("uid2IdSystem")},7709:function(e,t,r){"use strict";var n,i=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.Uid2CodeVersion=t.Uid2ApiClient=void 0,t.Uid2GetId=function(e,t,r,i){var o,a,s,d,c,u=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.apply(void 0,[r].concat(t))},l=null,p="cookie"!==e.storage,g=new v(t,p,e.internalStorage,u);u("Module is using ".concat(p?"local storage":"cookies"," for internal storage."));var b=n&&n.isCSTGOptionsValid(e.cstg,i);b?(u("Module is using client-side token generation."),l=null):e.paramToken?u("Read token from params",l=e.paramToken):e.serverCookieName&&u("Read token from server-supplied cookie",l=g.readProvidedCookie(e.serverCookieName));var h=g.getStoredValueWithFallback();if(u("Loaded module-stored tokens:",h),h&&"string"==typeof h){if(!l&&!b)return u("Returning legacy cookie value."),{id:h};u("Discarding superseded legacy cookie."),h=null}l&&h&&(null===(d=h.originalToken)||void 0===d?void 0:d.advertising_token)!==l.advertising_token&&(u("Server supplied new token - ignoring stored value.",null===(c=h.originalToken)||void 0===c?void 0:c.advertising_token,l.advertising_token),h=null);var y=!(null!==(o=h)&&void 0!==o&&o.latestToken)||l&&l.identity_expires>h.latestToken.identity_expires,A=y?l:h.latestToken;if(u("UID2 module selected latest token",y,A),!A||Date.now()>A.refresh_expires)return u("Newest available token is expired and not refreshable."),{id:null};if(Date.now()>A.identity_expires){var I=m(e.apiBaseUrl,A,e.clientId,g,u,i);return u("Token is expired but can be refreshed, attempting refresh."),{callback:function(e){I.then(function(t){u("Refresh reponded, passing the updated token on.",t),e(t)})}}}Date.now()>A.refresh_from&&(u("Refreshing token in background with low priority."),m(e.apiBaseUrl,A,e.clientId,g,u,i));var E={originalToken:null!==(a=l)&&void 0!==a?a:null===(s=h)||void 0===s?void 0:s.originalToken,latestToken:A};return g.storeValue(E),{id:E}},t.Uid2StorageManager=void 0,t.extractIdentityFromParams=function(e){for(var t=0,r=["emailHash","phoneHash","email","phone"];t<r.length;t++){var n=r[t];if(e.hasOwnProperty(n))return(0,o.default)({},n,e[n])}return{}},i(r(8129));var o=i(r(9837));i(r(7822));var a=i(r(6945)),s=i(r(4920)),d=i(r(4995)),c=i(r(7251)),u=r(9895),l=r(721);r(1235),t.Uid2CodeVersion="1.1";function p(e){return"UID2 shared library - ".concat(e)}function f(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];e.apply(void 0,[p(r[0])].concat((0,d.default)(r.slice(1))))}var g=t.Uid2ApiClient=(0,s.default)(function e(t,r,n,i){(0,a.default)(this,e),this._baseUrl=t.baseUrl,this._clientVersion=r,this._logInfo=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return f.apply(void 0,[n].concat(t))},this._logWarn=i},[{key:"createArrayBuffer",value:function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}},{key:"hasStatusResponse",value:function(e){return"object"===(0,c.default)(e)&&e&&e.status}},{key:"isValidRefreshResponse",value:function(e){var t;return this.hasStatusResponse(e)&&("optout"===e.status||"expired_token"===e.status||"success"===e.status&&e.body&&(t=e.body,!!("object"===(0,c.default)(t)&&null!==t&&t.advertising_token&&t.identity_expires&&t.refresh_from&&t.refresh_token&&t.refresh_expires)))}},{key:"ResponseToRefreshResult",value:function(e){return this.isValidRefreshResponse(e)?"success"===e.status?{status:e.status,identity:e.body}:e:p("Response didn't contain a valid status")}},{key:"callRefreshApi",value:function(e){var t,r,n=this,i=this._baseUrl+"/v2/token/refresh",o=new Promise(function(e,n){t=e,r=n});return this._logInfo("Sending refresh request",e),(0,l.ajax)(i,{success:function(i){try{if(e.refresh_response_key){n._logInfo("Decrypting refresh API response");var o=n.createArrayBuffer(atob(i));window.crypto.subtle.importKey("raw",n.createArrayBuffer(atob(e.refresh_response_key)),{name:"AES-GCM"},!1,["decrypt"]).then(function(e){n._logInfo("Imported decryption key"),window.crypto.subtle.decrypt({name:"AES-GCM",iv:o.slice(0,12),tagLength:128},e,o.slice(12)).then(function(e){var i=String.fromCharCode.apply(String,(0,d.default)(new Uint8Array(e)));n._logInfo("Decrypted to:",i);var o=JSON.parse(i),a=n.ResponseToRefreshResult(o);"string"==typeof a?r(p(a)):t(a)},function(e){return n._logWarn(p("Call to UID2 API failed"),e)})},function(e){return n._logWarn(p("Call to UID2 API failed"),e)})}else{n._logInfo("No response decryption key available, assuming unencrypted JSON");var a=JSON.parse(i),s=n.ResponseToRefreshResult(a);"string"==typeof s?r(p(s)):t(s)}}catch(e){r(p(i))}},error:function(e,i){try{n._logInfo("Error status, assuming unencrypted JSON");var o=JSON.parse(i.responseText),a=n.ResponseToRefreshResult(o);"string"==typeof a?r(p(a)):t(a)}catch(t){r(p(e))}}},e.refresh_token,{method:"POST",customHeaders:{"X-UID2-Client-Version":this._clientVersion}}),o}}]),v=t.Uid2StorageManager=(0,s.default)(function e(t,r,n,i){(0,a.default)(this,e),this._storage=t,this._preferLocalStorage=r,this._storageName=n,this._logInfo=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return f.apply(void 0,[i].concat(t))}},[{key:"readCookie",value:function(e){return this._storage.cookiesAreEnabled()?this._storage.getCookie(e):null}},{key:"readLocalStorage",value:function(e){return this._storage.localStorageIsEnabled()?this._storage.getDataFromLocalStorage(e):null}},{key:"readModuleCookie",value:function(){return this.parseIfContainsBraces(this.readCookie(this._storageName))}},{key:"writeModuleCookie",value:function(e){this._storage.setCookie(this._storageName,JSON.stringify(e),Date.now()+864e5)}},{key:"readModuleStorage",value:function(){return this.parseIfContainsBraces(this.readLocalStorage(this._storageName))}},{key:"writeModuleStorage",value:function(e){this._storage.setDataInLocalStorage(this._storageName,JSON.stringify(e))}},{key:"readProvidedCookie",value:function(e){return JSON.parse(this.readCookie(e))}},{key:"parseIfContainsBraces",value:function(e){return null!=e&&e.includes("{")?JSON.parse(e):e}},{key:"storeValue",value:function(e){this._preferLocalStorage?this.writeModuleStorage(e):this.writeModuleCookie(e)}},{key:"getStoredValueWithFallback",value:function(){var e=this._preferLocalStorage?"local storage":"cookie",t=(this._preferLocalStorage?this.readModuleStorage:this.readModuleCookie).bind(this),r=(this._preferLocalStorage?this.writeModuleStorage:this.writeModuleCookie).bind(this),n=(this._preferLocalStorage?this.readModuleCookie:this.readModuleStorage).bind(this),i=t();if(i){if("string"==typeof i){var o=n();if(o&&"object"===(0,c.default)(o))return this._logInfo("".concat(e," contained a basic token, but found a refreshable token fallback. Copying the fallback value to ").concat(e,".")),r(o),o}}else{var a=n();if(a)return this._logInfo("".concat(e," was empty, but found a fallback value.")),"object"===(0,c.default)(a)&&(this._logInfo("Copying the fallback value to ".concat(e,".")),r(a)),a}return i}}]);function m(e,t,r,n,i,o){return i("UID2 base url provided: ",e),new g({baseUrl:e},r,i,o).callRefreshApi(t).then(function(e){i("Refresh endpoint responded with:",e);var r={originalToken:t,latestToken:e.identity},o=n.getStoredValueWithFallback();return null!=o&&o.originalIdentity&&(r.originalIdentity=o.originalIdentity),n.storeValue(r),r})}(0,u.registerModule)("uid2IdSystem_shared")},186:function(e,t,r){"use strict";var n,i=r(9895),o=r(1235),a=r(1634),s=r(8705);function d(e){if(!e)return null;var t=e.gdprApplies?"1":"0",r=e.consentString?e.consentString:"";return"gdpr=".concat(t,"&gdprstr=").concat(r)}var c={code:"undertone",gvlid:677,supportedMediaTypes:[s.BANNER,s.VIDEO],isBidRequestValid:function(e){if(e&&e.params&&e.params.publisherId)return e.params.publisherId=parseInt(e.params.publisherId),!0},buildRequests:function(e,t){var r=Math.max(document.documentElement.clientWidth,window.innerWidth||0),n=Math.max(document.documentElement.clientHeight,window.innerHeight||0),i={adapterVersion:"9.17.0",uids:e[0].userId,pageSize:0==r||0==n?null:[r,n]};e[0].schain&&(i.schain=e[0].schain);var a={"x-ut-hb-params":[],commons:i},c=t.refererInfo.topmostLocation,u=t.refererInfo.canonicalUrl;c&&(i.referrer=c),u&&(i.canonicalUrl=u);var l=(0,o.parseUrl)(c).hostname,p=(0,o.extractDomainFromHost)(l),f=u||c,g=e[0].params.publisherId,v="".concat("https://hb.undertone.com/hb","?pid=").concat(g,"&domain=").concat(p),m=d(t.gdprConsent);if(m&&(v+="&".concat(m)),t.uspConsent&&(v+="&ccpa=".concat(t.uspConsent)),t.gppConsent){var b,h,y=null!==(b=t.gppConsent.gppString)&&void 0!==b?b:"",A=null!==(h=t.gppConsent.applicableSections)&&void 0!==h?h:"";v+="&gpp=".concat(y,"&gpp_sid=").concat(A)}return e.map(function(e){var t={bidRequestId:e.bidId,coordinates:function(e){var t=document.getElementById(e),r=-1,n=-1;if(!t)return null;r=t.offsetLeft,n=t.offsetTop;var i=t.offsetParent;return i&&(r+=i.offsetLeft,n+=i.offsetTop),[r,n]}(e.adUnitCode),hbadaptor:"prebid",url:f,domain:p,placementId:void 0!=e.params.placementId?e.params.placementId:null,publisherId:e.params.publisherId,gpid:(0,o.deepAccess)(e,"ortb2Imp.ext.gpid",(0,o.deepAccess)(e,"ortb2Imp.ext.data.pbadslot","")),sizes:e.params.size,params:e.params},r=(0,o.deepAccess)(e,"mediaTypes.video"),n=r?s.VIDEO:s.BANNER;t.mediaType=n,t.bidfloor=function(e,t){if("function"!=typeof e.getFloor)return 0;var r=e.getFloor({currency:"USD",mediaType:t,size:"*"});return r&&"USD"===r.currency&&r.floor||0}(e,n),r&&(t.video={playerSize:(0,o.deepAccess)(e,"mediaTypes.video.playerSize")||null,streamType:(0,o.deepAccess)(e,"mediaTypes.video.context")||null,playbackMethod:(0,o.deepAccess)(e,"params.video.playbackMethod")||null,maxDuration:(0,o.deepAccess)(e,"params.video.maxDuration")||null,skippable:(0,o.deepAccess)(e,"params.video.skippable")||null,placement:(0,o.deepAccess)(e,"mediaTypes.video.placement")||null,plcmt:(0,o.deepAccess)(e,"mediaTypes.video.plcmt")||null}),a["x-ut-hb-params"].push(t)}),{method:"POST",url:v,withCredentials:!0,data:JSON.stringify(a)}},interpretResponse:function(e,t){var r=[],n=e.body;return n&&Array.isArray(n)&&n.length>0&&n.forEach(function(e){if(e.ad&&e.cpm>0){var t={requestId:e.bidRequestId,cpm:e.cpm,width:e.width,height:e.height,creativeId:e.adId,currency:e.currency,netRevenue:e.netRevenue,ttl:e.ttl||360,meta:{advertiserDomains:e.adomain?e.adomain:[]}};e.mediaType&&"video"===e.mediaType?(t.vastXml=e.ad,t.mediaType=e.mediaType):t.ad=e.ad,r.push(t)}}),r},getUserSyncs:function(e,t,r,n){var i=[],o=d(r),a="",s="";return o&&(a+="?".concat(o),s+="&".concat(o)),n&&(""!=a?a+="&":a+="?",a+="ccpa=".concat(n),s+="&ccpa=".concat(n)),e.iframeEnabled?i.push({type:"iframe",url:"https://cdn.undertone.com/js/usersync.html"+a}):e.pixelEnabled&&i.push({type:"image",url:"https://usr.undertone.com/userPixel/syncOne?id=1&of=2"+s},{type:"image",url:"https://usr.undertone.com/userPixel/syncOne?id=2&of=2"+s}),i}};(0,a.registerBidder)(c),(0,i.registerModule)("undertoneBidAdapter")},5150:function(e,t,r){"use strict";var n,i=r(1640),o=i(r(9837)),a=r(9895),s=r(1235),d=r(721),c=r(2885),u=r(341);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var p="unifiedId",f={name:p,gvlid:21,decode:function(e){return e&&"string"==typeof e.TDID?{tdid:e.TDID}:void 0},getId:function(e){var t=e&&e.params||{};if(!t||"string"!=typeof t.partner&&"string"!=typeof t.url){(0,s.logError)("User ID - unifiedId submodule requires either partner or url to be defined");return}var r=t.url||"https://match.adsrvr.org/track/rid?ttd_pid=".concat(t.partner,"&fmt=json");return{callback:function(e){(0,d.ajax)(r,{success:function(t){var r;if(t)try{r=JSON.parse(t)}catch(e){(0,s.logError)(e)}e(r)},error:function(t){(0,s.logError)("".concat(p,": ID fetch encountered an error"),t),e()}},void 0,{method:"GET",withCredentials:!0})}}},eids:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},u.UID1_EIDS)};(0,c.submodule)("userId",f),(0,a.registerModule)("unifiedIdSystem")},8579:function(e,t,r){"use strict";var n,i=r(1640),o=i(r(9837)),a=i(r(4973)),s=r(9895),d=r(1235),c=r(4389),u=r(1634),l=r(8705),p=["bids","bidderRequestId","bidderCode"];function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var v=function(e){Object.keys(e.mediaTypes).forEach(function(t){var r;r="function"==typeof e.getFloor?e.getFloor({currency:"USD",mediaType:t,size:"*"}).floor||0:e.params.floor||0,e.mediaTypes[t].floor=r})},m=function(e){var t=(0,d.deepAccess)(e,"mediaTypes.banner");if(t){var r={},n=[];t.sizes.forEach(function(e){!r[e.toString()]&&(r[e.toString()]=!0,n.push(e))}),t.sizes=n}},b=function(e,t){!t&&e.ortb2Imp&&e.ortb2Imp.ext&&delete e.ortb2Imp.ext.ae},h=function(e,t,r){r.bids,r.bidderRequestId,r.bidderCode;var n=(0,a.default)(r,p),i=r.bids.length-t.length,o={};t.forEach(function(t){var r=t.params.siteId;v(t),m(t),b(t,e.protectedAudienceEnabled),o[r]=o[r]||[],o[r].push(t)});var s=[];return Object.keys(o).forEach(function(t){var r={bidderRequest:Object.assign({},g({bids:o[t],invalidBidsCount:i,prebidVersion:"9.17.0"},n))};s.push(Object.assign({},g({data:r},e)))}),s},y=function(e){var t=[];return e.forEach(function(e){var r,n=(0,d.deepAccess)(e,"meta.mediaType");if(n&&"banner"===n.toLowerCase())e.mediaType=l.BANNER,r=A(e);else if(n&&"video"===n.toLowerCase()){var i=(0,d.deepAccess)(e,"meta.videoContext");e.mediaType=l.VIDEO,"instream"===i?r=I(e):"outstream"===i&&(r=E(e))}r&&t.push(r)}),t},A=function(e){if(!e.ad){(0,d.logError)(Error("UnrulyBidAdapter: Missing ad config."));return}return e},I=function(e){if(!(e.vastUrl||e.vastXml)){(0,d.logError)(Error("UnrulyBidAdapter: Missing vastUrl or vastXml config."));return}return e},E=function(e){var t=!!(0,d.deepAccess)(e,"ext.renderer.config"),r=!!(0,d.deepAccess)(e,"ext.renderer.config.siteId");if(!t){(0,d.logError)(Error("UnrulyBidAdapter: Missing renderer config."));return}if(!r){(0,d.logError)(Error("UnrulyBidAdapter: Missing renderer siteId."));return}var n=(0,d.deepAccess)(e,"ext.renderer");!function(e,t){if(!e.config)throw Error("UnrulyBidAdapter: Missing renderer config.");if(!e.config.siteId)throw Error("UnrulyBidAdapter: Missing renderer siteId.");parent.window.unruly=parent.window.unruly||{},parent.window.unruly.native=parent.window.unruly.native||{},parent.window.unruly.native.siteId=parent.window.unruly.native.siteId||e.config.siteId,parent.window.unruly.native.adSlotId=t,parent.window.unruly.native.supplyMode="prebid"}(n,e.requestId),parent.window.unruly.native.prebid=parent.window.unruly.native.prebid||{},parent.window.unruly.native.prebid.uq=parent.window.unruly.native.prebid.uq||[];var i=c.Renderer.install(Object.assign({},n)),o=Object.assign({},e,{renderer:i,adUnitCode:(0,d.deepAccess)(e,"ext.adUnitCode")});return i.setRender(function(){var e;e=o,parent.window.unruly.native.prebid.uq.push(["render",e])}),e.renderer=e.renderer||i,e},S=function(e){var t=(0,d.deepAccess)(e,"mediaTypes.video"),r=(0,d.deepAccess)(e,"mediaTypes.banner"),n=!!(t||r);return n&&t&&(n=O(t)),n&&r&&(n=_(r)),n},O=function(e){return!!e.context&&-1!==["outstream","instream"].indexOf(e.context)},_=function(e){return e.sizes},T={code:"unruly",supportedMediaTypes:[l.VIDEO,l.BANNER],gvlid:36,isBidRequestValid:function(e){return!!((0,d.deepAccess)(e,"params.siteId")&&S(e))},buildRequests:function(e,t){var r,n="https://targeting.unrulymedia.com/unruly_prebid";return e[0]&&(n=(0,d.deepAccess)(e[0],"params.endpoint")||n),h({url:n,method:"POST",options:{contentType:"application/json"},protectedAudienceEnabled:null===(r=t.paapi)||void 0===r?void 0:r.enabled},e,t)},interpretResponse:function(e){if(!(e&&e.body&&(e.body.auctionConfigs||e.body.bids)))return[];var t=e.body,r=[],n=null;if(t.bids.length&&(r=y(t.bids)),t.auctionConfigs){var i=t.auctionConfigs,o=Object.keys(i);o.length&&o.forEach(function(e){n=[{bidId:e,config:i[e]}]})}return n?{bids:r,paapi:n}:r}};(0,u.registerBidder)(T),(0,s.registerModule)("unrulyBidAdapter")},7624:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.EID_CONFIG=void 0,t.createEidsArray=d,t.getEids=function(e){var t=new Map,r={};return Object.entries(e).forEach(function(e){var n,o=(0,i.default)(e,2),a=o[0],s=o[1].find(function(e){var t;return(null===(t=e.idObj)||void 0===t?void 0:t[a])!=null});s&&(r[a]=s.idObj[a],t.set(a,null===(n=s.submodule.eids)||void 0===n?void 0:n[a]))}),d(r,t)};var i=n(r(4763)),o=n(r(4995)),a=r(1235),s=t.EID_CONFIG=new Map;function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,r={};function n(e){var t,n,i=JSON.stringify([null===(t=e.source)||void 0===t?void 0:t.toLowerCase(),e.ext]);r.hasOwnProperty(i)?(n=r[i].uids).push.apply(n,(0,o.default)(e.uids)):r[i]=e}return Object.entries(e).forEach(function(e){var r=(0,i.default)(e,2),o=r[0],s=r[1];s=Array.isArray(s)?s:[s],("pubProvidedId"===o?(0,a.deepClone)(s):s.map(function(e){return function(e,t,r){if(r&&e){var n={};n.source=(0,a.isFn)(r.getSource)?r.getSource(e):r.source;var i=(0,a.isFn)(r.getValue)?r.getValue(e):e;if((0,a.isStr)(i)){var o={id:i,atype:r.atype};if("uidapi.com"===r.source&&r.bridged&&(n.mm=5,n.inserter="cafemedia.com",n.matcher="cafemedia.com"),(0,a.isFn)(r.getUidExt)){var s=r.getUidExt(e);s&&(o.ext=s)}if(n.uids=[o],(0,a.isFn)(r.getEidExt)){var d=r.getEidExt(e);d&&(n.ext=d)}return n}}return null}(e,0,t.get(o))})).filter(function(e){return null!=e}).forEach(n)}),Object.values(r)}},1103:function(e,t,r){"use strict";var n,i,o,a,s,d,c,u,l,p=r(1640),f=r(7251),g=p(r(4995)),v=p(r(7251)),m=p(r(4763)),b=r(9895),h=r(7448),y=r(3408),A=V(r(56)),I=V(r(9293)),E=r(2778),S=r(2885),O=r(7624),_=r(4288),T=r(1235),w=r(620),C=r(6607),x=r(647),P=r(4018),D=r(5087),R=r(5723),j=r(7565),k=r(7939),N=r(1676),U=r(1053),B=r(7027);function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(M=function(e){return e?r:t})(e)}function V(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=f(e)&&"function"!=typeof e)return{default:e};var r=M(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&({}).hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var q="User ID",L=_.STORAGE_TYPE_COOKIES,F=_.STORAGE_TYPE_LOCALSTORAGE,G="_pbjs_id_optout",z=(0,_.getCoreStorageManager)("userId"),W={isAllowed:j.isActivityAllowed},Y=!1,H=[],J=[],K={},Q=[];var $=function(){return null==n&&(n=(0,x.newMetrics)()),n};function X(e){return $().fork().renameWith(function(t){return["userId.mod.".concat(t),"userId.mods.".concat(e,".").concat(t)]})}function Z(e,t){t=t||e.storageMgr;var r="function"==typeof e.submodule.domainOverride?e.submodule.domainOverride():null,n=e.config.storage.name;return function(e,i,o){t.setCookie(n+(e||""),i,o,"Lax",r)}}function ee(e,t){var r=e.config.storage;try{var n=new Date(Date.now()+864e5*r.expires).toUTCString(),i=(0,T.isPlainObject)(t)?JSON.stringify(t):t;e.enabledStorageTypes.forEach(function(t){var r,o,a,s,d,c,u,l,p,f;switch(t){case L:;r=e,o=i,a=n,s=r.config.storage,(d=Z(r))(null,o,a),d("_cst",ey(),a),"number"==typeof s.refreshInSeconds&&d("_last",new Date().toUTCString(),a);break;case F:;c=e,u=i,l=n,p=c.config.storage,(f=c.storageMgr).setDataInLocalStorage("".concat(p.name,"_exp"),l),f.setDataInLocalStorage("".concat(p.name,"_cst"),ey()),f.setDataInLocalStorage(p.name,encodeURIComponent(u)),"number"==typeof p.refreshInSeconds&&f.setDataInLocalStorage("".concat(p.name,"_last"),new Date().toUTCString())}})}catch(e){(0,T.logError)(e)}}function et(e){e_(e),e.enabledStorageTypes.forEach(function(t){var r,n,i;switch(t){case L:;r=Z(e,z),n=new Date(Date.now()-864e5).toUTCString(),["","_last","_cst"].forEach(function(e){try{r(e,"",n)}catch(e){(0,T.logError)(e)}});break;case F:;i=e,["","_last","_exp","_cst"].forEach(function(e){try{z.removeDataFromLocalStorage(i.config.storage.name+e)}catch(e){(0,T.logError)(e)}})}})}function er(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=e.config.storage,i=r?"".concat(n.name,"_").concat(r):n.name;try{e.enabledStorageTypes.find(function(r){var n,o,a,s,d,c,u;switch(r){case L:;n=e,o=i,t=n.storageMgr.getCookie(o);break;case F:;a=e,s=i,d=a.storageMgr,c=a.config.storage,u=d.getDataFromLocalStorage("".concat(c.name,"_exp")),t=""===u?d.getDataFromLocalStorage(s):u&&new Date(u).getTime()-Date.now()>0?decodeURIComponent(d.getDataFromLocalStorage(s)):void 0}return!!t}),"string"==typeof t&&"{"===t.trim().charAt(0)&&(t=JSON.parse(t))}catch(e){(0,T.logError)(e)}return t}function en(e,t,r){t=$().fork().startTiming("userId.callbacks.total").stopBefore(t);var n=(0,T.delayExecution)(function(){clearTimeout(a),t()},e.length);e.forEach(function(e){var t=X(e.submodule.name).startTiming("callback").stopBefore(n);try{e.callback(function(n){n?(e.config.storage&&ee(e,n),e.idObj=e.submodule.decode(n,e.config),r.refresh(),eA(r)):(0,T.logInfo)("".concat(q,": ").concat(e.submodule.name," - request id responded with an empty value")),t()},er.bind(null,e))}catch(r){(0,T.logError)("Error in userID module '".concat(e.submodule.name,"':"),r),t()}e.callback=void 0})}function ei(e){return Object.fromEntries(Object.entries(e).map(function(e){var t,r=(0,m.default)(e,2),n=r[0];return[n,null===(t=r[1].find(function(e){var t;return(null===(t=e.idObj)||void 0===t?void 0:t[n])!=null}))||void 0===t||null===(t=t.idObj)||void 0===t?void 0:t[n]]}).filter(function(e){var t=(0,m.default)(e,2);return null!=(t[0],t[1])}))}function eo(e,t,r){var n={};return e.forEach(function(e){var i=r(e),o=function(e){if(e.primaryIds)return e.primaryIds;var t,r=Object.keys(null!==(t=e.eids)&&void 0!==t?t:{});if(r.length>1)throw Error("ID submodule ".concat(e.name," can provide multiple IDs, but does not specify 'primaryIds'"));return r}(i);t(e).forEach(function(t){var r,a,s,d=n[t]=null!==(r=n[t])&&void 0!==r?r:[],c=null!==(a=null===(s=K[t])||void 0===s?void 0:s.indexOf(i.name))&&void 0!==a?a:o.includes(t)?0:-1,u=d.findIndex(function(e){return(0,m.default)(e,1)[0]<c});d.splice(-1===u?d.length:u,0,[c,e])})}),Object.fromEntries(Object.entries(n).map(function(e){var t=(0,m.default)(e,2);return[t[0],t[1].map(function(e){var t=(0,m.default)(e,2);return t[0],t[1]})]}))}function ea(e){var t,r,n=e.global,i=e.bidder,a=o,s=a.global,d=a.bidder,c=(0,O.getEids)(s);return c.length>0&&(0,T.deepSetValue)(n,"user.ext.eids",(null!==(t=null===(r=n.user)||void 0===r||null===(r=r.ext)||void 0===r?void 0:r.eids)&&void 0!==t?t:[]).concat(c)),Object.entries(d).forEach(function(e){var t,r,n=(0,m.default)(e,2),o=n[0],a=n[1],s=(0,O.getEids)(a);s.length>0&&(0,T.deepSetValue)(i,"".concat(o,".user.ext.eids"),(null!==(t=null===(r=i[o])||void 0===r||null===(r=r.user)||void 0===r||null===(r=r.ext)||void 0===r?void 0:r.eids)&&void 0!==t?t:[]).concat(s))}),e}var es={};function ed(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:el()||[],t=c&&e.find(function(e){return e.source===c});if(t&&"string"==typeof(0,T.deepAccess)(t,"uids.0.id")){var r=t.uids[0].id.replace(/[\W_]/g,"");if(r.length>=32&&r.length<=150)return r;(0,T.logWarn)("User ID - Googletag Publisher Provided ID for ".concat(c," is not between 32 and 150 characters - ").concat(r))}}var ec=(0,x.timedAuctionHook)("userId",function(e,t){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.delay,a=void 0===i?C.GreedyPromise.timeout:i,s=n.getIds,c=void 0===s?eh:s;C.GreedyPromise.race([c().catch(function(){return null}),a(d)]).then(function(){!function(e){var t,r,n=e.adUnits,i=e.ortb2Fragments;if(ea(i=null!==(t=i)&&void 0!==t?t:{global:{},bidder:{}}),![n].some(function(e){return!Array.isArray(e)||!e.length})){var a=ei(o.global),s=(null===(r=i.global.user)||void 0===r||null===(r=r.ext)||void 0===r?void 0:r.eids)||[];n.forEach(function(e){e.bids&&(0,T.isArray)(e.bids)&&e.bids.forEach(function(e){var t,r,n=Object.assign({},a,ei(null!==(t=o.bidder[e.bidder])&&void 0!==t?t:{})),d=s.concat((null===(r=i.bidder[e.bidder])||void 0===r||null===(r=r.user)||void 0===r||null===(r=r.ext)||void 0===r?void 0:r.eids)||[]);Object.keys(n).length>0&&(e.userId=n),d.length>0&&(e.userIdAsEids=d)})})}}(t),$().join((0,x.useMetrics)(t.metrics),{propagate:!1,includeGroups:!0}),e.call(r,t)})});function eu(){return ei(o.combined)}function el(){return(0,O.getEids)(o.combined)}function ep(e){return el().filter(function(t){return t.source===e})[0]}function ef(e,t,r){return em().then(function(){var n={};if((0,T.isFn)(r)){(0,T.logInfo)("".concat(q," - Getting encrypted signal from custom function : ").concat(r.name," & source : ").concat(e," "));var i=r(e);n[e]=i?eg(i):null}else{var o=ep(e);(0,T.logInfo)("".concat(q," - Getting encrypted signal for eids :").concat(JSON.stringify(o))),!(0,T.isEmpty)(o)&&(n[o.source]=!0===t?eg(o):o.uids[0].id)}return(0,T.logInfo)("".concat(q," - Fetching encrypted eids: ").concat(n[e])),n[e]})}function eg(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r="";if(1===t)r="object"===(0,v.default)(e)?window.btoa(JSON.stringify(e)):window.btoa(e);return"".concat(t,"||").concat(r)}function ev(){if(!!(0,T.isGptPubadsDefined)()){window.googletag.secureSignalProviders=window.googletag.secureSignalProviders||[];var e=y.config.getConfig("userSync.encryptedSignalSources");e?setTimeout(function(){e.sources&&e.sources.forEach(function(e){var t=e.source,r=e.encrypt,n=e.customFunc;t.forEach(function(e){window.googletag.secureSignalProviders.push({id:e,collectorFunction:function(){return ef(e,r,n)}})})})},e.registerDelay||0):(0,T.logWarn)("".concat(q," - ESP : encryptedSignalSources config not defined under userSync Object"))}}function em(e){return l(e).then(function(){return eu()},function(e){return e===es?Promise.resolve().then(eh):((0,T.logError)("Error initializing userId",e),C.GreedyPromise.reject(e))})}function eb(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.submoduleNames,r=arguments.length>1?arguments[1]:void 0;return em({refresh:!0,submoduleNames:t}).then(function(e){return r&&(0,T.isFn)(r)&&r(),e})}function eh(){return em()}function ey(){for(var e=Number(D.allConsent.hash),t=[];e>0;)t.push(String.fromCharCode(255&e)),e>>>=8;return btoa(t.join())}function eA(e){var t=(0,O.getEids)(e.combined);if(t.length&&c){var r=ed(t);r&&((0,T.isGptPubadsDefined)()?window.googletag.pubads().setPublisherProvidedId(r):(window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.googletag.cmd.push(function(){window.googletag.pubads().setPublisherProvidedId(r)})))}}function eI(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return $().fork().measureTime("userId.init.modules",function(){if(!t.length)return[];if(t.forEach(function(e){return e_(e)}),!(t=t.filter(function(e){return(!e.config.storage||function(e){return!!e.enabledStorageTypes.length}(e))&&W.isAllowed(k.ACTIVITY_ENRICH_EIDS,(0,N.activityParams)(R.MODULE_TYPE_UID,e.config.name))})).length)return(0,T.logWarn)("".concat(q," - no ID module configured")),[];var n=t.reduce(function(e,t){return X(t.submodule.name).measureTime("init",function(){try{!function(e,t){var r=I.gdprDataHandler.getConsentData();if(e.config.storage){var n,i,o=er(e),a=!1;if("number"==typeof e.config.storage.refreshInSeconds){var s=new Date(er(e,"last"));a=s&&Date.now()-s.getTime()>1e3*e.config.storage.refreshInSeconds}if(o&&!a&&!t&&(n=er(e,"cst"))&&n===ey())"function"==typeof e.submodule.extendId&&(i=e.submodule.extendId(e.config,r,o));else{var d=Object.assign({enabledStorageTypes:e.enabledStorageTypes},e.config);i=e.submodule.getId(d,r,o)}(0,T.isPlainObject)(i)&&(i.id&&(ee(e,i.id),o=i.id),"function"==typeof i.callback&&(e.callback=i.callback)),o&&(e.idObj=e.submodule.decode(o,e.config))}else if(e.config.value)e.idObj=e.config.value;else{var c=e.submodule.getId(e.config,r,void 0);(0,T.isPlainObject)(c)&&("function"==typeof c.callback&&(e.callback=c.callback),c.id&&(e.idObj=e.submodule.decode(c.id,e.config)))}}(t,r),e.push(t)}catch(e){(0,T.logError)("Error in userID module '".concat(t.submodule.name,"':"),e)}return e})},[]);return e.refresh(n),eA(e),n})}function eE(e){var t;return(null==e||null===(t=e.storage)||void 0===t||null===(t=t.type)||void 0===t?void 0:t.trim().split(/\s*&\s*/))||[]}function eS(e){function t(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];T.logWarn.apply(void 0,["Invalid userSync.userId config: ".concat(e)].concat(r))}return Array.isArray(e)?e.filter(function(e){if(!(null!=e&&e.name))return t('must specify "name"',e);if(e.storage){if(!e.storage.name||!e.storage.type)return t('must specify "storage.name" and "storage.type"',e);if(!eE(e).every(function(e){return eO.has(e)}))return t('invalid "storage.type"',e);["expires","refreshInSeconds"].forEach(function(r){var n=e.storage[r];null!=n&&"number"!=typeof n&&(isNaN(n=Number(n))?(t("storage.".concat(r," must be a number and will be ignored"),e),delete e.storage[r]):e.storage[r]=n)})}return!0}):(null!=e&&t("must be an array",e),[])}var eO=new Set([F,L]);function e_(e){if(!e.enabledStorageTypes){var t=eE(e.config);e.enabledStorageTypes=t.filter(function(t){switch(t){case F:return!!e.storageMgr.localStorageIsEnabled()&&(!z.getDataFromLocalStorage(G)||((0,T.logInfo)("".concat(q," - opt-out localStorage found, storage disabled")),!1));case L:return!!e.storageMgr.cookiesAreEnabled()&&(!z.getCookie(G)||((0,T.logInfo)("".concat(q," - opt-out cookie found, storage disabled")),!1))}return!1})}}function eT(e){O.EID_CONFIG.clear(),Object.entries(eo(e,function(e){return Object.keys(e.eids||{})},function(e){return e})).forEach(function(e){var t=(0,m.default)(e,2),r=t[0],n=t[1];return O.EID_CONFIG.set(r,n[0].eids[r])})}function ew(){eT(Q);var e=eS(J);if(!!e.length){var t=Q.filter(function(e){return!(0,h.find)(H,function(t){return t.name===e.name})});H.splice(0,H.length),t.map(function(t){var r=(0,h.find)(e,function(e){return e.name&&(e.name.toLowerCase()===t.name.toLowerCase()||t.aliasName&&e.name.toLowerCase()===t.aliasName.toLowerCase())});return r&&t.name!==r.name&&(r.name=t.name),r?{submodule:t,config:r,callback:void 0,idObj:void 0,storageMgr:(0,_.getStorageManager)({moduleType:R.MODULE_TYPE_UID,moduleName:r.name})}:null}).filter(function(e){return null!==e}).forEach(function(e){return H.push(e)}),H.length&&(!Y&&(B.startAuction.before(ec,100),I.default.callDataDeletionRequest.before(eC),w.getPPID.after(function(e){return e(ed())}),Y=!0),(0,T.logInfo)("".concat(q," - usersync config updated for ").concat(H.length," submodules: "),H.map(function(e){return e.submodule.name})))}}function eC(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];(0,T.logInfo)("UserID: received data deletion request; deleting all stored IDs..."),H.forEach(function(e){if("function"==typeof e.submodule.onDataDeletionRequest)try{var t;(t=e.submodule).onDataDeletionRequest.apply(t,[e.config,e.idObj].concat(r))}catch(t){(0,T.logError)("Error calling onDataDeletionRequest for ID submodule ".concat(e.submodule.name),t)}et(e)}),e.apply(this,r)}function ex(e){e.findRootDomain=P.findRootDomain,!(0,h.find)(Q,function(t){return t.name===e.name})&&(Q.push(e),D.GDPR_GVLIDS.register(R.MODULE_TYPE_UID,e.name,e.gvlid),ew(),l({refresh:!0,submoduleNames:[e.name]}))}function eP(e){return function(){return Promise.resolve(e.apply(this,arguments))}}function eD(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.delay,i=void 0===n?C.GreedyPromise.timeout:n;c=void 0,H=[],J=[],o=t={submodules:[],global:{},bidder:{},combined:{},refresh:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=new Set(e.map(function(e){return e.submodule}));t.submodules=t.submodules.filter(function(e){return!r.has(e.submodule)}).concat(e),function(){var e=eo(t.submodules,function(e){var t;return Object.keys(null!==(t=e.idObj)&&void 0!==t?t:{})},function(e){return e.submodule}),r={},n={};Object.entries(e).forEach(function(e){var t=(0,m.default)(e,2),i=t[0],o=t[1],a=!0,s=new Set;o.map(function(e){return e.config.bidders}).forEach(function(e){Array.isArray(e)&&e.length>0?e.forEach(function(e){return s.add(e)}):a=!1}),s.size>0&&!a?(0,T.logWarn)("userID modules ".concat(o.map(function(e){return e.submodule.name}).join(", ")," provide the same ID ('").concat(i,"'), but are configured for different bidders. ID will be skipped.")):0===s.size?r[i]=o:s.forEach(function(e){var t;n[e]=null!==(t=n[e])&&void 0!==t?t:{},n[e][i]=o})});var i=Object.values(n).concat([r]).reduce(function(e,t){return Object.assign(e,t)},{});Object.assign(t,{global:r,bidder:n,combined:i})}()}},l=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.delay,i=void 0===n?C.GreedyPromise.timeout:n,a=(0,C.defer)(),c=(0,C.defer)(),u=!1;function l(r){return t=$().fork(),null!=e&&e.reject(es),e=(0,C.defer)(),C.GreedyPromise.race([r,e.promise]).finally(t.startTiming("userId.total"))}var p=o,f=H;function g(e){return function(){if(p===o&&f===H)return e.apply(void 0,arguments)}}function v(){return D.allConsent.promise.finally(t.startTiming("userId.init.consent"))}var m=l(C.GreedyPromise.all([S.ready,a.promise]).then(v).then(g(function(){eI(p,f)})).then(function(){return c.promise.finally(t.startTiming("userId.callbacks.pending"))}).then(g(function(){var e=p.submodules.filter(function(e){return(0,T.isFn)(e.callback)});if(e.length)return new C.GreedyPromise(function(t){return en(e,t,p)})})));return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refresh,r=e.submoduleNames,n=void 0===r?null:r,o=e.ready;return void 0!==o&&o&&!u&&(u=!0,a.resolve(),d>0?c.resolve():A.on(E.EVENTS.AUCTION_END,function e(){A.off(E.EVENTS.AUCTION_END,e),i(s).then(c.resolve)})),void 0!==t&&t&&u&&(m=l(m.catch(function(){return null}).then(v).then(g(function(){var e=eI(p,f.filter(function(e){return null==n||n.includes(e.submodule.name)}),!0).filter(function(e){return null!=e.callback});if(e.length)return new C.GreedyPromise(function(t){return en(e,t,p)})})))),m}}({delay:i}),null!=u&&u(),Q=[],u=e.getConfig("userSync",function(e){var t=e.userSync;t&&(c=t.ppid,t.userIds&&(J=t.userIds,s=(0,T.isNumber)(t.syncDelay)?t.syncDelay:U.USERSYNC_DEFAULT_CONFIG.syncDelay,d=(0,T.isNumber)(t.auctionDelay)?t.auctionDelay:U.USERSYNC_DEFAULT_CONFIG.auctionDelay,ew(),!function(e,t){if(e){var r={},n=new Map(t.map(function(e){return e.aliasName?[e.aliasName,e.name]:[]}));Object.keys(e).forEach(function(t){var i=(0,T.isArray)(e[t])?(0,g.default)(e[t]).reverse():[];r[t]=i.map(function(e){return n.has(e)?n.get(e):e})}),K=r}else K={};o.refresh(),eT(t)}(t.idPriority,Q),l({ready:!0})))}),(0,b.getGlobal)().getUserIds=eu,(0,b.getGlobal)().getUserIdsAsEids=el,(0,b.getGlobal)().getEncryptedEidsForSource=eP(ef),(0,b.getGlobal)().registerSignalSources=ev,(0,b.getGlobal)().refreshUserIds=eP(eb),(0,b.getGlobal)().getUserIdsAsync=eP(eh),(0,b.getGlobal)().getUserIdsAsEidBySource=ep}eD(y.config),(0,S.module)("userId",ex,{postInstallAllowed:!0}),(0,b.registerModule)("userId")},7954:function(e,t,r){"use strict";var n,i=r(1640),o=i(r(9837)),a=i(r(4763)),s=r(9895),d=r(1634),c=r(8705),u=r(1235),l=r(3408),p=r(4389),f=r(1270);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var v="9.17.0",m=["admixer.net","adserver.org","adtelligent.com","akamai.com","amxdt.net","audigent.com","britepool.com","criteo.com","crwdcntrl.net","deepintent.com","epsilon.com","hcn.health","id5-sync.com","idx.lat","intentiq.com","intimatemerger.com","liveintent.com","liveramp.com","mediawallahscript.com","merkleinc.com","netid.de","neustar.biz","nextroll.com","novatiq.com","pubcid.org","quantcast.com","tapad.com","uidapi.com","yahoo.com","zeotap.com"];function b(e,t){var r=e.bidder||e.bidderCode;return l.config.getConfig("".concat(r,".").concat(t))}function h(e){return{w:parseInt(e[0]),h:parseInt(e[1])}}function y(e){return(0,u.isArray)(e)&&2===e.length&&!(0,u.isArray)(e[0])?[h(e)]:e.map(h)}function A(e){var t;return(0,u.deepAccess)(e,"params.pubId")?t=!0:(0,u.deepAccess)(e,"params.dcn")&&(0,u.deepAccess)(e,"params.pos")&&(t=!1),t}function I(e){var t=b(e,"mode");if(void 0===(t=t?t.toLowerCase():void 0)||t===c.BANNER)return c.BANNER;if(t===c.VIDEO)return c.VIDEO;if("all"===t)return"*"}function E(e){var t=I(e),r={currency:(0,u.deepAccess)(e,"params.bidOverride.cur")||"USD",mediaType:t,size:"*"};return!!(0,u.isFn)(e.getFloor)&&e.getFloor(r)}function S(e,t,r,n){var i=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,o.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},n);for(var a in r)switch(e){case"string":-1!==t.indexOf(a)&&(0,u.isStr)(r[a])&&(i[a]=r[a]);break;case"number":-1!==t.indexOf(a)&&(0,u.isNumber)(r[a])&&(i[a]=r[a]);break;case"array":-1!==t.indexOf(a)&&(0,u.isArray)(r[a])&&(i[a]=r[a]);break;case"object":-1!==t.indexOf(a)&&(0,u.isPlainObject)(r[a])&&(i[a]=r[a]);break;case"objectAllKeys":(0,u.isPlainObject)(r)&&(i[a]=r[a])}return i}function O(e){return(0,u.isNumber)(e)&&e>0&&e<3600?e:300}function _(e){return(0,u.isStr)(e)&&e.length>0}function T(e,t){if(e){var r,n,i={id:(0,u.generateUUID)(),cur:[E(e).currency||(0,u.deepAccess)(t,"params.bidOverride.cur")||"USD"],imp:[],site:{page:(0,u.deepAccess)(e,"refererInfo.page")},device:{dnt:0,ua:navigator.userAgent,ip:(0,u.deepAccess)(t,"params.bidOverride.device.ip")||(0,u.deepAccess)(t,"params.ext.ip")||void 0,w:window.screen.width,h:window.screen.height},regs:{ext:{us_privacy:e.uspConsent?e.uspConsent:"",gdpr:e.gdprConsent&&e.gdprConsent.gdprApplies?1:0,gpp:e.gppConsent?e.gppConsent.gppString:"",gpp_sid:e.gppConsent?e.gppConsent.applicableSections:[]}},source:{ext:{hb:1,adapterver:"1.1.0",prebidver:v,integration:{name:"prebid.js",ver:v}},fd:1},user:{ext:{consent:e.gdprConsent&&e.gdprConsent.gdprApplies?e.gdprConsent.consentString:"",eids:(r=t,(0,u.isArray)((0,u.deepAccess)(r,"userIdAsEids"))?r.userIdAsEids.filter(function(e){return -1!==m.indexOf(e.source)}):[])}}};!0===A(t)?(i.site.publisher={id:t.params.pubId},((0,u.deepAccess)(t,"params.bidOverride.site.id")||(0,u.deepAccess)(t,"params.siteId"))&&(i.site.id=(0,u.deepAccess)(t,"params.bidOverride.site.id")||t.params.siteId)):i.site.id=t.params.dcn,null!==(n=e.ortb2)&&void 0!==n&&null!==(n=n.regs)&&void 0!==n&&n.gpp&&(i.regs.ext.gpp=e.ortb2.regs.gpp,i.regs.ext.gpp_sid=e.ortb2.regs.gpp_sid),e.ortb2&&(i=function(e,t){var r=t.ortb2,n=(0,u.deepAccess)(r,"site")||void 0,i=(0,u.deepAccess)(n,"content")||void 0,o=(0,u.deepAccess)(n,"publisher")||void 0,a=(0,u.deepAccess)(n,"content.data")||void 0,s=(0,u.deepAccess)(r,"app.content")||void 0,d=(0,u.deepAccess)(r,"app.content.data")||void 0,c=(0,u.deepAccess)(r,"user")||void 0;return n&&(0,u.isPlainObject)(n)&&(e.site=S("string",["name","domain","page","ref","keywords","search"],n,e.site),e.site=S("array",["cat","sectioncat","pagecat"],n,e.site),e.site=S("object",["ext"],n,e.site)),o&&(0,u.isPlainObject)(o)&&(e.site.publisher=S("object",["ext"],o,e.site.publisher)),i&&(0,u.isPlainObject)(i)&&(e.site.content=S("string",["id","title","series","season","genre","contentrating","language"],i,e.site.content),e.site.content=S("number",["episode","prodq","context","livestream","len"],i,e.site.content),e.site.content=S("array",["cat"],i,e.site.content),e.site.content=S("object",["ext"],i,e.site.content),a&&(0,u.isArray)(a)&&a.every(function(t){var r={};r=S("string",["id","name"],t,r),r=S("array",["segment"],t,r),r=S("object",["ext"],t,r),e.site.content.data=[],e.site.content.data.push(r)})),s&&(0,u.isPlainObject)(s)&&d&&(0,u.isArray)(d)&&d.every(function(t){var r={};r=S("string",["id","name"],t,r),r=S("array",["segment"],t,r),r=S("object",["ext"],t,r),e.app={content:{data:[]}},e.app.content.data.push(r)}),c&&(0,u.isPlainObject)(c)&&(e.user=S("string",["id","buyeruid","gender","keywords","customdata"],c,e.user),e.user=S("number",["yob"],c,e.user),e.user=S("array",["data"],c,e.user),e.user.ext=S("object",["ext"],c,e.user.ext)),e}(i,t));var o=(0,u.deepAccess)(t,"schain.nodes");return(0,u.isArray)(o)&&o.length>0&&(i.source.ext.schain=t.schain,i.source.ext.schain.nodes[0].rid=i.id),i}}function w(e,t){var r=I(e);if(t&&e){var n,i={id:e.bidId,secure:(n=e,(0,u.deepAccess)(n,"params.bidOverride.imp.secure")||"https:"===document.location.protocol?1:0),bidfloor:E(e).floor||(0,u.deepAccess)(e,"params.bidOverride.imp.bidfloor")};if(e.mediaTypes.banner&&(void 0===r||r===c.BANNER||"*"===r)&&(i.banner={mimes:e.mediaTypes.banner.mimes||["text/html","text/javascript","application/javascript","image/jpg"],format:y(e.sizes)},e.mediaTypes.banner.pos&&(i.banner.pos=e.mediaTypes.banner.pos)),e.mediaTypes.video&&(r===c.VIDEO||"*"===r)){var o=y(e.mediaTypes.video.playerSize);i.video={mimes:(0,u.deepAccess)(e,"params.bidOverride.imp.video.mimes")||e.mediaTypes.video.mimes||["video/mp4","application/javascript"],w:(0,u.deepAccess)(e,"params.bidOverride.imp.video.w")||o[0].w,h:(0,u.deepAccess)(e,"params.bidOverride.imp.video.h")||o[0].h,maxbitrate:(0,u.deepAccess)(e,"params.bidOverride.imp.video.maxbitrate")||e.mediaTypes.video.maxbitrate||void 0,maxduration:(0,u.deepAccess)(e,"params.bidOverride.imp.video.maxduration")||e.mediaTypes.video.maxduration||void 0,minduration:(0,u.deepAccess)(e,"params.bidOverride.imp.video.minduration")||e.mediaTypes.video.minduration||void 0,api:(0,u.deepAccess)(e,"params.bidOverride.imp.video.api")||e.mediaTypes.video.api||[2],delivery:(0,u.deepAccess)(e,"params.bidOverride.imp.video.delivery")||e.mediaTypes.video.delivery||void 0,pos:(0,u.deepAccess)(e,"params.bidOverride.imp.video.pos")||e.mediaTypes.video.pos||void 0,playbackmethod:(0,u.deepAccess)(e,"params.bidOverride.imp.video.playbackmethod")||e.mediaTypes.video.playbackmethod||void 0,placement:(0,u.deepAccess)(e,"params.bidOverride.imp.video.placement")||e.mediaTypes.video.placement||void 0,plcmt:(0,u.deepAccess)(e,"params.bidOverride.imp.video.plcmt")||e.mediaTypes.video.plcmt||void 0,linearity:(0,u.deepAccess)(e,"params.bidOverride.imp.video.linearity")||e.mediaTypes.video.linearity||1,protocols:(0,u.deepAccess)(e,"params.bidOverride.imp.video.protocols")||e.mediaTypes.video.protocols||[2,5],startdelay:(0,u.deepAccess)(e,"params.bidOverride.imp.video.startdelay")||e.mediaTypes.video.startdelay||0,rewarded:(0,u.deepAccess)(e,"params.bidOverride.imp.video.rewarded")||void 0}}if(i.ext={dfp_ad_unit_code:e.adUnitCode},(0,u.deepAccess)(e,"params.kvp")&&(0,u.isPlainObject)(e.params.kvp)){for(var a in i.ext.kvs={},e.params.kvp)if((0,u.isStr)(e.params.kvp[a])||(0,u.isNumber)(e.params.kvp[a]))i.ext.kvs[a]=e.params.kvp[a];else if((0,u.isArray)(e.params.kvp[a])){var s=e.params.kvp[a];(s.every(function(e){return(0,u.isStr)(e)})||s.every(function(e){return(0,u.isNumber)(e)}))&&(i.ext.kvs[a]=e.params.kvp[a])}}(0,u.deepAccess)(e,"ortb2Imp.ext.data")&&(0,u.isPlainObject)(e.ortb2Imp.ext.data)&&(i.ext.data=e.ortb2Imp.ext.data),(0,u.deepAccess)(e,"ortb2Imp.instl")&&(0,u.isNumber)(e.ortb2Imp.instl)&&1===e.ortb2Imp.instl&&(i.instl=e.ortb2Imp.instl),!1===A(e)?(i.tagid=e.params.pos,i.ext.pos=e.params.pos):(0,u.deepAccess)(e,"params.placementId")&&(i.tagid=e.params.placementId),t.imp.push(i)}}function C(e){var t=e.payload,r=e.requestOptions,n=e.bidderRequest,i=A(n),o=b(n,"endpoint"),a=o||"https://c2shb.pubgw.yahoo.com/bidRequest";if(!0===i&&(a=o||"https://c2shb.pubgw.yahoo.com/admax/bid/partners/PBJS"),!0===(0,u.deepAccess)(n,"params.testing.e2etest")){if((0,u.logInfo)("Adapter e2etest mode is active"),r.withCredentials=!1,!0===i)t.site.id="1234567";else{var s=I(n);t.site.id="8a969516017a7a396ec539d97f540011",t.imp.forEach(function(e){if(e.ext.e2eTestMode=!0,s===c.BANNER)e.tagid="8a969978017a7aaabab4ab0bc01a0009";else if(s===c.VIDEO)e.tagid="8a96958a017a7a57ac375d50c0c700cc";else{var t=n.bidderCode;(0,u.logWarn)("e2etest mode does not support ".concat(t,'.mode="all". \n Please specify either "banner" or "video"')),(0,u.logWarn)("Adapter e2etest mode: Please make sure your adUnit matches the ".concat(t,".mode video or banner"))}})}}return{url:a,method:"POST",data:t,options:r,bidderRequest:n}}var x={code:"yahooAds",gvlid:25,aliases:[{code:"yahoossp",gvlid:25},{code:"yahooAdvertising",gvlid:25}],supportedMediaTypes:[c.BANNER,c.VIDEO],isBidRequestValid:function(e){var t=e.params;return!0===(0,u.deepAccess)(t,"testing.e2etest")||!!((0,u.isPlainObject)(t)&&(_(t.pubId)||_(t.dcn)&&_(t.pos)))||((0,u.logWarn)("Bidder params missing or incorrect, please pass object with either: dcn & pos OR pubId"),!1)},buildRequests:function(e,t){if((0,u.isEmpty)(e)||(0,u.isEmpty)(t)){(0,u.logWarn)('buildRequests called with either empty "validBidRequests" or "bidderRequest"');return}var r,n,i,o={contentType:"application/json",customHeaders:{"x-openrtb-version":"2.5"}};o.withCredentials=(0,f.hasPurpose1Consent)(t.gdprConsent);var a=(n=I((r=e)[0]),i=[],n===c.BANNER?i=r.filter(function(e){return Object.keys(e.mediaTypes).some(function(e){return e===c.BANNER})}):n===c.VIDEO?i=r.filter(function(e){return Object.keys(e.mediaTypes).some(function(e){return e===c.VIDEO})}):"*"===n&&(i=r.filter(function(e){return Object.keys(e.mediaTypes).some(function(e){return e===c.BANNER||e===c.VIDEO})})),i);if(!0===b(t,"singleRequestMode")){var s=T(t,a[0]);return a.forEach(function(e){w(e,s)}),[C({payload:s,requestOptions:o,bidderRequest:t})]}return a.map(function(e){var r=T(t,e);return w(e,r),C({payload:r,requestOptions:o,bidderRequest:e})})},interpretResponse:function(e,t){var r=t.bidderRequest,n=[];return e.body&&Array.isArray(e.body.seatbid)?(e.body.seatbid.forEach(function(e){try{a=e.bid[0]}catch(e){return n}var t,i,o,a,s=a.ext&&a.ext.encp?a.ext.encp:a.price;var d={adId:(0,u.deepAccess)(a,"adId")?a.adId:a.impid||a.crid,requestId:a.impid,cpm:s,width:a.w,height:a.h,creativeId:a.crid||0,currency:a.cur||"USD",dealId:a.dealid?a.dealid:null,netRevenue:!0,ttl:(i=b(t=r,"ttl"))?O(i):O((0,u.deepAccess)(t,"params.ttl")),meta:{advertiserDomains:a.adomain}};var l=-1!==(o=a.adm).indexOf("o2playerSettings")||-1!==o.indexOf("YAHOO.VideoPlatform.VideoPlayer")||-1!==o.indexOf("AdPlacement")?c.BANNER:-1!==o.indexOf("VAST")?c.VIDEO:void 0;l===c.BANNER?(d.mediaType=c.BANNER,d.ad=a.adm,d.meta.mediaType=c.BANNER):l===c.VIDEO&&(d.mediaType=c.VIDEO,d.meta.mediaType=c.VIDEO,d.vastXml=a.adm),"outstream"===(0,u.deepAccess)(r,"mediaTypes.video.context")&&!r.renderer&&d.mediaType===c.VIDEO&&(d.renderer=function(e,t){var r=p.Renderer.install({url:"https://s.yimg.com/kp/prebid-outstream-renderer/renderer.js",loaded:!1,adUnitCode:e.adUnitCode});try{r.setRender(function(t){setTimeout(function(){o2PlayerRender(t)},(0,u.deepAccess)(e,"params.testing.renderer.setTimeout")||700)})}catch(e){(0,u.logWarn)("Renderer error: setRender() failed",e)}return r}(r,0)||void 0),n.push(d)}),n):n},getUserSyncs:function(e,t,r,n,i){var o=!(0,u.isEmpty)(t)&&t[0].body;if(o&&o.ext&&o.ext.pixels){var s=function(e,t){var r=/\w*(?=\s)/,n=/src=("|')(.*?)\1/,i=[];if(t){var o=t.match(/(img|iframe)[\s\S]*?src\s*=\s*("|')(.*?)\2/gi);o&&o.forEach(function(t){var o=t.match(r)[0],a=t.match(n)[2];if(o&&a){var s="img"===o.toLowerCase()?"image":"iframe";if(!e.iframeEnabled&&"iframe"===s||!e.pixelEnabled&&"image"===s)return;i.push({type:s,url:a})}})}return i}(e,o.ext.pixels);return s.forEach(function(e){e.url=function(e,t){for(var r={gdpr_consent:t.gdpr?t.gdpr.consentString:"",gdpr:t.gdpr&&t.gdpr.gdprApplies?"1":"0",us_privacy:t.uspConsent?t.uspConsent:"",gpp:t.gpp?t.gpp.gppString:"",gpp_sid:t.gpp&&Array.isArray(t.gpp.applicableSections)?t.gpp.applicableSections.join(","):""},n=new URL(e),i=n.searchParams,o=0,s=Object.entries(r);o<s.length;o++){var d=(0,a.default)(s[o],2),c=d[0],u=d[1];i.set(c,u)}return n.search=i.toString(),n.toString()}(e.url,{gpp:i,gdpr:r,uspConsent:n})}),s}return[]}};(0,d.registerBidder)(x),(0,s.registerModule)("yahooAdsBidAdapter")},4389:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Renderer=c,t.executeRenderer=function(e,t,r){var n=null;e.config&&e.config.documentResolver&&(n=e.config.documentResolver(t,document,r)),!n&&(n=document),e.documentContext=n,e.render(t,e.documentContext)},t.isRendererRequired=function(e){return!!(e&&(e.url||e.renderNow))};var n=r(8427),i=r(1235),o=r(7448),a=r(9895),s=r(5723),d=(0,a.getGlobal)();function c(e){var t=this,r=e.url,a=e.config,c=e.id,u=e.callback,l=e.loaded,p=e.adUnitCode,f=e.renderNow;this.url=r,this.config=a,this.handlers={},this.id=c,this.renderNow=f,this.loaded=l,this.cmd=[],this.push=function(e){if("function"!=typeof e){(0,i.logError)("Commands given to Renderer.push must be wrapped in a function");return}t.loaded?e.call():t.cmd.push(e)},this.callback=u||function(){t.loaded=!0,t.process()},this.render=(function(){var e=this,t=arguments,a=function(){e._render?e._render.apply(e,t):(0,i.logWarn)("No render function was provided, please use .setRender on the renderer")};(function(e){var t=d.adUnits,r=(0,o.find)(t,function(t){return t.code===e});if(!r)return!1;var n=(0,i.deepAccess)(r,"renderer"),a=!!(n&&n.url&&n.render),s=(0,i.deepAccess)(r,"mediaTypes.video.renderer"),c=!!(s&&s.url&&s.render);return!!(a&&!0!==n.backupOnly||c&&!0!==s.backupOnly)})(p)?((0,i.logWarn)("External Js not loaded by Renderer since renderer url and callback is already defined on adUnit ".concat(p)),a()):f?a():(this.cmd.unshift(a),(0,n.loadExternalScript)(r,s.MODULE_TYPE_PREBID,"outstream",this.callback,this.documentContext))}).bind(this)}c.install=function(e){return new c({url:e.url,config:e.config,id:e.id,callback:e.callback,loaded:e.loaded,adUnitCode:e.adUnitCode,renderNow:e.renderNow})},c.prototype.getConfig=function(){return this.config},c.prototype.setRender=function(e){this._render=e},c.prototype.setEventHandlers=function(e){this.handlers=e},c.prototype.handleVideoEvent=function(e){var t=e.id,r=e.eventName;"function"==typeof this.handlers[r]&&this.handlers[r](),(0,i.logMessage)("Prebid Renderer event for id ".concat(t," type ").concat(r))},c.prototype.process=function(){for(;this.cmd.length>0;)try{this.cmd.shift().call()}catch(e){(0,i.logError)("Error processing Renderer command: ",e)}}},7939:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LOAD_EXTERNAL_SCRIPT=t.ACTIVITY_TRANSMIT_UFPD=t.ACTIVITY_TRANSMIT_TID=t.ACTIVITY_TRANSMIT_PRECISE_GEO=t.ACTIVITY_TRANSMIT_EIDS=t.ACTIVITY_SYNC_USER=t.ACTIVITY_REPORT_ANALYTICS=t.ACTIVITY_FETCH_BIDS=t.ACTIVITY_ENRICH_UFPD=t.ACTIVITY_ENRICH_EIDS=t.ACTIVITY_ACCESS_DEVICE=void 0,t.ACTIVITY_ACCESS_DEVICE="accessDevice",t.ACTIVITY_SYNC_USER="syncUser",t.ACTIVITY_ENRICH_UFPD="enrichUfpd",t.ACTIVITY_ENRICH_EIDS="enrichEids",t.ACTIVITY_FETCH_BIDS="fetchBids",t.ACTIVITY_REPORT_ANALYTICS="reportAnalytics",t.ACTIVITY_TRANSMIT_EIDS="transmitEids",t.ACTIVITY_TRANSMIT_UFPD="transmitUfpd",t.ACTIVITY_TRANSMIT_PRECISE_GEO="transmitPreciseGeo",t.ACTIVITY_TRANSMIT_TID="transmitTid",t.LOAD_EXTERNAL_SCRIPT="loadExternalScript"},1676:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.activityParams=void 0;var i=n(r(9293)),o=r(492);t.activityParams=(0,o.activityParamsBuilder)(function(e){return i.default.resolveAlias(e)})},5723:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MODULE_TYPE_UID=t.MODULE_TYPE_RTD=t.MODULE_TYPE_PREBID=t.MODULE_TYPE_BIDDER=t.MODULE_TYPE_ANALYTICS=void 0,t.MODULE_TYPE_PREBID="prebid",t.MODULE_TYPE_BIDDER="bidder",t.MODULE_TYPE_UID="userId",t.MODULE_TYPE_RTD="rtd",t.MODULE_TYPE_ANALYTICS="analytics"},492:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.ACTIVITY_PARAM_SYNC_URL=t.ACTIVITY_PARAM_SYNC_TYPE=t.ACTIVITY_PARAM_STORAGE_TYPE=t.ACTIVITY_PARAM_S2S_NAME=t.ACTIVITY_PARAM_COMPONENT_TYPE=t.ACTIVITY_PARAM_COMPONENT_NAME=t.ACTIVITY_PARAM_COMPONENT=t.ACTIVITY_PARAM_ANL_CONFIG=t.ACTIVITY_PARAM_ADAPTER_CODE=void 0,t.activityParamsBuilder=function(e){return function(t,r,n){var a=(0,i.default)((0,i.default)((0,i.default)({},d,t),c,r),s,"".concat(t,".").concat(r));return t===o.MODULE_TYPE_BIDDER&&(a[u]=e(r)),l(Object.assign(a,n))}},t.buildActivityParams=void 0;var i=n(r(9837)),o=r(5723),a=r(2885),s=t.ACTIVITY_PARAM_COMPONENT="component",d=t.ACTIVITY_PARAM_COMPONENT_TYPE=s+"Type",c=t.ACTIVITY_PARAM_COMPONENT_NAME=s+"Name",u=t.ACTIVITY_PARAM_ADAPTER_CODE="adapterCode";t.ACTIVITY_PARAM_STORAGE_TYPE="storageType",t.ACTIVITY_PARAM_S2S_NAME="configName",t.ACTIVITY_PARAM_SYNC_TYPE="syncType",t.ACTIVITY_PARAM_SYNC_URL="syncUrl",t.ACTIVITY_PARAM_ANL_CONFIG="_config";var l=t.buildActivityParams=(0,a.hook)("sync",function(e){return e})},6755:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.ORTB_UFPD_PATHS=t.ORTB_IPV6_PATHS=t.ORTB_IPV4_PATHS=t.ORTB_GEO_PATHS=t.ORTB_EIDS_PATHS=void 0,t.appliesWhenActivityDenied=I,t.isData=A,t.objectTransformer=h,t.ortb2TransmitRules=E,t.redactRule=b,t.redactor=void 0,t.redactorFactory=S,t.sessionedApplies=y;var i=n(r(7251)),o=n(r(4763)),a=r(1235),s=r(3408),d=r(7565),c=r(7939),u=r(4175);function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var p=t.ORTB_UFPD_PATHS=["data","ext.data","yob","gender","keywords","kwarray","id","buyeruid","customdata"].map(function(e){return"user.".concat(e)}).concat("device.ext.cdep"),f=t.ORTB_EIDS_PATHS=["user.eids","user.ext.eids"],g=t.ORTB_GEO_PATHS=["user.geo.lat","user.geo.lon","device.geo.lat","device.geo.lon"],v=t.ORTB_IPV4_PATHS=["device.ip"],m=t.ORTB_IPV6_PATHS=["device.ipv6"];function b(e){return Object.assign({get:function(){},run:function(e,t,r,n,i){var o=r&&r[n];if(A(o)&&i()){var a=this.get(o);void 0===a?delete r[n]:r[n]=a}}},e)}function h(e){return e.forEach(function(e){e.paths=e.paths.map(function(e){var t=e.split("."),r=t.pop();return[t.length>0?t.join("."):null,r]})}),function(t,r){for(var n=[],i=arguments.length,s=Array(i>2?i-2:0),d=2;d<i;d++)s[d-2]=arguments[d];var c=y.apply(void 0,[t].concat(s));return e.forEach(function(e){if(!1!==t[e.name]){var i,s=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(e.paths);try{for(s.s();!(i=s.n()).done;){var d=(0,o.default)(i.value,2),u=d[0],p=d[1],f=null==u?r:(0,a.deepAccess)(r,u);if(n.push(e.run(r,u,f,p,c.bind(null,e))),!1===t[e.name])return}}catch(e){s.e(e)}finally{s.f()}}}),n.filter(function(e){return null!=e})}}function y(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return function(t){return!e.hasOwnProperty(t.name)&&(e[t.name]=!!t.applies.apply(t,r)),e[t.name]}}function A(e){return null!=e&&("object"!==(0,i.default)(e)||Object.keys(e).length>0)}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.isActivityAllowed;return function(r){return!t(e,r)}}function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.isActivityAllowed;return[{name:c.ACTIVITY_TRANSMIT_UFPD,paths:p,applies:I(c.ACTIVITY_TRANSMIT_UFPD,e)},{name:c.ACTIVITY_TRANSMIT_EIDS,paths:f,applies:I(c.ACTIVITY_TRANSMIT_EIDS,e)},{name:c.ACTIVITY_TRANSMIT_PRECISE_GEO,paths:g,applies:I(c.ACTIVITY_TRANSMIT_PRECISE_GEO,e),get:function(e){return Math.round((e+Number.EPSILON)*100)/100}},{name:c.ACTIVITY_TRANSMIT_PRECISE_GEO,paths:v,applies:I(c.ACTIVITY_TRANSMIT_PRECISE_GEO,e),get:function(e){return(0,u.scrubIPv4)(e)}},{name:c.ACTIVITY_TRANSMIT_PRECISE_GEO,paths:m,applies:I(c.ACTIVITY_TRANSMIT_PRECISE_GEO,e),get:function(e){return(0,u.scrubIPv6)(e)}},{name:c.ACTIVITY_TRANSMIT_TID,paths:["source.tid"],applies:I(c.ACTIVITY_TRANSMIT_TID,e)}].map(b)}function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.isActivityAllowed,t=h(E(e)),r=h(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.isActivityAllowed;return[{name:c.ACTIVITY_TRANSMIT_EIDS,paths:["userId","userIdAsEids"],applies:I(c.ACTIVITY_TRANSMIT_EIDS,e)},{name:c.ACTIVITY_TRANSMIT_TID,paths:["ortb2Imp.ext.tid"],applies:I(c.ACTIVITY_TRANSMIT_TID,e)}].map(b)}(e));return function(e){var n={};return{ortb2:function(r){return t(n,r,e),r},bidRequest:function(t){return r(n,t,e),t}}}}t.redactor=S(),(0,d.registerActivityControl)(c.ACTIVITY_TRANSMIT_TID,"enableTIDs config",function(){if(!s.config.getConfig("enableTIDs"))return{allow:!1,reason:"TIDs are disabled"}})},7565:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.registerActivityControl=t.isActivityAllowed=void 0,t.ruleRegistry=d;var i=n(r(4763)),o=r(1235),a=r(492);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.prefixLog)("Activity control:"),t={};function r(e){return t[e]=t[e]||[]}var n={};function d(t){var r=t.activity,i=t.name,o=t.allow,a=t.reason,s=t.component,d="".concat(i," ").concat(o?"allowed":"denied"," '").concat(r,"' for '").concat(s,"'").concat(a?":":""),c=n.hasOwnProperty(d);if(c&&clearTimeout(n[d]),n[d]=setTimeout(function(){return delete n[d]},1e3),!c){var u=[d];a&&u.push(a),(o?e.logInfo:e.logWarn).apply(e,u)}}return[function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10,a=r(e),s=a.findIndex(function(e){return o<(0,i.default)(e,1)[0]}),d=[o,t,n];return a.splice(s<0?a.length:s,0,d),function(){var e=a.indexOf(d);e>=0&&a.splice(e,1)}},function(t,n){var o,c,u,l=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,d=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){d=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(d)throw o}}}}(r(t));try{for(l.s();!(u=l.n()).done;){var p=(0,i.default)(u.value,3),f=p[0],g=p[1],v=p[2];if(o!==f&&c)break;o=f;var m=function(t,r,n,i){var o;try{o=n(i)}catch(n){e.logError("Exception in rule ".concat(r," for '").concat(t,"'"),n),o={allow:!1,reason:n}}return o&&Object.assign({activity:t,name:r,component:i[a.ACTIVITY_PARAM_COMPONENT]},o)}(t,g,v,n);if(m){if(!m.allow)return d(m),!1;c=m}}}catch(e){l.e(e)}finally{l.f()}return c&&d(c),!0}]}var c=d(),u=(0,i.default)(c,2);t.registerActivityControl=u[0],t.isActivityAllowed=u[1]},5357:function(e,t,r){"use strict";var n=r(1640),i=r(7251);Object.defineProperty(t,"__esModule",{value:!0}),t.deferRendering=M,t.doRender=void 0,t.emitAdRenderFail=w,t.emitAdRenderSucceeded=C,t.getRenderingData=t.getBidToRender=void 0,t.handleCreativeEvent=x,t.handleNativeMessage=P,t.handleRender=k,t.insertLocatorFrame=function e(){if(!window.frames[d.PB_LOCATOR]){if(document.body){var t=(0,a.createInvisibleIframe)();t.name=d.PB_LOCATOR,document.body.appendChild(t)}else window.requestAnimationFrame(e)}},t.markBidAsRendered=N,t.markWinner=V,t.markWinningBid=void 0,t.renderAdDirect=function(e,t,r){function n(e,r){w(Object.assign({id:t,bid:s},{reason:e,message:r}))}function i(t,r){e.defaultView&&e.defaultView.frameElement&&(t&&(e.defaultView.frameElement.width=t),r&&(e.defaultView.frameElement.height=r))}var o,s,c=(o={resizeFn:i},function(e,t,r){D.hasOwnProperty(e)&&D[e](t,r,o)});function u(t){t.ad?(e.write(t.ad),e.close(),C({doc:e,bid:s,adId:s.adId})):(0,f.getCreativeRenderer)(s).then(function(r){return r(t,{sendMessage:function(e,t){return c(e,t,s)},mkFrame:a.createIframe},e.defaultView)}).then(function(){return C({doc:e,bid:s,adId:s.adId})},function(e){n((null==e?void 0:e.reason)||d.AD_RENDER_FAILED_REASON.EXCEPTION,null==e?void 0:e.message),(null==e?void 0:e.stack)&&(0,a.logError)(e)});var r=document.createComment("Creative ".concat(s.creativeId," served by ").concat(s.bidder," Prebid.js Header Bidding"));(0,a.insertElement)(r,e,"html")}try{t&&e?e!==document||(0,a.inIframe)()?_(t).then(function(n){s=n,k({renderFn:u,resizeFn:i,adId:t,options:{clickUrl:null==r?void 0:r.clickThrough},bidResponse:n,doc:e})}):n(d.AD_RENDER_FAILED_REASON.PREVENT_WRITING_ON_MAIN_DOCUMENT,"renderAd was prevented from writing to the main document."):n(d.AD_RENDER_FAILED_REASON.MISSING_DOC_OR_ADID,"missing ".concat(t?"doc":"adId"))}catch(e){n(O,e.message)}},t.renderIfDeferred=q;var o=n(r(9837)),a=r(1235),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=i(e)&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(56)),d=r(2778),c=r(3408),u=r(4389),l=r(8705),p=r(3136),f=r(6105),g=r(2885),v=r(2659),m=r(6607),b=n(r(9293)),h=r(647);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}var A=d.EVENTS.AD_RENDER_FAILED,I=d.EVENTS.AD_RENDER_SUCCEEDED,E=d.EVENTS.STALE_RENDER,S=d.EVENTS.BID_WON,O=d.AD_RENDER_FAILED_REASON.EXCEPTION,_=t.getBidToRender=(0,g.hook)("sync",function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:m.GreedyPromise.resolve();return t.then(function(t){return null!=t?t:p.auctionManager.findBidByAdId(e)}).catch(function(){})}),T=t.markWinningBid=(0,g.hook)("sync",function(e){s.emit(S,e),p.auctionManager.addWinningBid(e)});function w(e){var t=e.reason,r=e.message,n=e.bid,i=e.id,o={reason:t,message:r};n&&(o.bid=n,o.adId=n.adId),i&&(o.adId=i),(0,a.logError)("Error rendering ad (id: ".concat(i,"): ").concat(r)),s.emit(A,o)}function C(e){var t=e.doc,r=e.bid,n=e.id,i={doc:t};r&&(i.bid=r),n&&(i.adId=n),b.default.callAdRenderSucceededBidder(r.adapterCode||r.bidder,r),s.emit(I,i)}function x(e,t){switch(e.event){case d.EVENTS.AD_RENDER_FAILED:w({bid:t,id:t.adId,reason:e.info.reason,message:e.info.message});break;case d.EVENTS.AD_RENDER_SUCCEEDED:C({doc:null,bid:t,id:t.adId});break;default:(0,a.logError)("Received event request for unsupported event: '".concat(e.event,"' (adId: '").concat(t.adId,"')"))}}function P(e,t,r){var n=r.resizeFn,i=r.fireTrackers,o=void 0===i?v.fireNativeTrackers:i;if("resizeNativeHeight"===e.action)n(e.width,e.height);else o(e,t)}var D=(0,o.default)({},d.MESSAGES.EVENT,x);D[d.MESSAGES.NATIVE]=P;var R=t.getRenderingData=(0,g.hook)("sync",function(e,t){var r=e.ad,n=e.adUrl,i=e.cpm,o=e.originalCpm,s=e.width,d=e.height,c={AUCTION_PRICE:o||i,CLICKTHROUGH:(null==t?void 0:t.clickUrl)||""};return{ad:(0,a.replaceMacros)(r,c),adUrl:(0,a.replaceMacros)(n,c),width:s,height:d}}),j=t.doRender=(0,g.hook)("sync",function(e){var t=e.renderFn,r=e.resizeFn,n=e.bidResponse,i=e.options;if(n.mediaType===l.VIDEO){w({reason:d.AD_RENDER_FAILED_REASON.PREVENT_WRITING_ON_MAIN_DOCUMENT,message:"Cannot render video ad",bid:n,id:n.adId});return}var o=R(n,i);t(Object.assign({adId:n.adId},o));var a=o.width,s=o.height;(null!=a?a:s)!=null&&r(a,s)});function k(e){var t=e.renderFn,r=e.resizeFn,n=e.adId,i=e.options,o=e.bidResponse,u=e.doc;M(o,function(){if(null==o){w({reason:d.AD_RENDER_FAILED_REASON.CANNOT_FIND_AD,message:"Cannot find ad '".concat(n,"'"),id:n});return}if(!(o.status===d.BID_STATUS.RENDERED&&((0,a.logWarn)("Ad id ".concat(n," has been rendered before")),s.emit(E,o),(0,a.deepAccess)(c.config.getConfig("auctionOptions"),"suppressStaleRender"))))try{j({renderFn:t,resizeFn:r,bidResponse:o,options:i,doc:u})}catch(e){w({reason:d.AD_RENDER_FAILED_REASON.EXCEPTION,message:e.message,id:n,bid:o})}})}function N(e){var t=(0,h.useMetrics)(e.metrics);t.checkpoint("bidRender"),t.timeBetween("bidWon","bidRender","render.deferred"),t.timeBetween("auctionEnd","bidRender","render.pending"),t.timeBetween("requestBids","bidRender","render.e2e"),e.status=d.BID_STATUS.RENDERED}j.before(function(e,t){var r=t.bidResponse,n=t.doc;(0,u.isRendererRequired)(r.renderer)?((0,u.executeRenderer)(r.renderer,r,n),C({doc:n,bid:r,id:r.adId}),e.bail()):e(t)},100);var U=new WeakMap,B=new WeakSet;function M(e,t){if(null==e){t();return}U.set(e,t),!e.deferRendering&&q(e),V(e)}function V(e){!B.has(e)&&(B.add(e),T(e))}function q(e){var t=U.get(e);t&&(t(),N(e),U.delete(e))}},4919:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerVideoSupport=function(e,t){o.adServers=o.adServers||{},o.adServers[e]=o.adServers[e]||{},Object.keys(t).forEach(function(r){if(o.adServers[e][r]){(0,i.logWarn)("Attempting to add an already registered function property ".concat(r," for AdServer ").concat(e,"."));return}o.adServers[e][r]=t[r]})};var n=r(9895),i=r(1235),o=(0,n.getGlobal)()},9254:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBidderRequestsCounter=function(e,t){var n;return(null===(n=r)||void 0===n||null===(n=n[e])||void 0===n||null===(n=n.bidders)||void 0===n||null===(n=n[t])||void 0===n?void 0:n.requestsCounter)||0},t.getBidderWinsCounter=function(e,t){var n;return(null===(n=r)||void 0===n||null===(n=n[e])||void 0===n||null===(n=n.bidders)||void 0===n||null===(n=n[t])||void 0===n?void 0:n.winsCounter)||0},t.getRequestsCounter=function(e){var t;return(null===(t=r)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.requestsCounter)||0},t.incrementBidderRequestsCounter=function(e,t){return n(e,"requestsCounter",t)},t.incrementBidderWinsCounter=function(e,t){return n(e,"winsCounter",t)},t.incrementRequestsCounter=function(e){return n(e,"requestsCounter")},t.reset=function(){r={}};var r={};function n(e,t,n){var i,o,a,s=(i=e,o=n,a=r[i]=r[i]||{bidders:{}},o?a.bidders[o]=a.bidders[o]||{}:a);return s[t]=(s[t]||0)+1,s[t]}},4530:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e;return{callBids:function(){},setBidderCode:function(e){t=e},getBidderCode:function(){return t}}}},9293:function(e,t,r){"use strict";var n,i=r(1640),o=r(7251);Object.defineProperty(t,"__esModule",{value:!0}),t.PBS_ADAPTER_NAME=t.PARTITIONS=void 0,t._filterBidsForAdUnit=F,t._partitionBidders=Y,Object.defineProperty(t,"coppaDataHandler",{enumerable:!0,get:function(){return h.coppaDataHandler}}),t.filterBidsForAdUnit=t.dep=t.default=void 0,Object.defineProperty(t,"gdprDataHandler",{enumerable:!0,get:function(){return h.gdprDataHandler}}),t.getS2SBidderSet=W,Object.defineProperty(t,"gppDataHandler",{enumerable:!0,get:function(){return h.gppDataHandler}}),t.partitionBidders=void 0,t.s2sActivityParams=q,t.setupAdUnitMediaTypes=void 0,Object.defineProperty(t,"uspDataHandler",{enumerable:!0,get:function(){return h.uspDataHandler}});var a=i(r(4995)),s=i(r(4763)),d=i(r(9837)),c=r(1235),u=r(2659),l=r(1634),p=r(721),f=r(3408),g=r(2885),v=r(7448),m=r(9254),b=r(2583),h=r(5087),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var r=C(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(56)),A=r(2778),I=r(647),E=r(3136),S=r(5723),O=r(7565),_=r(7939),T=r(492),w=r(6755);function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(C=function(e){return e?r:t})(e)}function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach(function(t){(0,d.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var D=t.PBS_ADAPTER_NAME="pbsBidAdapter",R=t.PARTITIONS={CLIENT:"client",SERVER:"server"},j=t.dep={isAllowed:O.isActivityAllowed,redact:w.redactor},k={},N=k.bidderRegistry={},U=k.aliasRegistry={},B=[];f.config.getConfig("s2sConfig",function(e){e&&e.s2sConfig&&(B=(0,c.isArray)(e.s2sConfig)?e.s2sConfig:[e.s2sConfig])});var M={},V=(0,T.activityParamsBuilder)(function(e){return k.resolveAlias(e)});function q(e){return V(S.MODULE_TYPE_PREBID,D,(0,d.default)({},T.ACTIVITY_PARAM_S2S_NAME,e.configName))}var L=(0,g.hook)("sync",function(e){var t=e.bidderCode,r=e.auctionId,n=e.bidderRequestId,i=e.adUnits,o=e.src,a=e.metrics;return i.reduce(function(e,i){var s=i.bids.filter(function(e){return e.bidder===t});return null==t&&0===s.length&&null!=i.s2sBid&&s.push({bidder:null}),e.push(s.reduce(function(e,s){var d=null==(s=Object.assign({},s,{ortb2Imp:(0,c.mergeDeep)({},i.ortb2Imp,s.ortb2Imp)},(0,c.getDefinedParams)(i,["nativeParams","nativeOrtbRequest","mediaType","renderer"]))).mediaTypes?i.mediaTypes:s.mediaTypes;return(0,c.isValidMediaTypes)(d)?s=Object.assign({},s,{mediaTypes:d}):(0,c.logError)("mediaTypes is not correctly configured for adunit ".concat(i.code)),"client"===o&&(0,m.incrementBidderRequestsCounter)(i.code,t),e.push(Object.assign({},s,{adUnitCode:i.code,transactionId:i.transactionId,adUnitId:i.adUnitId,sizes:(0,c.deepAccess)(d,"banner.sizes")||(0,c.deepAccess)(d,"video.playerSize")||[],bidId:s.bid_id||(0,c.getUniqueIdentifierStr)(),bidderRequestId:n,auctionId:r,src:o,metrics:a,bidRequestsCount:(0,m.getRequestsCounter)(i.code),bidderRequestsCount:(0,m.getBidderRequestsCounter)(i.code,s.bidder),bidderWinsCount:(0,m.getBidderWinsCounter)(i.code,s.bidder),deferBilling:!!i.deferBilling,viewability:i.viewability||0})),e},[])),e},[]).reduce(c.flatten,[]).filter(function(e){return""!==e})},"getBids");function F(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.getS2SBidders,i=void 0===n?W:n;if(null==t)return e;var o=i(t);return e.filter(function(e){return o.has(e.bidder)})}var G=t.filterBidsForAdUnit=(0,g.hook)("sync",F,"filterBidsForAdUnit"),z=t.setupAdUnitMediaTypes=(0,g.hook)("sync",function(e,t){return e},"setupAdUnitMediaTypes");function W(e){!(0,c.isArray)(e)&&(e=[e]);var t=new Set([null]);return e.filter(function(e){return e&&e.enabled}).flatMap(function(e){return e.bidders}).forEach(function(e){return t.add(e)}),t}function Y(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.getS2SBidders,i=(void 0===n?W:n)(t);return(0,c.getBidderCodes)(e).reduce(function(e,t){return e[i.has(t)?R.SERVER:R.CLIENT].push(t),e},(0,d.default)((0,d.default)({},R.CLIENT,[]),R.SERVER,[]))}var H=t.partitionBidders=(0,g.hook)("sync",Y,"partitionBidders");k.makeBidRequests=(0,g.hook)("sync",function(e,t,r,n,i){var o,a,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},d=arguments.length>6?arguments[6]:void 0;d=(0,I.useMetrics)(d),y.emit(A.EVENTS.BEFORE_REQUEST_BIDS,e);(0,u.decorateAdUnitsWithNativeParams)(e),e.forEach(function(e){!(0,c.isPlainObject)(e.mediaTypes)&&(e.mediaTypes={}),e.bids=e.bids.filter(function(e){return!e.bidder||j.isAllowed(_.ACTIVITY_FETCH_BIDS,V(S.MODULE_TYPE_BIDDER,e.bidder))}),(0,m.incrementRequestsCounter)(e.code)});var l=H(e=z(e,i),B),p=l[R.CLIENT],g=l[R.SERVER];f.config.getConfig("bidderSequence")===f.RANDOM&&(p=(0,c.shuffle)(p));var E=(0,b.getRefererInfo)(),O=[],T=s.global||{},w=s.bidder||{};function C(e,t){var n=j.redact(null!=t?t:V(S.MODULE_TYPE_BIDDER,e.bidderCode)),i=Object.freeze(n.ortb2((0,c.mergeDeep)({source:{tid:r}},T,w[e.bidderCode])));return e.ortb2=i,e.bids=e.bids.map(function(e){return e.ortb2=i,n.bidRequest(e)}),e}B.forEach(function(n){var i=q(n);if(n&&n.enabled&&j.isAllowed(_.ACTIVITY_FETCH_BIDS,i)){var o,a,s,u,l=(o=e,a=n,s=(0,c.deepClone)(o),u=!1,s.forEach(function(e){var t=e.bids.filter(function(e){var t;return e.module===D&&(null===(t=e.params)||void 0===t?void 0:t.configName)===a.configName});1===t.length?(e.s2sBid=t[0],u=!0,e.ortb2Imp=(0,c.mergeDeep)({},e.s2sBid.ortb2Imp,e.ortb2Imp)):t.length>1&&(0,c.logWarn)('Multiple "module" bids for the same s2s configuration; all will be ignored',t),e.bids=G(e.bids,a).map(function(e){return e.bid_id=(0,c.getUniqueIdentifierStr)(),e})}),{adUnits:s=s.filter(function(e){return 0!==e.bids.length||null!=e.s2sBid}),hasModuleBids:u}),p=l.adUnits,f=l.hasModuleBids,m=(0,c.generateUUID)();(0===g.length&&f?[null]:g).forEach(function(e){var o=(0,c.getUniqueIdentifierStr)(),a=d.fork(),s=C({bidderCode:e,auctionId:r,bidderRequestId:o,uniquePbsTid:m,bids:L({bidderCode:e,auctionId:r,bidderRequestId:o,adUnits:(0,c.deepClone)(p),src:A.S2S.SRC,metrics:a}),auctionStart:t,timeout:n.timeout,src:A.S2S.SRC,refererInfo:E,metrics:a},i);0!==s.bids.length&&O.push(s)}),p.forEach(function(e){var t=e.bids.filter(function(e){return(0,v.find)(O,function(t){return(0,v.find)(t.bids,function(t){return t.bidId===e.bid_id})})});e.bids=t}),O.forEach(function(e){var t,r;void 0===e.adUnitsS2SCopy&&(e.adUnitsS2SCopy=p.filter(function(e){return e.bids.length>0||null!=e.s2sBid})),null!==(t=e.adUnitsS2SCopy[0])&&void 0!==t&&t.bidPoolId&&(e.bidPoolId=e.adUnitsS2SCopy[0].bidPoolId),null!==(r=e.adUnitsS2SCopy[0])&&void 0!==r&&r.passiveBidPoolId&&(e.passiveBidPoolId=e.adUnitsS2SCopy[0].passiveBidPoolId)})}});var x=(o=e,(a=(0,c.deepClone)(o)).forEach(function(e){e.bids=G(e.bids,null)}),a=a.filter(function(e){return 0!==e.bids.length}));return p.forEach(function(e){var o,a,s=(0,c.getUniqueIdentifierStr)(),u=d.fork(),l=C({bidderCode:e,auctionId:r,bidderRequestId:s,bids:L({bidderCode:e,auctionId:r,bidderRequestId:s,adUnits:(0,c.deepClone)(x),labels:i,src:"client",metrics:u}),auctionStart:t,timeout:n,refererInfo:E,metrics:u}),p=N[e];!p&&(0,c.logError)("Trying to make a request for bidder that does not exist: ".concat(e)),p&&l.bids&&0!==l.bids.length&&(null!==(o=x[0])&&void 0!==o&&o.bidPoolId&&(l.bidPoolId=x[0].bidPoolId),null!==(a=x[0])&&void 0!==a&&a.passiveBidPoolId&&(l.passiveBidPoolId=x[0].passiveBidPoolId),O.push(l))}),O.forEach(function(e){h.gdprDataHandler.getConsentData()&&(e.gdprConsent=h.gdprDataHandler.getConsentData()),h.uspDataHandler.getConsentData()&&(e.uspConsent=h.uspDataHandler.getConsentData()),h.gppDataHandler.getConsentData()&&(e.gppConsent=h.gppDataHandler.getConsentData())}),O},"makeBidRequests"),k.callBids=function(e,t,r,n,i,o,a){var d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{};if(!t.length){(0,c.logWarn)("callBids executed with no bidRequests.  Were they filtered by labels or sizing?");return}var u=t.reduce(function(e,t){return e[Number(void 0!==t.src&&t.src===A.S2S.SRC)].push(t),e},[[],[]]),l=(0,s.default)(u,2),g=l[0],v=l[1],m=[];v.forEach(function(e){for(var t=-1,r=0;r<m.length;++r)if(e.uniquePbsTid===m[r].uniquePbsTid){t=r;break}t<=-1&&m.push(e)});var b=0;B.forEach(function(e){if(e&&m[b]&&W(e).has(m[b].bidderCode)){var t=(0,p.ajaxBuilder)(o,i?{request:i.request.bind(null,"s2s"),done:i.done}:void 0),s=e.bidders,u=N[e.adapter],l=m[b].uniquePbsTid,f=m[b].adUnitsS2SCopy,g=v.filter(function(e){return e.uniquePbsTid===l});if(u){var h={ad_units:f,s2sConfig:e,ortb2Fragments:d,requestBidsTimeout:o};if(h.ad_units.length){var I=g.map(function(e){return e.start=(0,c.timestamp)(),function(t){!t&&a(e.bidderRequestId),n.apply(e,arguments)}}),E=(0,c.getBidderCodes)(h.ad_units).filter(function(e){return s.includes(e)});(0,c.logMessage)("CALLING S2S HEADER BIDDERS ==== ".concat(E.length>0?E.join(", "):'No bidder specified, using "ortb2Imp" definition(s) only')),g.forEach(function(e){y.emit(A.EVENTS.BID_REQUESTED,P(P({},e),{},{tid:e.auctionId}))}),u.callBids(h,v,r,function(e){return I.forEach(function(t){return t(e)})},t)}}else(0,c.logError)("missing "+e.adapter);b++}}),g.forEach(function(e){e.start=(0,c.timestamp)();var t=N[e.bidderCode];f.config.runWithBidder(e.bidderCode,function(){(0,c.logMessage)("CALLING BIDDER"),y.emit(A.EVENTS.BID_REQUESTED,e)});var s=(0,p.ajaxBuilder)(o,i?{request:i.request.bind(null,e.bidderCode),done:i.done}:void 0),d=n.bind(e);try{f.config.runWithBidder(e.bidderCode,t.callBids.bind(t,e,r,d,s,function(){return a(e.bidderRequestId)},f.config.callbackWithBidder(e.bidderCode)))}catch(t){(0,c.logError)("".concat(e.bidderCode," Bid Adapter emitted an uncaught error when parsing their bidRequest"),{e:t,bidRequest:e}),d()}})};function J(e,t){var r=N[e],n=(null==r?void 0:r.getSpec)&&r.getSpec();if(n&&n[t]&&"function"==typeof n[t])return[n,n[t]]}function K(e,t,r,n){try{(0,c.logInfo)("Invoking ".concat(e,".").concat(t));for(var i=arguments.length,o=Array(i>4?i-4:0),a=4;a<i;a++)o[a-4]=arguments[a];f.config.runWithBidder(e,n.bind.apply(n,[r].concat(o)))}catch(r){(0,c.logWarn)("Error calling ".concat(t," of ").concat(e))}}function Q(e,t,r){if((null==r?void 0:r.source)!==A.S2S.SRC){var n=J(e,t);null!=n&&K.apply(void 0,[e,t].concat((0,a.default)(n),[r]))}}k.videoAdapters=[],k.registerBidAdapter=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.supportedMediaTypes,o=void 0===i?[]:i;e&&t?"function"==typeof e.callBids?(N[t]=e,h.GDPR_GVLIDS.register(S.MODULE_TYPE_BIDDER,t,null===(r=e.getSpec)||void 0===r?void 0:r.call(e).gvlid),(0,v.includes)(o,"video")&&k.videoAdapters.push(t),(0,v.includes)(o,"native")&&u.nativeAdapters.push(t)):(0,c.logError)("Bidder adaptor error for bidder code: "+t+"bidder must implement a callBids() function"):(0,c.logError)("bidAdapter or bidderCode not specified")},k.aliasBidAdapter=function(e,t,r){if(void 0===N[t]){var n=N[e];if(void 0===n){var i=[];B.forEach(function(r){if(r.bidders&&r.bidders.length){var n=r&&r.bidders;r&&(0,v.includes)(n,t)?U[t]=e:i.push(e)}}),i.forEach(function(e){(0,c.logError)('bidderCode "'+e+'" is not an existing bidder.',"adapterManager.aliasBidAdapter")})}else try{var o,a,s,d=(o=e,a=[],(0,v.includes)(k.videoAdapters,o)&&a.push("video"),(0,v.includes)(u.nativeAdapters,o)&&a.push("native"),a);if(n.constructor.prototype!=Object.prototype)(s=new n.constructor).setBidderCode(t);else{var p=(r||{}).useBaseGvlid,f=n.getSpec(),g=void 0!==p&&p?f.gvlid:null==r?void 0:r.gvlid;null==g&&null!=f.gvlid&&(0,c.logWarn)("Alias '".concat(t,"' will NOT re-use the GVL ID of the original adapter ('").concat(f.code,"', gvlid: ").concat(f.gvlid,"). Functionality that requires TCF consent may not work as expected."));var m=r&&r.skipPbsAliasing;s=(0,l.newBidder)(Object.assign({},f,{code:t,gvlid:g,skipPbsAliasing:m})),U[t]=e}k.registerBidAdapter(s,t,{supportedMediaTypes:d})}catch(t){(0,c.logError)(e+" bidder does not currently support aliasing.","adapterManager.aliasBidAdapter")}}else(0,c.logMessage)('alias name "'+t+'" has been already specified.')},k.resolveAlias=function(e){for(var t,r=e;U[r]&&(!t||!t.has(r));)r=U[r],(t=t||new Set).add(r);return r},k.registerAnalyticsAdapter=function(e){var t=e.adapter,r=e.code,n=e.gvlid;t&&r?"function"==typeof t.enableAnalytics?(t.code=r,M[r]={adapter:t,gvlid:n},h.GDPR_GVLIDS.register(S.MODULE_TYPE_ANALYTICS,r,n)):(0,c.logError)('Prebid Error: Analytics adaptor error for analytics "'.concat(r,'"\n        analytics adapter must implement an enableAnalytics() function')):(0,c.logError)("Prebid Error: analyticsAdapter or analyticsCode not specified")},k.enableAnalytics=function(e){!(0,c.isArray)(e)&&(e=[e]),e.forEach(function(e){var t=M[e.provider];t&&t.adapter?j.isAllowed(_.ACTIVITY_REPORT_ANALYTICS,V(S.MODULE_TYPE_ANALYTICS,e.provider,(0,d.default)({},T.ACTIVITY_PARAM_ANL_CONFIG,e)))&&t.adapter.enableAnalytics(e):(0,c.logError)("Prebid Error: no analytics adapter found in registry for '".concat(e.provider,"'."))})},k.getBidAdapter=function(e){return N[e]},k.getAnalyticsAdapter=function(e){return M[e]},k.callTimedOutBidders=function(e,t,r){t=t.map(function(t){return t.params=(0,c.getUserConfiguredParams)(e,t.adUnitCode,t.bidder),t.timeout=r,t}),Object.keys(t=(0,c.groupBy)(t,"bidder")).forEach(function(e){Q(e,"onTimeout",t[e])})},k.callBidWonBidder=function(e,t,r){t.params=(0,c.getUserConfiguredParams)(r,t.adUnitCode,t.bidder),(0,m.incrementBidderWinsCounter)(t.adUnitCode,t.bidder),Q(e,"onBidWon",t)},k.triggerBilling=(n=new WeakSet,function(e){!n.has(e)&&(n.add(e),e.source===A.S2S.SRC&&e.burl&&c.internal.triggerPixel(e.burl),Q(e.bidder,"onBidBillable",e))}),k.callSetTargetingBidder=function(e,t){Q(e,"onSetTargeting",t)},k.callBidViewableBidder=function(e,t){Q(e,"onBidViewable",t)},k.callBidderError=function(e,t,r){Q(e,"onBidderError",{error:t,bidderRequest:r})},k.callAdRenderSucceededBidder=function(e,t){Q(e,"onAdRenderSucceeded",t)};k.callDataDeletionRequest=(0,g.hook)("sync",function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n="onDataDeletionRequest";Object.keys(N).filter(function(e){return!U.hasOwnProperty(e)}).forEach(function(e){var r=J(e,n);if(null!=r){var i=E.auctionManager.getBidsRequested().filter(function(t){return function(e){for(var t=new Set;U.hasOwnProperty(e)&&!t.has(e);)t.add(e),e=U[e];return e}(t.bidderCode)===e});K.apply(void 0,[e,n].concat((0,a.default)(r),[i],t))}}),Object.entries(M).forEach(function(e){var r,i=(0,s.default)(e,2),o=i[0],a=i[1],d=null==a||null===(r=a.adapter)||void 0===r?void 0:r[n];if("function"==typeof d)try{d.apply(a.adapter,t)}catch(e){(0,c.logError)("error calling ".concat(n," of ").concat(o),e)}})}),t.default=k},1634:function(e,t,r){"use strict";var n=r(1640),i=r(7251);Object.defineProperty(t,"__esModule",{value:!0}),t.adapterMetrics=q,t.addPaapiConfig=void 0,t.duplicateRequest=k,t.guardTids=void 0,t.isValid=V,t.newBidder=R,t.prepareRequestWithOrtbData=j,t.processBidderRequests=void 0,t.registerBidder=function(e){var t=Array.isArray(e.supportedMediaTypes)?{supportedMediaTypes:e.supportedMediaTypes}:void 0;function r(e){var r=R(e);c.default.registerBidAdapter(r,e.code,t)}r(e),Array.isArray(e.aliases)&&e.aliases.forEach(function(t){var n,i,o=t;(0,h.isPlainObject)(t)&&(o=t.code,n=t.gvlid,i=t.skipPbsAliasing),c.default.aliasRegistry[o]=e.code,r(Object.assign({},e,{code:o,gvlid:n,skipPbsAliasing:i}))})},t.registerSyncInner=void 0;var o=n(r(7251)),a=n(r(4995)),s=n(r(4763)),d=n(r(4530)),c=n(r(9293)),u=r(3408),l=r(5108),p=r(1053),f=r(2659),g=r(5045),v=r(2778),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=i(e)&&"function"!=typeof e)return{default:e};var r=C(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(56)),b=r(7448),h=r(1235),y=r(2885),A=r(3136),I=r(4735),E=r(647),S=r(7565),O=r(1676),_=r(5723),T=r(7939),w=n(r(9850));function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(C=function(e){return e?r:t})(e)}var x=["cpm","ttl","creativeId","netRevenue","currency"],P=["auctionId","transactionId"],D=t.guardTids=(0,h.memoize)(function(e){var t=e.bidderCode;if((0,S.isActivityAllowed)(T.ACTIVITY_TRANSMIT_TID,(0,O.activityParams)(_.MODULE_TYPE_BIDDER,t)))return{bidRequest:function(e){return e},bidderRequest:function(e){return e}};function r(e,t,r){return P.includes(t)?null:Reflect.get(e,t,r)}function n(e,t){var r=new Proxy(e,t);return Object.entries(e).filter(function(e){var t=(0,s.default)(e,2);return"function"==typeof(t[0],t[1])}).forEach(function(t){var n=(0,s.default)(t,2),i=n[0],o=n[1];return r[i]=o.bind(e)}),r}var i=(0,h.memoize)(function(e){return n(e,{get:r})},function(e){return e.bidId});return{bidRequest:i,bidderRequest:function(e){return n(e,{get:function(t,n,o){return"bids"===n?e.bids.map(i):r(t,n,o)}})}}});function R(e){return Object.assign(new d.default(e.code),{getSpec:function(){return Object.freeze(Object.assign({},e))},registerSyncs:t,callBids:function(r,n,i,o,a,s){if(!!Array.isArray(r.bids)){var d=D(r),p={},f=[];var g=q(r).measureTime("validate",function(){return r.bids.filter(function(t){return function(t){return!!e.isBidRequestValid(t)||((0,h.logWarn)("Invalid bid sent to bidder ".concat(e.code,": ").concat(JSON.stringify(t))),!1)}(d.bidRequest(t))})});if(0===g.length){y();return}var b={};g.forEach(function(e){b[e.bidId]=e,!e.adUnitCode&&(e.adUnitCode=e.placementCode)}),U(e,g,r,o,s,{onRequest:function(e){return m.emit(v.EVENTS.BEFORE_BIDDER_HTTP,r,e)},onResponse:function(t){a(e.code),f.push(t)},onPaapi:function(e){var t=b[e.bidId];t?M(t,e):(0,h.logWarn)("Received fledge auction configuration for an unknown bidId",e)},onError:function(t,n){!n.timedOut&&a(e.code),c.default.callBidderError(e.code,n,r),m.emit(v.EVENTS.BIDDER_ERROR,{error:n,bidderRequest:r}),(0,h.logError)("Server call for ".concat(e.code," failed: ").concat(t," ").concat(n.status,". Continuing without bids."))},onBid:function(t){var r=b[t.requestId];if(r){if(t.adapterCode=r.bidder,function(e,t){var r=I.bidderSettings.get(t,"allowAlternateBidderCodes")||!1,n=I.bidderSettings.get(t,"allowedAlternateBidderCodes");return!!(e&&t&&t!==e&&(n=(0,h.isArray)(n)?n.map(function(e){return e.trim().toLowerCase()}).filter(function(e){return!!e}).filter(h.uniques):n,!r||(0,h.isArray)(n)&&"*"!==n[0]&&!n.includes(e)))||!1}(t.bidderCode,r.bidder)){(0,h.logWarn)("".concat(t.bidderCode," is not a registered partner or known bidder of ").concat(r.bidder,", hence continuing without bid. If you wish to support this bidder, please mark allowAlternateBidderCodes as true in bidderSettings.")),n.reject(r.adUnitCode,t,v.REJECTION_REASON.BIDDER_DISALLOWED);return}t.originalCpm=t.cpm,t.originalCurrency=t.currency,t.meta=t.meta||Object.assign({},t[r.bidder]),t.deferBilling=r.deferBilling,t.deferRendering=t.deferBilling&&(null!==(s=t.deferRendering)&&void 0!==s?s:"function"!=typeof e.onBidBillable);var i,o,a,s,d=Object.assign((0,l.createBid)(v.STATUS.GOOD,r),t,(0,h.pick)(r,P));i=r.adUnitCode,o=d,(a=(0,E.useMetrics)(o.metrics)).checkpoint("addBidResponse"),p[i]=!0,a.measureTime("addBidResponse.validate",function(){return V(i,o)})?n(i,o):n.reject(i,o,v.REJECTION_REASON.INVALID)}else(0,h.logWarn)("Bidder ".concat(e.code," made bid for unknown request ID: ").concat(t.requestId,". Ignoring.")),n.reject(null,t,v.REJECTION_REASON.INVALID_REQUEST_ID)},onCompletion:y})}function y(){i(),u.config.runWithBidder(e.code,function(){m.emit(v.EVENTS.BIDDER_DONE,r),t(f,r.gdprConsent,r.uspConsent,r.gppConsent)})}}});function t(t,r,n,i){B(e,t,r,n,i)}}function j(e,t){var r,n,i=(0,w.default)(e);return i.ortb2.app=(null==t?void 0:t.appData)||{},i.ortb2.app.ext=null==e||null===(r=e.site)||void 0===r?void 0:r.ext,i.ortb2.app.publisher=null==e||null===(n=e.site)||void 0===n?void 0:n.publisher,null!=t&&t.bseat&&(i.ortb2.bseat=t.bseat),delete i.ortb2.site,i}function k(e){var t=[];return e&&!Array.isArray(e)?(delete e.data.site,t.push(e),t):e&&Array.isArray(e)?t=[].concat((0,a.default)(t),(0,a.default)(e)):[]}var N=["bids","paapi"],U=t.processBidderRequests=(0,y.hook)("sync",function(e,t,r,n,i,s){var d,c=s.onRequest,l=s.onResponse,p=s.onPaapi,f=s.onError,g=s.onBid,v=s.onCompletion,m=q(r);v=m.startTiming("total").stopBefore(v);var b=D(r),y=m.measureTime("buildRequests",function(){return e.buildRequests(t.map(b.bidRequest),b.bidderRequest(r))}),A=r,I=u.config.getConfig("appDataConfig"),E=[];if(null!=I&&null!==(d=I.bidders)&&void 0!==d&&d.includes(r.bidderCode)&&I.appData){A=j(r,I);var S=m.measureTime("buildRequests",function(){return e.buildRequests(t,A)});S&&(E=k(S))}if(!y||0===y.length){v();return}!Array.isArray(y)&&(y=[y]),y=[].concat((0,a.default)(y),(0,a.default)(E));var O=(0,h.delayExecution)(v,y.length);y.forEach(function(t){var r=m.fork();function a(e){null!=e&&(e.metrics=r.fork().renameWith()),g(e)}var s=i(function(n,i){var o,s;u();try{n=JSON.parse(n)}catch(e){}l(n={body:n,headers:function(e){return{get:i.getResponseHeader.bind(i)}}(i)});try{n=r.measureTime("interpretResponse",function(){return e.interpretResponse(n,t)})}catch(t){(0,h.logError)("Bidder ".concat(e.code," failed to interpret the server's response. Continuing without bids"),null,t),O();return}n&&!Object.keys(n).some(function(e){return!N.includes(e)})?(o=n.bids,s=n.paapi):o=n,(0,h.isArray)(s)&&s.forEach(p),o&&((0,h.isArray)(o)?o.forEach(a):a(o)),O()}),d=i(function(e,t){u(),f(e,t),O()});c(t);var u=r.startTiming("net");switch(t.method){case"GET":n("".concat(t.url).concat(function(e){return e?"?".concat("object"===(0,o.default)(e)?(0,h.parseQueryStringParameters)(e):e):""}(t.data)),{success:s,error:d},void 0,Object.assign({method:"GET",withCredentials:!0},t.options));break;case"POST":n(t.url,{success:s,error:d},"string"==typeof t.data?t.data:JSON.stringify(t.data),Object.assign({method:"POST",contentType:"text/plain",withCredentials:!0},t.options));break;default:(0,h.logWarn)("Skipping invalid request from ".concat(e.code,". Request type ").concat(t.type," must be GET or POST")),O()}})},"processBidderRequests"),B=t.registerSyncInner=(0,y.hook)("async",function(e,t,r,n,i){var o=u.config.getConfig("userSync.aliasSyncEnabled");if(e.getUserSyncs&&(o||!c.default.aliasRegistry[e.code])){var a=u.config.getConfig("userSync.filterSettings"),s=e.getUserSyncs({iframeEnabled:!!(a&&(a.iframe||a.all)),pixelEnabled:!!(a&&(a.image||a.all))},t,r,n,i);s&&(!Array.isArray(s)&&(s=[s]),s.forEach(function(t){p.userSync.registerSync(t.type,e.code,t.url)}),p.userSync.bidderDone(e.code))}},"registerSyncs"),M=t.addPaapiConfig=(0,y.hook)("sync",function(e,t){},"addPaapiConfig");function V(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.index,o=void 0===i?A.auctionManager.index:i;function a(e){return"Invalid bid from ".concat(t.bidderCode,". Ignoring bid: ").concat(e)}if(!e)return(0,h.logWarn)("No adUnitCode was supplied to addBidResponse."),!1;if(!t)return(0,h.logWarn)("Some adapter tried to add an undefined bid for ".concat(e,".")),!1;return(r=Object.keys(t),x.every(function(e){return(0,b.includes)(r,e)&&!(0,b.includes)([void 0,null],t[e])}))?"native"!==t.mediaType||(0,f.nativeBidIsValid)(t,{index:o})?"video"!==t.mediaType||(0,g.isValidVideoBid)(t,{index:o})?"banner"!==t.mediaType||!!function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.index,i=void 0===n?A.auctionManager.index:n;if((t.width||0===parseInt(t.width,10))&&(t.height||0===parseInt(t.height,10)))return t.width=parseInt(t.width,10),t.height=parseInt(t.height,10),!0;var o=i.getBidRequest(t),a=i.getMediaTypes(t),d=o&&o.sizes||a&&a.banner&&a.banner.sizes,c=(0,h.parseSizesInput)(d);if(1===c.length){var u=c[0].split("x"),l=(0,s.default)(u,2),p=l[0],f=l[1];return t.width=parseInt(p,10),t.height=parseInt(f,10),!0}return!1}(e,t,{index:o})||((0,h.logError)(a("Banner bids require a width and height")),!1):((0,h.logError)(a("Video bid does not have required vastUrl or renderer property")),!1):((0,h.logError)(a("Native bid missing some required properties.")),!1):((0,h.logError)(a("Bidder ".concat(t.bidderCode," is missing required params. Check http://prebid.org/dev-docs/bidder-adapter-1.html for list of params."))),!1)}function q(e){return(0,E.useMetrics)(e.metrics).renameWith(function(t){return["adapter.client.".concat(t),"adapters.client.".concat(e.bidderCode,".").concat(t)]})}},8427:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadExternalScript=function(e,t,r,u,l,p){if(!!(0,o.isActivityAllowed)(n.LOAD_EXTERNAL_SCRIPT,(0,i.activityParams)(t,r))){if(!r||!e){(0,s.logError)("cannot load external script without url and moduleCode");return}if(!(0,a.includes)(c,r)){(0,s.logError)("".concat(r," not whitelisted for loading external JavaScript"));return}!l&&(l=document);var f=m(l,e);if(f)return u&&"function"==typeof u&&(f.loaded?u():f.callbacks.push(u)),f.tag;var g=d.get(l)||{},v={loaded:!1,tag:null,callbacks:[]};return g[e]=v,d.set(l,g),u&&"function"==typeof u&&v.callbacks.push(u),(0,s.logWarn)("module ".concat(r," is loading external JavaScript")),function(t,r,n,i){!n&&(n=document);var o=n.createElement("script");o.type="text/javascript",o.async=!0;var a=m(n,e);return a&&(a.tag=o),o.readyState?o.onreadystatechange=function(){("loaded"===o.readyState||"complete"===o.readyState)&&(o.onreadystatechange=null,r())}:o.onload=function(){r()},o.src=t,i&&(0,s.setScriptAttributes)(o,i),(0,s.insertElement)(o,n),o}(e,function(){v.loaded=!0;try{for(var e=0;e<v.callbacks.length;e++)v.callbacks[e]()}catch(e){(0,s.logError)("Error executing callback","adloader.js:loadExternalScript",e)}},l,p)}function m(e,t){var r=d.get(e);return r&&r[t]?r[t]:null}};var n=r(7939),i=r(1676),o=r(7565),a=r(7448),s=r(1235),d=new WeakMap,c=["debugging","outstream","improvedigital","showheroes-bs","aaxBlockmeter","adagio","adloox","akamaidap","arcspan","airgrid","browsi","brandmetrics","clean.io","humansecurity","confiant","contxtful","hadron","mediafilter","medianet","azerionedge","a1Media","geoedge","qortex","dynamicAdBoost","51Degrees","symitridap","wurfl","justtag","tncId","ftrackId","id5"]},620:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPPID=void 0;var n=r(2885);t.getPPID=(0,n.hook)("sync",function(){})},721:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.ajax=void 0,t.ajaxBuilder=c,t.fetch=t.dep=void 0,t.fetcherFactory=d,t.sendBeacon=function(e,t){return!!window.navigator&&!!window.navigator.sendBeacon&&window.navigator.sendBeacon(e,t)};var i=n(r(7251)),o=r(3408),a=r(1235),s=t.dep={fetch:window.fetch.bind(window),makeRequest:function(e,t){return new Request(e,t)},timeout:function(e,t){var r=new AbortController,n=setTimeout(function(){r.abort(),(0,a.logError)("Request timeout after ".concat(e,"ms"),t),n=null},e);return{signal:r.signal,done:function(){n&&clearTimeout(n)}}}};function d(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.request,i=r.done,a=function(e,r){null!=t&&(null===(n=r)||void 0===n?void 0:n.signal)==null&&!o.config.getConfig("disableAjaxTimeout")&&(r=Object.assign({signal:(a=s.timeout(t,e)).signal},r));var n,i,a,d=s.fetch(e,r);return(null===(i=a)||void 0===i?void 0:i.done)!=null&&(d=d.finally(a.done)),d};if(null!=n||null!=i){;e=a,a=function(t,r){var o=new URL((null==t?void 0:t.url)==null?t:t.url,document.location).origin,a=e(t,r);return n&&n(o),i&&(a=a.finally(function(){return i(o)})),a}}return a}t.fetch=d();function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.request,n=t.done;return function(t,s,d){var c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};try{var u,l=c.method||(d?"POST":"GET"),p=document.createElement("a");p.href=t;var f="object"===(0,i.default)(s)&&null!==s?s:{success:function(){(0,a.logMessage)("xhr success")},error:function(e){(0,a.logError)("xhr error",null,e)}};if("function"==typeof s&&(f.success=s),(u=new window.XMLHttpRequest).onreadystatechange=function(){if(4===u.readyState){"function"==typeof n&&n(p.origin);var e=u.status;e>=200&&e<300||304===e?f.success(u.responseText,u):f.error(u.statusText,u)}},!o.config.getConfig("disableAjaxTimeout")&&(u.ontimeout=function(){(0,a.logError)("  xhr timeout after ",u.timeout,"ms")}),"GET"===l&&d){var g=(0,a.parseUrl)(t,c);Object.assign(g.search,d),t=(0,a.buildUrl)(g)}u.open(l,t,!0),!o.config.getConfig("disableAjaxTimeout")&&(u.timeout=e),c.withCredentials&&(u.withCredentials=!0),(0,a._each)(c.customHeaders,function(e,t){u.setRequestHeader(t,e)}),c.preflight&&u.setRequestHeader("X-Requested-With","XMLHttpRequest"),u.setRequestHeader("Content-Type",c.contentType||"text/plain"),"function"==typeof r&&r(p.origin),"POST"===l&&d?u.send(d):u.send()}catch(e){(0,a.logError)("xhr construction",e),"object"===(0,i.default)(s)&&null!==s&&s.error(e)}}}t.ajax=c()},8514:function(e,t,r){"use strict";var n=r(1640),i=r(7251);Object.defineProperty(t,"__esModule",{value:!0}),t.addBidResponse=t.addAppDataToBidResponse=t.AUCTION_STARTED=t.AUCTION_IN_PROGRESS=t.AUCTION_COMPLETED=void 0,t.addBidToAuction=G,t.addBidderRequests=void 0,t.adjustBids=en,t.auctionCallbacks=F,t.getDSP=t.getCreativeId=t.getAdvertiserDomain=t.callPrebidCache=t.bidsBackCallback=void 0,t.getKeyValueTargetingPairs=et,t.getMediaTypeGranularity=Y,t.getPrimaryCatId=t.getPriceGranularity=t.getPriceByGranularity=void 0,t.getStandardBidderSettings=ee,t.newAuction=function(e){var t,r,n,i,o=e.adUnits,a=e.adUnitCodes,d=e.callback,c=e.cbTimeout,u=e.labels,l=e.auctionId,f=e.ortb2Fragments,g=e.metrics;g=(0,O.useMetrics)(g);var v=l||(0,s.generateUUID)(),m=new Set,b=(0,S.defer)(),h=(0,S.defer)(),y=[],_=d,T=[],w=[],C=[],x=[],M=[];function V(){return{auctionId:v,timestamp:t,auctionEnd:r,auctionStatus:i,adUnits:o,adUnitCodes:a,labels:u,bidderRequests:T,noBids:C,bidsReceived:w,bidsRejected:y,winningBids:x,timeout:c,metrics:g,seatNonBids:M}}function G(e){if(e?A.emit(E.EVENTS.AUCTION_TIMEOUT,V()):clearTimeout(n),void 0===r){var t=[];e&&((0,s.logMessage)("Auction ".concat(v," timedOut")),(t=T.filter(function(e){return!m.has(e.bidderRequestId)}).flatMap(function(e){return e.bids})).length&&A.emit(E.EVENTS.BID_TIMEOUT,t)),i=j,r=Date.now(),g.checkpoint("auctionEnd"),g.timeBetween("requestBids","auctionEnd","requestBids.total"),g.timeBetween("callBids","auctionEnd","requestBids.callBids"),b.resolve();var d=V();if(0===m.size&&t.length>0){var u=t[0].adUnitCode;d.adUnits.forEach(function(e){e.code===u&&(e.noBidReason="ato")})}A.emit(E.EVENTS.AUCTION_END,V()),L(o,function(){try{if(null!=_){var r=w.filter(function(e){return a.includes(e.adUnitCode)}).reduce(ei,{});_.apply(B,[r,e,v]),_=null}}catch(e){(0,s.logError)("Error executing bidsBackHandler",null,e)}finally{t.length&&I.default.callTimedOutBidders(o,t,c);var n=p.config.getConfig("userSync")||{};!n.enableOverride&&P(n.syncDelay)}})}}function z(){p.config.resetBidder(),(0,s.logInfo)("Bids Received for Auction with id: ".concat(v),w),i=j,G(!1)}function W(e){m.add(e)}function Y(e){var t=this;e.forEach(function(e){var t;t=e,T=T.concat(t)});var r={},a={bidRequests:e,run:function(){n=setTimeout(function(){return G(!0)},c),i=R,A.emit(E.EVENTS.AUCTION_INIT,V());var a=F(z,t);I.default.callBids(o,e,a.addBidResponse,a.adapterDone,{request:function(e,t){u(k,t),u(r,e),!N[e]&&(N[e]={SRA:!0,origin:t}),r[e]>1&&(N[e].SRA=!1)},done:function(e){k[e]--,U[0]&&d(U[0])&&U.shift()}},c,W,f),h.resolve()}};function d(e){var t=!0,r=p.config.getConfig("maxRequestsPerOrigin")||4;return e.bidRequests.some(function(e){var n=1,i=void 0!==e.src&&e.src===E.S2S.SRC?"s2s":e.bidderCode;return N[i]&&(!1===N[i].SRA&&(n=Math.min(e.bids.length,r)),k[N[i].origin]+n>r&&(t=!1)),!t}),t&&e.run(),t}function u(e,t){void 0===e[t]?e[t]=1:e[t]++}!d(a)&&((0,s.logWarn)("queueing auction due to limited endpoint capacity"),U.push(a))}return A.on(E.EVENTS.SEAT_NON_BID,function(e){if(e.auctionId===v){var t;t=e.seatnonbid,M=M.concat(t)}}),{addBidReceived:function(e){w=w.concat(e)},addBidRejected:function(e){y=y.concat(e)},addNoBid:function(e){C=C.concat(e)},callBids:function(){i=D,t=Date.now();var e=g.measureTime("requestBids.makeRequests",function(){return I.default.makeBidRequests(o,t,v,c,u,f,g)});(0,s.logInfo)("Bids Requested for Auction with id: ".concat(v),e),g.checkpoint("callBids"),e.length<1?((0,s.logWarn)("No valid bid requests returned for auction"),z()):q.call({dispatch:Y,context:this},e)},addWinningBid:function(e){x=x.concat(e),I.default.callBidWonBidder(e.adapterCode||e.bidder,e,o),!e.deferBilling&&I.default.triggerBilling(e)},setBidTargeting:function(e){I.default.callSetTargetingBidder(e.adapterCode||e.bidder,e)},getWinningBids:function(){return x},getAuctionStart:function(){return t},getAuctionEnd:function(){return r},getTimeout:function(){return c},getAuctionId:function(){return v},getAuctionStatus:function(){return i},getAdUnits:function(){return o},getAdUnitCodes:function(){return a},getBidRequests:function(){return T},getBidsReceived:function(){return w},getNoBids:function(){return C},getNonBids:function(){return M},getFPD:function(){return f},getMetrics:function(){return g},end:b.promise,requestsDone:h.promise}},t.resetAuctionState=function(){U.length=0,[k,N].forEach(function(e){return Object.keys(e).forEach(function(t){delete e[t]})})},t.responsesReady=void 0;var o=n(r(7251)),a=n(r(9837)),s=r(1235),d=r(4359),c=r(2659),u=r(5800),l=r(4389),p=r(3408),f=r(1053),g=r(2885),v=r(7448),m=r(5045),b=r(8705),h=r(3136),y=r(4735),A=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=i(e)&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(56)),I=n(r(9293)),E=r(2778),S=r(6607),O=r(647),_=r(8763),T=r(9895);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var P=f.userSync.syncUsers,D=t.AUCTION_STARTED="started",R=t.AUCTION_IN_PROGRESS="inProgress",j=t.AUCTION_COMPLETED="completed";A.on(E.EVENTS.BID_ADJUSTMENT,function(e){en(e)});var k={},N={},U=[],B=(0,T.getGlobal)(),M=t.addBidResponse=(0,g.hook)("sync",function(e,t,r){(function(e){var t=p.config.getConfig("maxBid");return!t||!e.cpm||t>=Number(e.cpm)})(t)?this.dispatch.call(null,e,t):r(E.REJECTION_REASON.PRICE_TOO_HIGH)},"addBidResponse"),V=t.responsesReady=(0,g.hook)("sync",function(e){return e},"responsesReady"),q=t.addBidderRequests=(0,g.hook)("sync",function(e){this.dispatch.call(this.context,e)},"addBidderRequests"),L=t.bidsBackCallback=(0,g.hook)("async",function(e,t){t&&t()},"bidsBackCallback");function F(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.index,i=void 0===n?h.auctionManager.index:n,a=0,u=!1,f=new Set,g={};function y(){a--,u&&0===a&&e()}function I(e,t,r){return g[t.requestId]=!0,function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.index,i=void 0===n?h.auctionManager.index:n,o=i.getBidderRequest(e);W(o,e);var a=i.getAdUnit(e),d=o&&o.start||e.requestTimestamp;Object.assign(e,x(x({responseTimestamp:e.responseTimestamp||(0,s.timestamp)(),requestTimestamp:e.requestTimestamp||d,cpm:parseFloat(e.cpm)||0,bidder:e.bidder||e.bidderCode,adUnitCode:t},(null==o?void 0:o.bidPoolId)&&{bidPoolId:o.bidPoolId}),(null==o?void 0:o.passiveBidPoolId)&&{passiveBidPoolId:o.passiveBidPoolId})),(null==a?void 0:a.ttlBuffer)!=null&&(e.ttlBuffer=a.ttlBuffer),e.timeToRespond=e.responseTimestamp-e.requestTimestamp}(t,e),a++,r(y)}function O(e,r){I(e,r,function(e){var n=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.index,i=void 0===n?h.auctionManager.index:n,a=i.getAdUnit(e);a.viewability&&(e.viewability=a.viewability),A.emit(E.EVENTS.BID_ADJUSTMENT,e);var s=(null===(t=i.getBidRequest(e))||void 0===t?void 0:t.renderer)||a.renderer,c=e.mediaType,u=i.getMediaTypes(e),f=u&&u[c],g=f&&f.renderer,v=null;g&&g.url&&g.render&&!(!0===g.backupOnly&&e.renderer)?v=g:s&&s.url&&s.render&&!(!0===s.backupOnly&&e.renderer)&&(v=s),v&&(e.renderer=l.Renderer.install({url:v.url,config:v.options}),e.renderer.setRender(v.render));var m=Y(e.mediaType,u,p.config.getConfig("mediaTypePriceGranularity")),b=(0,d.getPriceBucketString)(e.cpm,"object"===(0,o.default)(m)?m:p.config.getConfig("customPriceBucket"),p.config.getConfig("currency.granularityMultiplier"));return e.pbLg=b.low,e.pbMg=b.med,e.pbHg=b.high,e.pbAg=b.auto,e.pbDg=b.dense,e.pbCg=b.custom,e}(r);A.emit(E.EVENTS.BID_ACCEPTED,n),n.mediaType===b.VIDEO?function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.index,o=void 0===i?h.auctionManager.index:i,a=!0,d=(0,s.deepAccess)(o.getMediaTypes({requestId:t.originalRequestId||t.requestId,adUnitId:t.adUnitId}),"video"),c=d&&(0,s.deepAccess)(d,"context"),u=d&&(0,s.deepAccess)(d,"useCacheKey");p.config.getConfig("cache.url")&&(u||c!==m.OUTSTREAM)&&(!t.videoCacheKey||p.config.getConfig("cache.ignoreBidderCacheKey")?(a=!1,z(e,t,r,d)):!t.vastUrl&&((0,s.logError)("videoCacheKey specified but not required vastUrl for video bid"),a=!1)),a&&(G(e,t),r())}(t,n,e):((0,c.isNativeResponse)(n)&&(0,c.setNativeResponseProperties)(n,i.getAdUnit(n)),G(t,n),e())})}function _(e,r,n){return I(e,r,function(e){r.rejectionReason=n,(0,s.logWarn)("Bid from ".concat(r.bidder||"unknown bidder"," was rejected: ").concat(n),r),A.emit(E.EVENTS.BID_REJECTED,r),t.addBidRejected(r),e()})}function T(){var r=t.getBidRequests(),n=p.config.getConfig("auctionOptions");if(f.add(this),n&&!(0,s.isEmpty)(n)){var i=n.secondaryBidders;i&&!r.every(function(e){return(0,v.includes)(i,e.bidderCode)})&&(r=r.filter(function(e){return!(0,v.includes)(i,e.bidderCode)}))}u=r.every(function(e){return f.has(e)}),this.bids.forEach(function(e){!g[e.bidId]&&(t.addNoBid(e),A.emit(E.EVENTS.NO_BID,e))}),u&&0===a&&e()}return{addBidResponse:function(){function e(e,t){var r;M.call({dispatch:O},e,t,(r=!1,function(n){!r&&(_(e,t,n),r=!0)}))}return e.reject=_,e}(),adapterDone:function(){var e=this;V(S.GreedyPromise.resolve()).finally(function(){return T.call(e)})}}}function G(e,t){(function(e){var t,r=!0===y.bidderSettings.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0;e.bidderCode&&(r||e.dealId)&&(t=et(e.bidderCode,e)),e.adserverTargeting=Object.assign(e.adserverTargeting||{},t)})(t),(0,O.useMetrics)(t.metrics).timeSince("addBidResponse","addBidResponse.total"),e.addBidReceived(t),A.emit(E.EVENTS.BID_RESPONSE,t)}var z=t.callPrebidCache=(0,g.hook)("async",function(e,t,r,n){(0,u.batchAndStore)(e,t,r)},"callPrebidCache"),W=t.addAppDataToBidResponse=function(e,t){null!=e&&e.app&&t&&(t.app=!0)};function Y(e,t,r){if(e&&r){if(e===b.VIDEO){var n=(0,s.deepAccess)(t,"".concat(b.VIDEO,".context"),"instream");if(r["".concat(b.VIDEO,"-").concat(n)])return r["".concat(b.VIDEO,"-").concat(n)]}return r[e]}}var H=t.getPriceGranularity=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.index,n=void 0===r?h.auctionManager.index:r,i=Y(e.mediaType,n.getMediaTypes(e),p.config.getConfig("mediaTypePriceGranularity"));return"string"==typeof e.mediaType&&i?"string"==typeof i?i:"custom":p.config.getConfig("priceGranularity")},J=t.getPriceByGranularity=function(e){return function(t){var r=e||H(t);if(r===E.GRANULARITY_OPTIONS.AUTO)return t.pbAg;if(r===E.GRANULARITY_OPTIONS.DENSE)return t.pbDg;if(r===E.GRANULARITY_OPTIONS.LOW)return t.pbLg;else if(r===E.GRANULARITY_OPTIONS.MEDIUM)return t.pbMg;else if(r===E.GRANULARITY_OPTIONS.HIGH)return t.pbHg;else if(r===E.GRANULARITY_OPTIONS.CUSTOM)return t.pbCg}},K=t.getCreativeId=function(){return function(e){return e.creativeId?e.creativeId:""}},Q=t.getAdvertiserDomain=function(){return function(e){return e.meta&&e.meta.advertiserDomains&&e.meta.advertiserDomains.length>0?[e.meta.advertiserDomains].flat()[0]:""}},$=t.getDSP=function(){return function(e){return e.meta&&(e.meta.networkId||e.meta.networkName)?(0,s.deepAccess)(e,"meta.networkName")||(0,s.deepAccess)(e,"meta.networkId"):""}},X=t.getPrimaryCatId=function(){return function(e){return e.meta&&e.meta.primaryCatId?e.meta.primaryCatId:""}};function Z(e,t){return{key:e,val:"function"==typeof t?function(e,r){return t(e,r)}:function(e){return(0,s.getValue)(e,t)}}}function ee(e,t){var r=Object.assign({},y.bidderSettings.settingsFor(null));if(!r[E.JSON_MAPPING.ADSERVER_TARGETING]&&(r[E.JSON_MAPPING.ADSERVER_TARGETING]=[Z(E.TARGETING_KEYS.BIDDER,"bidderCode"),Z(E.TARGETING_KEYS.AD_ID,"adId"),Z(E.TARGETING_KEYS.PRICE_BUCKET,J()),Z(E.TARGETING_KEYS.SIZE,"size"),Z(E.TARGETING_KEYS.DEAL,"dealId"),Z(E.TARGETING_KEYS.SOURCE,"source"),Z(E.TARGETING_KEYS.FORMAT,"mediaType"),Z(E.TARGETING_KEYS.ADOMAIN,Q()),Z(E.TARGETING_KEYS.ACAT,X()),Z(E.TARGETING_KEYS.DSP,$()),Z(E.TARGETING_KEYS.CRID,K())]),"video"===e){var n=r[E.JSON_MAPPING.ADSERVER_TARGETING].slice();if(r[E.JSON_MAPPING.ADSERVER_TARGETING]=n,[E.TARGETING_KEYS.UUID,E.TARGETING_KEYS.CACHE_ID].forEach(function(e){void 0===(0,v.find)(n,function(t){return t.key===e})&&n.push(Z(e,"videoCacheKey"))}),p.config.getConfig("cache.url")&&(!t||!1!==y.bidderSettings.get(t,"sendStandardTargeting"))){var i=(0,s.parseUrl)(p.config.getConfig("cache.url"));void 0===(0,v.find)(n,function(e){return e.key===E.TARGETING_KEYS.CACHE_HOST})&&n.push(Z(E.TARGETING_KEYS.CACHE_HOST,function(e){return(0,s.deepAccess)(e,"adserverTargeting.".concat(E.TARGETING_KEYS.CACHE_HOST))?e.adserverTargeting[E.TARGETING_KEYS.CACHE_HOST]:i.hostname}))}}return r}function et(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.index,i=void 0===n?h.auctionManager.index:n;if(!t)return{};var o=i.getBidRequest(t),a={};return er(a,ee(t.mediaType,e),t,o),o&&o.ortb2Imp&&o.ortb2Imp.instl&&(a[E.TARGETING_KEYS.INTERSTITIAL]=o.ortb2Imp.instl),e&&y.bidderSettings.getOwn(e,E.JSON_MAPPING.ADSERVER_TARGETING)&&(er(a,y.bidderSettings.ownSettingsFor(e),t,o),t.sendStandardTargeting=y.bidderSettings.get(e,"sendStandardTargeting")),t.native&&(a=Object.assign({},a,(0,c.getNativeTargeting)(t))),a}function er(e,t,r,n){var i=t[E.JSON_MAPPING.ADSERVER_TARGETING];return r.size=r.getSize(),(i||[]).forEach(function(i){var o=i.key,a=i.val;if(e[o]&&(0,s.logWarn)("The key: "+o+" is being overwritten"),(0,s.isFn)(a))try{a=a(r,n)}catch(e){(0,s.logError)("bidmanager","ERROR",e)}(void 0!==t.suppressEmptyKeys&&!0===t.suppressEmptyKeys||o===E.TARGETING_KEYS.DEAL||o===E.TARGETING_KEYS.ACAT||o===E.TARGETING_KEYS.DSP||o===E.TARGETING_KEYS.CRID)&&((0,s.isEmptyStr)(a)||null==a)?(0,s.logInfo)("suppressing empty key '"+o+"' from adserver targeting"):e[o]=a}),e}function en(e){e.responseCpm=e.cpm;var t=(0,_.adjustCpm)(e.cpm,e);t>=0&&(e.cpm=t)}function ei(e,t){return!e[t.adUnitCode]&&(e[t.adUnitCode]={bids:[]}),e[t.adUnitCode].bids.push(t),e}},2773:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuctionIndex=function(e){Object.assign(this,{getAuction:function(t){var r=t.auctionId;if(null!=r)return e().find(function(e){return e.getAuctionId()===r})},getAdUnit:function(t){var r=t.adUnitId;if(null!=r)return e().flatMap(function(e){return e.getAdUnits()}).find(function(e){return e.adUnitId===r})},getMediaTypes:function(e){var t=e.adUnitId,r=e.requestId;if(null!=r){var n=this.getBidRequest({requestId:r});if(null!=n&&(null==t||n.adUnitId===t))return n.mediaTypes}else if(null!=t){var i=this.getAdUnit({adUnitId:t});if(null!=i)return i.mediaTypes}},getBidderRequest:function(t){var r=t.requestId,n=t.bidderRequestId;if(null!=r||null!=n){var i=e().flatMap(function(e){return e.getBidRequests()});return(null!=n&&(i=i.filter(function(e){return e.bidderRequestId===n})),null==r)?i[0]:i.find(function(e){return e.bids&&null!=e.bids.find(function(e){return e.bidId===r})})}},getBidRequest:function(t){var r=t.requestId;if(null!=r)return e().flatMap(function(e){return e.getBidRequests()}).flatMap(function(e){return e.bids}).find(function(e){return e&&e.bidId===r})},getOrtb2:function(e){var t,r;return(null===(t=this.getBidderRequest(e))||void 0===t?void 0:t.ortb2)||(null===(r=this.getAuction(e))||void 0===r||null===(r=r.getFPD())||void 0===r||null===(r=r.global)||void 0===r?void 0:r.ortb2)}})}},3136:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.auctionManager=void 0,t.newAuctionManager=m;var i=n(r(4763)),o=n(r(4995)),a=r(1235),s=r(8514),d=r(2773),c=r(2778),u=r(647),l=r(9411),p=r(636),f=r(3408);function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var v="minBidCacheTTL";function m(){var e,t=null,r=(0,l.ttlCollection)({startTime:function(e){return e.end.then(function(){return e.getAuctionEnd()})},ttl:function(e){return null==t?null:e.end.then(function(){return 1e3*Math.max.apply(Math,[t].concat((0,o.default)(e.getBidsReceived().map(p.getTTL))))})}});(0,p.onTTLBufferChange)(function(){null!=t&&r.refresh()}),f.config.getConfig(v,function(e){t!==(t="number"==typeof(t=null==e?void 0:e[v])?t:null)&&r.refresh()});var n={onExpiry:r.onExpiry};function m(e){var t,n=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return g(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(r);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.getAuctionId()===e)return i}}catch(e){n.e(e)}finally{n.f()}}n.addWinningBid=function(e){var t=(0,u.useMetrics)(e.metrics);t.checkpoint("bidWon"),t.timeBetween("auctionEnd","bidWon","adserver.pending"),t.timeBetween("requestBids","bidWon","adserver.e2e");var r=m(e.auctionId);r?r.addWinningBid(e):(0,a.logWarn)("Auction not found when adding winning bid")},Object.entries({getAllWinningBids:{name:"getWinningBids"},getBidsRequested:{name:"getBidRequests"},getNoBids:{},getAdUnits:{},getBidsReceived:{pre:function(e){return e.getAuctionStatus()===s.AUCTION_COMPLETED},post:function(t){return e?e(t):t}},getAdUnitCodes:{post:a.uniques}}).forEach(function(e){var t=(0,i.default)(e,2),o=t[0],a=t[1],s=a.name,d=void 0===s?o:s,c=a.pre,u=a.post,l=null==c?function(e){return e[d]()}:function(e){return c(e)?e[d]():[]},p=null==u?function(e){return e}:function(e){return e.filter(u)};n[o]=function(){return p(r.toArray().flatMap(l))}});function b(){return r.toArray().flatMap(function(e){return e.getBidsReceived()})}return n.setBidsReceivedFilter=function(t){e=t},n.getAllBidsForAdUnitCode=function(e){return b().filter(function(t){return t&&t.adUnitCode===e})},n.createAuction=function(e){var t=(0,s.newAuction)(e);return function(e){r.add(e)}(t),t},n.findBidByAdId=function(e){return b().find(function(t){return t.adId===e})},n.getStandardBidderAdServerTargeting=function(){return(0,s.getStandardBidderSettings)()[c.JSON_MAPPING.ADSERVER_TARGETING]},n.setStatusForBids=function(e,t){var r=n.findBidByAdId(e);if(r&&(r.status=t),r&&t===c.BID_STATUS.BID_TARGETING_SET){var i=m(r.auctionId);i&&i.setBidTargeting(r)}},n.getLastAuctionId=function(){var e=r.toArray();return e.length&&e[e.length-1].getAuctionId()},n.clearAllAuctions=function(){r.clear()},n.index=new d.AuctionIndex(function(){return r.toArray()}),n}t.auctionManager=m()},636:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTTL=function(e){return e.ttl-(e.hasOwnProperty("ttlBuffer")?e.ttlBuffer:o)},t.onTTLBufferChange=function(e){a.push(e)};var n=r(3408),i=r(1235),o=1,a=[];n.config.getConfig("ttlBuffer",function(e){"number"==typeof e.ttlBuffer?o!==(o=e.ttlBuffer)&&a.forEach(function(e){return e(o)}):(0,i.logError)("Invalid value for ttlBuffer",e.ttlBuffer)})},4735:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.bidderSettings=t.ScopedSettings=void 0;var i=n(r(6945)),o=n(r(4920)),a=r(1235),s=r(9895),d=r(2778);function c(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw TypeError("Private element is not present on this object")}var u=new WeakSet,l=t.ScopedSettings=(0,o.default)(function e(t,r){var n,o;(0,i.default)(this,e),n=this,function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(n,o=u),o.add(n),this.getSettings=t,this.defaultScope=r},[{key:"get",value:function(e,t){var r=this.getOwn(e,t);return void 0===r&&(r=this.getOwn(null,t)),r}},{key:"getOwn",value:function(e,t){return e=c(u,this,p).call(this,e),(0,a.deepAccess)(this.getSettings(),"".concat(e,".").concat(t))}},{key:"getScopes",value:function(){var e=this;return Object.keys(this.getSettings()).filter(function(t){return t!==e.defaultScope})}},{key:"settingsFor",value:function(e){return(0,a.mergeDeep)({},this.ownSettingsFor(null),this.ownSettingsFor(e))}},{key:"ownSettingsFor",value:function(e){return e=c(u,this,p).call(this,e),this.getSettings()[e]||{}}}]);function p(e){return null==e?this.defaultScope:e}t.bidderSettings=new l(function(){return(0,s.getGlobal)().bidderSettings||{}},d.JSON_MAPPING.BD_SETTING_STANDARD)},5108:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createBid=function(e,t){return new i(e,t)};var n=r(1235);function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.src,i=t.bidder,o=t.bidId,a=t.transactionId,s=t.adUnitId,d=t.auctionId,c=e||0;Object.assign(this,{bidderCode:void 0===i?"":i,width:0,height:0,statusMessage:function(){switch(c){case 0:return"Pending";case 1:return"Bid available";case 2:return"Bid returned empty or error response";case 3:return"Bid timed out"}}(),adId:(0,n.getUniqueIdentifierStr)(),requestId:o,transactionId:a,adUnitId:s,auctionId:d,mediaType:"banner",source:void 0===r?"client":r});this.getStatusCode=function(){return c},this.getSize=function(){return this.width+"x"+this.height},this.getIdentifiers=function(){return{src:this.source,bidder:this.bidderCode,bidId:this.requestId,transactionId:this.transactionId,adUnitId:this.adUnitId,auctionId:this.auctionId}}}},3408:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.config=t.RANDOM=void 0,t.newConfig=h;var i=n(r(9837)),o=n(r(7251)),a=n(r(4763)),s=r(4359),d=r(7448),c=r(1235),u=r(2778);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var p="TRUE"===(0,c.getParameterByName)(u.DEBUG_MODE).toUpperCase(),f={},g=t.RANDOM="random",v={};v[g]=!0,v.fixed=!0;var m={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"};function b(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=t?{priceGranularity:m.MEDIUM,customPriceBucket:{},mediaTypePriceGranularity:{},bidderSequence:g,auctionOptions:{}}:{};function n(e){return r[e]}function i(t,n){!r.hasOwnProperty(t)&&Object.defineProperty(e,t,{enumerable:!0}),r[t]=n}return Object.defineProperties(e,Object.fromEntries(Object.entries({publisherDomain:{set:function(e){null!=e&&(0,c.logWarn)("publisherDomain is deprecated and has no effect since v7 - use pageUrl instead"),i("publisherDomain",e)}},priceGranularity:{set:function(e){u(e)&&("string"==typeof e?i("priceGranularity",o(e)?e:m.MEDIUM):(0,c.isPlainObject)(e)&&(i("customPriceBucket",e),i("priceGranularity",m.CUSTOM),(0,c.logMessage)("Using custom price granularity")))}},customPriceBucket:{},mediaTypePriceGranularity:{set:function(e){null!=e&&i("mediaTypePriceGranularity",Object.keys(e).reduce(function(t,n){return u(e[n])?"string"==typeof e?t[n]=o(e[n])?e[n]:r.priceGranularity:(0,c.isPlainObject)(e)&&(t[n]=e[n],(0,c.logMessage)("Using custom price granularity for ".concat(n))):(0,c.logWarn)("Invalid price granularity for media type: ".concat(n)),t},{}))}},bidderSequence:{set:function(e){v[e]?i("bidderSequence",e):(0,c.logWarn)("Invalid order: ".concat(e,". Bidder Sequence was not set."))}},auctionOptions:{set:function(e){(function(e){if(!(0,c.isPlainObject)(e))return(0,c.logWarn)("Auction Options must be an object"),!1;for(var t=0,r=Object.keys(e);t<r.length;t++){var n=r[t];if("secondaryBidders"!==n&&"suppressStaleRender"!==n)return(0,c.logWarn)("Auction Options given an incorrect param: ".concat(n)),!1;if("secondaryBidders"===n){if(!(0,c.isArray)(e[n]))return(0,c.logWarn)("Auction Options ".concat(n," must be of type Array")),!1;if(!e[n].every(c.isStr))return(0,c.logWarn)("Auction Options ".concat(n," must be only string")),!1}else if("suppressStaleRender"===n&&!(0,c.isBoolean)(e[n]))return(0,c.logWarn)("Auction Options ".concat(n," must be of type boolean")),!1}return!0})(e)&&i("auctionOptions",e)}}}).map(function(e){var t=(0,a.default)(e,2),o=t[0],s=t[1];return[o,Object.assign({get:n.bind(null,o),set:i.bind(null,o),enumerable:r.hasOwnProperty(o),configurable:!r.hasOwnProperty(o)},s)]}))),e;function o(e){return(0,d.find)(Object.keys(m),function(t){return e===m[t]})}function u(e){if(!e)return(0,c.logError)("Prebid Error: no value passed to `setPriceGranularity()`"),!1;if("string"==typeof e)!o(e)&&(0,c.logWarn)("Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.");else if((0,c.isPlainObject)(e)&&!(0,s.isValidPriceConfig)(e))return(0,c.logError)("Invalid custom price value passed to `setPriceGranularity()`"),!1;return!0}}function h(){var e,t,r,n=[],s=null;function u(){e={};var n=b({debug:p,bidderTimeout:3e3,enableSendAllBids:!0,useBidCache:!1,deviceAccess:!0,disableAjaxTimeout:!1,maxNestedIframes:10,maxBid:5e3,userSync:{topics:f}});t&&T(Object.keys(t).reduce(function(e,r){return t[r]!==n[r]&&(e[r]=n[r]||{}),e},{})),t=n,r={}}function g(){if(s&&r&&(0,c.isPlainObject)(r[s])){var e=r[s],n=new Set(Object.keys(t).concat(Object.keys(e)));return(0,d.arrayFrom)(n).reduce(function(r,n){return void 0===e[n]?r[n]=t[n]:void 0===t[n]?r[n]=e[n]:(0,c.isPlainObject)(e[n])?r[n]=(0,c.mergeDeep)({},t[n],e[n]):r[n]=e[n],r},{})}return Object.assign({},t)}var v=[g,function(){var e=g();return Object.defineProperty(e,"ortb2",{get:function(){throw Error("invalid access to 'orbt2' config - use request parameters instead")}}),e}].map(function(e){return function(){if(arguments.length<=1&&"function"!=typeof(arguments.length<=0?void 0:arguments[0])){var t=arguments.length<=0?void 0:arguments[0];return t?(0,c.deepAccess)(e(),t):g()}return _.apply(void 0,arguments)}}),m=(0,a.default)(v,2),h=m[0],y=m[1],A=[y,h].map(function(e){return function(){var t=e.apply(void 0,arguments);return t&&"object"===(0,o.default)(t)&&(t=(0,c.deepClone)(t)),t}}),I=(0,a.default)(A,2),E=I[0],S=I[1];function O(r){if(!(0,c.isPlainObject)(r)){(0,c.logError)("setConfig options must be an object");return}var n=Object.keys(r),i={};n.forEach(function(n){var o=r[n];(0,c.isPlainObject)(e[n])&&(0,c.isPlainObject)(o)&&(o=Object.assign({},e[n],o));try{i[n]=t[n]=o}catch(e){(0,c.logWarn)("Cannot set config for property ".concat(n," : "),e)}}),T(i)}function _(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=t;if("string"!=typeof e&&(o=e,e="*",r=t||{}),"function"!=typeof o){(0,c.logError)("listener must be a function");return}var a={topic:e,callback:o};return n.push(a),r.init&&o("*"===e?y():(0,i.default)({},e,y(e))),function(){n.splice(n.indexOf(a),1)}}function T(e){var t=Object.keys(e);n.filter(function(e){return(0,d.includes)(t,e.topic)}).forEach(function(t){t.callback((0,i.default)({},t.topic,e[t.topic]))}),n.filter(function(e){return"*"===e.topic}).forEach(function(t){return t.callback(e)})}function w(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{(function(e){if(!(0,c.isPlainObject)(e))throw"setBidderConfig bidder options must be an object";if(!(Array.isArray(e.bidders)&&e.bidders.length))throw"setBidderConfig bidder options must contain a bidders list with at least 1 bidder";if(!(0,c.isPlainObject)(e.config))throw"setBidderConfig bidder options must contain a config object"})(e),e.bidders.forEach(function(n){!r[n]&&(r[n]=b({},!1)),Object.keys(e.config).forEach(function(i){var o=e.config[i],a=r[n][i];if((0,c.isPlainObject)(o)&&(null==a||(0,c.isPlainObject)(a))){var s=t?c.mergeDeep:Object.assign;r[n][i]=s({},a||{},o)}else r[n][i]=o})})}catch(e){(0,c.logError)(e)}}function C(e,t){s=e;try{return t()}finally{x()}}function x(){s=null}return u(),{getCurrentBidder:function(){return s},resetBidder:x,getConfig:y,getAnyConfig:h,readConfig:E,readAnyConfig:S,setConfig:O,mergeConfig:function(e){if(!(0,c.isPlainObject)(e)){(0,c.logError)("mergeConfig input must be an object");return}var t=(0,c.mergeDeep)(g(),e);return O(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},t)),t},setDefaults:function(r){if(!(0,c.isPlainObject)(e)){(0,c.logError)("defaults must be an object");return}Object.assign(e,r),Object.assign(t,r)},resetConfig:u,runWithBidder:C,callbackWithBidder:function(e){return function(t){return function(){if("function"==typeof t){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return C(e,t.bind.apply(t,[this].concat(n)))}(0,c.logWarn)("config.callbackWithBidder callback is not a function")}}},setBidderConfig:w,getBidderConfig:function(){return r},mergeBidderConfig:function(e){return w(e,!0)}}}t.config=h()},5087:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.gppDataHandler=t.gdprDataHandler=t.coppaDataHandler=t.allConsent=t.VENDORLESS_GVLID=t.GDPR_GVLIDS=t.ConsentHandler=void 0,t.gvlidRegistry=j,t.multiHandler=V,t.uspDataHandler=void 0;var i=n(r(4763)),o=n(r(9709)),a=n(r(4237)),s=n(r(4271)),d=n(r(6945)),c=n(r(4920)),u=n(r(9837)),l=r(1235),p=r(6607),f=r(3408);function g(e,t,r){return t=(0,a.default)(t),(0,o.default)(e,v()?Reflect.construct(t,r||[],(0,a.default)(e).constructor):t.apply(e,r))}function v(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(v=function(){return!!e})()}function m(e,t,r){b(e,t),t.set(e,r)}function b(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}function h(e,t){return e.get(A(e,t))}function y(e,t,r){return e.set(A(e,t),r),r}function A(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw TypeError("Private element is not present on this object")}t.VENDORLESS_GVLID=Object.freeze({});var I=new WeakMap,E=new WeakMap,S=new WeakMap,O=new WeakMap,_=new WeakMap,T=new WeakMap,w=new WeakSet,C=t.ConsentHandler=(0,c.default)(function e(){var t,r;(0,d.default)(this,e),t=this,b(t,r=w),r.add(t),m(this,I,void 0),m(this,E,void 0),m(this,S,void 0),m(this,O,void 0),m(this,_,!0),m(this,T,void 0),(0,u.default)(this,"generatedTime",void 0),(0,u.default)(this,"hashFields",void 0),this.reset()},[{key:"reset",value:function(){y(S,this,(0,p.defer)()),y(I,this,!1),y(E,this,null),y(O,this,!1),this.generatedTime=null}},{key:"enable",value:function(){y(I,this,!0)}},{key:"enabled",get:function(){return h(I,this)}},{key:"ready",get:function(){return h(O,this)}},{key:"promise",get:function(){return h(O,this)?p.GreedyPromise.resolve(h(E,this)):(!h(I,this)&&A(w,this,x).call(this,null),h(S,this).promise)}},{key:"setConsentData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(0,l.timestamp)();this.generatedTime=t,y(_,this,!0),A(w,this,x).call(this,e)}},{key:"getConsentData",value:function(){return h(E,this)}},{key:"hash",get:function(){var e=this;return h(_,this)&&(y(T,this,(0,l.cyrb53Hash)(JSON.stringify(h(E,this)&&this.hashFields?this.hashFields.map(function(t){return h(E,e)[t]}):h(E,this)))),y(_,this,!1)),h(T,this)}}]);function x(e){y(O,this,!0),y(E,this,e),h(S,this).resolve(e)}var P=function(e){function t(){return(0,d.default)(this,t),g(this,t,arguments)}return(0,s.default)(t,e),(0,c.default)(t,[{key:"getConsentMeta",value:function(){if(this.getConsentData()&&this.generatedTime)return{generatedAt:this.generatedTime}}}])}(C),D=function(e){function t(){var e;(0,d.default)(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=g(this,t,[].concat(n)),(0,u.default)(e,"hashFields",["gdprApplies","consentString"]),e}return(0,s.default)(t,e),(0,c.default)(t,[{key:"getConsentMeta",value:function(){var e=this.getConsentData();if(e&&e.vendorData&&this.generatedTime)return{gdprApplies:e.gdprApplies,consentStringSize:(0,l.isStr)(e.vendorData.tcString)?e.vendorData.tcString.length:0,generatedAt:this.generatedTime,apiVersion:e.apiVersion}}}])}(C),R=function(e){function t(){var e;(0,d.default)(this,t);for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];return e=g(this,t,[].concat(n)),(0,u.default)(e,"hashFields",["applicableSections","gppString"]),e}return(0,s.default)(t,e),(0,c.default)(t,[{key:"getConsentMeta",value:function(){if(this.getConsentData()&&this.generatedTime)return{generatedAt:this.generatedTime}}}])}(C);function j(){var e={},t={},r={};return{register:function(n,i,o){o&&((e[i]=e[i]||{})[n]=o,t.hasOwnProperty(i)?t[i]!==o&&(t[i]=r):t[i]=o)},get:function(n){var i={modules:e[n]||{}};return t.hasOwnProperty(n)&&t[n]!==r&&(i.gvlid=t[n]),i}}}var k=t.gdprDataHandler=new D,N=t.uspDataHandler=new P,U=t.gppDataHandler=new R,B=t.coppaDataHandler=function(){function e(){return!!f.config.getConfig("coppa")}return{getCoppa:e,getConsentData:e,getConsentMeta:e,reset:function(){},get promise(){return p.GreedyPromise.resolve(e())},get hash(){return e()?"1":"0"}}}();t.GDPR_GVLIDS=j();var M={gdpr:k,usp:N,gpp:U,coppa:B};function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M;return e=Object.entries(e),Object.assign({get promise(){return p.GreedyPromise.all(e.map(function(e){var t=(0,i.default)(e,2),r=t[0];return t[1].promise.then(function(e){return[r,e]})})).then(function(e){return Object.fromEntries(e)})},get hash(){return(0,l.cyrb53Hash)(e.map(function(e){var t=(0,i.default)(e,2);return(t[0],t[1]).hash}).join(":"))}},Object.fromEntries(["getConsentData","getConsentMeta","reset"].map(function(t){var r;return[t,(r=t,function(){return Object.fromEntries(e.map(function(e){var t=(0,i.default)(e,2);return[t[0],t[1][r]()]}))})]})))}t.allConsent=V()},2778:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TARGETING_KEYS=t.STATUS=t.S2S=t.REJECTION_REASON=t.PREBID_NATIVE_DATA_KEYS_TO_ORTB=t.PB_LOCATOR=t.NATIVE_KEYS_THAT_ARE_NOT_ASSETS=t.NATIVE_KEYS=t.NATIVE_IMAGE_TYPES=t.NATIVE_ASSET_TYPES=t.MESSAGES=t.JSON_MAPPING=t.GRANULARITY_OPTIONS=t.EVENT_ID_PATHS=t.EVENTS=t.DEFAULT_TARGETING_KEYS=t.DEBUG_MODE=t.BID_STATUS=t.AD_RENDER_FAILED_REASON=void 0,t.JSON_MAPPING={PL_CODE:"code",PL_SIZE:"sizes",PL_BIDS:"bids",BD_BIDDER:"bidder",BD_ID:"paramsd",BD_PL_ID:"placementId",ADSERVER_TARGETING:"adserverTargeting",BD_SETTING_STANDARD:"standard"},t.DEBUG_MODE="pbjs_debug",t.STATUS={GOOD:1},t.EVENTS={AUCTION_INIT:"auctionInit",AUCTION_TIMEOUT:"auctionTimeout",AUCTION_END:"auctionEnd",BID_ADJUSTMENT:"bidAdjustment",BID_TIMEOUT:"bidTimeout",BID_REQUESTED:"bidRequested",BID_RESPONSE:"bidResponse",BID_REJECTED:"bidRejected",NO_BID:"noBid",SEAT_NON_BID:"seatNonBid",BID_WON:"bidWon",BIDDER_DONE:"bidderDone",BIDDER_ERROR:"bidderError",SET_TARGETING:"setTargeting",BEFORE_REQUEST_BIDS:"beforeRequestBids",BEFORE_BIDDER_HTTP:"beforeBidderHttp",REQUEST_BIDS:"requestBids",ADD_AD_UNITS:"addAdUnits",AD_RENDER_FAILED:"adRenderFailed",AD_RENDER_SUCCEEDED:"adRenderSucceeded",TCF2_ENFORCEMENT:"tcf2Enforcement",AUCTION_DEBUG:"auctionDebug",BID_VIEWABLE:"bidViewable",STALE_RENDER:"staleRender",BILLABLE_EVENT:"billableEvent",VAST_EXCEEDED_LIMIT:"vastExceededLimit",BID_ACCEPTED:"bidAccepted",RUN_PAAPI_AUCTION:"paapiRunAuction",PBS_ANALYTICS:"pbsAnalytics",PAAPI_BID:"paapiBid",PAAPI_NO_BID:"paapiNoBid",PAAPI_ERROR:"paapiError",RUBICON_BID_ERROR:"rubiconBidError"},t.AD_RENDER_FAILED_REASON={PREVENT_WRITING_ON_MAIN_DOCUMENT:"preventWritingOnMainDocument",NO_AD:"noAd",EXCEPTION:"exception",CANNOT_FIND_AD:"cannotFindAd",MISSING_DOC_OR_ADID:"missingDocOrAdid"},t.EVENT_ID_PATHS={bidWon:"adUnitCode"},t.GRANULARITY_OPTIONS={LOW:"low",MEDIUM:"medium",HIGH:"high",AUTO:"auto",DENSE:"dense",CUSTOM:"custom"},t.TARGETING_KEYS={BIDDER:"hb_bidder",AD_ID:"hb_adid",PRICE_BUCKET:"hb_pb",SIZE:"hb_size",DEAL:"hb_deal",SOURCE:"hb_source",FORMAT:"hb_format",UUID:"hb_uuid",CACHE_ID:"hb_cache_id",CACHE_HOST:"hb_cache_host",ADOMAIN:"hb_adomain",ACAT:"hb_acat",CRID:"hb_crid",DSP:"hb_dsp",INTERSTITIAL:"hb_instl",ATTR:"hb_attr"},t.DEFAULT_TARGETING_KEYS={BIDDER:"hb_bidder",AD_ID:"hb_adid",PRICE_BUCKET:"hb_pb",SIZE:"hb_size",DEAL:"hb_deal",FORMAT:"hb_format",UUID:"hb_uuid",CACHE_HOST:"hb_cache_host"},t.NATIVE_KEYS={title:"hb_native_title",body:"hb_native_body",body2:"hb_native_body2",privacyLink:"hb_native_privacy",privacyIcon:"hb_native_privicon",sponsoredBy:"hb_native_brand",image:"hb_native_image",icon:"hb_native_icon",clickUrl:"hb_native_linkurl",displayUrl:"hb_native_displayurl",cta:"hb_native_cta",rating:"hb_native_rating",address:"hb_native_address",downloads:"hb_native_downloads",likes:"hb_native_likes",phone:"hb_native_phone",price:"hb_native_price",salePrice:"hb_native_saleprice",rendererUrl:"hb_renderer_url",adTemplate:"hb_adTemplate"},t.S2S={SRC:"s2s",DEFAULT_ENDPOINT:"https://prebid.adnxs.com/pbs/v1/openrtb2/auction",SYNCED_BIDDERS_KEY:"pbjsSyncs"},t.BID_STATUS={BID_TARGETING_SET:"targetingSet",RENDERED:"rendered",BID_REJECTED:"bidRejected"},t.REJECTION_REASON={INVALID:"Bid has missing or invalid properties",INVALID_REQUEST_ID:"Invalid request ID",BIDDER_DISALLOWED:"Bidder code is not allowed by allowedAlternateBidderCodes / allowUnknownBidderCodes",FLOOR_NOT_MET:"Bid does not meet price floor",CANNOT_CONVERT_CURRENCY:"Unable to convert currency",DSA_REQUIRED:"Bid does not provide required DSA transparency info",DSA_MISMATCH:"Bid indicates inappropriate DSA rendering method",PRICE_TOO_HIGH:"Bid price exceeds maximum value"},t.PREBID_NATIVE_DATA_KEYS_TO_ORTB={body:"desc",body2:"desc2",sponsoredBy:"sponsored",cta:"ctatext",rating:"rating",address:"address",downloads:"downloads",likes:"likes",phone:"phone",price:"price",salePrice:"saleprice",displayUrl:"displayurl"},t.NATIVE_ASSET_TYPES={sponsored:1,desc:2,rating:3,likes:4,downloads:5,price:6,saleprice:7,phone:8,address:9,desc2:10,displayurl:11,ctatext:12},t.NATIVE_IMAGE_TYPES={ICON:1,MAIN:3},t.NATIVE_KEYS_THAT_ARE_NOT_ASSETS=["privacyIcon","clickUrl","sendTargetingKeys","adTemplate","rendererUrl","type"],t.MESSAGES={REQUEST:"Prebid Request",RESPONSE:"Prebid Response",NATIVE:"Prebid Native",EVENT:"Prebid Event"},t.PB_LOCATOR="__pb_locator__"},4359:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPriceBucketString=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=parseFloat(e);return isNaN(n)&&(n=""),{low:""===n?"":l(e,a,r),med:""===n?"":l(e,s,r),high:""===n?"":l(e,d,r),auto:""===n?"":l(e,u,r),dense:""===n?"":l(e,c,r),custom:""===n?"":l(e,t,r)}},t.isValidPriceConfig=p;var n=r(7448),i=r(1235),o=r(3408),a={buckets:[{max:5,increment:.5}]},s={buckets:[{max:20,increment:.1}]},d={buckets:[{max:20,increment:.01}]},c={buckets:[{max:3,increment:.01},{max:8,increment:.05},{max:20,increment:.5}]},u={buckets:[{max:5,increment:.05},{max:10,increment:.1},{max:20,increment:.5}]};function l(e,t,r){var a="";if(!p(t))return a;var s=t.buckets.reduce(function(e,t){return e.max>t.max?e:t},{max:0}),d=0,c=(0,n.find)(t.buckets,function(t){if(e>s.max*r){var n=t.precision;void 0===n&&(n=2),a=(t.max*r).toFixed(n)}else{if(e<=t.max*r&&e>=d*r)return t.min=d,t;d=t.max}});return c&&(a=function(e,t,r){var n,a,s=void 0!==t.precision?t.precision:2,d=t.increment*r,c=t.min*r,u=Math.floor,l=o.config.getConfig("cpmRoundingFunction");"function"==typeof l&&(u=l);var p=Math.pow(10,s+2),f=(e*p-c*p)/(d*p);try{n=u(f)*d+c}catch(e){a=!0}return(a||"number"!=typeof n)&&((0,i.logWarn)("Invalid rounding function passed in config"),n=Math.floor(f)*d+c),(n=Number(n.toFixed(10))).toFixed(s)}(e,c,r)),a}function p(e){if((0,i.isEmpty)(e)||!e.buckets||!Array.isArray(e.buckets))return!1;var t=!0;return e.buckets.forEach(function(e){(!e.max||!e.increment)&&(t=!1)}),t}},6105:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCreativeRendererSource=t.getCreativeRenderer=void 0;var n,i=r(6607),o=r(1235),a=r(7949),s=r(2885),d=t.getCreativeRendererSource=(0,s.hook)("sync",function(e){return a.RENDERER});t.getCreativeRenderer=(n={},function(e){var t=d(e);return!n.hasOwnProperty(t)&&(n[t]=new i.GreedyPromise(function(e){var r=(0,o.createInvisibleIframe)();r.srcdoc="<script>".concat(t,"<\/script>"),r.onload=function(){return e(r.contentWindow.render)},document.body.appendChild(r)})),n[t]})},797:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEBUG_KEY=void 0,t.debuggingControls=v,t.debuggingModuleLoader=g,t.loadSession=function(){var e=null;try{e=window.sessionStorage}catch(e){}if(null!==e){var t=null;try{t=e.getItem(l)}catch(e){}null!==t&&m.enable()}},t.reset=void 0;var n=r(3408),i=r(2885),o=r(9895),a=r(1235),s=r(5108),d=r(8427),c=r(6607),u=r(5723),l=t.DEBUG_KEY="__pbjs_debugging__";function p(){return(0,o.getGlobal)().installedModules.includes("debugging")}function f(e){return new c.GreedyPromise(function(t){(0,d.loadExternalScript)(e,u.MODULE_TYPE_PREBID,"debugging",t)})}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alreadyInstalled,r=void 0===t?p:t,d=e.script,u=void 0===d?f:d,g=null;return function(){return null==g&&(g=new c.GreedyPromise(function(e,t){setTimeout(function(){if(r())e();else{var d="https://cdn.jsdelivr.net/npm/prebid.js@9.17.0/dist/debugging-standalone.js";(0,a.logMessage)('Debugging module not installed, loading it from "'.concat(d,'"...')),(0,o.getGlobal)()._installDebugging=!0,u(d).then(function(){(0,o.getGlobal)()._installDebugging({DEBUG_KEY:l,hook:i.hook,config:n.config,createBid:s.createBid,logger:(0,a.prefixLog)("DEBUG:")})}).then(e,t)}})})),g}}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.load,r=void 0===t?g():t,n=e.hook,o=void 0===n?(0,i.getHook)("requestBids"):n,a=null,s=!1;function d(e){for(var t=this,r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return(a||c.GreedyPromise.resolve()).then(function(){return e.apply(t,n)})}function u(){o.getHooks({hook:d}).remove(),s=!1}return{enable:function(){!s&&(a=r(),o.before(d,99),s=!0)},disable:u,reset:function(){a=null,u()}}}var m=v();t.reset=m.reset;n.config.getConfig("debugging",function(e){var t=e.debugging;null!=t&&t.enabled?m.enable():m.disable()})},56:function(e,t,r){"use strict";var n=r(7251);Object.defineProperty(t,"__esModule",{value:!0}),t.addEvents=void 0,t.clearEvents=function(){l.clear()},t.on=t.off=t.has=t.getEvents=t.get=t.emit=void 0;var i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=n(e)&&"function"!=typeof e)return{default:e};var r=d(t);if(r&&r.has(e))return r.get(e);var i={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(i,a,s):i[a]=e[a]}return i.default=e,r&&r.set(e,i),i}(r(1235)),o=r(2778),a=r(9411),s=r(3408);function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(d=function(e){return e?r:t})(e)}var c="eventHistoryTTL",u=null,l=(0,a.ttlCollection)({monotonic:!0,ttl:function(){return u}});s.config.getConfig(c,function(e){var t;u!==(u="number"==typeof(e=null===(t=e)||void 0===t?void 0:t[c])?1e3*e:null)&&l.refresh()});var p=Array.prototype.slice,f=Array.prototype.push,g=Object.values(o.EVENTS),v=o.EVENT_ID_PATHS,m=function(){var e={},t={};function r(e){return g.includes(e)}return t.has=r,t.on=function(t,n,o){if(r(t)){var a=e[t]||{que:[]};o?(a[o]=a[o]||{que:[]},a[o].que.push(n)):a.que.push(n),e[t]=a}else i.logError("Wrong event name : "+t+" Valid event names :"+g)},t.emit=function(t){var r,n,o,a,s,d,c,u=p.call(arguments,1);r=t,n=u,i.logMessage("Emitting event for: "+r),a=(o=n[0]||{})[v[r]],d=Object.keys(s=e[r]||{que:[]}),c=[],l.add({eventType:r,args:o,id:a,elapsedTime:i.getPerformanceNow()}),a&&d.includes(a)&&f.apply(c,s[a].que),f.apply(c,s.que),(c||[]).forEach(function(e){if(e)try{e.apply(null,n)}catch(e){i.logError("Error executing handler:","events.js",e,r)}})},t.off=function(t,r,n){var o=e[t];if(!(i.isEmpty(o)||i.isEmpty(o.que)&&i.isEmpty(o[n])||n&&(i.isEmpty(o[n])||i.isEmpty(o[n].que))))n?(o[n].que||[]).forEach(function(e){var t=o[n].que;e===r&&t.splice(t.indexOf(e),1)}):(o.que||[]).forEach(function(e){var t=o.que;e===r&&t.splice(t.indexOf(e),1)}),e[t]=o},t.get=function(){return e},t.addEvents=function(e){g=g.concat(e)},t.getEvents=function(){return l.toArray().map(function(e){return Object.assign({},e)})},window.prebidEvents=t,t}();i._setEventEmitter(m.emit.bind(m)),t.on=m.on,t.off=m.off,t.get=m.get,t.getEvents=m.getEvents,t.emit=m.emit,t.addEvents=m.addEvents,t.has=m.has},8320:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.enrichFPD=t.dep=void 0;var i=n(r(4763)),o=r(2885),a=r(2583),s=r(4018),d=r(1235),c=r(3408),u=r(1818),l=r(6607),p=r(1117),f=r(7565),g=r(1676),v=r(7939),m=r(5723);function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var h=t.dep={getRefererInfo:a.getRefererInfo,findRootDomain:s.findRootDomain,getWindowTop:d.getWindowTop,getWindowSelf:d.getWindowSelf,getHighEntropySUA:u.getHighEntropySUA,getLowEntropySUA:u.getLowEntropySUA},y=(0,p.clientSectionChecker)("FPD");function A(e){try{return e(h.getWindowTop())}catch(t){return e(h.getWindowSelf())}}t.enrichFPD=(0,o.hook)("sync",function(e){var t=[e,(function(){var e=c.config.getConfig("firstPartyData.uaHints");return Array.isArray(e)&&0!==e.length?h.getHighEntropySUA(e):l.GreedyPromise.resolve(h.getLowEntropySUA())})().catch(function(){return null}),(function(){return l.GreedyPromise.resolve("cookieDeprecationLabel"in navigator&&(0,f.isActivityAllowed)(v.ACTIVITY_ACCESS_DEVICE,(0,g.activityParams)(m.MODULE_TYPE_PREBID,"cdep"))&&navigator.cookieDeprecationLabel.getValue())})().catch(function(){return null})];return l.GreedyPromise.all(t).then(function(e){var t=(0,i.default)(e,3),r=t[0],n=t[1],o=t[2],s=h.getRefererInfo();Object.entries(E).forEach(function(e){var t=(0,i.default)(e,2),n=t[0],o=(0,t[1])(r,s);o&&Object.keys(o).length>0&&(r[n]=(0,d.mergeDeep)({},o,r[n]))}),n&&(0,d.deepSetValue)(r,"device.sua",Object.assign({},n,r.device.sua)),o&&(0,d.deepSetValue)(r,"device.ext",Object.assign({},{cdep:o},r.device.ext)),r=y(r);var c,u=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(p.CLIENT_SECTIONS);try{for(u.s();!(c=u.n()).done;){var l=c.value;if((0,p.hasSection)(r,l)){r[l]=(0,d.mergeDeep)({},function(e,t){var r,n,i=(0,a.parseDomain)(t.page,{noLeadingWww:!0});return I({domain:i,keywords:null===(r=A(function(e){return e.document.querySelector("meta[name='keywords']")}))||void 0===r||null===(r=r.content)||void 0===r||null===(n=r.replace)||void 0===n?void 0:n.call(r,/\s/g,""),publisher:I({domain:h.findRootDomain(i)})})}(r,s),r[l]);break}}}catch(e){u.e(e)}finally{u.f()}return r})});function I(e){return(0,d.getDefinedParams)(e,Object.keys(e))}var E={site:function(e,t){if(!p.CLIENT_SECTIONS.filter(function(e){return"site"!==e}).some(p.hasSection.bind(null,e)))return I({page:t.page,ref:t.ref})},device:function(){return A(function(e){var t,r=e.screen.width,n=e.screen.height,i=e.innerWidth||e.document.documentElement.clientWidth||e.document.body.clientWidth,o=e.innerHeight||e.document.documentElement.clientHeight||e.document.body.clientHeight,a={w:r,h:n,dnt:(0,d.getDNT)()?1:0,ua:e.navigator.userAgent,language:e.navigator.language.split("-").shift(),ext:{vpw:i,vph:o}};return null!==(t=e.navigator)&&void 0!==t&&t.webdriver&&(0,d.deepSetValue)(a,"ext.webdriver",!0),a})},regs:function(){var e={};A(function(e){return e.navigator.globalPrivacyControl})&&(0,d.deepSetValue)(e,"ext.gpc",1);var t=c.config.getConfig("coppa");return"boolean"==typeof t&&(e.coppa=t?1:0),e}}},1117:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CLIENT_SECTIONS=void 0,t.clientSectionChecker=function(e){return function(t){return i.reduce(function(r,i){return o(t,i)&&(null!=r?((0,n.logWarn)("".concat(e," specifies both '").concat(r,"' and '").concat(i,"'; dropping the latter.")),delete t[i]):r=i),r},null),t}},t.hasSection=o;var n=r(1235),i=t.CLIENT_SECTIONS=["dooh","app","site"];function o(e,t){return null!=e[t]&&Object.keys(e[t]).length>0}},4018:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findRootDomain=t.coreStorage=void 0;var n=r(1235),i=r(4288),o=t.coreStorage=(0,i.getCoreStorageManager)("fpdEnrichment");t.findRootDomain=(0,n.memoize)(function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.location.host;if(!o.cookiesAreEnabled())return r;var i=r.split(".");if(2===i.length)return r;var a=-2,s="_rdc".concat(Date.now()),d="writeable";do{e=i.slice(a).join(".");var c=new Date((0,n.timestamp)()+1e4).toUTCString();o.setCookie(s,d,c,"Lax",e,void 0),o.getCookie(s,void 0)===d?(t=!1,o.setCookie(s,"","Thu, 01 Jan 1970 00:00:01 GMT",void 0,e,void 0)):(a+=-1,t=Math.abs(a)<=i.length)}while(t);return e})},1818:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLowEntropySUA=t.getHighEntropySUA=t.SUA_SOURCE_UNKNOWN=t.SUA_SOURCE_UA_HEADER=t.SUA_SOURCE_LOW_ENTROPY=t.SUA_SOURCE_HIGH_ENTROPY=t.LOW_ENTROPY_HINTS=t.HIGH_ENTROPY_HINTS=void 0,t.highEntropySUAAccessor=u,t.lowEntropySUAAccessor=c,t.uaDataToSUA=l;var n=r(1235),i=r(6607);t.SUA_SOURCE_UNKNOWN=0;var o=t.SUA_SOURCE_LOW_ENTROPY=1,a=t.SUA_SOURCE_HIGH_ENTROPY=2;t.SUA_SOURCE_UA_HEADER=3;var s=t.HIGH_ENTROPY_HINTS=["architecture","bitness","model","platformVersion","fullVersionList"],d=t.LOW_ENTROPY_HINTS=["brands","mobile","platform"];function c(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(e=window.navigator)||void 0===e?void 0:e.userAgentData,r=t&&d.some(function(e){return void 0!==t[e]})?Object.freeze(l(o,t)):null;return function(){return r}}function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null===(e=window.navigator)||void 0===e?void 0:e.userAgentData,r={},o=new WeakMap;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;if(!o.has(e)){var d=Array.from(e);d.sort(),o.set(e,d.join("|"))}var c=o.get(e);if(!r.hasOwnProperty(c))try{r[c]=t.getHighEntropyValues(e).then(function(e){return(0,n.isEmpty)(e)?null:Object.freeze(l(a,e))}).catch(function(){return null})}catch(e){r[c]=i.GreedyPromise.resolve(null)}return r[c]}}function l(e,t){function r(e,t){var r={brand:e};return(0,n.isStr)(t)&&!(0,n.isEmptyStr)(t)&&(r.version=t.split(".")),r}var i={source:e};return t.platform&&(i.platform=r(t.platform,t.platformVersion)),(t.fullVersionList||t.brands)&&(i.browsers=(t.fullVersionList||t.brands).map(function(e){return r(e.brand,e.version)})),void 0!==t.mobile&&(i.mobile=t.mobile?1:0),["model","bitness","architecture"].forEach(function(e){var r=t[e];(0,n.isStr)(r)&&(i[e]=r)}),i}t.getLowEntropySUA=c(),t.getHighEntropySUA=u()},2885:function(e,t,r){"use strict";var n,i=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.hook=t.getHook=void 0,t.module=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.postInstallAllowed,i=void 0!==n&&n;d("async",function(r){r.forEach(function(e){return t.apply(void 0,(0,o.default)(e))}),i&&(l[e]=t)},e)([])},t.ready=void 0,t.setupBeforeHookFnOnce=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15;0===e.getHooks({hook:t}).length&&e.before(t,r)},t.submodule=function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var i=l[e];if(i)return i.apply(void 0,r);u(e).before(function(e,t){t.push(r),e(t)})},t.wrapHook=function(e,t){return Object.defineProperties(t,Object.fromEntries(["before","after","getHooks","removeAll"].map(function(t){return[t,{get:function(){return e[t]}}]}))),t};var o=i(r(4995)),a=i(r(4040)),s=r(6607),d=t.hook=(0,a.default)({ready:a.default.SYNC|a.default.ASYNC|a.default.QUEUE}),c=(0,s.defer)();d.ready=(n=d.ready,function(){try{return n.apply(d,arguments)}finally{c.resolve()}}),t.ready=c.promise;var u=t.getHook=d.get,l={}},8705:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VIDEO=t.NATIVE=t.BANNER=t.ADPOD=void 0,t.NATIVE="native",t.VIDEO="video",t.BANNER="banner",t.ADPOD="adpod"},2659:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.NATIVE_TARGETING_KEYS=t.IMAGE=void 0,t.convertOrtbRequestToProprietaryNative=function(e){if(!e||!(0,d.isArray)(e)||!e.some(function(e){var t;return null===(t=((null==e?void 0:e.mediaTypes)||{})[p.NATIVE])||void 0===t?void 0:t.ortb}))return e;var t=(0,d.deepClone)(e),r,n=v(t);try{for(n.s();!(r=n.n()).done;){var i=r.value;i.mediaTypes&&i.mediaTypes[p.NATIVE]&&i.mediaTypes[p.NATIVE].ortb&&(i.mediaTypes[p.NATIVE]=Object.assign((0,d.pick)(i.mediaTypes[p.NATIVE],l.NATIVE_KEYS_THAT_ARE_NOT_ASSETS),U(i.mediaTypes[p.NATIVE].ortb)),i.nativeParams=_(i.mediaTypes[p.NATIVE]))}}catch(e){n.e(e)}finally{n.f()}return t},t.decorateAdUnitsWithNativeParams=function(e){e.forEach(function(e){var t=e.nativeParams||(0,d.deepAccess)(e,"mediaTypes.native");t&&(e.nativeParams=_(t)),e.nativeParams&&(e.nativeOrtbRequest=e.nativeParams.ortb||N(e.nativeParams))})},t.fireClickTrackers=P,t.fireImpressionTrackers=x,t.fireNativeTrackers=function(e,t){var r=t.native.ortb||B(t.native);return"click"===e.action?P(r,null==e?void 0:e.assetId):x(r),e.action},t.fromOrtbNativeRequest=U,t.getAllAssetsMessage=function(e,t){return R(e,t,null)},t.getAssetMessage=function(e,t){var r=e.assets.map(function(e){return j[e]});return R(e,t,r)},t.getNativeRenderingData=D,t.getNativeTargeting=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.index,i=void 0===n?u.auctionManager.index:n,o={},a=i.getAdUnit(e),s=(null==a||null===(t=a.nativeParams)||void 0===t?void 0:t.ortb)==null&&!1!==(0,d.deepAccess)(a,"nativeParams.sendTargetingKeys"),c=function(e){var t={};return(0,d.deepAccess)(e,"nativeParams.ext")&&Object.keys(e.nativeParams.ext).forEach(function(e){t[e]="hb_native_".concat(e)}),h(h({},l.NATIVE_KEYS),t)}(a),p=h(h({},e.native),e.native.ext);return delete p.ext,Object.keys(p).forEach(function(t){var r=c[t],n=k(e.native[t])||k((0,d.deepAccess)(e,"native.ext.".concat(t)));if("adTemplate"!==t&&!!r&&!!n){var i=(0,d.deepAccess)(a,"nativeParams.".concat(t,".sendId"));"boolean"!=typeof i&&(i=(0,d.deepAccess)(a,"nativeParams.ext.".concat(t,".sendId"))),i&&(n="".concat(r,":").concat(e.adId));var u=(0,d.deepAccess)(a,"nativeParams.".concat(t,".sendTargetingKeys"));"boolean"!=typeof u&&(u=(0,d.deepAccess)(a,"nativeParams.ext.".concat(t,".sendTargetingKeys"))),("boolean"==typeof u?u:s)&&(o[r]=n)}}),o},t.hasNonNativeBidder=void 0,t.isNativeOpenRTBBidValid=C,t.isNativeResponse=function(e){return e.native&&"object"===(0,s.default)(e.native)},t.isOpenRTBBidRequestValid=T,t.legacyPropertiesToOrtbNative=B,t.nativeAdapters=t.nativeAdUnit=void 0,t.nativeBidIsValid=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.index,i=(void 0===n?u.auctionManager.index:n).getAdUnit(e);if(!i)return!1;var o=i.nativeOrtbRequest;return C((null===(t=e.native)||void 0===t?void 0:t.ortb)||M(e.native,o),o)},t.nativeBidder=void 0,t.processNativeAdUnitParams=_,t.setNativeResponseProperties=function(e,t){var r,n=null==t?void 0:t.nativeOrtbRequest,i=null===(r=e.native)||void 0===r?void 0:r.ortb;if(n&&i){var o=V(i,n);Object.assign(e.native,o)}["rendererUrl","adTemplate"].forEach(function(r){var n,i=null==t||null===(n=t.nativeParams)||void 0===n?void 0:n[r];i&&(e.native[r]=k(i))})},t.toLegacyResponse=V,t.toOrtbNativeRequest=N,t.toOrtbNativeResponse=M;var i=n(r(4995)),o=n(r(4763)),a=n(r(9837)),s=n(r(7251)),d=r(1235),c=r(7448),u=r(3136),l=r(2778),p=r(8705),f=r(5357),g=r(6105);function v(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return m(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,a.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var y=t.nativeAdapters=[];t.NATIVE_TARGETING_KEYS=Object.keys(l.NATIVE_KEYS).map(function(e){return l.NATIVE_KEYS[e]});var A={image:t.IMAGE={ortb:{ver:"1.2",assets:[{required:1,id:1,img:{type:3,wmin:100,hmin:100}},{required:1,id:2,title:{len:140}},{required:1,id:3,data:{type:1}},{required:0,id:4,data:{type:2}},{required:0,id:5,img:{type:1,wmin:20,hmin:20}}]},image:{required:!0},title:{required:!0},sponsoredBy:{required:!0},clickUrl:{required:!0},body:{required:!1},icon:{required:!1}}},I=q(l.PREBID_NATIVE_DATA_KEYS_TO_ORTB),E=q(l.NATIVE_ASSET_TYPES),S={img:1,js:2,1:"img",2:"js"},O={impression:1};function _(e){if(e&&e.type&&function(e){return!!(e&&(0,c.includes)(Object.keys(A),e))||((0,d.logError)("".concat(e," nativeParam is not supported")),!1)}(e.type)&&(e=A[e.type]),!e||!e.ortb||!!T(e.ortb))return e}function T(e){var t=e.assets;if(!Array.isArray(t)||0===t.length)return(0,d.logError)("assets in mediaTypes.native.ortb is not an array, or it's empty. Assets: ",t),!1;var r=t.map(function(e){return e.id});return t.length!==new Set(r).size||r.some(function(e){return e!==parseInt(e,10)})?((0,d.logError)("each asset object must have 'id' property, it must be unique and it must be an integer"),!1):e.hasOwnProperty("eventtrackers")&&!Array.isArray(e.eventtrackers)?((0,d.logError)("ortb.eventtrackers is not an array. Eventtrackers: ",e.eventtrackers),!1):t.every(function(e){return function(e){if(!(0,d.isPlainObject)(e))return(0,d.logError)("asset must be an object. Provided asset: ",e),!1;if(e.img){if(!(0,d.isNumber)(e.img.w)&&!(0,d.isNumber)(e.img.wmin))return(0,d.logError)("for img asset there must be 'w' or 'wmin' property"),!1;if(!(0,d.isNumber)(e.img.h)&&!(0,d.isNumber)(e.img.hmin))return(0,d.logError)("for img asset there must be 'h' or 'hmin' property"),!1}else if(e.title){if(!(0,d.isNumber)(e.title.len))return(0,d.logError)("for title asset there must be 'len' property defined"),!1}else if(e.data){if(!(0,d.isNumber)(e.data.type))return(0,d.logError)("for data asset 'type' property must be a number"),!1}else if(e.video&&(!Array.isArray(e.video.mimes)||!Array.isArray(e.video.protocols)||!(0,d.isNumber)(e.video.minduration)||!(0,d.isNumber)(e.video.maxduration)))return(0,d.logError)("video asset is not properly configured"),!1;return!0}(e)})}t.nativeAdUnit=function(e){var t="native"===e.mediaType,r=(0,d.deepAccess)(e,"mediaTypes.native");return t||r};var w=t.nativeBidder=function(e){return(0,c.includes)(y,e.bidder)};t.hasNonNativeBidder=function(e){return e.bids.filter(function(e){return!w(e)}).length};function C(e,t){if(!(0,d.deepAccess)(e,"link.url"))return(0,d.logError)("native response doesn't have 'link' property. Ortb response: ",e),!1;var r=t.assets.filter(function(e){return 1===e.required}).map(function(e){return e.id}),n=e.assets.map(function(e){return e.id}),i=r.every(function(e){return(0,c.includes)(n,e)});return!i&&(0,d.logError)("didn't receive a bid with all required assets. Required ids: ".concat(r,", but received ids in response: ").concat(n)),i}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.runMarkup,n=void 0===r?function(e){return(0,d.insertHtmlIntoIframe)(e)}:r,i=t.fetchURL,o=void 0===i?d.triggerPixel:i,a=(e.eventtrackers||[]).filter(function(e){return e.event===O.impression}).reduce(function(e,t){return S.hasOwnProperty(t.method)&&e[S[t.method]].push(t.url),e},{img:[],js:[]}),s=a.img,c=a.js;e.imptrackers&&(s=s.concat(e.imptrackers)),s.forEach(function(e){return o(e)}),c=c.map(function(e){return'<script async src="'.concat(e,'"><\/script>')}),e.jstracker&&(c=c.concat([e.jstracker])),c.length&&n(c.join("\n"))}function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.fetchURL,i=void 0===n?d.triggerPixel:n;if(t){var o,a,s=(e.assets||[]).filter(function(e){return e.link}).reduce(function(e,t){return e[t.id]=t.link,e},{}),c=(null===(a=e.link)||void 0===a?void 0:a.clicktrackers)||[],u=s[t],l=c;u&&(l=u.clicktrackers||[]),l.forEach(function(e){return i(e)})}else((null===(o=e.link)||void 0===o?void 0:o.clicktrackers)||[]).forEach(function(e){return i(e)})}function D(e,t,r){var n,a=h(h({},(0,d.getDefinedParams)(e.native,["rendererUrl","adTemplate"])),{},{assets:function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=[];return Object.entries(t).filter(function(e){var t=(0,o.default)(e,2),i=t[0];return t[1]&&(!1===n&&"ext"===i||null==r||r.includes(i))}).forEach(function(t){var s=(0,o.default)(t,2),d=s[0],c=s[1];!1===n&&"ext"===d?a.push.apply(a,(0,i.default)(e(c,r,!0))):(n||l.NATIVE_KEYS.hasOwnProperty(d))&&a.push({key:d,value:k(c)})}),a}(e.native,r),nativeKeys:l.NATIVE_KEYS});return e.native.ortb?a.ortb=e.native.ortb:null!==(n=t.mediaTypes)&&void 0!==n&&null!==(n=n.native)&&void 0!==n&&n.ortb&&(a.ortb=M(e.native,t.nativeOrtbRequest)),a}function R(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=n.index,o=void 0===i?u.auctionManager.index:i,a={message:"assetResponse",adId:e.adId},s=(0,f.getRenderingData)(t).native;return s?(a.native=Object.assign({},s),a.renderer=(0,g.getCreativeRendererSource)(t),null!=r&&(s.assets=s.assets.filter(function(e){var t=e.key;return r.includes(t)}))):s=D(t,o.getAdUnit(t),r),Object.assign(a,s)}var j=Object.fromEntries(Object.entries(l.NATIVE_KEYS).map(function(e){var t=(0,o.default)(e,2),r=t[0];return[t[1],r]}));function k(e){return(null==e?void 0:e.url)||e}function N(e){if(!e&&!(0,d.isPlainObject)(e)){(0,d.logError)("Native assets object is empty or not an object: ",e);return}var t={ver:"1.2",assets:[]};for(var r in e)if(!l.NATIVE_KEYS_THAT_ARE_NOT_ASSETS.includes(r)){if(!l.NATIVE_KEYS.hasOwnProperty(r)){(0,d.logError)("Unrecognized native asset code: ".concat(r,". Asset will be ignored."));continue}if("privacyLink"===r){t.privacy=1;continue}var n=e[r],i=0;n.required&&(0,d.isBoolean)(n.required)&&(i=Number(n.required));var o={id:t.assets.length,required:i};if(r in l.PREBID_NATIVE_DATA_KEYS_TO_ORTB)o.data={type:l.NATIVE_ASSET_TYPES[l.PREBID_NATIVE_DATA_KEYS_TO_ORTB[r]]},n.len&&(o.data.len=n.len);else if("icon"===r||"image"===r){if(o.img={type:"icon"===r?l.NATIVE_IMAGE_TYPES.ICON:l.NATIVE_IMAGE_TYPES.MAIN},n.aspect_ratios){if((0,d.isArray)(n.aspect_ratios)){if(n.aspect_ratios.length){var a=n.aspect_ratios[0],s=a.min_width,c=a.min_height;(0,d.isInteger)(s)&&(0,d.isInteger)(c)?(o.img.wmin=s,o.img.hmin=c):(0,d.logError)("image.aspect_ratios min_width or min_height are invalid: ",s,c);var u=n.aspect_ratios.filter(function(e){return e.ratio_width&&e.ratio_height}).map(function(e){return"".concat(e.ratio_width,":").concat(e.ratio_height)});u.length>0&&(o.img.ext={aspectratios:u})}else(0,d.logError)("image.aspect_ratios was passed, but it's empty:",n.aspect_ratios)}else(0,d.logError)("image.aspect_ratios was passed, but it's not a an array:",n.aspect_ratios)}n.sizes&&(2===n.sizes.length&&(0,d.isInteger)(n.sizes[0])&&(0,d.isInteger)(n.sizes[1])?(o.img.w=n.sizes[0],o.img.h=n.sizes[1],delete o.img.hmin,delete o.img.wmin):(0,d.logError)("image.sizes was passed, but its value is not an array of integers:",n.sizes))}else"title"===r?o.title={len:n.len||140}:"ext"===r&&(o.ext=n,delete o.required);t.assets.push(o)}return t}function U(e){if(!!T(e)){var t={},r,n=v(e.assets);try{for(n.s();!(r=n.n()).done;)!function(){var n=r.value;if(n.title){var i={required:!!n.required&&!!n.required,len:n.title.len};t.title=i}else if(n.img){var o={required:!!n.required&&!!n.required};if(n.img.w&&n.img.h)o.sizes=[n.img.w,n.img.h];else if(n.img.wmin&&n.img.hmin){var a=function(e,t){for(;e&&t&&e!==t;)e>t?e-=t:t-=e;return e||t}(n.img.wmin,n.img.hmin);o.aspect_ratios=[{min_width:n.img.wmin,min_height:n.img.hmin,ratio_width:n.img.wmin/a,ratio_height:n.img.hmin/a}]}n.img.type===l.NATIVE_IMAGE_TYPES.MAIN?t.image=o:t.icon=o}else if(n.data){var s=Object.keys(l.NATIVE_ASSET_TYPES).find(function(e){return l.NATIVE_ASSET_TYPES[e]===n.data.type}),d=Object.keys(l.PREBID_NATIVE_DATA_KEYS_TO_ORTB).find(function(e){return l.PREBID_NATIVE_DATA_KEYS_TO_ORTB[e]===s});t[d]={required:!!n.required&&!!n.required},n.data.len&&(t[d].len=n.data.len)}e.privacy&&(t.privacyLink={required:!1})}()}catch(e){n.e(e)}finally{n.f()}return t}}function B(e){var t={link:{},eventtrackers:[]};return Object.entries(e).forEach(function(e){var r=(0,o.default)(e,2),n=r[0],i=r[1];switch(n){case"clickUrl":t.link.url=i;break;case"clickTrackers":t.link.clicktrackers=Array.isArray(i)?i:[i];break;case"impressionTrackers":(Array.isArray(i)?i:[i]).forEach(function(e){t.eventtrackers.push({event:O.impression,method:S.img,url:e})});break;case"javascriptTrackers":t.jstracker=Array.isArray(i)?i.join(""):i;break;case"privacyLink":t.privacy=i}}),t}function M(e,t){var r=h(h({},B(e)),{},{assets:[]});function n(e,n){var i=t.assets.find(e);null!=i&&(n(i=(0,d.deepClone)(i)),r.assets.push(i))}return Object.keys(e).filter(function(t){return!!e[t]}).forEach(function(t){var r=k(e[t]);switch(t){case"title":n(function(e){return null!=e.title},function(e){e.title={text:r}});break;case"image":case"icon":var i="image"===t?l.NATIVE_IMAGE_TYPES.MAIN:l.NATIVE_IMAGE_TYPES.ICON;n(function(e){return null!=e.img&&e.img.type===i},function(e){e.img={url:r}});break;default:t in l.PREBID_NATIVE_DATA_KEYS_TO_ORTB&&n(function(e){return null!=e.data&&e.data.type===l.NATIVE_ASSET_TYPES[l.PREBID_NATIVE_DATA_KEYS_TO_ORTB[t]]},function(e){e.data={value:r}})}}),r}function V(e,t){var r={},n=(null==t?void 0:t.assets)||[];r.clickUrl=null===(o=e.link)||void 0===o?void 0:o.url,r.privacyLink=e.privacy;var o,a,s=v((null==e?void 0:e.assets)||[]);try{for(s.s();!(a=s.n()).done;)!function(){var e,t,i=a.value,o=n.find(function(e){return i.id===e.id});i.title?r.title=i.title.text:i.img?r[(null==o||null===(e=o.img)||void 0===e?void 0:e.type)===l.NATIVE_IMAGE_TYPES.MAIN?"image":"icon"]={url:i.img.url,width:i.img.w,height:i.img.h}:i.data&&(r[I[E[null==o||null===(t=o.data)||void 0===t?void 0:t.type]]]=i.data.value)}()}catch(e){s.e(e)}finally{s.f()}r.impressionTrackers=[];var d=[];e.imptrackers&&(c=r.impressionTrackers).push.apply(c,(0,i.default)(e.imptrackers));var c,u,p=v((null==e?void 0:e.eventtrackers)||[]);try{for(p.s();!(u=p.n()).done;){var f=u.value;f.event===O.impression&&f.method===S.img&&r.impressionTrackers.push(f.url),f.event===O.impression&&f.method===S.js&&d.push(f.url)}}catch(e){p.e(e)}finally{p.f()}return d=d.map(function(e){return'<script async src="'.concat(e,'"><\/script>')}),null!=e&&e.jstracker&&d.push(e.jstracker),d.length&&(r.javascriptTrackers=d.join("\n")),r}function q(e){var t={};for(var r in e)t[e[r]]=r;return t}},7319:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getProcessors=t.RESPONSE=t.REQUEST=t.PROCESSOR_TYPES=t.PROCESSOR_DIALECTS=t.PBS=t.IMP=t.DEFAULT=t.BID_RESPONSE=void 0,t.processorRegistry=a,t.registerOrtbProcessor=void 0;var r=t.PROCESSOR_TYPES=["request","imp","bidResponse","response"],n=t.PROCESSOR_DIALECTS=["default","pbs"];t.REQUEST=r[0],t.IMP=r[1],t.BID_RESPONSE=r[2],t.RESPONSE=r[3];var i=t.DEFAULT=n[0];t.PBS=n[1];var o=new Set(r);function a(){var e={};return{registerOrtbProcessor:function(t){var n=t.type,a=t.name,s=t.fn,d=t.priority,c=void 0===d?0:d,u=t.dialects;if(!o.has(n))throw Error("ORTB processor type must be one of: ".concat(r.join(", ")));(void 0===u?[i]:u).forEach(function(t){!e.hasOwnProperty(t)&&(e[t]={}),!e[t].hasOwnProperty(n)&&(e[t][n]={}),e[t][n][a]={priority:c,fn:s}})},getProcessors:function(t){return e[t]||{}}}}var s=a();t.registerOrtbProcessor=s.registerOrtbProcessor,t.getProcessors=s.getProcessors},7448:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayFrom=function(){return Array.from.apply(Array,arguments)},t.find=function(e,t,r){return e&&e.find(t,r)},t.findIndex=function(e,t,r){return e&&e.findIndex(t,r)},t.includes=function(e,t,r){return e&&e.includes(t,r)||!1}},7027:function(e,t,r){"use strict";var n,i,o,a=r(1640),s=r(7251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.checkAdUnitSetup=t.adUnitSetupChecks=void 0,t.executeCallbacks=ee,t.setBattrForAdUnit=z,t.startAuction=void 0;var d=a(r(8129)),c=a(r(7822)),u=a(r(4763)),l=a(r(9837)),p=r(9895),f=r(1235),g=r(6126),v=r(1053),m=r(3408),b=r(3136),h=r(3495),y=r(2885),A=r(797),I=r(7448),E=r(5108),S=r(4288),O=N(r(9293)),_=r(2778),T=N(r(56)),w=r(647),C=r(6607),x=r(8320),P=r(5087),D=r(5357),R=r(6439),j=r(5045);function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(k=function(e){return e?r:t})(e)}function N(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=s(e)&&"function"!=typeof e)return{default:e};var r=k(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&({}).hasOwnProperty.call(e,o)){var a=i?Object.getOwnPropertyDescriptor(e,o):null;a&&(a.get||a.set)?Object.defineProperty(n,o,a):n[o]=e[o]}return n.default=e,r&&r.set(e,n),n}var U=(0,p.getGlobal)(),B=v.userSync.triggerUserSyncs,M=[],V=_.EVENTS.ADD_AD_UNITS,q=_.EVENTS.REQUEST_BIDS,L=_.EVENTS.SET_TARGETING,F={bidWon:function(e){if(!b.auctionManager.getBidsRequested().map(function(e){return e.bids.map(function(e){return e.adUnitCode})}).reduce(f.flatten).filter(f.uniques).includes(e)){(0,f.logError)('The "'+e+'" placement is not defined.');return}return!0}};(0,A.loadSession)(),U.bidderSettings=U.bidderSettings||{},U.libLoaded=!0,U.version="v9.17.0",(0,f.logInfo)("Prebid.js v9.17.0 loaded"),U.installedModules=U.installedModules||[],U.adUnits=U.adUnits||[],U.triggerUserSyncs=B;function G(e,t){var r=[];return(0,f.isArray)(e)&&(t?e.length===t:e.length>0)&&(e.every(function(e){return(0,f.isArrayOfNums)(e,2)})?r=e:(0,f.isArrayOfNums)(e,2)&&r.push(e)),r}function z(e,t){var r,n,i,o,a,s,d=e.ortb2Imp||{},c=e.mediaTypes||{};null!==(r=d[t])&&void 0!==r&&r.battr&&null!==(n=c[t])&&void 0!==n&&n.battr&&(null===(i=d[t])||void 0===i?void 0:i.battr)!==(null===(o=c[t])||void 0===o?void 0:o.battr)&&(0,f.logWarn)("Ad unit ".concat(e.code," specifies conflicting ortb2Imp.").concat(t,".battr and mediaTypes.").concat(t,".battr, the latter will be ignored"),e);var u=(null===(a=d[t])||void 0===a?void 0:a.battr)||(null===(s=c[t])||void 0===s?void 0:s.battr);null!=u&&((0,f.deepSetValue)(e,"ortb2Imp.".concat(t,".battr"),u),(0,f.deepSetValue)(e,"mediaTypes.".concat(t,".battr"),u))}function W(e){var t=(0,f.deepClone)(e),r=t.mediaTypes.banner,n=G(r.sizes);return n.length>0?(r.sizes=n,t.sizes=n):((0,f.logError)("Detected a mediaTypes.banner object without a proper sizes field.  Please ensure the sizes are listed like: [[300, 250], ...].  Removing invalid mediaTypes.banner object from request."),delete t.mediaTypes.banner),z(t,"banner"),t}function Y(e){var t=(0,f.deepClone)(e),r=t.mediaTypes.video;if(r.playerSize){var n="number"==typeof r.playerSize[0]?2:1,i=G(r.playerSize,n);i.length>0?(2===n&&(0,f.logInfo)("Transforming video.playerSize from [640,480] to [[640,480]] so it's in the proper format."),r.playerSize=i,t.sizes=i):((0,f.logError)("Detected incorrect configuration of mediaTypes.video.playerSize.  Please specify only one set of dimensions in a format like: [[640, 480]]. Removing invalid mediaTypes.video.playerSize property from request."),delete t.mediaTypes.video.playerSize)}return(0,j.validateOrtbVideoFields)(t),z(t,"video"),t}function H(e){function t(t){return(0,f.logError)('Error in adUnit "'.concat(e.code,'": ').concat(t,". Removing native request from ad unit"),e),delete n.mediaTypes.native,n}function r(e){for(var t=0,r=["sendTargetingKeys","types"];t<r.length;t++){var n=r[t];if(i.hasOwnProperty(n)){var o=e(n);if(o)return o}}}var n=(0,f.deepClone)(e),i=n.mediaTypes.native;if(i.ortb){if(null!==(o=i.ortb.assets)&&void 0!==o&&o.some(function(e){return!(0,f.isNumber)(e.id)||e.id<0||e.id%1!=0}))return t("native asset ID must be a nonnegative integer");if(r(function(e){return t('ORTB native requests cannot specify "'.concat(e,'"'))}))return n;var o,a=Object.keys(_.NATIVE_KEYS).filter(function(e){return _.NATIVE_KEYS[e].includes("hb_native_")}),s=Object.keys(i).filter(function(e){return a.includes(e)});s.length>0&&((0,f.logError)("when using native OpenRTB format, you cannot use legacy native properties. Deleting ".concat(s," keys from request.")),s.forEach(function(e){return delete n.mediaTypes.native[e]}))}else r(function(e){return"mediaTypes.native.".concat(e," is deprecated, consider using native ORTB instead")},e);return i.image&&i.image.sizes&&!Array.isArray(i.image.sizes)&&((0,f.logError)("Please use an array of sizes for native.image.sizes field.  Removing invalid mediaTypes.native.image.sizes property from request."),delete n.mediaTypes.native.image.sizes),i.image&&i.image.aspect_ratios&&!Array.isArray(i.image.aspect_ratios)&&((0,f.logError)("Please use an array of sizes for native.image.aspect_ratios field.  Removing invalid mediaTypes.native.image.aspect_ratios property from request."),delete n.mediaTypes.native.image.aspect_ratios),i.icon&&i.icon.sizes&&!Array.isArray(i.icon.sizes)&&((0,f.logError)("Please use an array of sizes for native.icon.sizes field.  Removing invalid mediaTypes.native.icon.sizes property from request."),delete n.mediaTypes.native.icon.sizes),z(n,"native"),n}function J(e,t){var r=(0,f.deepAccess)(e,"mediaTypes.".concat(t,".pos"));if(!(0,f.isNumber)(r)||isNaN(r)||!isFinite(r)){var n="Value of property 'pos' on ad unit ".concat(e.code," should be of type: Number");(0,f.logWarn)(n),delete e.mediaTypes[t].pos}return e}function K(e){var t=function(t){return"adUnit.code '".concat(e.code,"' ").concat(t)},r=e.mediaTypes,n=e.bids;return null==n||(0,f.isArray)(n)?null==n&&null==e.ortb2Imp?((0,f.logError)(t("has no 'adUnit.bids' and no 'adUnit.ortb2Imp'. Removing adUnit from auction")),null):r&&0!==Object.keys(r).length?(null!=e.ortb2Imp&&(null==n||0===n.length)&&(e.bids=[{bidder:null}],(0,f.logMessage)(t("defines 'adUnit.ortb2Imp' with no 'adUnit.bids'; it will be seen only by S2S adapters"))),e):((0,f.logError)(t("does not define a 'mediaTypes' object.  This is a required field for the auction, so this adUnit has been removed.")),null):((0,f.logError)(t("defines 'adUnit.bids' that is not an array. Removing adUnit from auction")),null)}var Q=t.adUnitSetupChecks={validateAdUnit:K,validateBannerMediaType:W,validateSizes:G};Object.assign(Q,{validateNativeMediaType:H});Object.assign(Q,{validateVideoMediaType:Y});var $=t.checkAdUnitSetup=(0,y.hook)("sync",function(e){var t=[];return e.forEach(function(e){if(null!=(e=K(e))){var r,n,i,o=e.mediaTypes;o.banner&&(r=W(e),o.banner.hasOwnProperty("pos")&&(r=J(r,"banner"))),o.video&&(n=r?Y(r):Y(e),o.video.hasOwnProperty("pos")&&(n=J(n,"video"))),o.native&&(i=n?H(n):r?H(r):H(e));var a=Object.assign({},r,n,i);t.push(a)}}),t},"checkAdUnitSetup");function X(e){var t=b.auctionManager[e]().filter(function(e){return b.auctionManager.getAdUnitCodes().includes(e.adUnitCode)}),r=b.auctionManager.getLastAuctionId();return t.map(function(e){return e.adUnitCode}).filter(f.uniques).map(function(e){return t.filter(function(t){return t.auctionId===r&&t.adUnitCode===e})}).filter(function(e){return e&&e[0]&&e[0].adUnitCode}).map(function(e){return(0,l.default)({},e[0].adUnitCode,{bids:e})}).reduce(function(e,t){return Object.assign(e,t)},{})}U.getAdserverTargetingForAdUnitCodeStr=function(e){if((0,f.logInfo)("Invoking pbjs.getAdserverTargetingForAdUnitCodeStr",arguments),e){var t=U.getAdserverTargetingForAdUnitCode(e);return(0,f.transformAdServerTargetingObj)(t)}(0,f.logMessage)("Need to call getAdserverTargetingForAdUnitCodeStr with adunitCode")},U.getHighestUnusedBidResponseForAdUnitCode=function(e){if(e){var t=b.auctionManager.getAllBidsForAdUnitCode(e).filter(h.isBidUsable);return t.length?t.reduce(R.getHighestCpm):{}}(0,f.logMessage)("Need to call getHighestUnusedBidResponseForAdUnitCode with adunitCode")},U.getAdserverTargetingForAdUnitCode=function(e,t){return U.getAdserverTargeting(e,t)[e]},U.getAdserverTargeting=function(e,t){return(0,f.logInfo)("Invoking pbjs.getAdserverTargeting",arguments),h.targeting.getAllTargeting(e,t)},U.getConsentMetadata=function(){return(0,f.logInfo)("Invoking pbjs.getConsentMetadata"),P.allConsent.getConsentMeta()},U.getNoBids=function(){return(0,f.logInfo)("Invoking pbjs.getNoBids",arguments),X("getNoBids")},U.getNoBidsForAdUnitCode=function(e){return{bids:b.auctionManager.getNoBids().filter(function(t){return t.adUnitCode===e})}},U.getBidResponses=function(){return(0,f.logInfo)("Invoking pbjs.getBidResponses",arguments),X("getBidsReceived")},U.getBidResponsesForAdUnitCode=function(e){return{bids:b.auctionManager.getBidsReceived().filter(function(t){return t.adUnitCode===e})}},U.getBidResponsesForBidPoolId=function(e){return{bids:b.auctionManager.getBidsReceived().filter(function(t){return t.bidPoolId===e||t.passiveBidPoolId===e})}},pbjs.clearAllAuctions=function(){(0,f.logInfo)("Invoking pbjs.clearBidResponsesFromBidPool",arguments),b.auctionManager.clearAllAuctions()},U.setTargetingForGPTAsync=function(e,t,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:R.getHighestCpm,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:f.sortByHighestCpm;if((0,f.logInfo)("Invoking pbjs.setTargetingForGPTAsync",arguments),!(0,f.isGptPubadsDefined)()){(0,f.logError)("window.googletag is not defined on the page");return}h.targeting.setTargetingForGPT(e,t,r,n,i,o)},U.setTargetingForAst=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if((0,f.logInfo)("Invoking pbjs.setTargetingForAn",arguments),!h.targeting.isApntagDefined()){(0,f.logError)("window.apntag is not defined on the page");return}h.targeting.setTargetingForAst(e,t),T.emit(L,h.targeting.getAllTargeting())},U.clearTargetingForSharedBidPool=function(e){(0,f.logInfo)("Invoking pbjs.clearTargetingForSharedBidPool",arguments),h.targeting.clearTargetingForSharedBidPool(e)},U.renderAd=(0,y.hook)("async",function(e,t,r){(0,f.logInfo)("Invoking pbjs.renderAd",arguments),(0,f.logMessage)("Calling renderAd with adId :"+t),(0,D.renderAdDirect)(e,t,r)}),U.removeAdUnit=function(e){var t;if((0,f.logInfo)("Invoking pbjs.removeAdUnit",arguments),!e){U.adUnits=[];return}(t=(0,f.isArray)(e)?e:[e]).forEach(function(e){for(var t=U.adUnits.length-1;t>=0;t--)U.adUnits[t].code===e&&U.adUnits.splice(t,1)})},U.requestBids=(n=(0,y.hook)("async",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bidsBackHandler,r=e.timeout,n=e.adUnits,i=e.adUnitCodes,o=e.labels,a=e.auctionId,s=e.ttlBuffer,d=e.ortb2,c=e.metrics,l=e.defer,p=e.resolve;T.emit(q);var g=r||m.config.getConfig("bidderTimeout");(0,f.logInfo)("Invoking pbjs.requestBids",arguments),null!=i&&!Array.isArray(i)&&(i=[i]),i&&i.length?n=n.filter(function(e){return(0,I.includes)(i,e.code)}):i=n&&n.map(function(e){return e.code}),i=i.filter(f.uniques);var v={global:(0,f.mergeDeep)({},m.config.getAnyConfig("ortb2")||{},d||{}),bidder:Object.fromEntries(Object.entries(m.config.getBidderConfig()).map(function(e){var t=(0,u.default)(e,2);return[t[0],t[1].ortb2]}).filter(function(e){var t=(0,u.default)(e,2);return null!=(t[0],t[1])}))};return(0,x.enrichFPD)(C.GreedyPromise.resolve(v.global)).then(function(e){return v.global=e,Z({bidsBackHandler:t,timeout:g,adUnits:n,adUnitCodes:i,labels:o,auctionId:a,ttlBuffer:s,ortb2Fragments:v,metrics:c,defer:l,resolve:p})})},"requestBids"),o=(i=(0,c.default)(d.default.mark(function e(t,r){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.queue){e.next=3;break}return e.next=3,t.queue;case 3:n.call(r,t);case 4:case"end":return e.stop()}},e)})),function(e,t){return i.apply(this,arguments)}),(0,y.wrapHook)(n,function(){var e,t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=m.config.getConfig("requestQueue")||{},a=i.enabled,s=i.timeout,d=new Promise(function(e){t=e});if(a){;r=a&&M.length&&Promise.race([(e=s||50,new Promise(function(t){return setTimeout(t,e)})),M.shift()]),M.push(d)}var c=n.adUnits||U.adUnits;return n.adUnits=(0,f.isArray)(c)?c.slice():[c],n.metrics=(0,w.newMetrics)(),n.metrics.checkpoint("requestBids"),n.defer=(0,C.defer)({promiseFactory:function(e){return new Promise(e)}}),n.resolver=t,n.queue=r,o(n,this),n.defer.promise}));var Z=t.startAuction=(0,y.hook)("async",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.bidsBackHandler,r=e.timeout,n=e.adUnits,i=e.ttlBuffer,o=e.adUnitCodes,a=e.labels,s=e.auctionId,d=e.ortb2Fragments,c=e.metrics,u=e.defer,l=e.resolve,p=(0,O.getS2SBidderSet)(m.config.getConfig("s2sConfig")||[]);function g(e,r,n){if("function"==typeof t)try{t(e,r,n)}catch(e){(0,f.logError)("Error executing bidsBackHandler",null,e)}u.resolve({bids:e,timedOut:r,auctionId:n})}!function(e){e.forEach(function(e){return(0,j.fillVideoDefaults)(e)})}(n),n=(0,w.useMetrics)(c).measureTime("requestBids.validate",function(){return $(n)});var v={};if(n.forEach(function(e){var t,r=Object.keys(e.mediaTypes||{banner:"banner"}),n=e.bids.map(function(e){return e.bidder}),o=O.default.bidderRegistry,a=n.filter(function(e){return!p.has(e)});e.adUnitId=(0,f.generateUUID)();var s=null===(t=e.ortb2Imp)||void 0===t||null===(t=t.ext)||void 0===t?void 0:t.tid;s&&(v.hasOwnProperty(e.code)?(0,f.logWarn)("Multiple distinct ortb2Imp.ext.tid were provided for twin ad units '".concat(e.code,"'")):v[e.code]=s),null!=i&&!e.hasOwnProperty("ttlBuffer")&&(e.ttlBuffer=i),a.forEach(function(t){var n=o[t],i=n&&n.getSpec&&n.getSpec(),a=i&&i.supportedMediaTypes||["banner"];!r.some(function(e){return(0,I.includes)(a,e)})&&((0,f.logWarn)((0,f.unsupportedBidderMessage)(e,t)),e.bids=e.bids.filter(function(e){return e.bidder!==t}))})}),n&&0!==n.length){n.forEach(function(e){var t,r=(null===(t=e.ortb2Imp)||void 0===t||null===(t=t.ext)||void 0===t?void 0:t.tid)||v[e.code]||(0,f.generateUUID)();!v.hasOwnProperty(e.code)&&(v[e.code]=r),e.transactionId=r,(0,f.deepSetValue)(e,"ortb2Imp.ext.tid",r)});var y=b.auctionManager.createAuction({adUnits:n,adUnitCodes:o,callback:g,cbTimeout:r,labels:a,auctionId:s,ortb2Fragments:d,metrics:c}),A=n.length;A>15&&(0,f.logInfo)("Current auction ".concat(y.getAuctionId()," contains ").concat(A," adUnits."),n),o.forEach(function(e){return h.targeting.setLatestAuctionForAdUnit(e,y.getAuctionId())}),y.callBids(),l&&l()}else(0,f.logMessage)("No adUnits configured. No bids requested."),g()},"startAuction");function ee(e,t){function r(e){for(var t;t=e.shift();)t()}r(S.storageCallbacks),r(et),e.call(this,t)}U.requestBids.before(ee,49),U.addAdUnits=function(e){(0,f.logInfo)("Invoking pbjs.addAdUnits",arguments),U.adUnits.push.apply(U.adUnits,(0,f.isArray)(e)?e:[e]),T.emit(V)},U.onEvent=function(e,t,r){if((0,f.logInfo)("Invoking pbjs.onEvent",arguments),!(0,f.isFn)(t)){(0,f.logError)('The event handler provided is not a function and was not set on event "'+e+'".');return}if(r&&!F[e].call(null,r)){(0,f.logError)('The id provided is not valid for event "'+e+'" and no handler was set.');return}T.on(e,t,r)},U.offEvent=function(e,t,r){if((0,f.logInfo)("Invoking pbjs.offEvent",arguments),!r||!!F[e].call(null,r))T.off(e,t,r)},U.getEvents=function(){return(0,f.logInfo)("Invoking pbjs.getEvents"),T.getEvents()},U.registerBidAdapter=function(e,t){(0,f.logInfo)("Invoking pbjs.registerBidAdapter",arguments);try{O.default.registerBidAdapter(e(),t)}catch(e){(0,f.logError)("Error registering bidder adapter : "+e.message)}},U.registerAnalyticsAdapter=function(e){(0,f.logInfo)("Invoking pbjs.registerAnalyticsAdapter",arguments);try{O.default.registerAnalyticsAdapter(e)}catch(e){(0,f.logError)("Error registering analytics adapter : "+e.message)}},U.createBid=function(e){return(0,f.logInfo)("Invoking pbjs.createBid",arguments),(0,E.createBid)(e)};var et=[],er=(0,y.hook)("async",function(e){e&&!(0,f.isEmpty)(e)?((0,f.logInfo)("Invoking pbjs.enableAnalytics for: ",e),O.default.enableAnalytics(e)):(0,f.logError)("pbjs.enableAnalytics should be called with option {}")},"enableAnalyticsCb");U.enableAnalytics=function(e){et.push(er.bind(this,e))},U.aliasBidder=function(e,t,r){(0,f.logInfo)("Invoking pbjs.aliasBidder",arguments),e&&t?O.default.aliasBidAdapter(e,t,r):(0,f.logError)("bidderCode and alias must be passed as arguments","pbjs.aliasBidder")},U.aliasRegistry=O.default.aliasRegistry,m.config.getConfig("aliasRegistry",function(e){"private"===e.aliasRegistry&&delete U.aliasRegistry}),U.setBidsReceivedFilter=function(e){return b.auctionManager.setBidsReceivedFilter(e)},U.getAllWinningBids=function(){return b.auctionManager.getAllWinningBids()},U.getAllPrebidWinningBids=function(){return b.auctionManager.getBidsReceived().filter(function(e){return e.status===_.BID_STATUS.BID_TARGETING_SET})},U.getHighestCpmBids=function(e){return h.targeting.getWinningBids(e)},U.clearAllAuctions=function(){b.auctionManager.clearAllAuctions()},U.getHighestCpmBidsForPoolId=function(e){return h.targeting.getWinningPoolIdBids(e)};function en(e){e.forEach(function(e){if(void 0===e.called)try{e.call(),e.called=!0}catch(e){(0,f.logError)("Error processing command :","prebid.js",e)}})}U.markWinningBidAsUsed=function(e){var t,r=e.adId,n=e.adUnitCode,i=e.bidPoolId,o=e.passiveBidPoolId;n&&null==r?t=h.targeting.getWinningBids(n):(i||o)&&r?t=b.auctionManager.getBidsReceived().filter(function(e){return e.adId===r&&(e.bidPoolId===i||e.passiveBidPoolId===o)}):r?t=b.auctionManager.getBidsReceived().filter(function(e){return e.adId===r}):i||o?t=h.targeting.getWinningPoolIdBids(i||o):(0,f.logWarn)("Improper use of markWinningBidAsUsed. It needs an adUnitCode or an adId to function."),t.length>0&&(b.auctionManager.addWinningBid(t[0]),(0,D.markBidAsRendered)(t[0]))},U.getConfig=m.config.getAnyConfig,U.readConfig=m.config.readAnyConfig,U.mergeConfig=m.config.mergeConfig,U.mergeBidderConfig=m.config.mergeBidderConfig,U.setConfig=m.config.setConfig,U.setBidderConfig=m.config.setBidderConfig,U.que.push(function(){return(0,g.listenMessagesFromCreative)()}),U.cmd.push=function(e){if("function"==typeof e)try{e.call()}catch(e){(0,f.logError)("Error processing command :",e.message,e.stack)}else(0,f.logError)("Commands written into pbjs.cmd.push must be wrapped in a function")},U.que.push=U.cmd.push,U.processQueue=function(){(0,D.insertLocatorFrame)(),y.hook.ready(),en(U.que),en(U.cmd)},U.triggerBilling=function(e){var t=e.adId,r=e.adUnitCode;b.auctionManager.getAllWinningBids().filter(function(e){return e.adId===t||null==t&&e.adUnitCode===r}).forEach(function(e){O.default.triggerBilling(e),(0,D.renderIfDeferred)(e)})},t.default=U},7938:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i.default}});var i=n(r(7027))},9895:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobal=function(){return n},t.registerModule=function(e){n.installedModules.push(e)};var r=window,n=r.pbjs=r.pbjs||{};n.cmd=n.cmd||[],n.que=n.que||[],r===window&&(r._pbjsGlobals=r._pbjsGlobals||[],r._pbjsGlobals.push("pbjs"))},2583:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cacheWithLocation=c,t.detectReferer=d,t.ensureProtocol=o,t.getRefererInfo=void 0,t.parseDomain=a;var n=r(3408),i=r(1235);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;if(!e||/\w+:\/\//.exec(e))return e;var r=t.location.protocol;try{r=t.top.location.protocol}catch(e){}return/^\/\//.exec(e)?r+e:"".concat(r,"//").concat(e)}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.noLeadingWww,n=t.noPort;try{e=new URL(o(e))}catch(e){return}return e=void 0!==n&&n?e.hostname:e.host,void 0!==r&&r&&e.startsWith("www.")&&(e=e.substring(4)),e}function s(e){try{var t=e.querySelector("link[rel='canonical']");if(null!==t)return t.href}catch(e){}return null}function d(e){return function(){var t,r,d,c,u=[],l=function(e){try{if(!e.location.ancestorOrigins)return;return e.location.ancestorOrigins}catch(e){}}(e),p=n.config.getConfig("maxNestedIframes"),f=!1,g=0,v=!1,m=!1,b=!1;do{var h=t,y=m,A=void 0,I=!1,E=null;m=!1,t=t?t.parent:e;try{A=t.location.href||null}catch(e){I=!0}if(I){if(y){var S=h.context;try{r=E=S.sourceUrl,b=!0,v=!0,t===e.top&&(f=!0),S.canonicalUrl&&(d=S.canonicalUrl)}catch(e){}}else{(0,i.logWarn)("Trying to access cross domain iframe. Continuing without referrer and location");try{var O=h.document.referrer;O&&(E=O,t===e.top&&(f=!0))}catch(e){}!E&&l&&l[g-1]&&(E=l[g-1],t===e.top&&(b=!0)),E&&!v&&(r=E)}}else{if(A&&(r=E=A,v=!1,t===e.top)){f=!0;var _=s(t.document);_&&(d=_)}t.context&&t.context.sourceUrl&&(m=!0)}u.push(E),g++}while(t!==e.top&&g<p);u.reverse();try{c=e.top.document.referrer}catch(e){}var T=f||b?r:null,w=n.config.getConfig("pageUrl")||d||null,C=n.config.getConfig("pageUrl")||T||o(w,e);return T&&T.indexOf("?")>-1&&-1===C.indexOf("?")&&(C="".concat(C).concat(T.substring(T.indexOf("?")))),{reachedTop:f,isAmp:v,numIframes:g-1,stack:u,topmostLocation:r||null,location:T,canonicalUrl:w,page:C,domain:a(C)||null,ref:c||null,legacy:{reachedTop:f,isAmp:v,numIframes:g-1,stack:u,referer:r||null,canonicalUrl:w}}}}function c(e){var t,r,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window;return i.top!==i?e:function(){var o=s(i.document),a=i.location.href;return(t!==o||a!==r)&&(t=o,r=a,n=e()),n}}t.getRefererInfo=c(d(window))},6126:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.getReplier=h,t.listenMessagesFromCreative=function(){window.addEventListener("message",function(e){y(e)},!1)},t.receiveMessage=y,t.resizeRemoteCreative=I;var i=n(r(9837)),o=r(2659),a=r(2778),s=r(1235),d=r(7448),c=r(5357),u=r(6105);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var f=a.MESSAGES.REQUEST,g=a.MESSAGES.RESPONSE,v=a.MESSAGES.NATIVE,m=a.MESSAGES.EVENT,b=(0,i.default)((0,i.default)({},f,function(e,t,r){(0,c.handleRender)({renderFn:function(t){e(Object.assign({message:g,renderer:(0,u.getCreativeRendererSource)(r)},t))},resizeFn:A(t.adId,r),options:t.options,adId:t.adId,bidResponse:r})}),m,function(e,t,r){if(arguments.length>3&&void 0!==arguments[3]&&arguments[3],null==r){(0,s.logError)("Cannot find ad '".concat(t.adId,"' for x-origin event request"));return}if(r.status!==a.BID_STATUS.RENDERED){(0,c.emitAdRenderFail)({bid:r,id:t.adId,reason:a.AD_RENDER_FAILED_REASON.EXCEPTION,message:t.info&&t.info.message}),(0,s.logWarn)("Received x-origin event request without corresponding render request for ad '".concat(r.adId,"'"));return}return(0,c.handleCreativeEvent)(t,r)});Object.assign(b,(0,i.default)({},v,function(e,t,r){if(arguments.length>3&&void 0!==arguments[3]&&arguments[3],null==r){(0,s.logError)("Cannot find ad for x-origin event request: '".concat(t.adId,"'"));return}switch(t.action){case"assetRequest":(0,c.deferRendering)(r,function(){return e((0,o.getAssetMessage)(t,r))});break;case"allAssetRequest":(0,c.deferRendering)(r,function(){return e((0,o.getAllAssetsMessage)(t,r))});break;default:(0,c.handleNativeMessage)(t,r,{resizeFn:A(t.adId,r)}),(0,c.markWinner)(r)}}));function h(e){return null==e.origin&&0===e.ports.length?function(){var e="Cannot post message to a frame with null origin. Please update creatives to use MessageChannel, see https://github.com/prebid/Prebid.js/issues/7870";throw(0,s.logError)(e),Error(e)}:e.ports.length>0?function(t){e.ports[0].postMessage(JSON.stringify(t))}:function(t){e.source.postMessage(JSON.stringify(t),e.origin)}}function y(e){var t="request_ad"===e.data.message,r=e.message?"message":"data",n={};try{n=t?{adId:e.data.adId||e.data.id,message:"Prebid Request"}:JSON.parse(e[r])}catch(e){return}if(n&&n.adId&&n.message&&b.hasOwnProperty(n.message))return(0,c.getBidToRender)(n.adId,n.message===a.MESSAGES.REQUEST).then(function(t){var r,i;b[n.message]((r=n.adId,i=h(e),function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return i.apply(void 0,[Object.assign({},e,{adId:r})].concat(n))}),n,t)})}function A(e,t){return function(r,n){I(p(p({},t),{},{width:r,height:n,adId:e}))}}function I(e){var t=e.adId,r=e.adUnitCode,n=e.width,i=e.height;function o(e){return e?e+"px":"100%"}["div","iframe"].forEach(function(e){var a=function(e){var n=function(e,t){return(0,s.isGptPubadsDefined)()?function(e){var t=(0,d.find)(window.googletag.pubads().getSlots(),function(t){return(0,d.find)(t.getTargetingKeys(),function(r){return(0,d.includes)(t.getTargeting(r),e)})});return t?t.getSlotElementId():null}(e):(0,s.isApnGetTagDefined)()?function(e){var t=window.apntag.getTag(e);return t&&t.targetId}(t):t}(t,r),i=document.getElementById(n);return i&&i.querySelector(e)}(e+':not([style*="display: none"])');if(a){var c=function(e){if(window.googletag)return(0,d.find)(window.googletag.pubads().getSlots(),function(t){return(0,d.includes)(t.getTargeting("hb_instl"),"1")&&(0,d.includes)(t.getTargeting("hb_adid"),e)})}(t),u=a.style;u.width=c?"100vw":o(n),u.height=c?"100vh":o(i)}else(0,s.logError)("Unable to locate matching page element for adUnitCode ".concat(r,".  Can't resize it to ad's dimensions.  Please review setup."))})}},4288:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.STORAGE_TYPE_LOCALSTORAGE=t.STORAGE_TYPE_COOKIES=void 0,t.deviceAccessRule=A,t.getCoreStorageManager=function(e){return y({moduleName:e,moduleType:s.MODULE_TYPE_PREBID})},t.getStorageManager=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleType,r=e.moduleName,n=e.bidderCode;function i(){throw Error("Invalid invocation for getStorageManager: must set either bidderCode, or moduleType + moduleName")}return n?((t&&t!==s.MODULE_TYPE_BIDDER||r)&&i(),t=s.MODULE_TYPE_BIDDER,r=n):(!r||!t)&&i(),y({moduleType:t,moduleName:r})},t.newStorageManager=y,t.resetData=function(){t.storageCallbacks=h=[]},t.storageAllowedRule=I,t.storageCallbacks=void 0;var i=n(r(9837)),o=r(1235),a=r(4735),s=r(5723),d=r(7565),c=r(492),u=r(7939),l=r(3408),p=n(r(9293)),f=r(1676);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach(function(t){(0,i.default)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var m=t.STORAGE_TYPE_LOCALSTORAGE="html5",b=t.STORAGE_TYPE_COOKIES="cookie",h=t.storageCallbacks=[];function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.moduleName,r=e.moduleType,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.isAllowed,g=void 0===a?d.isActivityAllowed:a;function y(e,n){var o=t,a=l.config.getCurrentBidder();return a&&r===s.MODULE_TYPE_BIDDER&&p.default.aliasRegistry[a]===t&&(o=a),e({valid:g(u.ACTIVITY_ACCESS_DEVICE,(0,f.activityParams)(r,o,(0,i.default)({},c.ACTIVITY_PARAM_STORAGE_TYPE,n)))})}function A(e,t,r){if(!r||"function"!=typeof r)return y(e,t);h.push(function(){r(y(e,t))})}function I(e){var t=e.charAt(0).toUpperCase()+e.substring(1),r=function(){return window[e]},n=function(t){return A(function(t){if(t&&t.valid)try{return!!r()}catch(t){(0,o.logError)("".concat(e," api disabled"))}return!1},m,t)};return(0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)({},"has".concat(t),n),"".concat(e,"IsEnabled"),function(e){return A(function(e){if(e&&e.valid)try{return r().setItem("prebid.cookieTest","1"),"1"===r().getItem("prebid.cookieTest")}catch(e){}finally{try{r().removeItem("prebid.cookieTest")}catch(e){}}return!1},m,e)}),"setDataIn".concat(t),function(e,t,i){return A(function(i){i&&i.valid&&n()&&r().setItem(e,t)},m,i)}),"getDataFrom".concat(t),function(e,t){return A(function(t){return t&&t.valid&&n()?r().getItem(e):null},m,t)}),"removeDataFrom".concat(t),function(e,t){return A(function(t){t&&t.valid&&n()&&r().removeItem(e)},m,t)})}return v(v(v({setCookie:function(e,t,r,n,i,o){return A(function(o){if(o&&o.valid){var a=i&&""!==i?" ;domain=".concat(encodeURIComponent(i)):"",s=r&&""!==r?" ;expires=".concat(r):"",d=null!=n&&"none"==n.toLowerCase();document.cookie="".concat(e,"=").concat(encodeURIComponent(t)).concat(s,"; path=/").concat(a).concat(n?"; SameSite=".concat(n):"").concat(d?"; Secure":"")}},b,o)},getCookie:function(e,t){return A(function(t){if(t&&t.valid){var r=window.document.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]*)\\s*(;|$)");return r?decodeURIComponent(r[2]):null}return null},b,t)},cookiesAreEnabled:function(e){return A(function(e){return!!e&&!!e.valid&&(0,o.checkCookieSupport)()},b,e)}},I("localStorage")),I("sessionStorage")),{},{findSimilarCookies:function(e,t){return A(function(t){if(t&&t.valid){var r=[];if((0,o.hasDeviceAccess)()){for(var n=document.cookie.split(";");n.length;){var i=n.pop(),a=i.indexOf("=");a=a<0?i.length:a,decodeURIComponent(i.slice(0,a).replace(/^\s+/,"")).indexOf(e)>=0&&r.push(decodeURIComponent(i.slice(a+1)))}}return r}},b,t)}})}function A(){if(!(0,o.hasDeviceAccess)())return{allow:!1}}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.bidderSettings;if(e[c.ACTIVITY_PARAM_COMPONENT_TYPE]===s.MODULE_TYPE_BIDDER){var r=t.get(e[c.ACTIVITY_PARAM_ADAPTER_CODE],"storageAllowed");if(r&&!0!==r){var n=e[c.ACTIVITY_PARAM_STORAGE_TYPE];r=Array.isArray(r)?r.some(function(e){return e===n}):r===n}else r=!!r;if(!r)return{allow:r}}}(0,d.registerActivityControl)(u.ACTIVITY_ACCESS_DEVICE,"deviceAccess config",A),(0,d.registerActivityControl)(u.ACTIVITY_ACCESS_DEVICE,"bidderSettings.*.storageAllowed",I)},3495:function(e,t,r){"use strict";var n=r(1640),i=r(7251);Object.defineProperty(t,"__esModule",{value:!0}),t.filters=t.TARGETING_KEYS_ARR=void 0,t.getGPTSlotsForAdUnits=j,t.getHighestCpmBidsFromBidPool=void 0,t.isBidUsable=x,t.newTargeting=k,t.sortByDealAndPriceBucketOrCpm=R,t.targeting=void 0;var o=n(r(4763)),a=n(r(9837)),s=n(r(4995)),d=r(3136),c=r(636),u=r(4735),l=r(3408),p=r(2778),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=i(e)&&"function"!=typeof e)return{default:e};var r=I(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=o?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}(r(56)),g=r(2885),v=r(8705),m=r(2659),b=r(7448),h=r(1235),y=r(6439),A=r(9895);function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(I=function(e){return e?r:t})(e)}var E=[],S=(0,A.getGlobal)(),O="targetingControls.allowTargetingKeys",_="targetingControls.addTargetingKeys",T='Only one of "'.concat(O,'" or "').concat(_,'" can be set'),w=t.TARGETING_KEYS_ARR=Object.keys(p.TARGETING_KEYS).map(function(e){return p.TARGETING_KEYS[e]}),C=t.filters={isActualBid:function(e){return e.getStatusCode()===p.STATUS.GOOD},isBidNotExpired:function(e){return e.responseTimestamp+1e3*(0,c.getTTL)(e)>(0,h.timestamp)()},isUnusedBid:function(e){return e&&!e.sharedBidInUse&&(e.status&&!(0,b.includes)([p.BID_STATUS.RENDERED],e.status)||!e.status)}};function x(e){return!Object.values(C).some(function(t){return!t(e)})}var P=function(e,t){d.auctionManager.getBidsReceived().filter(function(r){return r.status!==p.BID_STATUS.RENDERED&&(r.bidPoolId===t||r.passiveBidPoolId===t)&&r.sharedBidInUse===e}).forEach(function(e){delete e.sharedBidInUse})};f.on(p.EVENTS.BEFORE_REQUEST_BIDS,function(e){e.forEach(function(e){var t=e.code,r=S.adUnits.filter(function(e){return e.code===t});if(r.length){var n,i,o=null===(n=r[0])||void 0===n?void 0:n.passiveBidPoolId,a=null===(i=r[0])||void 0===i?void 0:i.bidPoolId;a&&P(t,a),o&&P(t,o)}})}),f.on(p.EVENTS.BID_WON,function(e){var t=e.sharedBidInUse,r=e.bidPoolId,n=e.passiveBidPoolId;setTimeout(function(){t&&r&&P(t,r),t&&n&&P(t,n)},1e3)});var D=t.getHighestCpmBidsFromBidPool=(0,g.hook)("sync",function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:h.sortByHighestCpm;if(!i){var a=[],d=l.config.getConfig("sendBidsControl.dealPrioritization"),c=Object.keys(n),u=(0,h.groupBy)(e,"adUnitCode");return c.length&&(u=Object.keys(u).reduce(function(e,t){var r=!1;return c.forEach(function(i){if((0,b.includes)(n[i].codes,t)){var o=n[i].adUnit;!e[o]&&(e[o]=[]),e[o]=e[o].concat(u[t]),r=!0}}),!r&&(e[t]=u[t]),e},{})),Object.keys(u).forEach(function(e){var n=[],i=(0,h.groupBy)(u[e],"bidderCode");Object.keys(i).forEach(function(e){return n.push(i[e].reduce(t))}),r?(n=d?n.sort(R(!0,o)):n.sort(o),a.push.apply(a,(0,s.default)(n.slice(0,r)))):(n=n.sort(o),a.push.apply(a,(0,s.default)(n)))}),a}return e});function R(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.sortByHighestCpm;return function(r,n){return void 0!==r.adserverTargeting.hb_deal&&void 0===n.adserverTargeting.hb_deal?-1:void 0===r.adserverTargeting.hb_deal&&void 0!==n.adserverTargeting.hb_deal?1:e?t(r,n):n.adserverTargeting.hb_pb-r.adserverTargeting.hb_pb}}function j(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return window.googletag.pubads().getSlots()};return r().reduce(function(e,r){var n=(0,h.isFn)(t)&&t(r);return Object.keys(e).filter((0,h.isFn)(n)?n:(0,h.isAdUnitCodeMatchingSlot)(r)).forEach(function(t){return e[t].push(r)}),e},Object.fromEntries(e.map(function(e){return[e,[]]})))}function k(e){var t={},r={};t.setLatestAuctionForAdUnit=function(e,t){r[e]=t},t.resetPresetTargeting=function(e,t){(0,h.isGptPubadsDefined)()&&Object.values(j(n(e),t)).forEach(function(e){e.forEach(function(e){var t;t=e,E.forEach(function(e){t.getTargeting(e)&&t.clearTargeting(e)})})})},t.resetPresetTargetingAST=function(e){n(e).forEach(function(e){var t=window.apntag.getTag(e);if(t&&t.keywords){var r=Object.keys(t.keywords),n={};r.forEach(function(e){!(0,b.includes)(E,e.toLowerCase())&&(n[e]=t.keywords[e])}),window.apntag.modifyTag(e,{keywords:n})}})};t.getAllTargeting=function(t,r,o){var f,g,v,A,I,C,x,P,j,k,N,U,B=arguments.length>3&&void 0!==arguments[3]&&arguments[3],M=arguments.length>4?arguments[4]:void 0,V=arguments.length>5&&void 0!==arguments[5]?arguments[5]:y.getHighestCpm,q=arguments.length>6&&void 0!==arguments[6]?arguments[6]:h.sortByHighestCpm;M||(M=i(V,q));var L=n(t),F=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n={};return(e||[]).forEach(function(e){if(null!=e&&e.passiveBidPoolId&&(0,b.includes)(r,null==e?void 0:e.passiveBidPoolId)){var i;n[null==e?void 0:e.passiveBidPoolId]=n[null==e?void 0:e.passiveBidPoolId]||{codes:[],adUnit:[]},n[null==e?void 0:e.passiveBidPoolId].codes.push(e.code),(0,b.includes)(t,e.code)&&!(0,b.includes)(null===(i=n[null==e?void 0:e.passiveBidPoolId])||void 0===i?void 0:i.adUnit,e.code)&&n[null==e?void 0:e.passiveBidPoolId].adUnit.push(e.code)}null!=e&&e.bidPoolId&&(0,b.includes)(r,e.bidPoolId)&&(n[e.bidPoolId]=n[e.bidPoolId]||{codes:[],adUnit:[]},n[e.bidPoolId].codes.push(e.code),(0,b.includes)(t,e.code)&&!(0,b.includes)(n[e.bidPoolId].adUnit,e.code)&&n[e.bidPoolId].adUnit.push(e.code))}),n=Object.keys(n).reduce(function(e,t){return 1===n[t].adUnit.length&&(e[t]={codes:n[t].codes,adUnit:n[t].adUnit[0]}),e},{})}(S.adUnits,L,d(r)),G=Object.keys(F),z=l.config.getConfig("enableSendAllBids"),W=l.config.getConfig("sendBidsControl.bidLimit");var Y=(f=L,g=M,v=G,A=[],I={},C=l.config.getConfig("targetingControls.alwaysIncludeDeals"),g.forEach(function(e){var t=!!v.length&&v.some(function(t){return t===e.bidPoolId||t===e.passiveBidPoolId})||(0,b.includes)(f,e.adUnitCode),r=!0===u.bidderSettings.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0,n=C&&e.dealId;t&&(n||r)&&(A.push(e),Object.keys(e.adserverTargeting).filter(function(){var e=c();return e=e.concat(m.NATIVE_TARGETING_KEYS),function(t){return -1===e.indexOf(t)}}()).forEach(function(t){var r=t.substring(0,20),n=I[e.adUnitCode]||{},i=[e.adserverTargeting[t]];n[r]?n[r]=n[r].concat(i).filter(h.uniques):n[r]=i,I[e.adUnitCode]=n}))}),{filteredBids:A,customKeysByUnit:I}),H=Y.customKeysByUnit,J=function(t,r,n,i){var o,d,u,f,g,v,y=(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[],i=e.reduce(function(e,t){return!(0,b.includes)(n,t.adUnitCode)&&(e.push(t),n.push(t.adUnitCode)),e},[]),o=c();return i=i.map(function(e){return e.bidPoolId&&r?e.sharedBidInUse=t[e.bidPoolId]?t[e.bidPoolId].adUnit:e.adUnitCode:e.passiveBidPoolId&&r&&(e.sharedBidInUse=t[e.passiveBidPoolId]?t[e.passiveBidPoolId].adUnit:e.adUnitCode),(0,a.default)({},e.adUnitCode,Object.keys(e.adserverTargeting).filter(function(t){return void 0===e.sendStandardTargeting||e.sendStandardTargeting||-1===o.indexOf(t)}).reduce(function(t,r){var n=[e.adserverTargeting[r]],i=(0,a.default)({},r.substring(0,20),n);if(r===p.TARGETING_KEYS.DEAL){var o="".concat(r,"_").concat(e.bidderCode).substring(0,20),d=(0,a.default)({},o,n);return[].concat((0,s.default)(t),[i,d])}return[].concat((0,s.default)(t),[i])},[]))})})(t,i,n).concat(function(e,t){return e.reduce(function(e,r){var n=Object.assign({},r),i=t[n.adUnitCode],o=[];return i&&Object.keys(i).forEach(function(e){e&&i[e]&&o.push((0,a.default)({},e,i[e]))}),e.push((0,a.default)({},n.adUnitCode,o)),e},[])}(t,r)).concat((o=t,d=l.config.getConfig("targetingControls.alwaysIncludeDeals"),function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)return[];var n=w.concat(m.NATIVE_TARGETING_KEYS),i=l.config.getConfig("targetingControls.allowSendAllBidsTargetingKeys"),o=i?i.map(function(e){return p.TARGETING_KEYS[e]}):n;return e.reduce(function(e,t){if(!r||t.dealId){var i=function(e,t){return t.reduce(function(t,r){return e.adserverTargeting[r]&&t.push((0,a.default)({},"".concat(r,"_").concat(e.bidderCode).substring(0,20),[e.adserverTargeting[r]])),t},[])}(t,n.filter(function(e){return void 0!==t.adserverTargeting[e]&&(r||-1!==o.indexOf(e))}));i&&e.push((0,a.default)({},t.adUnitCode,i))}return e},[])}(o,l.config.getConfig("enableSendAllBids")||d,d))).concat(function(){function t(e){return(0,h.deepAccess)(e,p.JSON_MAPPING.ADSERVER_TARGETING)}return e.getAdUnits().filter(function(e){return t(e)}).reduce(function(e,r){var n,i=Object.keys(n=t(r)).map(function(e){return(0,h.isStr)(n[e])&&(n[e]=n[e].split(",").map(function(e){return e.trim()})),!(0,h.isArray)(n[e])&&(n[e]=[n[e]]),(0,a.default)({},e,n[e])});return i&&e.push((0,a.default)({},r.code,i)),e},[])}());return y.forEach(function(e){!function(e){Object.keys(e).forEach(function(t){e[t].forEach(function(e){var t=Object.keys(e);-1===E.indexOf(t[0])&&(E=t.concat(E))})})}(e)}),u=y,g=[],v=Object.keys(f=i),u.reduce(function(e,t){var r=Object.keys(t)[0],n=v.reduce(function(e,t){if((0,b.includes)(f[t].codes,r))return e=f[t]},{});if(r&&v.length){var i=(0,a.default)({},n.adUnit,t[r]);g.push(i)}else e.push(t);return e},[]).concat(g)}(D(Y.filteredBids,V,z&&(o||W)||0,F,void 0,q),H,B,F),K=Object.keys(Object.assign({},p.DEFAULT_TARGETING_KEYS,p.NATIVE_KEYS)),Q=l.config.getConfig(O),$=l.config.getConfig(_);if(null!=$&&null!=Q)throw Error(T);Q=null!=$?K.concat($):Q||K;if(Array.isArray(Q)&&Q.length>0){;x=J,P=Q,k=Object.keys(j=Object.assign({},p.TARGETING_KEYS,p.NATIVE_KEYS)),N={},(0,h.logInfo)("allowTargetingKeys - allowed keys [ ".concat(P.map(function(e){return j[e]}).join(", ")," ]")),x.map(function(e){var t=Object.keys(e)[0],r=e[t].filter(function(e){var t=Object.keys(e)[0],r=0===k.filter(function(e){return 0===t.indexOf(j[e])}).length||(0,b.find)(P,function(e){var r=j[e];return 0===t.indexOf(r)});return N[t]=!r,r});e[t]=r}),U=Object.keys(N).filter(function(e){return N[e]}),(0,h.logInfo)("allowTargetingKeys - removed keys [ ".concat(U.join(", ")," ]")),J=x.filter(function(e){var t=Object.keys(e)[0];return e[t].length>0})}J=function(e){var t=e.map(function(e){return(0,a.default)({},Object.keys(e)[0],e[Object.keys(e)[0]].map(function(e){return(0,a.default)({},Object.keys(e)[0],e[Object.keys(e)[0]].join(","))}).reduce(function(e,t){return Object.assign(t,e)},{}))});return t=t.reduce(function(e,t){var r=Object.keys(t)[0];return e[r]=Object.assign({},e[r],t[r]),e},{})}(J);var X=l.config.getConfig("targetingControls.auctionKeyMaxChars");return X&&((0,h.logInfo)("Detected 'targetingControls.auctionKeyMaxChars' was active for this auction; set with a limit of ".concat(X," characters.  Running checks on auction keys...")),J=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.sortByHighestCpm,n=(0,h.deepClone)(e);return Object.keys(n).map(function(e){return{adUnitCode:e,adserverTargeting:n[e]}}).sort(R(void 0,r)).reduce(function(e,r,i,o){var a,s=Object.keys(a=r.adserverTargeting).reduce(function(e,t){return e+"".concat(t,"%3d").concat(encodeURIComponent(a[t]),"%26")},"");i+1===o.length&&(s=s.slice(0,-3));var d=r.adUnitCode,c=s.length;return c<=t?(t-=c,(0,h.logInfo)("AdUnit '".concat(d,"' auction keys comprised of ").concat(c," characters.  Deducted from running threshold; new limit is ").concat(t),n[d]),e[d]=n[d]):(0,h.logWarn)("The following keys for adUnitCode '".concat(d,"' exceeded the current limit of the 'auctionKeyMaxChars' setting.\nThe key-set size was ").concat(c,", the current allotted amount was ").concat(t,".\n"),n[d]),i+1===o.length&&0===Object.keys(e).length&&(0,h.logError)("No auction targeting keys were permitted due to the setting in setConfig(targetingControls.auctionKeyMaxChars).  Please review setup and consider adjusting."),e},{})}(J,X,q)),L.forEach(function(e){!J[e]&&(J[e]={})}),J};l.config.getConfig("targetingControls",function(e){null!=(0,h.deepAccess)(e,O)&&null!=(0,h.deepAccess)(e,_)&&(0,h.logError)(T)});function n(t){return"string"==typeof t?[t]:(0,h.isArray)(t)?t:e.getAdUnitCodes()||[]}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.getOldestHighestCpmBid,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return D(e.getBidsReceived().reduce(function(e,t){var n=l.config.getConfig("useBidCache"),i=l.config.getConfig("bidCacheFilterFunction"),o=r[t.adUnitCode]===t.auctionId,a=!n||!!o||"function"!=typeof i||!!i(t);return(n||o)&&a&&(0,h.deepAccess)(t,"video.context")!==v.ADPOD&&x(t)&&(t.latestTargetedAuctionId=r[t.adUnitCode],e.push(t)),e},[]),t,void 0,void 0,void 0,n)}t.setTargetingForGPT=(0,g.hook)("sync",function(r,n,i,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:y.getHighestCpm,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:h.sortByHighestCpm,c=t.getAllTargeting(r,i,a,!0,void 0,s,d),u=Object.fromEntries(E.map(function(e){return[e,null]}));Object.entries(j(Object.keys(c),n)).forEach(function(e){var t=(0,o.default)(e,2),r=t[0];t[1].forEach(function(e){Object.keys(c[r]).forEach(function(e){var t=c[r][e];"string"==typeof t&&-1!==t.indexOf(",")&&(t=t.split(",")),c[r][e]=t}),(0,h.logMessage)("Attempting to set targeting-map for slot: ".concat(e.getSlotElementId()," with targeting-map:"),c[r]),e.updateTargetingFromMap(Object.assign({},u,c[r]))})}),Object.keys(c).forEach(function(t){Object.keys(c[t]).forEach(function(r){"hb_adid"===r&&e.setStatusForBids(c[t][r],p.BID_STATUS.BID_TARGETING_SET)})}),t.targetingDone(c),f.emit(p.EVENTS.SET_TARGETING,c)},"setTargetingForGPT"),t.targetingDone=(0,g.hook)("sync",function(e){return e},"targetingDone");function d(e){return e&&"string"==typeof e?[e]:(0,h.isArray)(e)?e:[]}t.getWinningBids=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.getHighestCpm,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.sortByHighestCpm,a=[],s=t||i(r,o),d=n(e);return s.reduce(function(e,t){var r=t.adUnitCode,n=!0===u.bidderSettings.get(r,"allowZeroCpmBids")?t.cpm>=0:t.cpm>0,i=l.config.getConfig("targetingControls.alwaysIncludeDeals")&&t.dealId;return(0,b.includes)(d,r)&&!(0,b.includes)(a,r)&&(i||n)&&(e.push(t),a.push(r)),e},[])},t.getWinningPoolIdBids=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y.getHighestCpm,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.sortByHighestCpm,o=t||i(r,n),a=d(e),s=a.length>0;return o.filter(function(e){return(0,b.includes)(a,e.bidPoolId)||(0,b.includes)(a,e.passiveBidPoolId)}).filter(function(e){return!0===u.bidderSettings.get(e.bidderCode,"allowZeroCpmBids")?e.cpm>=0:e.cpm>0}).map(function(e){return s?e.bidPoolId||e.passiveBidPoolId:e.adUnitCode}).filter(h.uniques).map(function(e){return o.filter(function(t){return s?t.bidPoolId===e||t.passiveBidPoolId===e?t:null:t.adUnitCode===e?t:null}).reduce(r)})},t.setTargetingForAst=function(e,r){var n=t.getAllTargeting(e,r);try{t.resetPresetTargetingAST(e)}catch(e){(0,h.logError)("unable to reset targeting for AST"+e)}Object.keys(n).forEach(function(e){return Object.keys(n[e]).forEach(function(t){if((0,h.logMessage)("Attempting to set targeting for targetId: ".concat(e," key: ").concat(t," value: ").concat(n[e][t])),(0,h.isStr)(n[e][t])||(0,h.isArray)(n[e][t])){var r={};0>t.search(/pt[0-9]/)?r[t.toUpperCase()]=n[e][t]:r[t]=n[e][t],window.apntag.setKeywords(e,r,{overrideKeyValue:!0})}})})},t.clearTargetingForSharedBidPool=function(e){var t=n(e);S.adUnits.forEach(function(e){if((0,b.includes)(t,e.code)){var r=e.bidPoolId,n=e.passiveBidPoolId,i=e.code;i&&r&&P(i,r),i&&n&&P(i,n)}})};function c(){return e.getStandardBidderAdServerTargeting().map(function(e){return e.key}).concat(w).filter(h.uniques)}return t.isApntagDefined=function(){if(window.apntag&&(0,h.isFn)(window.apntag.setKeywords))return!0},t}t.targeting=k(d.auctionManager)},1053:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.USERSYNC_DEFAULT_CONFIG=void 0,t.newUserSync=b,t.userSync=void 0;var i=n(r(9837)),o=n(r(4763)),a=r(1235),s=r(3408),d=r(7448),c=r(4288),u=r(7565),l=r(7939),p=r(492),f=r(5723),g=r(1676),v=t.USERSYNC_DEFAULT_CONFIG={syncEnabled:!0,filterSettings:{image:{bidders:"*",filter:"include"}},syncsPerBidder:5,syncDelay:3e3,auctionDelay:500};s.config.setDefaults({userSync:(0,a.deepClone)(v)});var m=(0,c.getCoreStorageManager)("usersync");function b(e){var t={},r=m(),n=new Set,c={},u={image:!0,iframe:!1},v=e.config;function m(){return{image:[],iframe:[]}}function b(){if(!!v.syncEnabled&&!!e.browserSupportsCookies){try{(function(){if(!!u.iframe)h(r.iframe,function(e){var t=(0,o.default)(e,2),n=t[0],i=t[1];(0,a.logMessage)("Invoking iframe user sync for bidder: ".concat(n)),(0,a.insertUserSyncIframe)(i),function(e,t){e.image=e.image.filter(function(e){return e[0]!==t})}(r,n)})})(),function(){if(!!u.image)h(r.image,function(e){var t=(0,o.default)(e,2),r=t[0],n=t[1];(0,a.logMessage)("Invoking image pixel user sync for bidder: ".concat(r)),(0,a.triggerPixel)(n)})}()}catch(e){return(0,a.logError)("Error firing user syncs",e)}r=m()}}function h(e,t){(0,a.shuffle)(e).forEach(t)}return s.config.getConfig("userSync",function(e){if(e.userSync){var t=e.userSync.filterSettings;(0,a.isPlainObject)(t)&&!t.image&&!t.all&&(e.userSync.filterSettings.image={bidders:"*",filter:"include"})}v=Object.assign(v,e.userSync)}),e.regRule(l.ACTIVITY_SYNC_USER,"userSync config",function(e){if(!v.syncEnabled)return{allow:!1,reason:"syncs are disabled"};if(e[p.ACTIVITY_PARAM_COMPONENT_TYPE]===f.MODULE_TYPE_BIDDER){var r=e[p.ACTIVITY_PARAM_SYNC_TYPE],n=e[p.ACTIVITY_PARAM_COMPONENT_NAME];if(!t.canBidderRegisterSync(r,n))return{allow:!1,reason:"".concat(r," syncs are not enabled for ").concat(n)}}}),t.registerSync=function(t,o,s){if(n.has(o))return(0,a.logMessage)('already fired syncs for "'.concat(o,'", ignoring registerSync call'));if(!v.syncEnabled||!(0,a.isArray)(r[t]))return(0,a.logWarn)('User sync type "'.concat(t,'" not supported'));if(!o)return(0,a.logWarn)("Bidder is required for registering sync");if(0!==v.syncsPerBidder&&Number(c[o])>=v.syncsPerBidder)return(0,a.logWarn)('Number of user syncs exceeded for "'.concat(o,'"'));if(e.isAllowed(l.ACTIVITY_SYNC_USER,(0,g.activityParams)(f.MODULE_TYPE_BIDDER,o,(0,i.default)((0,i.default)({},p.ACTIVITY_PARAM_SYNC_TYPE,t),p.ACTIVITY_PARAM_SYNC_URL,s)))){var d,u;r[t].push([o,s]),(d=c)[u=o]?d[u]+=1:d[u]=1,c=d}},t.bidderDone=n.add.bind(n),t.syncUsers=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e)return setTimeout(b,Number(e));b()},t.triggerUserSyncs=function(){v.enableOverride&&t.syncUsers()},t.canBidderRegisterSync=function(e,t){return!(v.filterSettings&&function(e,t){var r=v.filterSettings;if(function(e,t){if(e.all&&e[t])return(0,a.logWarn)('Detected presence of the "filterSettings.all" and "filterSettings.'.concat(t,'" in userSync config.  You cannot mix "all" with "iframe/image" configs; they are mutually exclusive.')),!1;var r=e.all?e.all:e[t],n=e.all?"all":t;if(!r)return!1;var i=r.filter,o=r.bidders;return i&&"include"!==i&&"exclude"!==i?((0,a.logWarn)('UserSync "filterSettings.'.concat(n,".filter\" setting '").concat(i,"' is not a valid option; use either 'include' or 'exclude'.")),!1):!!("*"===o||Array.isArray(o)&&o.length>0&&o.every(function(e){return(0,a.isStr)(e)&&"*"!==e}))||((0,a.logWarn)('Detected an invalid setup in userSync "filterSettings.'.concat(n,".bidders\"; use either '*' (to represent all bidders) or an array of bidders.")),!1)}(r,e)){u[e]=!0;var n=r.all?r.all:r[e],i="*"===n.bidders?[t]:n.bidders,o=n.filter||"include";return({include:function(e,t){return!(0,d.includes)(e,t)},exclude:function(e,t){return(0,d.includes)(e,t)}})[o](i,t)}return!u[e]}(e,t))&&!0},t}t.userSync=b(Object.defineProperties({config:s.config.getConfig("userSync"),isAllowed:u.isActivityAllowed,regRule:u.registerActivityControl},{browserSupportsCookies:{get:function(){return!(0,a.isSafariBrowser)()&&m.cookiesAreEnabled()}}}))},1235:function(e,t,r){"use strict";var n,i,o,a=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t._each=function(e,t){var r=this;if(J(null==e?void 0:e.forEach))return e.forEach(t,this);Object.entries(e||{}).forEach(function(e){var n=(0,u.default)(e,2),i=n[0],o=n[1];return t.call(r,o,i)})},t._map=function(e,t){return J(null==e?void 0:e.map)?e.map(t):Object.entries(e||{}).map(function(r){var n=(0,u.default)(r,2),i=n[0];return t(n[1],i,e)})},t._setEventEmitter=function(e){o=e},t.binarySearch=function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},n=0,i=e.length&&e.length-1,o=r(t);i-n>1;){var a=n+Math.round((i-n)/2);o>r(e[a])?n=a:i=a}for(;e.length>n&&o>r(e[n]);)n++;return n},t.buildUrl=function(e){return(e.protocol||"http")+"://"+(e.host||e.hostname+(e.port?":".concat(e.port):""))+(e.pathname||"")+(e.search?"?".concat(w.formatQS(e.search||"")):"")+(e.hash?"#".concat(e.hash):"")},t.canAccessWindowTop=M,t.checkCookieSupport=ed,t.cleanObj=function(e){return Object.fromEntries(Object.entries(e).filter(function(e){var t=(0,u.default)(e,2);return void 0!==(t[0],t[1])}))},t.compareCodeAndSlot=void 0,t.contains=function(e,t){return J(null==e?void 0:e.includes)&&e.includes(t)},t.convertObjectToArray=function(e){return Object.keys(e).map(function(t){return(0,c.default)({},t,e[t])})},t.createIframe=void 0,t.createInvisibleIframe=Y,t.createTrackPixelHtml=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:encodeURI;if(!e)return"";var r=t(e),n='<div style="position:absolute;left:0px;top:0px;visibility:hidden;">';return n+='<img src="'+r+'"></div>'},t.createTrackPixelIframeHtml=er,t.cyrb53Hash=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=function(e,t){if(J(Math.imul))return Math.imul(e,t);var r=(4194303&e)*(t|=0);return 4290772992&e&&(r+=(4290772992&e)*t|0),0|r},n=3735928559^t,i=1103547991^t,o,a=0;a<e.length;a++)n=r(n^(o=e.charCodeAt(a)),2654435761),i=r(i^o,1597334677);return n=r(n^n>>>16,2246822507)^r(i^i>>>13,3266489909),(4294967296*(2097151&(i=r(i^i>>>16,2246822507)^r(n^n>>>13,3266489909)))+(n>>>0)).toString()},t.debugTurnedOn=z,Object.defineProperty(t,"deepAccess",{enumerable:!0,get:function(){return b.default}}),t.deepClone=function(e){return(0,p.klona)(e)||{}},t.deepEqual=ef,Object.defineProperty(t,"deepSetValue",{enumerable:!0,get:function(){return h.dset}}),t.delayExecution=function(e,t){if(t<1)throw Error("numRequiredCalls must be a positive number. Got ".concat(t));var r=0;return function(){++r===t&&e.apply(this,arguments)}},t.encodeMacroURI=function(e){return Array.from(e.matchAll(/\$({[^}]+})/g)).map(function(e){return e[1]}).reduce(function(e,t){return e.replace("$"+encodeURIComponent(t),"$"+t)},encodeURI(e))},t.extractDomainFromHost=function(e){var t=null;try{var r=/[-\w]+\.([-\w]+|[-\w]{3,}|[-\w]{1,3}\.[-\w]{2})$/i.exec(e);if(null!=r&&r.length>0){t=r[0];for(var n=1;n<r.length;n++)r[n].length>t.length&&(t=r[n])}}catch(e){t=null}return t},t.flatten=ei,t.formatQS=ep,t.generateUUID=function e(t){return t?(t^function(){return window&&window.crypto&&window.crypto.getRandomValues?crypto.getRandomValues(new Uint8Array(1))[0]%16:16*Math.random()}()>>t/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,e)},t.getBidIdParameter=function(e,t){return(null==t?void 0:t[e])||""},t.getBidRequest=function(e,t){if(!!e)return t.flatMap(function(e){return e.bids}).find(function(t){return["bidId","adId","bid_id"].some(function(r){return t[r]===e})})},t.getBidderCodes=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_.adUnits;return e.map(function(e){return e.bids.map(function(e){return e.bidder}).reduce(ei,[])}).reduce(ei,[]).filter(function(e){return void 0!==e}).filter(en)},t.getDNT=function(){return"1"===navigator.doNotTrack||"1"===window.doNotTrack||"1"===navigator.msDoNotTrack||"yes"===navigator.doNotTrack},t.getDefinedParams=function(e,t){return t.filter(function(t){return e[t]}).reduce(function(t,r){return Object.assign(t,(0,c.default)({},r,e[r]))},{})},t.getDomLoadingDuration=function(e){var t,r=-1,n=(e=e||U()).performance;if(null!==(t=e.performance)&&void 0!==t&&t.timing&&e.performance.timing.navigationStart>0){var i=n.timing.domLoading-n.timing.navigationStart;i>0&&(r=i)}return r},t.getOldestHighestCpmBid=t.getLatestHighestCpmBid=t.getHighestCpm=void 0,t.getParameterByName=function(e){return el(B().search)[e]||""},t.getPerformanceNow=function(){return window.performance&&window.performance.now&&window.performance.now()||0},t.getPrebidInternal=function(){return C},t.getSafeframeGeometry=function(){try{var e=U();return"function"==typeof e.$sf.ext.geom?e.$sf.ext.geom():void 0}catch(e){F("Error getting SafeFrame geometry",e);return}},t.getUniqueIdentifierStr=P,t.getUnixTimestampFromNow=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"d";if(0>["m","d"].indexOf(t))return Date.now();var r=e/("m"===t?1440:1);return Date.now()+(e&&e>0?864e5*r:0)},t.getUserConfiguredParams=function(e,t,r){return e.filter(function(e){return e.code===t}).flatMap(function(e){return e.bids}).filter(function(e){return e.bidder===r}).map(function(e){return e.params||{}})},t.getValue=function(e,t){return e[t]},t.getWindowLocation=B,t.getWindowSelf=U,t.getWindowTop=N,t.groupBy=function(e,t){return e.reduce(function(e,r){return(e[r[t]]=e[r[t]]||[]).push(r),e},{})},t.hasConsoleLogger=function(){return I},t.hasDeviceAccess=function(){return!1!==l.config.getConfig("deviceAccess")},t.hasNonSerializableProperty=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;for(var n in t){var i=t[n],o=(0,d.default)(i);if(void 0===i||"function"===o||"symbol"===o||i instanceof RegExp||i instanceof Map||i instanceof Set||i instanceof Date||null!==i&&"object"===o&&i.hasOwnProperty("toJSON"))return!0;if(null!==i&&"object"===o&&i.constructor===Object){if(r.has(i))return!0;if(r.add(i),e(i,r))return!0}}return!1},t.inIframe=ea,t.insertElement=X,t.insertHtmlIntoIframe=function(e){if(!!e){var t,r=Y();w.insertElement(r,document,"body"),(t=r.contentWindow.document).open(),t.write(e),t.close()}},t.insertUserSyncIframe=et,t.internal=void 0,t.isA=H,t.isAdUnitCodeMatchingSlot=function(e){return function(t){return ec(e,t)}},t.isApnGetTagDefined=function(){if(window.apntag&&J(window.apntag.getTag))return!0},t.isArray=void 0,t.isArrayOfNums=function(e,t){return Q(e)&&(!t||e.length===t)&&e.every(function(e){return eu(e)})},t.isBoolean=function(e){return H(e,"Boolean")},t.isEmpty=function(e){return!e||(Q(e)||K(e)?!(e.length>0):Object.keys(e).length<=0)},t.isEmptyStr=function(e){return K(e)&&(!e||0===e.length)},t.isFn=J,t.isGptPubadsDefined=function(){if(window.googletag&&J(window.googletag.pubads)&&J(window.googletag.pubads().getSlots))return!0},t.isInteger=void 0,t.isNumber=function(e){return H(e,"Number")},t.isPlainObject=$,t.isSafariBrowser=function(){return/^((?!chrome|android|crios|fxios).)*safari/i.test(navigator.userAgent)},t.isSafeFrameWindow=function(){if(!ea())return!1;var e=w.getWindowSelf();return!!(e.$sf&&e.$sf.ext)},t.isStr=K,t.isValidMediaTypes=function(e){var t=["banner","native","video"];return!!Object.keys(e).every(function(e){return(0,f.includes)(t,e)})&&(!e.video||!e.video.context||(0,f.includes)(["instream","outstream","adpod"],e.video.context))},t.logError=F,t.logInfo=q,t.logMessage=V,t.logWarn=L,t.memoize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e},r=new Map,n=function(){var n=t.apply(this,arguments);return!r.has(n)&&r.set(n,e.apply(this,arguments)),r.get(n)};return n.clear=r.clear.bind(r),n},t.mergeDeep=function e(t){for(var r=arguments.length,n=Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];if(!n.length)return t;var o=n.shift();if($(t)&&$(o)){var a=function(r){$(o[r])?(!t[r]&&Object.assign(t,(0,c.default)({},r,{})),e(t[r],o[r])):Q(o[r])?t[r]?Q(t[r])&&o[r].forEach(function(e){for(var n=1,i=0;i<t[r].length;i++)if(ef(t[r][i],e)){n=0;break}n&&t[r].push(e)}):Object.assign(t,(0,c.default)({},r,(0,s.default)(o[r]))):Object.assign(t,(0,c.default)({},r,o[r]))};for(var d in o)a(d)}return e.apply(void 0,[t].concat(n))},t.parseGPTSingleSizeArray=function(e){if(k(e))return R(e)},t.parseGPTSingleSizeArrayToRtbSize=function(e){if(k(e))return j(e)},t.parseQS=el,t.parseQueryStringParameters=function(e){var t="";for(var r in e)e.hasOwnProperty(r)&&(t+=r+"="+encodeURIComponent(e[r])+"&");return t=t.replace(/&$/,"")},t.parseSizesInput=function(e){return D(e).map(R)},t.parseUrl=function(e,t){var r=document.createElement("a");t&&"noDecodeWholeURL"in t&&t.noDecodeWholeURL?r.href=e:r.href=decodeURIComponent(e);var n=t&&"decodeSearchAsString"in t&&t.decodeSearchAsString;return{href:r.href,protocol:(r.protocol||"").replace(/:$/,""),hostname:r.hostname,port:+r.port,pathname:r.pathname.replace(/^(?!\/)/,"/"),search:n?r.search:w.parseQS(r.search||""),hash:(r.hash||"").replace(/^#/,""),host:r.host||window.location.host}},t.pick=function(e,t){return"object"!==(0,d.default)(e)?{}:t.reduce(function(r,n,i){if("function"==typeof n)return r;var o=n,a=n.match(/^(.+?)\sas\s(.+?)$/i);a&&(n=a[1],o=a[2]);var s=e[n];return"function"==typeof t[i+1]&&(s=t[i+1](s,r)),void 0!==s&&(r[o]=s),r},{})},t.prefixLog=function(e){function t(t){return function(){for(var r=arguments.length,n=Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(void 0,[e].concat(n))}}return{logError:t(F),logWarn:t(L),logMessage:t(V),logInfo:t(q)}},t.replaceAuctionPrice=function(e,t){return es(e,{AUCTION_PRICE:t})},t.replaceClickThrough=function(e,t){if(e&&t&&"string"==typeof t)return e.replace(/\${CLICKTHROUGH}/g,t)},t.replaceMacros=es,t.safeJSONEncode=function(e){try{return JSON.stringify(e)}catch(e){return""}},t.safeJSONParse=function(e){try{return JSON.parse(e)}catch(e){}},t.setOnAny=function(e,t){for(var r,n=0;n<e.length;n++)if(r=(0,b.default)(e[n],t))return r},t.setScriptAttributes=function(e,t){Object.entries(t).forEach(function(t){var r=(0,u.default)(t,2),n=r[0],i=r[1];return e.setAttribute(n,i)})},t.shuffle=function(e){for(var t=e.length;t>0;){var r=Math.floor(Math.random()*t),n=e[--t];e[t]=e[r],e[r]=n}return e},t.sizeTupleToRtbSize=j,t.sizeTupleToSizeString=R,t.sizesToSizeTuples=D,t.sortByHighestCpm=void 0,t.timestamp=function(){return new Date().getTime()},t.transformAdServerTargetingObj=function(e){return e&&Object.getOwnPropertyNames(e).length>0?Object.keys(e).map(function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))}).join("&"):""},t.triggerNurlWithCpm=function(e,t){K(e.nurl)&&""!==e.nurl&&(e.nurl=e.nurl.replace(/\${AUCTION_PRICE}/,t),ee(e.nurl))},t.triggerPixel=ee,t.uniques=en,t.unsupportedBidderMessage=function(e,t){var r=Object.keys(e.mediaTypes||{banner:"banner"}).join(", ");return"\n    ".concat(e.code," is a ").concat(r," ad unit\n    containing bidders that don't support ").concat(r,": ").concat(t,".\n    This bidder won't fetch demand.\n  ")},t.waitForElementToLoad=Z;var s=a(r(4995)),d=a(r(7251)),c=a(r(9837)),u=a(r(4763)),l=r(3408),p=r(9077),f=r(7448),g=r(2778),v=r(6607),m=r(9895),b=a(r(6998)),h=r(2341),y=Object.prototype.toString,A=!!window.console,I=!!(A&&window.console.log),E=!!(A&&window.console.info),S=!!(A&&window.console.warn),O=!!(A&&window.console.error),_=(0,m.getGlobal)();function T(){null!=o&&o.apply(void 0,arguments)}var w=t.internal={checkCookieSupport:ed,createTrackPixelIframeHtml:er,getWindowSelf:U,getWindowTop:N,canAccessWindowTop:M,getWindowLocation:B,insertUserSyncIframe:et,insertElement:X,isFn:J,triggerPixel:ee,logError:F,logWarn:L,logMessage:V,logInfo:q,parseQS:el,formatQS:ep,deepEqual:ef},C={};var x=(n=0,function(){return++n});function P(){return x()+Math.random().toString(16).substr(2)}function D(e){if("string"==typeof e)return e.split(/\s*,\s*/).map(function(e){return e.match(/^(\d+)x(\d+)$/i)}).filter(function(e){return e}).map(function(e){var t=(0,u.default)(e,3),r=(t[0],t[1]),n=t[2];return[parseInt(r,10),parseInt(n,10)]});if(Array.isArray(e))return k(e)?[e]:e.filter(k);return[]}function R(e){return e[0]+"x"+e[1]}function j(e){return{w:e[0],h:e[1]}}function k(e){return Q(e)&&2===e.length&&!isNaN(e[0])&&!isNaN(e[1])}function N(){return window.top}function U(){return window.self}function B(){return window.location}function M(){try{if(w.getWindowTop().location.href)return!0}catch(e){return!1}}function V(){z()&&I&&console.log.apply(console,G(arguments,"MESSAGE:"))}function q(){z()&&E&&console.info.apply(console,G(arguments,"INFO:"))}function L(){z()&&S&&console.warn.apply(console,G(arguments,"WARNING:")),T(g.EVENTS.AUCTION_DEBUG,{type:"WARNING",arguments:arguments})}function F(){z()&&O&&console.error.apply(console,G(arguments,"ERROR:")),T(g.EVENTS.AUCTION_DEBUG,{type:"ERROR",arguments:arguments})}function G(e,t){e=[].slice.call(e);var r=l.config.getCurrentBidder();return t&&e.unshift(t),r&&e.unshift(n("#aaa")),e.unshift(n("#3b88c3")),e.unshift("%cPrebid"+(r?"%c".concat(r):"")),e;function n(e){return"display: inline-block; color: #fff; background: ".concat(e,"; padding: 1px 4px; border-radius: 3px;")}}function z(){return!!l.config.getConfig("debug")}var W=t.createIframe=(i={border:"0px",hspace:"0",vspace:"0",marginWidth:"0",marginHeight:"0",scrolling:"no",frameBorder:"0",allowtransparency:"true"},function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=e.createElement("iframe");return Object.assign(n,Object.assign({},i,t)),Object.assign(n.style,r),n});function Y(){return W(document,{id:P(),width:0,height:0,src:"about:blank"},{display:"none",height:"0px",width:"0px",border:"0px"})}function H(e,t){return y.call(e)==="[object "+t+"]"}function J(e){return H(e,"Function")}function K(e){return H(e,"String")}var Q=t.isArray=Array.isArray.bind(Array);function $(e){return H(e,"Object")}function X(e,t,r,n){t=t||document,i=r?t.getElementsByTagName(r):t.getElementsByTagName("head");try{if((i=i.length?i:t.getElementsByTagName("body")).length){i=i[0];var i,o=n?null:i.firstChild;return i.insertBefore(e,o)}}catch(e){}}function Z(e,t){var r=null;return new v.GreedyPromise(function(n){var i=function(){e.removeEventListener("load",i),e.removeEventListener("error",i),null!=r&&window.clearTimeout(r),n()};e.addEventListener("load",i),e.addEventListener("error",i),null!=t&&(r=window.setTimeout(i,t))})}function ee(e,t,r){var n=new Image;t&&w.isFn(t)&&Z(n,r).then(t),n.src=e}function et(e,t,r){var n=w.createTrackPixelIframeHtml(e,!1,"allow-scripts allow-same-origin"),i=document.createElement("div");i.innerHTML=n;var o=i.firstChild;t&&w.isFn(t)&&Z(o,r).then(t),w.insertElement(o,document,"html",!0)}function er(e){var t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e?(t&&(e=encodeURI(e)),r&&(r='sandbox="'.concat(r,'"')),"<iframe ".concat(r,' id="').concat(P(),'"\n      frameborder="0"\n      allowtransparency="true"\n      marginheight="0" marginwidth="0"\n      width="0" hspace="0" vspace="0" height="0"\n      style="height:0px;width:0px;display:none;"\n      scrolling="no"\n      src="').concat(e,'">\n    </iframe>')):""}function en(e,t,r){return r.indexOf(e)===t}function ei(e,t){return e.concat(t)}function eo(e,t){return function(r,n){return r.cpm===n.cpm?t(r[e],n[e])?n:r:r.cpm<n.cpm?n:r}}t.getHighestCpm=eo("timeToRespond",function(e,t){return e>t}),t.getOldestHighestCpmBid=eo("responseTimestamp",function(e,t){return e>t}),t.getLatestHighestCpmBid=eo("responseTimestamp",function(e,t){return e<t}),t.sortByHighestCpm=function(e,t){return t.cpm-e.cpm};function ea(){try{return w.getWindowSelf()!==w.getWindowTop()}catch(e){return!0}}function es(e,t){if(e)return Object.entries(t).reduce(function(e,t){var r=(0,u.default)(t,2),n=r[0],i=r[1];return e.replace(RegExp("\\$\\{"+n+"\\}","g"),i||"")},e)}function ed(){if(window.navigator.cookieEnabled||document.cookie.length)return!0}var ec=t.compareCodeAndSlot=function(e,t){return e.getAdUnitPath()===t||e.getSlotElementId()===t},eu=t.isInteger=Number.isInteger.bind(Number);function el(e){return e?e.replace(/^\?/,"").split("&").reduce(function(e,t){var r=t.split("="),n=(0,u.default)(r,2),i=n[0],o=n[1];return/\[\]$/.test(i)?(e[i=i.replace("[]","")]=e[i]||[],e[i].push(o)):e[i]=o||"",e},{}):{}}function ep(e){return Object.keys(e).map(function(t){return Array.isArray(e[t])?e[t].map(function(e){return"".concat(t,"[]=").concat(e)}).join("&"):"".concat(t,"=").concat(e[t])}).join("&")}function ef(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.checkTypes,i=void 0!==n&&n;if(e===t)return!0;if("object"!==(0,d.default)(e)||null===e||"object"!==(0,d.default)(t)||null===t||i&&e.constructor!==t.constructor)return!1;var o=Object.keys(e);if(o.length!==Object.keys(t).length)return!1;for(var a=0;a<o.length;a++){var s=o[a];if(!t.hasOwnProperty(s))return!1;if(!ef(e[s],t[s],{checkTypes:i}))return!1}return!0}},8763:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.adjustCpm=function(e,t,r){var a,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},d=s.index,c=void 0===d?n.auctionManager.index:d,u=s.bs,l=void 0===u?i.bidderSettings:u;r=r||c.getBidRequest(t);var p=null==t?void 0:t.adapterCode,f=(null==t?void 0:t.bidderCode)||(null===(a=r)||void 0===a?void 0:a.bidder),g=l.get(null==t?void 0:t.adapterCode,"adjustAlternateBids"),v=l.getOwn(f,"bidCpmAdjustment")||l.get(g?p:f,"bidCpmAdjustment");if(v&&"function"==typeof v)try{return v(e,Object.assign({},t),r)}catch(e){(0,o.logError)("Error during bid adjustment",e)}return e};var n=r(3136),i=r(4735),o=r(1235)},7545:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reset=function(){r=null,n=0,i=[],document.removeEventListener("visibilitychange",o),document.addEventListener("visibilitychange",o)},t.setFocusTimeout=a;var r=null,n=0,i=[];function o(){if(document.hidden)r=Date.now();else{var e;n+=Date.now()-(null!==(e=r)&&void 0!==e?e:0),r=null,i.forEach(function(e){var t=e.callback,r=e.startTime;return(0,e.setTimerId)(a(t,n-r)())}),i=[]}}document.addEventListener("visibilitychange",o);function a(e,t){var o=n,s=setTimeout(function(){n===o&&null==r?e():null!=r?i.push({callback:e,startTime:o,setTimerId:function(e){s=e}}):s=a(e,n-o)()},t);return function(){return s}}},1270:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasPurpose1Consent=function(e){return null==e||!e.gdprApplies||!0===(0,n.deepAccess)(e,"vendorData.purpose.consents.1")};var n=r(1235)},4175:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.scrubIPv4=function(e){if(!e)return null;var t=e.split(".").map(Number);if(4!=t.length)return null;for(var r=[],n=0;n<4;n++){var i=Math.max(0,Math.min(8,24-8*n));r.push(255<<8-i&255)}return t.map(function(e,t){return e&r[t]}).join(".")},t.scrubIPv6=function(e){if(!e)return null;var t=e.split(":").map(function(e){return parseInt(e,16)});for(t=t.map(function(e){return isNaN(e)?0:e});t.length<8;)t.push(0);if(8!=t.length)return null;for(var r=[],n=0;n<8;n++){var i=Math.max(0,Math.min(16,64-16*n));r.push(65535<<16-i&65535)}return t.map(function(e,t){return e&r[t]}).map(function(e){return e.toString(16)}).join(":")}},647:function(e,t,r){"use strict";var n,i,o,a,s,d,c=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.CONFIG_TOGGLE=void 0,t.hookTimer=E,t.metricsFactory=m,t.timedBidResponseHook=t.timedAuctionHook=t.newMetrics=void 0,t.useMetrics=I;var u=c(r(4763)),l=r(3408);function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var f=t.CONFIG_TOGGLE="performanceMetrics",g=window.performance&&window.performance.now?function(){return window.performance.now()}:function(){return Date.now()},v=new WeakMap;function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.now,r=void 0===t?g:t,n=e.mkNode,i=void 0===n?function e(t){return{metrics:{},timestamps:{},groups:{},addParent:function(e,r){t.push([e,r])},newSibling:function(){return e(t.slice())},dfWalk:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.visit,n=e.follow,i=void 0===n?function(){return!0}:n,o=e.visited,a=void 0===o?new Set:o,s=e.inEdge;if(!a.has(this)){if(a.add(this),null!=(d=r(s,this)))return d;var d,c,l=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return p(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(t);try{for(l.s();!(c=l.n()).done;){var f=(0,u.default)(c.value,2),g=f[0],v=f[1];if(i(s,v)&&(d=g.dfWalk({visit:r,follow:i,visited:a,inEdge:v}),null!=d))return d}}catch(e){l.e(e)}finally{l.f()}}}}}:n,o=e.mkTimer,a=void 0===o?h:o,s=e.mkRenamer,d=void 0===s?function(e){return e}:s,c=e.nodes,l=void 0===c?v:c;return function(){return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return{forEach:function(t){t(e)}}};n=d(n);var o=function(e){return t.dfWalk({visit:function(t,r){var n=r.timestamps;if(n.hasOwnProperty(e))return n[e]}})};function s(e,r){var i=n(e);t.dfWalk({follow:function(e,t){return t.propagate&&(!e||!e.stopPropagation)},visit:function(e,t){i.forEach(function(n){null==e?t.metrics[n]=r:(!t.groups.hasOwnProperty(n)&&(t.groups[n]=[]),t.groups[n].push(r))})}})}function c(e){return a(r,function(t){return s(e,t)})}function u(){var e={};return t.dfWalk({visit:function(t,r){e=Object.assign({},!t||t.includeGroups?r.groups:null,r.metrics,e)}}),e}var p={startTiming:c,measureTime:function(e,t){return c(e).stopAfter(t)()},measureHookTime:function(e,t,r){var n,i,o=c(e);return r((n=t,(i=o.stopBefore(n)).bail=n.bail&&o.stopBefore(n.bail),i.stopTiming=o,i.untimed=n,i))},checkpoint:function(e){t.timestamps[e]=r()},timeSince:function(e,t){var n=o(e),i=null!=n?r()-n:null;return null!=t&&s(t,i),i},timeBetween:function(e,t,r){var n=o(e),i=o(t),a=null!=n&&null!=i?i-n:null;return null!=r&&s(r,a),a},setMetric:s,getMetrics:u,fork:function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.propagate,a=r.stopPropagation,s=r.includeGroups;return e(i([[t,{propagate:void 0===o||o,stopPropagation:void 0!==a&&a,includeGroups:void 0!==s&&s}]]),n)},join:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.propagate,i=r.stopPropagation,o=r.includeGroups,a=l.get(e);null!=a&&a.addParent(t,{propagate:void 0===n||n,stopPropagation:void 0!==i&&i,includeGroups:void 0!==o&&o})},newMetrics:function(){return e(t.newSibling(),n)},renameWith:function(r){return e(t,r)},toJSON:function(){return u()}};return l.set(p,t),p}(i([]))}}function b(e,t,r){return function(){t&&t();try{return e.apply(this,arguments)}finally{r&&r()}}}function h(e,t){var r=e(),n=!1;function i(){!n&&(t(e()-r),n=!0)}return i.stopBefore=function(e){return b(e,i)},i.stopAfter=function(e){return b(e,null,i)},i}var y=(i=function(){return{}},o={forEach:n=function(){}},(a=function(){return null}).stopBefore=function(e){return e},a.stopAfter=function(e){return e},s=Object.defineProperties({dfWalk:n,newSibling:function(){return s},addParent:n},Object.fromEntries(["metrics","timestamps","groups"].map(function(e){return[e,{get:i}]}))),m({now:function(){return 0},mkNode:function(){return s},mkRenamer:function(){return function(){return o}},mkTimer:function(){return a},nodes:{get:n,set:n}})()),A=!0;function I(e){return A&&e||y}function E(e,t){return function(r,n){return function(i){for(var o=arguments.length,a=Array(o>1?o-1:0),s=1;s<o;s++)a[s-1]=arguments[s];var d=this;return I(t.apply(d,a)).measureHookTime(e+r,i,function(e){return n.call.apply(n,[d,e].concat(a))})}}}l.config.getConfig(f,function(e){A=!!e[f]}),t.newMetrics=(d=m(),function(){return A?d():y}),t.timedAuctionHook=E("requestBids.",function(e){return e.metrics}),t.timedBidResponseHook=E("addBidResponse.",function(e,t){return t.metrics})},6607:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.GreedyPromise=void 0,t.defer=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.promiseFactory;function i(e){return function(t){return e(t)}}return{promise:(void 0===n?function(e){return new f(e)}:n)(function(r,n){e=r,t=n}),resolve:i(e),reject:i(t)}};var i=n(r(4763)),o=n(r(6945)),a=n(r(4920));function s(e,t,r){(function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")})(e,t),t.set(e,r)}function d(e,t){return e.get(u(e,t))}function c(e,t,r){return e.set(u(e,t),r),r}function u(e,t,r){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:r;throw TypeError("Private element is not present on this object")}var l=new WeakMap,p=new WeakMap,f=t.GreedyPromise=function(){function e(t){if((0,o.default)(this,e),s(this,l,void 0),s(this,p,void 0),"function"!=typeof t)throw Error("resolver not a function");var r=[],n=[],a=[0,1].map(function(e){return function(t){if(0===e&&"function"==typeof(null==t?void 0:t.then))t.then(u,f);else if(!r.length)for(r.push(e,t);n.length;)n.shift()()}}),d=(0,i.default)(a,2),u=d[0],f=d[1];try{t(u,f)}catch(e){f(e)}c(l,this,r),c(p,this,n)}return(0,a.default)(e,[{key:"then",value:function(e,t){var r,n,o=this;var a=(r=l,n=this,r.get(u(r,n)));return new this.constructor(function(r,n){var s,d,c=function(){var o=a[1],s=0===a[0]?[e,r]:[t,n],d=(0,i.default)(s,2),c=d[0],u=d[1];if("function"==typeof c){try{o=c(o)}catch(e){n(e);return}u=r}u(o)};a.length?c():(s=p,d=o,s.get(u(s,d))).push(c)})}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"finally",value:function(e){var t,r=this;return this.then(function(r){return t=r,e()},function(n){return t=r.constructor.reject(n),e()}).then(function(){return t})}}],[{key:"timeout",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new e(function(e){0===t?e():setTimeout(e,t)})}},{key:"race",value:function(t){var r=this;return new this(function(n,i){u(e,r,g).call(r,t,function(e,t){return e?n(t):i(t)})})}},{key:"all",value:function(t){var r=this;return new this(function(n,i){var o=[];u(e,r,g).call(r,t,function(e,t,r){return e?o[r]=t:i(t)},function(){return n(o)})})}},{key:"allSettled",value:function(t){var r=this;return new this(function(n){var i=[];u(e,r,g).call(r,t,function(e,t,r){return i[r]=e?{status:"fulfilled",value:t}:{status:"rejected",reason:t}},function(){return n(i)})})}},{key:"resolve",value:function(e){return new this(function(t){return t(e)})}},{key:"reject",value:function(e){return new this(function(t,r){return r(e)})}}])}();function g(e,t,r){var n=this,i=e.length;function o(){t.apply(this,arguments),--i<=0&&r&&r()}0===e.length&&r?r():e.forEach(function(e,t){return n.resolve(e).then(function(e){return o(!0,e,t)},function(e){return o(!1,e,t)})})}},6439:function(e,t){"use strict";function r(e,t){return e===t?0:e<t?-1:1}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return e};return function(t,n){return r(e(t),e(n))}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return function(t,r){return-e(t,r)||0}}function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e,r){for(var n=0;n<t.length;n++){var i=(0,t[n])(e,r);if(0!==i)return i}return 0}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return function(t,r){return 0>e(r,t)?r:t}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r;return a(i(e))}Object.defineProperty(t,"__esModule",{value:!0}),t.getOldestHighestCpmBid=t.getLatestHighestCpmBid=t.getHighestCpm=void 0,t.keyCompare=n,t.maximum=s,t.minimum=a,t.reverseCompare=i,t.simpleCompare=r,t.tiebreakCompare=o;var d=n(function(e){return e.cpm}),c=n(function(e){return e.responseTimestamp});t.getHighestCpm=s(o(d,i(n(function(e){return e.timeToRespond})))),t.getOldestHighestCpmBid=s(o(d,i(c))),t.getLatestHighestCpmBid=s(o(d,c))},9411:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.ttlCollection=function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.startTime,u=void 0===n?s.timestamp:n,l=r.ttl,p=void 0===l?function(){return null}:l,f=r.monotonic,g=r.slack,v=void 0===g?5e3:g,m=new Map,b=[],h=[],y=void 0!==f&&f?function(e){return h.push(e)}:function(e){return h.splice((0,s.binarySearch)(h,e,function(e){return e.expiry}),0,e)};function A(){if(t&&clearTimeout(t),h.length>0){var r=(0,s.timestamp)();e=Math.max(r,h[0].expiry+v),t=(0,d.setFocusTimeout)(function(){for(var e=(0,s.timestamp)(),r=0,n=0,i=h;n<i.length&&!function(){var t=i[n];if(t.expiry>e)return 1;b.forEach(function(e){try{e(t.item)}catch(e){(0,s.logError)(e)}}),m.delete(t.item),r++}();n++);h.splice(0,r),t=null,A()},e-r)}else t=null}var I={};return(0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)((0,i.default)({},Symbol.iterator,function(){return m.keys()}),"add",function(r){var n,i,s,d,c,l,f,g,b;m.has(r)||m.set(r,(n=r,s={},d=I,c=Object.entries({start:u,delta:p}).map(function(r){var c,u=(0,o.default)(r,2),l=u[0],p=u[1];return function(){var r=c={};a.GreedyPromise.resolve(p(n)).then(function(n){r===c&&(s[l]=n,d===I&&null!=s.start&&null!=s.delta&&(i=s.start+s.delta,y(b),(null==t||e>i+v)&&A()))})}}),f=(l=(0,o.default)(c,2))[0],b={item:n,refresh:g=l[1],get expiry(){return i}},f(),g(),b))}),"clear",function(){h.length=0,A(),m.clear(),I={}}),"toArray",function(){return Array.from(m.keys())}),"refresh",function(){h.length=0,A();var e,t=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e))){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw o}}}}(m.values());try{for(t.s();!(e=t.n()).done;)e.value.refresh()}catch(e){t.e(e)}finally{t.f()}}),"onExpiry",function(e){return b.push(e),function(){var t=b.indexOf(e);t>=0&&b.splice(t,1)}})};var i=n(r(9837)),o=n(r(4763)),a=r(6607),s=r(1235),d=r(7545);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}},5045:function(e,t,r){"use strict";var n=r(1640);Object.defineProperty(t,"__esModule",{value:!0}),t.checkVideoBidSetup=t.OUTSTREAM=t.ORTB_VIDEO_PARAMS=t.INSTREAM=void 0,t.fillVideoDefaults=function(e){var t,r=null==e||null===(t=e.mediaTypes)||void 0===t?void 0:t.video;null!=r&&null==r.plcmt&&(r.context===c||[2,3,4].includes(r.placement)?r.plcmt=4:r.context!==c&&[2,6].includes(r.playbackmethod)&&(r.plcmt=2))},t.isValidVideoBid=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.index,n=void 0===r?d.auctionManager.index:r,i=(0,o.deepAccess)(n.getMediaTypes(e),"video"),a=i&&(0,o.deepAccess)(i,"context"),s=i&&(0,o.deepAccess)(i,"useCacheKey"),c=n.getAdUnit(e);return l(e,c,i,a,s)},t.validateOrtbVideoFields=function(e,t){var r,n=null==e||null===(r=e.mediaTypes)||void 0===r?void 0:r.video;if(!(0,o.isPlainObject)(n)){(0,o.logWarn)("validateOrtbVideoFields: videoParams must be an object.");return}null!=n&&Object.entries(n).forEach(function(r){var a=(0,i.default)(r,2),s=a[0],d=a[1];if(!!u.has(s))!u.get(s)(d)&&("function"==typeof t?t(s,d,e):(delete n[s],(0,o.logWarn)('Invalid prop in adUnit "'.concat(e.code,'": Invalid value for mediaTypes.video.').concat(s," ORTB property. The property has been removed."))))})};var i=n(r(4763)),o=r(1235),a=r(3408),s=r(2885),d=r(3136),c=t.OUTSTREAM="outstream";t.INSTREAM="instream";var u=t.ORTB_VIDEO_PARAMS=new Map([["mimes",function(e){return Array.isArray(e)&&e.length>0&&e.every(function(e){return"string"==typeof e})}],["minduration",o.isInteger],["maxduration",o.isInteger],["startdelay",o.isInteger],["maxseq",o.isInteger],["poddur",o.isInteger],["protocols",o.isArrayOfNums],["w",o.isInteger],["h",o.isInteger],["podid",o.isStr],["podseq",o.isInteger],["rqddurs",o.isArrayOfNums],["placement",o.isInteger],["plcmt",o.isInteger],["linearity",o.isInteger],["skip",function(e){return[1,0].includes(e)}],["skipmin",o.isInteger],["skipafter",o.isInteger],["sequence",o.isInteger],["slotinpod",o.isInteger],["mincpmpersec",o.isNumber],["battr",o.isArrayOfNums],["maxextended",o.isInteger],["minbitrate",o.isInteger],["maxbitrate",o.isInteger],["boxingallowed",o.isInteger],["playbackmethod",o.isArrayOfNums],["playbackend",o.isInteger],["delivery",o.isArrayOfNums],["pos",o.isInteger],["api",o.isArrayOfNums],["companiontype",o.isArrayOfNums],["poddedupe",o.isArrayOfNums]]),l=t.checkVideoBidSetup=(0,s.hook)("sync",function(e,t,r,n,i){if(r&&(i||n!==c))return a.config.getConfig("cache.url")||!e.vastXml||e.vastUrl?!!(e.vastUrl||e.vastXml):((0,o.logError)('\n        This bid contains only vastXml and will not work when a prebid cache url is not specified.\n        Try enabling prebid cache with pbjs.setConfig({ cache: {url: "..."} });\n      '),!1);return n!==c||!!i||!!(e.renderer||t&&t.renderer||r.renderer)},"checkVideoBidSetup")},5800:function(e,t,r){"use strict";var n,i,o=r(7251);Object.defineProperty(t,"__esModule",{value:!0}),t.batchingCache=t.batchAndStore=t._internal=void 0,t.getCacheUrl=b,t.store=m,t.storeBatch=y;var a=r(721),s=r(3408),d=r(3136),c=g(r(56)),u=g(r(2778)),l=r(1235),p=r(8514);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=o(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&({}).hasOwnProperty.call(e,a)){var s=i?Object.getOwnPropertyDescriptor(e,a):null;s&&(s.get||s.set)?Object.defineProperty(n,a,s):n[a]=e[a]}return n.default=e,r&&r.set(e,n),n}function v(e){var t,r,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.index,a=void 0===o?d.auctionManager.index:o;var c=e.vastXml?e.vastXml:(t=e.vastUrl,n=(r=(r=e.vastImpUrl)&&(Array.isArray(r)?r:[r]))?r.map(function(e){return"<Impression><![CDATA[".concat(e,"]]></Impression>")}).join(""):"",'<VAST version="3.0">\n    <Ad>\n      <Wrapper>\n        <AdSystem>prebid.org wrapper</AdSystem>\n        <VASTAdTagURI><![CDATA['.concat(t,"]]></VASTAdTagURI>\n        ").concat(n,"\n        <Creatives></Creatives>\n      </Wrapper>\n    </Ad>\n  </VAST>")),u=a.getAuction(e),l={type:"xml",value:c,ttlseconds:Number(e.ttl)+15};return s.config.getConfig("cache.vasttrack")&&(l.bidder=e.bidder,l.bidid=e.requestId,l.aid=e.auctionId),null!=u&&(l.timestamp=u.getAuctionStart()),"string"==typeof e.customCacheKey&&""!==e.customCacheKey&&(l.key=e.customCacheKey),l}function m(e,t){var r,n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.ajaxBuilder,o={puts:e.map(v)};i(s.config.getConfig("cache.timeout"))(s.config.getConfig("cache.url"),(r=t,n=e,{success:function(e){var t;try{t=JSON.parse(e).responses}catch(e){r(e,[]);return}t?r(null,t):r(Error("The cache server didn't respond with a responses property."),[])},error:function(e,t){(function(e,t){var r=e.responseText;if(!!r.match(/cache element.\d+ exceeded max size: Payload size .\d+ exceeded max.\d+/)){var n=r.match(/(\d+)/g),i={bids:t,responseSize:n[1],maxSizeAllowed:n[2]};c.emit(u.EVENTS.VAST_EXCEEDED_LIMIT,i)}})(t,n),r(Error("Error storing video ad in the cache: ".concat(e,": ").concat(JSON.stringify(t))),[])}}),JSON.stringify(o),{contentType:"text/plain",withCredentials:!0})}function b(e){return"".concat(s.config.getConfig("cache.url"),"?uuid=").concat(e)}var h=t._internal={store:m};function y(e){var t=e.map(function(e){return e.bidResponse});h.store(t,function(r,n){if(r){var i;i=r,(0,l.logError)("Failed to save to the video cache: ".concat(i,". Video bids will be discarded:"),t)}else e.length!==n.length?(0,l.logError)("expected ".concat(e.length," cache IDs, got ").concat(n.length," instead")):n.forEach(function(t,r){var n=e[r],i=n.auctionInstance,o=n.bidResponse,a=n.afterBidAdded;""===t.uuid?(0,l.logWarn)("Supplied video cache key was already in use by Prebid Cache; caching attempt was rejected. Video bid must be discarded."):(o.videoCacheKey=t.uuid,!o.vastUrl&&(o.vastUrl=b(o.videoCacheKey)),(0,p.addBidToAuction)(i,o),a())})})}s.config.getConfig("cache",function(e){n="number"==typeof e.cache.batchSize&&e.cache.batchSize>0?e.cache.batchSize:1,i="number"==typeof e.cache.batchTimeout&&e.cache.batchTimeout>0?e.cache.batchTimeout:0});var A=t.batchingCache=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:setTimeout,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y,r=[[]],o=!1,a=function(e){return e()};return function(s,d,c){var u=i>0?e:a;r[r.length-1].length>=n&&r.push([]),r[r.length-1].push({auctionInstance:s,bidResponse:d,afterBidAdded:c}),!o&&(o=!0,u(function(){r.forEach(t),r=[[]],o=!1},i))}};t.batchAndStore=A()},6998:function(e,t,r){"use strict";function n(e,t,r,n,i){for(n=0,t=t.split?t.split("."):t;n<t.length;n++)e=e?e[t[n]]:i;return e===i?r:e}r.r(t),r.d(t,{default:function(){return n}})},2341:function(e,t){t.dset=function(e,t,r){t.split&&(t=t.split("."));for(var n,i,o=0,a=t.length,s=e;o<a&&"__proto__"!=(i=""+t[o++])&&"constructor"!==i&&"prototype"!==i;){;s=s[i]=o===a?r:typeof(n=s[i])==typeof t?n:0*t[o]!=0||~(""+t[o]).indexOf(".")?{}:[]}}},4040:function(e){s.SYNC=1,s.ASYNC=2,s.QUEUE=4;var t="fun-hooks",r=Object.freeze({useProxy:!0,ready:0}),n=new WeakMap,i="2,1,0"===[1].reduce(function(e,t,r){return[e,t,r]},2).toString()?Array.prototype.reduce:function(e,t){var r,n=Object(this),i=n.length>>>0,o=0;if(t)r=t;else{for(;o<i&&!(o in n);)o++;r=n[o++]}for(;o<i;)o in n&&(r=e(r,n[o],o,n)),o++;return r};function o(e,t){return Array.prototype.slice.call(e,t)}var a=Object.assign||function(e){return i.call(o(arguments,1),function(e,t){return t&&Object.keys(t).forEach(function(r){e[r]=t[r]}),e},e)};function s(e){var d,c={},u=[];function l(e,t){if("function"==typeof e)return v.call(null,"sync",e,t);if("string"==typeof e&&"function"==typeof t)return v.apply(null,arguments);if("object"==typeof e)return p.apply(null,arguments)}function p(e,t,r){var n=!0;void 0===t&&(t=Object.getOwnPropertyNames(e),n=!1);var i={},o=["constructor"];do(t=t.filter(function(t){return"function"==typeof e[t]&&!(-1!==o.indexOf(t))&&!t.match(/^_/)})).forEach(function(t){var n=t.split(":"),o=n[0],a=n[1]||"sync";if(!i[o]){var s=e[o];i[o]=e[o]=v(a,s,r?[r,o]:void 0)}}),e=Object.getPrototypeOf(e);while(n&&e);return i}function f(e){var r=Array.isArray(e)?e:e.split(".");return i.call(r,function(n,i,o){var a=n[i],s=!1;return a?a:o===r.length-1?(!d&&u.push(function(){!s&&console.warn(t+": referenced '"+e+"' but it was never created")}),n[i]=g(function(e){n[i]=e,s=!0})):n[i]={}},c)}function g(e){var t=[],r=[],i=function(){},o={before:function(e,r){return s.call(this,t,"before",e,r)},after:function(e,t){return s.call(this,r,"after",e,t)},getHooks:function(e){var n=t.concat(r);"object"==typeof e&&(n=n.filter(function(t){return Object.keys(e).every(function(r){return t[r]===e[r]})}));try{a(n,{remove:function(){return n.forEach(function(e){e.remove()}),this}})}catch(e){console.error("error adding `remove` to array, did you modify Array.prototype?")}return n},removeAll:function(){return this.getHooks().remove()}};return n.set(o.after,{install:function(n,o,a){this.type=n,i=a,a(t,r),e&&e(o)}}),o;function s(e,n,o,a){var s={hook:o,type:n,priority:a||10,remove:function(){var n=e.indexOf(s);-1!==n&&(e.splice(n,1),i(t,r))}};return e.push(s),e.sort(function(e,t){return t.priority-e.priority}),i(t,r),this}}function v(r,i,c){var l,p,v=i.after&&n.get(i.after);if(v){if(v.type===r)return i;throw t+": recreated hookable with different type"}var m=c?f(c):g(),b={get:function(e,t){return m[t]||Reflect.get.apply(Reflect,arguments)}};return!d&&u.push(h),e.useProxy&&"function"==typeof Proxy&&Proxy.revocable?p=new Proxy(i,b):a(p=function(){return b.apply?b.apply(i,this,o(arguments)):i.apply(this,arguments)},m),n.get(p.after).install(r,p,function(e,t){var n,i=[];function a(e){i.push(e.hook)}e.length||t.length?(e.forEach(a),n=i.push(void 0)-1,t.forEach(a),l=function(e,t,a){var s,d=0,c="async"===r&&"function"==typeof a[a.length-1]&&a.pop();function u(e){"sync"===r?s=e:c&&c.apply(null,arguments)}function l(e){if(i[d]){var n=o(arguments);return l.bail=u,n.unshift(l),i[d++].apply(t,n)}"sync"===r?s=e:c&&c.apply(null,arguments)}return i[n]=function(){var n=o(arguments,1);"async"===r&&c&&(delete l.bail,n.push(l));var i=e.apply(t,n);"sync"===r&&l(i)},l.apply(null,a),s}):l=void 0,h()}),p;function h(){!d&&("sync"!==r||e.ready&s.SYNC)&&("async"!==r||e.ready&s.ASYNC)?"sync"!==r&&e.ready&s.QUEUE?b.apply=function(){var e=arguments;u.push(function(){p.apply(e[1],e[2])})}:b.apply=function(){throw t+": hooked function not ready"}:b.apply=l}}return(e=a({},r,e)).ready?l.ready=function(){d=!0,!function(e){for(var t;t=e.shift();)t()}(u)}:d=!0,l.get=f,l}e.exports=s},9077:function(e,t){t.klona=function e(t){var r,n,i;if(Array.isArray(t)){for(n=Array(r=t.length);r--;)n[r]=(i=t[r])&&"object"==typeof i?e(i):i;return n}if("[object Object]"===Object.prototype.toString.call(t)){for(r in n={},t)"__proto__"===r?Object.defineProperty(n,r,{value:e(t[r]),configurable:!0,enumerable:!0,writable:!0}):n[r]=(i=t[r])&&"object"==typeof i?e(i):i;return n}return t}},9515:function(e,t,r){var n=r(8761)(r(7772),"DataView");e.exports=n},9612:function(e,t,r){var n=r(2118),i=r(6909),o=r(8889),a=r(4174),s=r(7942);function d(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}d.prototype.clear=n,d.prototype.delete=i,d.prototype.get=o,d.prototype.has=a,d.prototype.set=s,e.exports=d},235:function(e,t,r){var n=r(3945),i=r(1846),o=r(8028),a=r(2344),s=r(4769);function d(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}d.prototype.clear=n,d.prototype.delete=i,d.prototype.get=o,d.prototype.has=a,d.prototype.set=s,e.exports=d},326:function(e,t,r){var n=r(8761)(r(7772),"Map");e.exports=n},6738:function(e,t,r){var n=r(2411),i=r(6417),o=r(6928),a=r(9493),s=r(4150);function d(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}d.prototype.clear=n,d.prototype.delete=i,d.prototype.get=o,d.prototype.has=a,d.prototype.set=s,e.exports=d},2760:function(e,t,r){var n=r(8761)(r(7772),"Promise");e.exports=n},2143:function(e,t,r){var n=r(8761)(r(7772),"Set");e.exports=n},6571:function(e,t,r){var n=r(235),i=r(5243),o=r(2858),a=r(4417),s=r(8605),d=r(1418);function c(e){var t=this.__data__=new n(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=d,e.exports=c},857:function(e,t,r){var n=r(7772).Symbol;e.exports=n},9162:function(e,t,r){var n=r(7772).Uint8Array;e.exports=n},3215:function(e,t,r){var n=r(8761)(r(7772),"WeakMap");e.exports=n},2517:function(e){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}},7552:function(e){e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var a=e[r];t(a,r,e)&&(o[i++]=a)}return o}},3060:function(e,t,r){var n=r(6473),i=r(9631),o=r(6152),a=r(3226),s=r(9045),d=r(7598),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=o(e),u=!r&&i(e),l=!r&&!u&&a(e),p=!r&&!u&&!l&&d(e),f=r||u||l||p,g=f?n(e.length,String):[],v=g.length;for(var m in e)(t||c.call(e,m))&&!(f&&("length"==m||l&&("offset"==m||"parent"==m)||p&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,v)))&&g.push(m);return g}},5067:function(e){e.exports=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}},91:function(e,t,r){var n=r(3940),i=r(1225),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,r){var a=e[t];(!(o.call(e,t)&&i(a,r))||void 0===r&&!(t in e))&&n(e,t,r)}},2218:function(e,t,r){var n=r(1225);e.exports=function(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return -1}},7993:function(e,t,r){var n=r(752),i=r(249);e.exports=function(e,t){return e&&n(t,i(t),e)}},5906:function(e,t,r){var n=r(752),i=r(8582);e.exports=function(e,t){return e&&n(t,i(t),e)}},3940:function(e,t,r){var n=r(3043);e.exports=function(e,t,r){"__proto__"==t&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}},8874:function(e,t,r){var n=r(6571),i=r(2517),o=r(91),a=r(7993),s=r(5906),d=r(2175),c=r(1522),u=r(7680),l=r(9987),p=r(3483),f=r(6939),g=r(940),v=r(9917),m=r(8222),b=r(8725),h=r(6152),y=r(3226),A=r(4714),I=r(9259),E=r(3679),S=r(249),O=r(8582),_="[object Arguments]",T="[object Function]",w="[object Object]",C={};C[_]=C["[object Array]"]=C["[object ArrayBuffer]"]=C["[object DataView]"]=C["[object Boolean]"]=C["[object Date]"]=C["[object Float32Array]"]=C["[object Float64Array]"]=C["[object Int8Array]"]=C["[object Int16Array]"]=C["[object Int32Array]"]=C["[object Map]"]=C["[object Number]"]=C[w]=C["[object RegExp]"]=C["[object Set]"]=C["[object String]"]=C["[object Symbol]"]=C["[object Uint8Array]"]=C["[object Uint8ClampedArray]"]=C["[object Uint16Array]"]=C["[object Uint32Array]"]=!0,C["[object Error]"]=C[T]=C["[object WeakMap]"]=!1;e.exports=function e(t,r,x,P,D,R){var j,k=1&r,N=2&r,U=4&r;if(x&&(j=D?x(t,P,D,R):x(t)),void 0!==j)return j;if(!I(t))return t;var B=h(t);if(B){if(j=v(t),!k)return c(t,j)}else{var M=g(t),V=M==T||"[object GeneratorFunction]"==M;if(y(t))return d(t,k);if(M==w||M==_||V&&!D){if(j=N||V?{}:b(t),!k)return N?l(t,s(j,t)):u(t,a(j,t))}else{if(!C[M])return D?t:{};j=m(t,M,k)}}R||(R=new n);var q=R.get(t);if(q)return q;R.set(t,j),E(t)?t.forEach(function(n){j.add(e(n,r,x,n,t,R))}):A(t)&&t.forEach(function(n,i){j.set(i,e(n,r,x,i,t,R))});var L=U?N?f:p:N?O:S,F=B?void 0:L(t);return i(F||t,function(n,i){F&&(n=t[i=n]),o(j,i,e(n,r,x,i,t,R))}),j}},9413:function(e,t,r){var n=r(9259),i=Object.create,o=function(){function e(){}return function(t){if(!n(t))return{};if(i)return i(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();e.exports=o},1897:function(e,t,r){var n=r(5067),i=r(6152);e.exports=function(e,t,r){var o=t(e);return i(e)?o:n(o,r(e))}},3366:function(e,t,r){var n=r(857),i=r(2107),o=r(7157),a=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},5183:function(e,t,r){var n=r(3366),i=r(5125);e.exports=function(e){return i(e)&&"[object Arguments]"==n(e)}},4511:function(e,t,r){var n=r(940),i=r(5125);e.exports=function(e){return i(e)&&"[object Map]"==n(e)}},6840:function(e,t,r){var n=r(1049),i=r(7394),o=r(9259),a=r(7035),s=/^\[object .+?Constructor\]$/,d=Object.prototype,c=Function.prototype.toString,u=d.hasOwnProperty,l=RegExp("^"+c.call(u).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(n(e)?l:s).test(a(e))}},8436:function(e,t,r){var n=r(940),i=r(5125);e.exports=function(e){return i(e)&&"[object Set]"==n(e)}},5522:function(e,t,r){var n=r(3366),i=r(1158),o=r(5125),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;e.exports=function(e){return o(e)&&i(e.length)&&!!a[n(e)]}},6411:function(e,t,r){var n=r(6001),i=r(4248),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return i(e);var t=[];for(var r in Object(e))o.call(e,r)&&"constructor"!=r&&t.push(r);return t}},8390:function(e,t,r){var n=r(9259),i=r(6001),o=r(2966),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=i(e),r=[];for(var s in e)!("constructor"==s&&(t||!a.call(e,s)))&&r.push(s);return r}},6473:function(e){e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},7826:function(e){e.exports=function(e){return function(t){return e(t)}}},9882:function(e,t,r){var n=r(9162);e.exports=function(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}},2175:function(e,t,r){e=r.nmd(e);var n=r(7772),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i?n.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,n=s?s(r):new e.constructor(r);return e.copy(n),n}},4727:function(e,t,r){var n=r(9882);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}},6058:function(e){var t=/\w*$/;e.exports=function(e){var r=new e.constructor(e.source,t.exec(e));return r.lastIndex=e.lastIndex,r}},169:function(e,t,r){var n=r(857),i=n?n.prototype:void 0,o=i?i.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},6190:function(e,t,r){var n=r(9882);e.exports=function(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}},1522:function(e){e.exports=function(e,t){var r=-1,n=e.length;for(t||(t=Array(n));++r<n;)t[r]=e[r];return t}},752:function(e,t,r){var n=r(91),i=r(3940);e.exports=function(e,t,r,o){var a=!r;r||(r={});for(var s=-1,d=t.length;++s<d;){var c=t[s],u=o?o(r[c],e[c],c,r,e):void 0;void 0===u&&(u=e[c]),a?i(r,c,u):n(r,c,u)}return r}},7680:function(e,t,r){var n=r(752),i=r(633);e.exports=function(e,t){return n(e,i(e),t)}},9987:function(e,t,r){var n=r(752),i=r(2680);e.exports=function(e,t){return n(e,i(e),t)}},4019:function(e,t,r){var n=r(7772)["__core-js_shared__"];e.exports=n},3043:function(e,t,r){var n=r(8761),i=function(){try{var e=n(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=i},1242:function(e,t,r){var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},3483:function(e,t,r){var n=r(1897),i=r(633),o=r(249);e.exports=function(e){return n(e,o,i)}},6939:function(e,t,r){var n=r(1897),i=r(2680),o=r(8582);e.exports=function(e){return n(e,o,i)}},7937:function(e,t,r){var n=r(8304);e.exports=function(e,t){var r=e.__data__;return n(t)?r["string"==typeof t?"string":"hash"]:r.map}},8761:function(e,t,r){var n=r(6840),i=r(8109);e.exports=function(e,t){var r=i(e,t);return n(r)?r:void 0}},7353:function(e,t,r){var n=r(241)(Object.getPrototypeOf,Object);e.exports=n},2107:function(e,t,r){var n=r(857),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=n?n.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),r=e[s];try{e[s]=void 0;var n=!0}catch(e){}var i=a.call(e);return n&&(t?e[s]=r:delete e[s]),i}},633:function(e,t,r){var n=r(7552),i=r(981),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:n(a(e=Object(e)),function(t){return o.call(e,t)})}:i;e.exports=s},2680:function(e,t,r){var n=r(5067),i=r(7353),o=r(633),a=r(981),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)n(t,o(e)),e=i(e);return t}:a;e.exports=s},940:function(e,t,r){var n=r(9515),i=r(326),o=r(2760),a=r(2143),s=r(3215),d=r(3366),c=r(7035),u="[object Map]",l="[object Promise]",p="[object Set]",f="[object WeakMap]",g="[object DataView]",v=c(n),m=c(i),b=c(o),h=c(a),y=c(s),A=d;(n&&A(new n(new ArrayBuffer(1)))!=g||i&&A(new i)!=u||o&&A(o.resolve())!=l||a&&A(new a)!=p||s&&A(new s)!=f)&&(A=function(e){var t=d(e),r="[object Object]"==t?e.constructor:void 0,n=r?c(r):"";if(n)switch(n){case v:return g;case m:return u;case b:return l;case h:return p;case y:return f}return t}),e.exports=A},8109:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},2118:function(e,t,r){var n=r(9191);e.exports=function(){this.__data__=n?n(null):{},this.size=0}},6909:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},8889:function(e,t,r){var n=r(9191),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(n){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return i.call(t,e)?t[e]:void 0}},4174:function(e,t,r){var n=r(9191),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return n?void 0!==t[e]:i.call(t,e)}},7942:function(e,t,r){var n=r(9191);e.exports=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=n&&void 0===t?"__lodash_hash_undefined__":t,this}},9917:function(e){var t=Object.prototype.hasOwnProperty;e.exports=function(e){var r=e.length,n=new e.constructor(r);return r&&"string"==typeof e[0]&&t.call(e,"index")&&(n.index=e.index,n.input=e.input),n}},8222:function(e,t,r){var n=r(9882),i=r(4727),o=r(6058),a=r(169),s=r(6190);e.exports=function(e,t,r){var d=e.constructor;switch(t){case"[object ArrayBuffer]":return n(e);case"[object Boolean]":case"[object Date]":return new d(+e);case"[object DataView]":return i(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,r);case"[object Map]":case"[object Set]":return new d;case"[object Number]":case"[object String]":return new d(e);case"[object RegExp]":return o(e);case"[object Symbol]":return a(e)}}},8725:function(e,t,r){var n=r(9413),i=r(7353),o=r(6001);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:n(i(e))}},9045:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},8304:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},7394:function(e,t,r){var n,i=r(4019);var o=(n=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"";e.exports=function(e){return!!o&&o in e}},6001:function(e){var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},3945:function(e){e.exports=function(){this.__data__=[],this.size=0}},1846:function(e,t,r){var n=r(2218),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,r=n(t,e);return!(r<0)&&(r==t.length-1?t.pop():i.call(t,r,1),--this.size,!0)}},8028:function(e,t,r){var n=r(2218);e.exports=function(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}},2344:function(e,t,r){var n=r(2218);e.exports=function(e){return n(this.__data__,e)>-1}},4769:function(e,t,r){var n=r(2218);e.exports=function(e,t){var r=this.__data__,i=n(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}},2411:function(e,t,r){var n=r(9612),i=r(235),o=r(326);e.exports=function(){this.size=0,this.__data__={hash:new n,map:new(o||i),string:new n}}},6417:function(e,t,r){var n=r(7937);e.exports=function(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}},6928:function(e,t,r){var n=r(7937);e.exports=function(e){return n(this,e).get(e)}},9493:function(e,t,r){var n=r(7937);e.exports=function(e){return n(this,e).has(e)}},4150:function(e,t,r){var n=r(7937);e.exports=function(e,t){var r=n(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}},9191:function(e,t,r){var n=r(8761)(Object,"create");e.exports=n},4248:function(e,t,r){var n=r(241)(Object.keys,Object);e.exports=n},2966:function(e){e.exports=function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}},4146:function(e,t,r){e=r.nmd(e);var n=r(1242),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i&&n.process,s=function(){try{var e=o&&o.require&&o.require("util").types;if(e)return e;return a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=s},7157:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},241:function(e){e.exports=function(e,t){return function(r){return e(t(r))}}},7772:function(e,t,r){var n=r(1242),i="object"==typeof self&&self&&self.Object===Object&&self,o=n||i||Function("return this")();e.exports=o},5243:function(e,t,r){var n=r(235);e.exports=function(){this.__data__=new n,this.size=0}},2858:function(e){e.exports=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}},4417:function(e){e.exports=function(e){return this.__data__.get(e)}},8605:function(e){e.exports=function(e){return this.__data__.has(e)}},1418:function(e,t,r){var n=r(235),i=r(326),o=r(6738);e.exports=function(e,t){var r=this.__data__;if(r instanceof n){var a=r.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++r.size,this;r=this.__data__=new o(a)}return r.set(e,t),this.size=r.size,this}},7035:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(e){}try{return e+""}catch(e){}}return""}},9850:function(e,t,r){var n=r(8874);e.exports=function(e){return n(e,5)}},1225:function(e){e.exports=function(e,t){return e===t||e!=e&&t!=t}},9631:function(e,t,r){var n=r(5183),i=r(5125),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,d=n(function(){return arguments}())?n:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=d},6152:function(e){var t=Array.isArray;e.exports=t},7878:function(e,t,r){var n=r(1049),i=r(1158);e.exports=function(e){return null!=e&&i(e.length)&&!n(e)}},3226:function(e,t,r){e=r.nmd(e);var n=r(7772),i=r(6330),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?n.Buffer:void 0,d=s?s.isBuffer:void 0;e.exports=d||i},1049:function(e,t,r){var n=r(3366),i=r(9259);e.exports=function(e){if(!i(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},1158:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},4714:function(e,t,r){var n=r(4511),i=r(7826),o=r(4146),a=o&&o.isMap,s=a?i(a):n;e.exports=s},9259:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},5125:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},3679:function(e,t,r){var n=r(8436),i=r(7826),o=r(4146),a=o&&o.isSet,s=a?i(a):n;e.exports=s},7598:function(e,t,r){var n=r(5522),i=r(7826),o=r(4146),a=o&&o.isTypedArray,s=a?i(a):n;e.exports=s},249:function(e,t,r){var n=r(3060),i=r(6411),o=r(7878);e.exports=function(e){return o(e)?n(e):i(e)}},8582:function(e,t,r){var n=r(3060),i=r(8390),o=r(7878);e.exports=function(e){return o(e)?n(e,!0):i(e)}},981:function(e){e.exports=function(){return[]}},6330:function(e){e.exports=function(){return!1}},5980:function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports},1239:function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports},970:function(e,t,r){var n=r(5980);e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},5713:function(e){e.exports=function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports},7822:function(e){function t(e,t,r,n,i,o,a){try{var s=e[o](a),d=s.value}catch(e){return void r(e)}s.done?t(d):Promise.resolve(d).then(n,i)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise(function(i,o){var a=e.apply(r,n);function s(e){t(a,i,o,s,d,"next",e)}function d(e){t(a,i,o,s,d,"throw",e)}s(void 0)})}},e.exports.__esModule=!0,e.exports.default=e.exports},6945:function(e){e.exports=function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},4920:function(e,t,r){var n=r(210);function i(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n(i.key),i)}}e.exports=function(e,t,r){return t&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},9837:function(e,t,r){var n=r(210);e.exports=function(e,t,r){return(t=n(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},4237:function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4271:function(e,t,r){var n=r(1908);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports},1640:function(e){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.__esModule=!0,e.exports.default=e.exports},2668:function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},2348:function(e){e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,s=[],d=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;d=!1}else for(;!(d=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);d=!0);}catch(e){c=!0,i=e}finally{try{if(!d&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}},e.exports.__esModule=!0,e.exports.default=e.exports},6612:function(e){e.exports=function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},3283:function(e){e.exports=function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},4973:function(e,t,r){var n=r(5399);e.exports=function(e,t){if(null==e)return{};var r,i,o=n(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||({}).propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o},e.exports.__esModule=!0,e.exports.default=e.exports},5399:function(e){e.exports=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r},e.exports.__esModule=!0,e.exports.default=e.exports},9709:function(e,t,r){var n=r(7251).default,i=r(5713);e.exports=function(e,t){if(t&&("object"==n(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return i(e)},e.exports.__esModule=!0,e.exports.default=e.exports},3477:function(e){e.exports=function(e){throw TypeError('"'+e+'" is read-only')},e.exports.__esModule=!0,e.exports.default=e.exports},4940:function(e,t,r){var n=r(7251).default;function i(){"use strict";e.exports=i=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var t,r={},o=Object.prototype,a=o.hasOwnProperty,s=Object.defineProperty||function(e,t,r){e[t]=r.value},d="function"==typeof Symbol?Symbol:{},c=d.iterator||"@@iterator",u=d.asyncIterator||"@@asyncIterator",l=d.toStringTag||"@@toStringTag";function p(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{p({},"")}catch(e){p=function(e,t,r){return e[t]=r}}function f(e,r,n,i){var o=Object.create((r&&r.prototype instanceof y?r:y).prototype);return s(o,"_invoke",{value:function(e,r,n){var i=v;return function(o,a){if(i===m)throw Error("Generator is already running");if(i===b){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var s=n.delegate;if(s){var d=function e(r,n){var i=n.method,o=r.iterator[i];if(o===t)return n.delegate=null,"throw"===i&&r.iterator.return&&(n.method="return",n.arg=t,e(r,n),"throw"===n.method)||"return"!==i&&(n.method="throw",n.arg=TypeError("The iterator does not provide a '"+i+"' method")),h;var a=g(o,r.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var s=a.arg;return s?s.done?(n[r.resultName]=s.value,n.next=r.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,h):s:(n.method="throw",n.arg=TypeError("iterator result is not an object"),n.delegate=null,h)}(s,n);if(d){if(d===h)continue;return d}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===v)throw i=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=m;var c=g(e,r,n);if("normal"===c.type){if(i=n.done?b:"suspendedYield",c.arg===h)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=b,n.method="throw",n.arg=c.arg)}}}(e,n,new P(i||[]))}),o}function g(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var v="suspendedStart",m="executing",b="completed",h={};function y(){}function A(){}function I(){}var E={};p(E,c,function(){return this});var S=Object.getPrototypeOf,O=S&&S(S(D([])));O&&O!==o&&a.call(O,c)&&(E=O);var _=I.prototype=y.prototype=Object.create(E);function T(e){["next","throw","return"].forEach(function(t){p(e,t,function(e){return this._invoke(t,e)})})}function w(e,t){var r;s(this,"_invoke",{value:function(i,o){function s(){return new t(function(r,s){!function r(i,o,s,d){var c=g(e[i],e,o);if("throw"!==c.type){var u=c.arg,l=u.value;return l&&"object"==n(l)&&a.call(l,"__await")?t.resolve(l.__await).then(function(e){r("next",e,s,d)},function(e){r("throw",e,s,d)}):t.resolve(l).then(function(e){u.value=e,s(u)},function(e){return r("throw",e,s,d)})}d(c.arg)}(i,o,r,s)})}return r=r?r.then(s,s):s()}})}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function D(e){if(e||""===e){var r=e[c];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(a.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw TypeError(n(e)+" is not iterable")}return A.prototype=I,s(_,"constructor",{value:I,configurable:!0}),s(I,"constructor",{value:A,configurable:!0}),A.displayName=p(I,l,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===A||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,I):(e.__proto__=I,p(e,l,"GeneratorFunction")),e.prototype=Object.create(_),e},r.awrap=function(e){return{__await:e}},T(w.prototype),p(w.prototype,u,function(){return this}),r.AsyncIterator=w,r.async=function(e,t,n,i,o){void 0===o&&(o=Promise);var a=new w(f(e,t,n,i),o);return r.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},T(_),p(_,l,"Generator"),p(_,c,function(){return this}),p(_,"toString",function(){return"[object Generator]"}),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=D,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,i){return s.type="throw",s.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var d=a.call(o,"catchLoc"),c=a.call(o,"finallyLoc");if(d&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(d){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,h):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;x(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:D(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),h}},r}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},1908:function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},4763:function(e,t,r){var n=r(1239),i=r(2348),o=r(7225),a=r(6612);e.exports=function(e,t){return n(e)||i(e,t)||o(e,t)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},4995:function(e,t,r){var n=r(970),i=r(2668),o=r(7225),a=r(3283);e.exports=function(e){return n(e)||i(e)||o(e)||a()},e.exports.__esModule=!0,e.exports.default=e.exports},6302:function(e,t,r){var n=r(7251).default;e.exports=function(e,t){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=n(i))return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},210:function(e,t,r){var n=r(7251).default,i=r(6302);e.exports=function(e){var t=i(e,"string");return"symbol"==n(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},7251:function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},7225:function(e,t,r){var n=r(5980);e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=({}).toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},8129:function(e,t,r){var n=r(4940)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},5393:function(e,t){"use strict";let r="[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}",n=RegExp(`^${r}$`,"i"),i=!!String.prototype.trim;function o(e){return null!=e}function a(e){return"[object Array]"===Object.prototype.toString.call(e)}function s(e){return i?(""+e).trim():(""+e).replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function d(e){return"string"==typeof e}function c(e){return!!e&&"object"==typeof e&&!a(e)}function u(e,t){return new Date(new Date().getTime()+e*t)}function l(e,t,r){if(c(t)){let n;return(n="message"in t&&"string"==typeof t.message?Error(r||t.message):Error(r)).name=e,"stack"in t&&"string"==typeof t.stack&&(n.stack=t.stack),"lineNumber"in t&&"number"==typeof t.lineNumber&&(n.lineNumber=t.lineNumber),"columnNumber"in t&&"number"==typeof t.columnNumber&&(n.columnNumber=t.columnNumber),n}{let t=Error(r);return t.name=e,t}}let p="li_errors";t.ERRORS_CHANNEL=p,t.ReplayEmitter=class e{data;constructor(e){let t=parseInt(e.toString())||5;this.data={h:{},q:{},size:t}}on(e,t,r){let n={callback:t.bind(r),unbound:t};return this.data={...this.data,h:{...this.data.h,[e]:[...this.data.h[e]||[],n]}},(this.data.q[e]||[]).forEach(e=>t.call(r,e)),this}once(e,t,r){let n=this.data.q[e]||[];if(n.length>0)return t.call(r,n[0]),this;{let n=i=>{this.off(e,n),t.call(r,i)};return n._=t,this.on(e,n,r)}}emit(e,t){(this.data.h[e]||[]).forEach(e=>e.callback(t));let r=this.data.q[e]||[];return this.data={...this.data,q:{...this.data.q,[e]:[...r.length<this.data.size?r:r.slice(1),t]}},this}off(e,t){let r=this.data.h[e],n=r&&t&&r.filter(e=>e.unbound!==t)||[];if(n.length)this.data={...this.data,h:{...this.data.h,[e]:n}};else{let{[e]:t,...r}=this.data.h;this.data={...this.data,h:r}}return this}emitErrorWithMessage(e,t,r){let n=l(e,r,t);return this.emit(p,n)}emitError(e,t){let r=l(e,t);return this.emit(p,r)}},t.UUID=r,t.expiresInDays=function(e){return u(e,864e5)},t.expiresInHours=function(e){return u(e,36e5)},t.isArray=a,t.isFunction=function(e){return!!e&&"function"==typeof e},t.isNonEmpty=function(e){return o(e)&&s(e).length>0},t.isObject=c,t.isRecord=function(e){return c(e)},t.isString=d,t.isUUID=function(e){return!!e&&n.test(s(e))},t.nonNull=o,t.onNonNull=function(e,t){return null!=e?t(e):e},t.safeToString=function(e){return"object"==typeof e?JSON.stringify(e):""+e},t.strEqualsIgnoreCase=function(e,t){return d(e)&&d(t)&&s(e.toLowerCase())===s(t.toLowerCase())},t.trim=s,t.wrapError=l},6397:function(e,t,r){"use strict";var n=r(5722);r(5393),r(8711);let i=n.LiveConnect,o=n.StandardLiveConnect,a=n.MinimalLiveConnect;t.consts=n.consts,t.eventBus=n.eventBus,t.LiveConnect=i,t.MinimalLiveConnect=a,t.StandardLiveConnect=o},5722:function(e,t,r){"use strict";var n=r(5393),i=r(8711);class o{url;timeout;calls;eventBus;retries;constructor(e){this.url=e.collectorUrl??"https://rp.liadm.com",this.timeout=e.ajaxTimeout??0,this.calls=e.callHandler,this.eventBus=e.eventBus,this.retries=e.ajaxRetries??3}callBakers(e){try{let t=JSON.parse(e).bakers;if(n.isArray(t))for(let e=0;e<t.length;e++)this.calls.pixelGet(`${t[e]}?dtstmp=${Date.now()}`)}catch(t){this.eventBus.emitErrorWithMessage("CallBakers",`Error while calling bakers with ${e}`,t)}}sendState(e,t,r,i){if(e.sendsPixel()){i&&n.isFunction(i)&&i();let o=e.asQuery().add("dtstmp",Date.now(),{prepend:!0}).toQueryString();r(`${this.url}/${t}${o}`)}}sendAjax(e,t={}){this.sendState(e,"j",r=>{let i=o=>{this.calls.ajaxGet(r,e=>{t.onLoad&&n.isFunction(t.onLoad)&&t.onLoad(),this.callBakers(e)},r=>{o<=0?(this.sendPixel(e,t),this.eventBus.emitError("AjaxFailed",r)):i(o-1)},this.timeout)};i(this.retries)},t.onPreSend)}sendPixel(e,t={}){this.sendState(e,"p",e=>this.calls.pixelGet(e,t.onLoad),t.onPreSend)}}let a="__li__evt_bus",s=n.ERRORS_CHANNEL,d="lips",c="pre_lips",u="_li_duid",l="https://idx.liadm.com/idex",p=[];var f=Object.freeze({__proto__:null,DEFAULT_IDEX_AJAX_TIMEOUT:5e3,DEFAULT_IDEX_URL:l,DEFAULT_REQUESTED_ATTRIBUTES:p,ERRORS_PREFIX:s,EVENT_BUS_NAMESPACE:a,PEOPLE_VERIFIED_LS_ENTRY:u,PIXEL_SENT_PREFIX:d,PRELOAD_PIXEL:c});function g(e){return function(e){e=`${e}`;for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>255)return null;let t="";for(let r=0;r<e.length;r+=3){let n=[void 0,void 0,void 0,void 0];n[0]=e.charCodeAt(r)>>2,n[1]=(3&e.charCodeAt(r))<<4,e.length>r+2?(n[1]|=e.charCodeAt(r+1)>>4,n[2]=(15&e.charCodeAt(r+1))<<2,n[2]|=e.charCodeAt(r+2)>>6,n[3]=63&e.charCodeAt(r+2)):e.length>r+1&&(n[1]|=e.charCodeAt(r+1)>>4,n[2]=(15&e.charCodeAt(r+1))<<2);for(let e=0;e<n.length;e++){let r=n[e];void 0===r?t+="=":t+=function(e){return e>=0&&e<64?"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[e]:void 0}(r)}}return t}(e)||""}let v=/[+/]|=+$/g,m={"+":"-","/":"_"};function b(e){return m[e]||""}function h(e){let t=null,r=encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode(parseInt("0x"+t,16)));try{t=window&&n.isFunction(window.btoa)?window.btoa:g}catch(e){t=g}return t(r).replace(v,b)}let y=()=>/(\s+)?[a-f0-9]{32,64}(\s+)?/gi,A=new Map([[32,"md5"],[40,"sha1"],[64,"sha256"]]);function I(e){let t=e.match(y());return t&&t.map(n.trim)[0]}function E(e){let t=e.toLowerCase();return{md5:i.md5(t),sha1:i.sha1(t),sha256:i.sha256(t)}}let S=()=>/\S+(@|%40)\S+\.\S+/;function O(e){return S().test(e)}function _(e){let t=function(e){let t=[],r=RegExp("([\\w\\d.+-]+(@|%40)[\\w\\d-]+.[\\w\\d.-]+)","g"),i=r.exec(e);for(;i;)t.push(n.trim(i[1])),i=r.exec(e);return t}(e),r=[],i=e;for(let e=0;e<t.length;e++){let n=t[e],o=E(n);i=i.replace(n,o.md5),r.push(o)}return{stringWithoutRawEmails:i,hashesFromOriginalString:r}}function T(e,t){var r;return"string"==typeof t&&(r=n.trim(t),S().test(r))?"*********":t}function w(e){var t,r,n;return"false"!==(n="null"===(r=isNaN(+(t=e))?t:+t)||"undefined"===r?null:r)&&("true"===n||n)}function C(e,t){if(t in e){let r=e[t];return n.isArray(r)?r.map(e=>w(P(e))):w(P(r))}}function x(e){let t,r,i;let o={};return e&&-1!==(t=e.indexOf("?"))&&(r=e.slice(t+1))&&(-1===(i=r.indexOf("#"))||(r=r.slice(0,i)))?(r.split("&").forEach(function(e){if(e){let t;let r=e.split("=");t=r[0];let i=2===r.length?r[1]:"true";if("[]"===t.slice(-2)&&(t=t.slice(0,-2)),t in o){let e=o[t];n.isArray(e)?e.push(i):o[t]=[e,i]}else o[t]=i}}),o):o}function P(e){return e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)}class D{hash;host;hostname;pathname;port;protocol;search;constructor(e){let t=e.match(/^(https?\:\/\/)?(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);if(null===t)throw TypeError(`Failed to parse URL: ${e}`);this.protocol=t[1]||"",this.host=t[2]||"",this.hostname=t[3]||"",this.port=t[4]||"",this.pathname=t[5]||"",this.search=t[6]||"",this.hash=t[7]||""}toString(){return`${this.protocol}${this.host}${this.pathname}${this.search}${this.hash}`}}let R=["items","itemids"],j=["email","emailhash","hash","hashedemail"],k=[function(e){let t=e.eventSource||{};for(let r of Object.keys(t)){let i=r.toLowerCase();if(j.indexOf(i)>-1){let i=n.trim(n.safeToString(t[r])),o=function(e){let t=e.match(S());return t&&t.map(n.trim)[0]}(i),a=I(i);if(o){let t=E(P(o));return N({hashedEmail:[t.md5,t.sha1,t.sha256]},e)}if(a&&function(e){let t=I(e);return!!t&&A.has(t.length)}(a))return N({hashedEmail:[a.toLowerCase()]},e)}}return e},function(e){let t=e.eventSource||{};return Object.keys(t).forEach(e=>{let r=e.toLowerCase(),i=t[e];R.indexOf(r)>-1&&n.isArray(i)&&i.length>10&&(i.length=10)}),{}}];function N(e,t){let r={};function i(e){return n.isObject(e)?e:{}}function o(e){return Object.keys(e)}let a=i(e),s=i(t);return o(a).forEach(e=>{r[e]=a[e]}),o(s).forEach(e=>{r[e]=s[e]}),r}class U{tuples;constructor(e=[]){this.tuples=e}add(e,t,r={}){let{stripEmpty:n=!0,prepend:i=!1}=r;if(""===e)return this;if(n&&""===t)return this;if(i)return this.tuples.unshift([e,t]),this;else return this.tuples.push([e,t]),this}addOptional(e,t,r={}){return n.nonNull(t)?this.add(e,t,r):this}addParamsMap(e){return Object.keys(e).forEach(t=>{let r=e[t];n.nonNull(r)&&(n.isArray(r)?r.forEach(e=>this.add(t,e)):this.add(t,r))}),this}copy(){return new U(this.tuples.slice())}filteredCopy(e){return new U(this.tuples.filter(([t,r])=>e(t,r)))}toQueryString(){let e="";return this.tuples.forEach(([t,r])=>{let n=0===e.length?"?":"&";e=`${e}${n}${encodeURIComponent(t)}=${encodeURIComponent(r)}`}),e}}function B(e){return null===e?"":e}let M={full:"full",noPath:"no_path"};function V(e){if(0!==e.length){let t=new D(e);return t.pathname="",t.search="",t.toString()}}let q=["setemail","setemailhash","sethashedemail"];class L{data;eventBus;constructor(e,t){this.data=L.safeFiddle(e,t),this.eventBus=t}static safeFiddle(e,t){try{var r;return r=JSON.parse(JSON.stringify(e)),n.isObject(r.eventSource)?k.reduce(function(e,t){return N(e,t(e))},r):r}catch(e){return console.error(e),t.emitErrorWithMessage("StateCombineWith","Error while extracting event data",e),{}}}combineWith(e){return new L(N(this.data,e),this.eventBus)}sendsPixel(){let e=n.isObject(this.data.eventSource)?this.data.eventSource:{},t=Object.keys(e).filter(e=>"eventname"===e.toLowerCase()||"event"===e.toLowerCase()),r=t&&t.length>=1&&t[0],i=r&&n.trim(e[r]);return!i||-1===q.indexOf(i.toLowerCase())}asQuery(){let e=this.data,t=new U().addOptional("aid",e.appId).addOptional("did",e.distributorId).addOptional("se",n.onNonNull(e.eventSource,e=>h(JSON.stringify(e,T)))).addOptional("duid",e.liveConnectId).addOptional("tv",e.trackerVersion);if(n.nonNull(e.pageUrl)){let[r,n,i]=function(e){if(void 0===e.pageUrl||0===e.pageUrl.length)return["",!1,[]];if(function(e){return(void 0===e.urlCollectionMode||e.urlCollectionMode===M.full)&&(void 0===e.queryParametersFilter||""===e.queryParametersFilter)}(e))return[e.pageUrl,!1,[]];let t=new D(e.pageUrl),r=function(e){let t=x(e),r=[];return Object.keys(t).forEach(e=>{r.push([e,C(t,e)])}),r}(t.search),n=function(e,t){return t.urlCollectionMode===M.noPath&&e.pathname.length>1}(t,e),i=function(e,t){if(void 0===t.queryParametersFilter||""===t.queryParametersFilter)return[];let r=new RegExp(t.queryParametersFilter);return e.map(e=>e[0]).filter(e=>r.test(e))}(r,e);return n&&(t.pathname="/"),i.length>0&&(t.search=function(e,t){let r=e.filter(e=>-1===t.indexOf(e[0])).map(e=>`${e[0]}=${e[1]}`);return r.length>0?`?${r.join("&")}`:""}(r,i)),[t.toString(),n,i]}(e);t.add("pu",r).addOptional("pu_rp",n?"1":void 0).add("pu_rqp",i.join(","))}return t.addOptional("ae",n.onNonNull(e.errorDetails,e=>h(JSON.stringify(e)))),n.isArray(e.retrievedIdentifiers)&&e.retrievedIdentifiers.forEach(e=>t.add(`ext_${e.name}`,e.value)),n.isArray(e.hashesFromIdentifiers)&&e.hashesFromIdentifiers.forEach(e=>t.add("scre",`${e.md5},${e.sha1},${e.sha256}`)),t.addOptional("li_did",e.decisionIds?.join(",")).addOptional("e",e.hashedEmail?.join(",")).addOptional("us_privacy",e.usPrivacyString).addOptional("wpn",e.wrapperName).addOptional("gdpr",n.onNonNull(e.gdprApplies,e=>e?"1":"0")).addOptional("gdpr_consent",e.gdprConsent).addOptional("refr",e.referrer).addOptional("gpp_s",e.gppString).addOptional("gpp_as",e.gppApplicableSections?.join(",")).addOptional("cd",e.cookieDomain).addOptional("ic",B(e.resolvedIdCookie),{stripEmpty:!1}).addOptional("c",e.contextElements),t}}function F(e){try{return e()}catch(e){return}}let G=e=>{var t,r,n;return{...e,pageUrl:function(e=window){let t;let r=F(()=>e.location.ancestorOrigins)||[],n=[],i=e;for(;i!==top;)n.push(i),i=i.parent;n.push(i);for(let e=n.length-1;e>=0&&!t;e--)t=F(()=>n[e].location.href),0!==e&&(!t&&(t=F(()=>n[e-1].document.referrer)),!t&&(t=r[e-1]));return t}(),referrer:function(e=window){return F(()=>e.top.document.referrer)}(),contextElements:(t=e.privacyMode,r=e.contextSelectors,n=e.contextElementsLength,!t&&r&&""!==r&&n?h(function(e,t){let r=window.document.querySelectorAll(e),n="";for(let e=0;e<r.length;e++){let i=n+_(r[e].outerHTML).stringWithoutRawEmails;if(function(e){return Math.ceil(4*new Blob([e]).size/3)}(i)<=t)n=i;else break}return n}(r,n)):"")}},z=e=>({...e,privacyMode:!!e.gdprApplies||(e.gppApplicableSections??[]).indexOf(2)>-1});function W(e,t){if(e&&e.appId&&e.distributorId){let r=e.distributorId;delete e.distributorId,t.emitError("AppIdAndDistributorIdPresent",Error(`Event contains both appId: ${e.appId} and distributorId: ${r}. Ignoring distributorId`))}return e}let Y="idCookie";class H{eventBus;calls;idexConfig;externalIds;source;publisherId;url;timeout;requestedAttributes;query;privacyMode;resolvedIdCookie;generateIdCookie;peopleVerifiedId;pageUrl;constructor(e,t,r){let i=e||{identityResolutionConfig:{}};this.eventBus=r,this.calls=t,this.idexConfig=i.identityResolutionConfig||{},this.externalIds=i.retrievedIdentifiers||[],this.source=this.idexConfig.source||"unknown",this.publisherId=this.idexConfig.publisherId||"any",this.url=this.idexConfig.url||l,this.timeout=this.idexConfig.ajaxTimeout||i.ajaxTimeout||5e3,this.requestedAttributes=this.idexConfig.requestedAttributes||p,this.privacyMode=i.privacyMode??!1,this.resolvedIdCookie=i.resolvedIdCookie,this.generateIdCookie="generated"===this.idexConfig.idCookieMode,this.peopleVerifiedId=i.peopleVerifiedId,this.pageUrl=i.pageUrl,this.query=new U().addOptional("duid",i.peopleVerifiedId).addOptional("us_privacy",i.usPrivacyString).addOptional("gdpr",n.onNonNull(i.gdprApplies,e=>e?1:0)).addOptional("gdpr_consent",i.gdprConsent).addOptional("did",i.distributorId).addOptional("gpp_s",i.gppString).addOptional("gpp_as",i.gppApplicableSections?.join(",")).addOptional("cd",i.cookieDomain).addOptional("ic",B(i.resolvedIdCookie),{stripEmpty:!1}).addOptional("pu",n.onNonNull(i.pageUrl,V)),this.externalIds.forEach(e=>{this.query.add(e.name,e.value)}),this.requestedAttributes.forEach(e=>{this.query.add("resolve",e)})}attributeResolutionAllowed(e){return"uid2"===e?!this.privacyMode:e!==Y&&!0}filterParams(e){return e.filteredCopy((e,t)=>"resolve"!==e||!!n.isString(t)&&this.attributeResolutionAllowed(t))}enrichExtraIdentifiers(e,t){var r;let n=t.tuples.filter(([e])=>"resolve"===e).map(([,e])=>e),i={...e};if(r=Y,n.indexOf(r)>-1)this.generateIdCookie&&this.peopleVerifiedId?i[Y]=this.peopleVerifiedId:this.resolvedIdCookie&&(i[Y]=this.resolvedIdCookie);return i}responseReceived(e,t){return(r,i)=>{let o={};if(r)try{let e=JSON.parse(r);n.isObject(e)&&(o=e)}catch(e){console.error("Error parsing response",e),this.eventBus.emitError("IdentityResolverParser",e)}let a=function(e){if(n.isObject(e)&&"getResponseHeader"in e&&n.isFunction(e.getResponseHeader)){let t=e.getResponseHeader("expires");if(t)return new Date(t)}}(i);e(this.enrichExtraIdentifiers(o,t),{expiresAt:a})}}buildUrl(e){return`${this.url}/${this.source}/${this.publisherId}${this.filterParams(e).toQueryString()}`}getUrl(e){let t=this.query.copy().addParamsMap(e??{});return this.buildUrl(t)}resolve(e,t,r){try{let n=this.query.copy().addParamsMap(r??{});this.calls.ajaxGet(this.buildUrl(n),this.responseReceived(e,n),t,this.timeout)}catch(e){console.error("IdentityResolve",e),t&&n.isFunction(t)&&t(e),this.eventBus&&this.eventBus.emitError("IdentityResolve",e)}}}function J(e){return"number"==typeof e&&e>=0?new n.ReplayEmitter(e):new n.ReplayEmitter(5)}function K(e){if(!(n.isFunction(e.emitErrorWithMessage)&&n.isFunction(e.emitError)))e.emitErrorWithMessage=function(t,r,i={}){let o=n.wrapError(t,r,i);return e.emit(n.ERRORS_CHANNEL,o)},e.emitError=function(t,r){return e.emitErrorWithMessage(t,r.message,r)}}function Q(e=5){return J(e)}function $(e){let t=window[e].eventBus||window[a];return K(t),t}var X=Object.freeze({__proto__:null,GlobalEventBus:function(e,t,r){try{return!window&&r(Error("Bus can only be attached to the window, which is not present")),window&&!window[e]&&(window[e]=J(t)),K(window[e]),window[e]}catch(e){console.error("events.bus.init",e),r(e)}},LocalEventBus:Q,getAvailableBus:$});let Z="_li_dcdm_c",ee={cookie:"cookie",none:"none",disabled:"disabled"},et=e=>{let t=e.privacyMode?ee.disabled:e.storageStrategy||ee.cookie;return{...e,storageStrategy:t}},er=n.expiresInDays(30),en="lidids.",ei=(e,t,r)=>r.indexOf(e)===t,eo=e=>e&&n.trim(e).length>0,ea="0123456789ABCDEFGHJKMNPQRSTVWXYZ",es=ea.length,ed=0xffffffffffff,ec=function(){let e="undefined"!=typeof window?window:null,t=e&&(e.crypto||e.msCrypto);return t?()=>{let e=new Uint8Array(1);return t.getRandomValues(e),e[0]/255}:()=>Math.random()}(),eu="_lc2_fpi",el={errorDetails:{message:"Unknown message",name:"Unknown name"}};function ep(e){try{let t=1*e;return isNaN(t)?void 0:t}catch{}}function ef(e){try{if(n.isString(e)&&e.length&&e.length>120)return`${e.substr(0,120)}...`;return`${e}`}catch{}}let eg=()=>void 0;class ev{obj;name;errors;eventBus;constructor(e,t,r){this.obj=e,this.name=t,this.errors=[],this.eventBus=r}wrap(e){if(n.isObject(this.obj)){let t=this.obj[e];if(n.isFunction(t))return(...r)=>{try{return t.call(this.obj,...r)}catch(t){this.eventBus.emitErrorWithMessage(this.name,`Failed calling ${e}`,t)}}}return this.errors.push(e),eg}reportErrors(){this.errors.length>0&&this.eventBus.emitErrorWithMessage(this.name,`The functions '${JSON.stringify(this.errors)}' were not provided`)}}let em=()=>void 0;function eb(e,t,r){return n.strEqualsIgnoreCase(t,ee.disabled)?em:e.wrap(r)}function eh(e,t,r){return n.strEqualsIgnoreCase(t,ee.none)?em:eb(e,t,r)}class ey{minimalFunctions;constructor(e,t){this.minimalFunctions={getCookie:eb(t,e,"getCookie"),getDataFromLocalStorage:eb(t,e,"getDataFromLocalStorage"),localStorageIsEnabled:eh(t,e,"localStorageIsEnabled")}}static make(e,t,r){let n=new ev(t,"ReadOnlyStorageHandler",r),i=new ey(e,n);return n.reportErrors(),i}localStorageIsEnabled(){return!!this.minimalFunctions.localStorageIsEnabled()}getCookie(e){return this.minimalFunctions.getCookie(e)||null}getDataFromLocalStorage(e){return this.minimalFunctions.getDataFromLocalStorage(e)||null}}class eA extends ey{storageStrategy;functions;constructor(e,t){super(e,t),this.storageStrategy=e,this.functions={setCookie:eh(t,e,"setCookie"),removeDataFromLocalStorage:eh(t,e,"removeDataFromLocalStorage"),setDataInLocalStorage:eh(t,e,"setDataInLocalStorage"),findSimilarCookies:eb(t,e,"findSimilarCookies")}}static make(e,t,r){let n=new ev(t,"StorageHandler",r),i=new eA(e,n);return n.reportErrors(),i}setCookie(e,t,r,n,i){this.functions.setCookie(e,t,r,n,i)}setDataInLocalStorage(e,t){this.functions.setDataInLocalStorage(e,t)}removeDataFromLocalStorage(e){this.functions.removeDataFromLocalStorage(e)}findSimilarCookies(e){return this.functions.findSimilarCookies(e)||[]}}class eI extends Error{constructor(e){super(e),this.name="ParseError"}}class eE{handler;cookieDomain;eventBus;constructor(e){this.handler=e.storageHandler,this.cookieDomain=e.cookieDomain,this.eventBus=e.eventBus}deleteCookie(e){this.handler.setCookie(e,"",new Date(0),"Lax",this.cookieDomain)}parseMetaRecord(e){let t;let r=JSON.parse(e);if(!n.isObject(r))throw new eI("Meta record is not an object");if("e"in r&&isNaN((t=new Date(r.e)).getTime()))throw new eI("Invalid expiresAt");if(!("w"in r))throw new eI("Missing writtenAt");let i=new Date(r.w);if(isNaN(i.getTime()))throw new eI("Invalid writtenAt");return{expiresAt:t,writtenAt:i}}serializeMetaRecord(e){let t;return e.expiresAt&&(t=e.expiresAt.getTime()),JSON.stringify({w:e.writtenAt.getTime(),e:t})}getCookieRecord(e,t){let r;let n=this.handler.getCookie(t);if(!n||0===n.length)return null;try{r=this.parseMetaRecord(n)}catch(r){return this.eventBus.emitErrorWithMessage("Cache","Failed reading meta from cookies",r),this.deleteCookie(e),this.deleteCookie(t),null}let i=r.expiresAt;if(i&&i.getTime()<=Date.now())return null;let o=this.handler.getCookie(e);return o?{data:o,meta:r}:null}getLSRecord(e,t){let r;let n=this.handler.getDataFromLocalStorage(t);if(!n||0===n.length)return null;try{r=this.parseMetaRecord(n)}catch(r){return this.eventBus.emitErrorWithMessage("Cache","Failed reading meta from ls",r),this.handler.removeDataFromLocalStorage(e),this.handler.removeDataFromLocalStorage(t),null}let i=r.expiresAt;if(i&&i.getTime()<=Date.now())return this.handler.removeDataFromLocalStorage(e),this.handler.removeDataFromLocalStorage(t),null;let o=this.handler.getDataFromLocalStorage(e);return o?{data:o,meta:r}:null}get(e){let t=function(e){return`${e}_meta`}(e),r=this.getCookieRecord(e,t),n=this.getLSRecord(e,t);if(r&&n)return r.meta.writtenAt.getTime()===n.meta.writtenAt.getTime()?r:r.meta.writtenAt>n.meta.writtenAt?(this.handler.setDataInLocalStorage(e,r.data),this.handler.setDataInLocalStorage(t,this.serializeMetaRecord(r.meta)),r):(this.handler.setCookie(e,n.data,n.meta.expiresAt,"Lax",this.cookieDomain),this.handler.setCookie(t,this.serializeMetaRecord(n.meta),n.meta.expiresAt,"Lax",this.cookieDomain),n);if(r)return this.handler.setDataInLocalStorage(e,r.data),this.handler.setDataInLocalStorage(t,this.serializeMetaRecord(r.meta)),r;if(n)return this.handler.setCookie(e,n.data,n.meta.expiresAt,"Lax",this.cookieDomain),this.handler.setCookie(t,this.serializeMetaRecord(n.meta),n.meta.expiresAt,"Lax",this.cookieDomain),n;else return null}set(e,t,r){let i=function(e){return`${e}_meta`}(e),o=this.serializeMetaRecord({writtenAt:new Date,expiresAt:r});this.handler.setDataInLocalStorage(e,t),this.handler.setDataInLocalStorage(i,o);let a=r||n.expiresInDays(730);this.handler.setCookie(e,t,a,"Lax",this.cookieDomain),this.handler.setCookie(i,o,a,"Lax",this.cookieDomain)}}function eS(e){return`${e}_meta`}let eO=()=>void 0;function e_(e,t,r){return t?eO:e.wrap(r)}class eT{functions;constructor(e,t,r){var n,i,o,a;let s=new ev(e,"CallHandler",t);this.functions={ajaxGet:(n=s,i="ajaxGet",r?eO:n.wrap(i)),pixelGet:(o=s,a="pixelGet",r?eO:o.wrap(a))},s.reportErrors()}ajaxGet(e,t,r,n){this.functions.ajaxGet(e,t,r,n)}pixelGet(e,t){this.functions.pixelGet(e,t)}}function ew(e){return t=>t.idCookie?.strategy==="cookie"&&"string"==typeof t.idCookie?.name?{...t,resolvedIdCookie:e.getCookie(t.idCookie.name)}:t.idCookie?.strategy==="localStorage"&&"string"==typeof t.idCookie?.name?{...t,resolvedIdCookie:e.getDataFromLocalStorage(t.idCookie.name)}:t}let eC={};function ex(e,t,r,i){if(e&&n.isObject(e)){if("config"in e)i.emitErrorWithMessage("StrayConfig","Received a config after LC has already been initialised",Error(JSON.stringify(e)));else{let n=new L(r,i),o=n.combineWith({eventSource:e});eC.hashedEmail=eC.hashedEmail||o.data.hashedEmail;let a=N({eventSource:e},eC);t.sendAjax(n.combineWith(a),{onPreSend:()=>i.emit(c,"0"),onLoad:()=>i.emit(d,r)})}}else i.emitErrorWithMessage("EventNotAnObject","Received event was not an object",Error(e))}function eP(e,t,r,a){try{var s,d,c,l,p,f,g;let v={...W(e,a),identifiersToResolve:e.identifiersToResolve||[],contextSelectors:e.contextSelectors||"",contextElementsLength:e.contextElementsLength||0},m=G(et(z(v))),b=new eT(r,a,m.privacyMode),h=eA.make(m.storageStrategy,t,a);let y=(s=h,e=>({...e,cookieDomain:function(e){let t=e.getCookie(Z);if(t)return t;let r=document.domain||document.location&&document.location.host||window&&window.location&&window.location.host||"localhost",n=r.split(".");for(let t=n.length;t>0;t--){let r=`.${n.slice(t-1,n.length).join(".")}`;if(e.setCookie(Z,r,void 0,"Lax",r),e.getCookie(Z))return r}return`.${r}`}(s)}))(m),A=new eE({storageHandler:h,eventBus:a,cookieDomain:y.cookieDomain});let I=ew(h)((d=A,c=h,e=>{let t;let r=d.get(eu);if(r)t=r.data;else{let r=c.getCookie(eu);if(r)d.set(eu,r),t=r;else{let r=`${(function(e,t=12){return i.sha1(e.replace(/^\./,"")).substring(0,t)})(e.cookieDomain)}--${(function(e,t){let r;if(e>ed)throw function(e){let t=Error(e);return t.source="Ulid",t}("cannot encode time greater than "+ed);let n="";for(;t>0;t--)r=e%es,n=ea.charAt(r)+n,e=(e-r)/es;return n})(Date.now(),10)+function(e){let t="";for(;e>0;e--)t=function(){let e=Math.floor(ec()*es);return e===es&&(e=es-1),ea.charAt(e)}()+t;return t}(16)}`.toLocaleLowerCase();d.set(eu,r),t=d.get(eu)?.data}}return t&&c.setDataInLocalStorage(u,t),{...e,liveConnectId:t,peopleVerifiedId:t}})((l=h,p=a,e=>{function t(e,t){try{return t()}catch(t){return p.emitErrorWithMessage("DecisionsResolve",e,t),[]}}let r=t("Error while extracting new decision ids",()=>{var t,r;return[].concat(e.pageUrl&&(t=e.pageUrl,r="li_did",C(x(t),r))||[]).map(n.trim).filter(eo).filter(n.isUUID).filter(ei)}),i=t("Error while retrieving stored decision ids",()=>l.findSimilarCookies(en).map(n.trim).filter(eo).filter(n.isUUID));return r.forEach(t=>{try{var r;(r=t)&&l.setCookie(`${en}${r}`,r,er,"Lax",e.cookieDomain)}catch(e){p.emitErrorWithMessage("DecisionsResolve","Error while storing new decision id",e)}}),{...e,decisionIds:r.concat(i).filter(ei)}})((f=h,g=a,e=>{try{return{...e,...function(e,t){let r=[],i=[];for(let o=0;o<e.length;o++){let a=e[o],s=t.getCookie(a)||t.getDataFromLocalStorage(a);if(s){let e=_(n.safeToString(s));r.push({name:a,value:e.stringWithoutRawEmails}),i=i.concat(e.hashesFromOriginalString)}}return{retrievedIdentifiers:r,hashesFromIdentifiers:function(e){let t=new Set,r=[];for(let n=0;n<e.length;n++)!t.has(e[n].md5)&&(r.push(e[n]),t.add(e[n].md5));return r}(i)}}(function(e){let t=[];e&&(n.isArray(e)?t=e:n.isString(e)&&(t=e.split(",")));for(let e=0;e<t.length;e++)t[e]=t[e].trim();return t}(e.identifiersToResolve),f)}}catch(t){return g.emitError("IdentifiersEnricher",t),{...e,retrievedIdentifiers:[],hashesFromIdentifiers:[]}}})(y)))),E=new o({collectorUrl:v.collectorUrl,ajaxTimeout:v.ajaxTimeout,eventBus:a,callHandler:b});!function(e,t,r){try{r.on(n.ERRORS_CHANNEL,i=>{var o;t.sendPixel(new L({...e,...(o=i,n.isRecord(o)?{errorDetails:{message:ef(o.message)||"",name:ef(o.name)||"",stackTrace:ef(o.stack),lineNumber:ep(o.lineNumber),columnNumber:ep(o.columnNumber),fileName:ef(o.fileName)}}:el)},r))})}catch(e){console.error("handlers.error.register",e)}}(I,E,a);let S=new H(I,b,a),O=(...e)=>(function(e,t,r,i){try{e.forEach(e=>{n.isArray(e)?e.forEach(e=>ex(e,t,r,i)):ex(e,t,r,i)})}catch(e){console.error("Error sending events",e),i.emitErrorWithMessage("LCPush","Failed sending an event",e)}})(e,E,I,a);return{push:O,fire:()=>O({}),peopleVerifiedId:I.peopleVerifiedId,ready:!0,resolve:S.resolve.bind(S),resolutionCallUrl:S.getUrl.bind(S),config:v,eventBus:a,storageHandler:h,cache:A}}catch(e){console.error(e),a.emitErrorWithMessage("LCConstruction","Failed to build LC",e)}}function eD(e,t,r,i){let o;let a=n.isObject(e)&&e||{},s=i||Q();try{o=a.globalVarName?function(e,t,r,i){let o=window[e.globalVarName]||[],a=function(e){try{if(window&&window[e.globalVarName]&&window[e.globalVarName].ready){let t=window[e.globalVarName].config&&function(e,t){if(!(e.appId===t.appId&&e.wrapperName===t.wrapperName&&e.collectorUrl===t.collectorUrl))return{appId:[e.appId,t.appId],wrapperName:[e.wrapperName,t.wrapperName],collectorUrl:[e.collectorUrl,t.collectorUrl]}}(window[e.globalVarName].config,e);if(t){let r=Error();r.name="ConfigSent",r.message="Additional configuration received";let n=$(e.globalVarName);window[e.globalVarName].eventBus=n,n.emitErrorWithMessage("LCDuplication",JSON.stringify(t),r)}return window[e.globalVarName]}}catch(e){console.error("Could not initialize error bus")}}(e)||eP(e,t,r,i)||o;if(n.isArray(o))for(let e=0;e<o.length;e++)a.push(o[e]);return window[a.config.globalVarName]=a,window.liQ_instances=window.liQ_instances||[],0===window.liQ_instances.filter(e=>e.config.globalVarName===a.config.globalVarName).length&&window.liQ_instances.push(a),a}(a,t,r,s):function(e,t,r,n){let i=eP(e,t,r,n);return window.liQ_instances=window.liQ_instances||[],window.liQ_instances.push(i),i}(a,t,r,s)}catch(e){console.error(e),s.emitErrorWithMessage("LCConstruction","Failed to build LC",e)}return o}function eR(e,t,r,i,o){try{var a,s,d,c;let l={...W(e,i),identifiersToResolve:e.identifiersToResolve||[]},p=et(z(l)),f=ey.make(p.storageStrategy,t,i),g=new eT(r,i,p.privacyMode);let v=(a=f,s=i,e=>{try{return{...e,retrievedIdentifiers:function(e,t){let r=n.isArray(e)?e:n.safeToString(e).split(","),i=[];for(let e=0;e<r.length;e++){var o,a;let s=n.trim(r[e]),d=t.getCookie(s)||t.getDataFromLocalStorage(s);if(d&&(o=n.safeToString(d),!S().test(o))&&(a=n.safeToString(d),!S().test(a)))i.push({name:s,value:n.safeToString(d)})}return i}(e.identifiersToResolve,a)}}catch(t){return s.emitError("IdentifiersEnrich",t),{...e,retrievedIdentifiers:[]}}})(ew(f)((d=f,c=i,e=>{try{return{...e,peopleVerifiedId:e.peopleVerifiedId||d.getDataFromLocalStorage(u)||void 0}}catch(t){return c.emitError("PeopleVerifiedEnrich",t),e}})(p))),m=new H(v,g,i);return{push:e=>o(e),fire:()=>o({}),peopleVerifiedId:v.peopleVerifiedId,ready:!0,resolve:m.resolve.bind(m),resolutionCallUrl:m.getUrl.bind(m),config:l,eventBus:i,storageHandler:f}}catch(e){console.error(e)}}function ej(e,t,r,i){let o=n.isObject(e)&&e||{},a=i||Q();try{return o.globalVarName?function(e,t,r,n){let i=window[e.globalVarName]=window[e.globalVarName]||[],o=eR(e,t,r,n,i.push.bind(i));return window.liQ_instances=window.liQ_instances||[],0===window.liQ_instances.filter(e=>e.config.globalVarName===o.config.globalVarName).length&&window.liQ_instances.push(o),o}(o,t,r,a):function(e,t,r,n){let i=eR(e,t,r,n,()=>{});return window.liQ_instances=window.liQ_instances||[],window.liQ_instances.push(i),i}(o,t,r,a)}catch(e){console.error(e)}return{}}t.LiveConnect=function(e,t,r,i,o){let a=o||Q(),s=n.isObject(e)&&e||{};return("minimal"===i?ej:eD)(s,t,r,a)},t.MinimalLiveConnect=ej,t.QueryBuilder=U,t.StandardLiveConnect=eD,t.StorageHandlerBackedCache=eE,t.WrappedStorageHandler=eA,t.consts=f,t.encodeIdCookie=B,t.eventBus=X},8711:function(e,t,r){"use strict";r.r(t),r.d(t,{md5:function(){return o},sha1:function(){return a},sha256:function(){return f}});for(var n=[],i=0;i<64;)n[i]=0|4294967296*Math.sin(++i%Math.PI);function o(e){var t,r,o,a=[t=1732584193,r=4023233417,~t,~r],s=[],d=unescape(encodeURI(e))+"\x80",c=d.length;for(e=--c/4+2|15,s[--e]=8*c;~c;)s[c>>2]|=d.charCodeAt(c)<<8*c--;for(i=d=0;i<e;i+=16){for(c=a;d<64;c=[o=c[3],t+((o=c[0]+[t&r|~t&o,o&t|~o&r,t^r^o,r^(t|~o)][c=d>>4]+n[d]+~~s[i|15&[d,5*d+1,3*d+5,7*d][c]])<<(c=[7,12,17,22,5,9,14,20,4,11,16,23,6,10,15,21][4*c+d++%4])|o>>>-c),t,r])t=0|c[1],r=c[2];for(d=4;d;)a[--d]+=c[d]}for(e="";d<32;)e+=(a[d>>3]>>4*(1^d++)&15).toString(16);return e}function a(e){var t,r,n,i,o,a=[],s=[r=1732584193,n=4023233417,~r,~n,3285377520],d=[],c=unescape(encodeURI(e))+"\x80",u=c.length;for(d[e=--u/4+2|15]=8*u;~u;)d[u>>2]|=c.charCodeAt(u)<<8*~u--;for(t=u=0;t<e;t+=16){for(r=s;u<80;r=[r[4]+(a[u]=u<16?~~d[t+u]:2*c|c<0)+1518500249+[n&i|~n&o,c=341275144+(n^i^o),882459459+(n&i|n&o|i&o),c+1535694389][u++/5>>2]+((c=r[0])<<5|c>>>27),c,n<<30|n>>>2,i,o])c=a[u-3]^a[u-8]^a[u-14]^a[u-16],n=r[1],i=r[2],o=r[3];for(u=5;u;)s[--u]+=r[u]}for(c="";u<40;)c+=(s[u>>3]>>4*(7-u++)&15).toString(16);return c}for(var s,d=18,c=[],u=[];d>1;d--)for(s=d;s<320;)c[s+=d]=1;function l(e,t){return 4294967296*Math.pow(e,1/t)|0}for(s=0;s<64;)c[++d]||(u[s]=l(d,2),c[s++]=l(d,3));function p(e,t){return e>>>t|e<<-t}function f(e){var t=u.slice(d=s=0,8),r=[],n=unescape(encodeURI(e))+"\x80",i=n.length;for(r[e=--i/4+2|15]=8*i;~i;)r[i>>2]|=n.charCodeAt(i)<<8*~i--;for(i=[];d<e;d+=16){for(l=t.slice();s<64;l.unshift(n+(p(n=l[0],2)^p(n,13)^p(n,22))+(n&l[1]^l[1]&l[2]^l[2]&n)))l[3]+=n=0|(i[s]=s<16?~~r[s+d]:(p(n=i[s-2],17)^p(n,19)^n>>>10)+i[s-7]+(p(n=i[s-15],7)^p(n,18)^n>>>3)+i[s-16])+l.pop()+(p(n=l[4],6)^p(n,11)^p(n,25))+(n&l[5]^~n&l[6])+c[s++];for(s=8;s;)t[--s]+=l[s]}for(n="";s<64;)n+=(t[s>>3]>>4*(7-s++)&15).toString(16);return n}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={id:n,loaded:!1,exports:{}};return e[n](o,o.exports,r),o.loaded=!0,o.exports}r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=function(e){return e.paths=[],!e.children&&(e.children=[]),e},r.rv=function(){return"1.0.3"},r.ruid="bundler=rspack@1.0.3";(()=>{"use strict";var e=r(7938);r(9597),r(8706),r(9276),r(4896),r(6717),r(113),r(568),r(3916),r(4131),r(552),r(9635),r(4924),r(9841),r(4750),r(8041),r(9443),r(6139),r(2414),r(1025),r(5114),r(7262),r(4581),r(9246),r(7544),r(8541),r(6390),r(7185),r(3651),r(9073),r(614),r(8829),r(1174),r(6191),r(5123),r(8265),r(186),r(5150),r(5839),r(8579),r(1103),r(7954),r(3457),r(1517),r(3722),r(27),r(4842),r(2598),r(6123),r(1717),r(7340),r(3097),r(5786),r(223),e.default.processQueue()})()})();